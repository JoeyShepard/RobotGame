       3/    FFFC : 46 3A                FDB main
      18/       4 :                     saveA:
      21/       5 :                     dummy:
      31/    C000 :                     CharTable:
      32/    C000 : 00 00 00 00 00 00    FCB $0,$0,$0,$0,$0,$0,$0,$0
      33/    C008 : 04 04 04 04 04 00    FCB $4,$4,$4,$4,$4,$0,$4,$0
      34/    C010 : 0A 0A 0A 00 00 00    FCB $A,$A,$A,$0,$0,$0,$0,$0
      35/    C018 : 0A 0A 1F 0A 1F 0A    FCB $A,$A,$1F,$A,$1F,$A,$A,$0
      36/    C020 : 04 1E 05 0E 14 0F    FCB $4,$1E,$5,$E,$14,$F,$4,$0
      37/    C028 : 03 13 08 04 02 19    FCB $3,$13,$8,$4,$2,$19,$18,$0
      38/    C030 : 06 09 05 02 15 09    FCB $6,$9,$5,$2,$15,$9,$16,$0
      39/    C038 : 03 02 01 00 00 00    FCB $3,$2,$1,$0,$0,$0,$0,$0
      40/    C040 : 04 02 01 01 01 02    FCB $4,$2,$1,$1,$1,$2,$4,$0
      41/    C048 : 04 08 10 10 10 08    FCB $4,$8,$10,$10,$10,$8,$4,$0
      42/    C050 : 00 04 15 0E 15 04    FCB $0,$4,$15,$E,$15,$4,$0,$0
      43/    C058 : 00 04 04 1F 04 04    FCB $0,$4,$4,$1F,$4,$4,$0,$0
      44/    C060 : 00 00 00 00 00 06    FCB $0,$0,$0,$0,$0,$6,$4,$2
      45/    C068 : 00 00 00 1F 00 00    FCB $0,$0,$0,$1F,$0,$0,$0,$0
      46/    C070 : 00 00 00 00 00 06    FCB $0,$0,$0,$0,$0,$6,$6,$0
      47/    C078 : 00 10 08 04 02 01    FCB $0,$10,$8,$4,$2,$1,$0,$0
      48/    C080 : 0E 11 19 15 13 11    FCB $E,$11,$19,$15,$13,$11,$E,$0
      49/    C088 : 04 06 04 04 04 04    FCB $4,$6,$4,$4,$4,$4,$E,$0
      50/    C090 : 0E 11 10 08 04 02    FCB $E,$11,$10,$8,$4,$2,$1F,$0
      51/    C098 : 1F 08 04 08 10 11    FCB $1F,$8,$4,$8,$10,$11,$E,$0
      52/    C0A0 : 08 0C 0A 09 1F 08    FCB $8,$C,$A,$9,$1F,$8,$8,$0
      53/    C0A8 : 1F 01 0F 10 10 11    FCB $1F,$1,$F,$10,$10,$11,$E,$0
      54/    C0B0 : 0C 02 01 0F 11 11    FCB $C,$2,$1,$F,$11,$11,$E,$0
      55/    C0B8 : 1F 10 08 04 02 02    FCB $1F,$10,$8,$4,$2,$2,$2,$0
      56/    C0C0 : 0E 11 11 0E 11 11    FCB $E,$11,$11,$E,$11,$11,$E,$0
      57/    C0C8 : 0E 11 11 1E 10 08    FCB $E,$11,$11,$1E,$10,$8,$6,$0
      58/    C0D0 : 00 06 06 00 06 06    FCB $0,$6,$6,$0,$6,$6,$0,$0
      59/    C0D8 : 00 06 06 00 06 04    FCB $0,$6,$6,$0,$6,$4,$2,$0
      60/    C0E0 : 08 04 02 01 02 04    FCB $8,$4,$2,$1,$2,$4,$8,$0
      61/    C0E8 : 00 00 1F 00 1F 00    FCB $0,$0,$1F,$0,$1F,$0,$0,$0
      62/    C0F0 : 02 04 08 10 08 04    FCB $2,$4,$8,$10,$8,$4,$2,$0
      63/    C0F8 : 0E 11 10 08 04 00    FCB $E,$11,$10,$8,$4,$0,$4,$0
      64/    C100 : 0E 11 10 16 15 15    FCB $E,$11,$10,$16,$15,$15,$E,$0
      65/    C108 : 04 0A 11 11 1F 11    FCB $4,$A,$11,$11,$1F,$11,$11,$0
      66/    C110 : 0F 11 11 1F 11 11    FCB $F,$11,$11,$1F,$11,$11,$F,$0
      67/    C118 : 0E 11 01 01 01 11    FCB $E,$11,$1,$1,$1,$11,$E,$0
      68/    C120 : 07 09 11 11 11 09    FCB $7,$9,$11,$11,$11,$9,$7,$0
      69/    C128 : 1F 01 01 0F 01 01    FCB $1F,$1,$1,$F,$1,$1,$1F,$0
      70/    C130 : 1F 01 01 0F 01 01    FCB $1F,$1,$1,$F,$1,$1,$1,$0
      71/    C138 : 0E 11 01 1D 11 11    FCB $E,$11,$1,$1D,$11,$11,$E,$0
      72/    C140 : 11 11 11 1F 11 11    FCB $11,$11,$11,$1F,$11,$11,$11,$0
      73/    C148 : 0E 04 04 04 04 04    FCB $E,$4,$4,$4,$4,$4,$E,$0
      74/    C150 : 1C 08 08 08 08 09    FCB $1C,$8,$8,$8,$8,$9,$6,$0
      75/    C158 : 11 09 05 03 05 09    FCB $11,$9,$5,$3,$5,$9,$11,$0
      76/    C160 : 01 01 01 01 01 01    FCB $1,$1,$1,$1,$1,$1,$1F,$0
      77/    C168 : 11 1B 15 15 11 11    FCB $11,$1B,$15,$15,$11,$11,$11,$0
      78/    C170 : 11 11 13 15 19 11    FCB $11,$11,$13,$15,$19,$11,$11,$0
      79/    C178 : 0E 11 11 11 11 11    FCB $E,$11,$11,$11,$11,$11,$E,$0
      80/    C180 : 0F 11 11 0F 01 01    FCB $F,$11,$11,$F,$1,$1,$1,$0
      81/    C188 : 0E 11 11 11 15 09    FCB $E,$11,$11,$11,$15,$9,$16,$0
      82/    C190 : 0F 11 11 0F 05 09    FCB $F,$11,$11,$F,$5,$9,$11,$0
      83/    C198 : 0E 11 01 0E 10 11    FCB $E,$11,$1,$E,$10,$11,$E,$0
      84/    C1A0 : 1F 04 04 04 04 04    FCB $1F,$4,$4,$4,$4,$4,$4,$0
      85/    C1A8 : 11 11 11 11 11 11    FCB $11,$11,$11,$11,$11,$11,$E,$0
      86/    C1B0 : 11 11 11 11 11 0A    FCB $11,$11,$11,$11,$11,$A,$4,$0
      87/    C1B8 : 11 11 11 15 15 1B    FCB $11,$11,$11,$15,$15,$1B,$11,$0
      88/    C1C0 : 11 11 0A 04 0A 11    FCB $11,$11,$A,$4,$A,$11,$11,$0
      89/    C1C8 : 11 11 0A 04 04 04    FCB $11,$11,$A,$4,$4,$4,$4,$0
      90/    C1D0 : 1F 10 08 04 02 01    FCB $1F,$10,$8,$4,$2,$1,$1F,$0
      91/    C1D8 : 0E 02 02 02 02 02    FCB $E,$2,$2,$2,$2,$2,$E,$0
      92/    C1E0 : 00 01 02 04 08 10    FCB $0,$1,$2,$4,$8,$10,$0,$0
      93/    C1E8 : 0E 08 08 08 08 08    FCB $E,$8,$8,$8,$8,$8,$E,$0
      94/    C1F0 : 04 0A 11 00 00 00    FCB $4,$A,$11,$0,$0,$0,$0,$0
      95/    C1F8 : 00 00 00 00 00 00    FCB $0,$0,$0,$0,$0,$0,$1F,$0
      96/    C200 : 01 02 04 00 00 00    FCB $1,$2,$4,$0,$0,$0,$0,$0
      97/    C208 : 00 00 0E 10 1E 11    FCB $0,$0,$E,$10,$1E,$11,$1E,$0
      98/    C210 : 01 01 01 0F 11 11    FCB $1,$1,$1,$F,$11,$11,$F,$0
      99/    C218 : 00 00 0E 11 01 11    FCB $0,$0,$E,$11,$1,$11,$E,$0
     100/    C220 : 10 10 10 1E 11 11    FCB $10,$10,$10,$1E,$11,$11,$1E,$0
     101/    C228 : 00 00 0E 11 1F 01    FCB $0,$0,$E,$11,$1F,$1,$E,$0
     102/    C230 : 0C 12 02 07 02 02    FCB $C,$12,$2,$7,$2,$2,$2,$0
     103/    C238 : 00 00 1E 11 1E 10    FCB $0,$0,$1E,$11,$1E,$10,$E,$0
     104/    C240 : 01 01 01 0F 11 11    FCB $1,$1,$1,$F,$11,$11,$11,$0
     105/    C248 : 00 04 00 06 04 04    FCB $0,$4,$0,$6,$4,$4,$E,$0
     106/    C250 : 08 00 08 08 08 09    FCB $8,$0,$8,$8,$8,$9,$6,$0
     107/    C258 : 01 01 09 05 03 05    FCB $1,$1,$9,$5,$3,$5,$9,$0
     108/    C260 : 06 04 04 04 04 04    FCB $6,$4,$4,$4,$4,$4,$E,$0
     109/    C268 : 00 00 0B 15 15 11    FCB $0,$0,$B,$15,$15,$11,$11,$0
     110/    C270 : 00 00 0D 13 11 11    FCB $0,$0,$D,$13,$11,$11,$11,$0
     111/    C278 : 00 00 0E 11 11 11    FCB $0,$0,$E,$11,$11,$11,$E,$0
     112/    C280 : 00 00 0F 11 1F 01    FCB $0,$0,$F,$11,$1F,$1,$1,$0
     113/    C288 : 00 00 1E 11 1E 10    FCB $0,$0,$1E,$11,$1E,$10,$10,$0
     114/    C290 : 00 00 0D 13 01 01    FCB $0,$0,$D,$13,$1,$1,$1,$0
     115/    C298 : 00 00 0E 01 0E 10    FCB $0,$0,$E,$1,$E,$10,$F,$0
     116/    C2A0 : 02 02 07 02 02 12    FCB $2,$2,$7,$2,$2,$12,$C,$0
     117/    C2A8 : 00 00 11 11 11 19    FCB $0,$0,$11,$11,$11,$19,$16,$0
     118/    C2B0 : 00 00 11 11 11 0A    FCB $0,$0,$11,$11,$11,$A,$4,$0
     119/    C2B8 : 00 00 11 15 15 15    FCB $0,$0,$11,$15,$15,$15,$A,$0
     120/    C2C0 : 00 00 11 0A 04 0A    FCB $0,$0,$11,$A,$4,$A,$11,$0
     121/    C2C8 : 00 00 11 11 1E 10    FCB $0,$0,$11,$11,$1E,$10,$E,$0
     122/    C2D0 : 00 00 1F 08 04 02    FCB $0,$0,$1F,$8,$4,$2,$1F,$0
     123/    C2D8 : 08 04 04 02 04 04    FCB $8,$4,$4,$2,$4,$4,$8,$0
     124/    C2E0 : 04 04 04 00 04 04    FCB $4,$4,$4,$0,$4,$4,$4,$0
     125/    C2E8 : 02 04 04 08 04 04    FCB $2,$4,$4,$8,$4,$4,$2,$0
     126/    C2F0 : 08 15 02 00 00 00    FCB $8,$15,$2,$0,$0,$0,$0,$0
     129/    C2F8 : 60                   RTS
     131/    C2F9 :                     debug:
     132/    C2F9 : 60                   RTS
     135/    C2FA : 42 61 73 69 63 20    FCB "Basic Head",$0
     138/    C305 : 48 65 61 64 20 4D    FCB "Head MKII",$0
     141/    C30F : 48 65 61 64 20 4D    FCB "Head MKIII",$0
     144/    C31A : 48 65 61 64 20 4D    FCB "Head MKIV",$0
     147/    C324 : 4C 69 67 68 74 6E    FCB "Lightning",$0
     150/    C32E : 42 61 73 69 63 20    FCB "Basic Body",$0
     153/    C339 : 54 69 6E 20 42 6F    FCB "Tin Body",$0
     156/    C342 : 49 72 6F 6E 20 42    FCB "Iron Body",$0
     159/    C34C : 53 74 65 65 6C 20    FCB "Steel Body",$0
     162/    C357 : 46 6F 72 74 72 65    FCB "Fortress",$0
     165/    C360 : 42 61 73 69 63 20    FCB "Basic Legs",$0
     168/    C36B : 46 61 73 74 20 4C    FCB "Fast Legs",$0
     171/    C375 : 51 75 69 63 6B 20    FCB "Quick Legs",$0
     174/    C380 : 41 67 69 6C 65 20    FCB "Agile Legs",$0
     177/    C38B : 4D 75 73 74 61 6E    FCB "Mustang",$0
     180/    C393 : 42 61 73 69 63 20    FCB "Basic Gun",$0
     183/    C39D : 42 6C 61 73 74 65    FCB "Blaster",$0
     186/    C3A5 : 4C 61 73 65 72 00    FCB "Laser",$0
     189/    C3AB : 50 68 61 73 65 72    FCB "Phaser",$0
     192/    C3B2 : 44 65 61 74 68 20    FCB "Death Ray",$0
     195/    C3BC : 42 61 73 69 63 20    FCB "Basic Tool",$0
     198/    C3C7 : 52 6F 63 6B 20 50    FCB "Rock Pick",$0
     201/    C3D1 : 52 6F 63 6B 20 44    FCB "Rock Drill",$0
     204/    C3DC : 52 6F 63 6B 20 42    FCB "Rock Borer",$0
     207/    C3E7 : 4C 61 73 65 72 20    FCB "Laser Bit",$0
     210/    C3F1 : FA C2                FDB str_Basic_Head
     211/    C3F3 : 05 C3                FDB str_Head_MKII
     212/    C3F5 : 0F C3                FDB str_Head_MKIII
     213/    C3F7 : 1A C3                FDB str_Head_MKIV
     214/    C3F9 : 24 C3                FDB str_Lightning
     215/    C3FB : 2E C3                FDB str_Basic_Body
     216/    C3FD : 39 C3                FDB str_Tin_Body
     217/    C3FF : 42 C3                FDB str_Iron_Body
     218/    C401 : 4C C3                FDB str_Steel_Body
     219/    C403 : 57 C3                FDB str_Fortress
     220/    C405 : 60 C3                FDB str_Basic_Legs
     221/    C407 : 6B C3                FDB str_Fast_Legs
     222/    C409 : 75 C3                FDB str_Quick_Legs
     223/    C40B : 80 C3                FDB str_Agile_Legs
     224/    C40D : 8B C3                FDB str_Mustang
     225/    C40F : 93 C3                FDB str_Basic_Gun
     226/    C411 : 9D C3                FDB str_Blaster
     227/    C413 : A5 C3                FDB str_Laser
     228/    C415 : AB C3                FDB str_Phaser
     229/    C417 : B2 C3                FDB str_Death_Ray
     230/    C419 : BC C3                FDB str_Basic_Tool
     231/    C41B : C7 C3                FDB str_Rock_Pick
     232/    C41D : D1 C3                FDB str_Rock_Drill
     233/    C41F : DC C3                FDB str_Rock_Borer
     234/    C421 : E7 C3                FDB str_Laser_Bit
     237/    C423 : 00 00 06 00 01 00    FCB $0,$0,$6,$0,$1,$0,$2
     240/    C42A : 00 02 01 01 01 00    FCB $0,$2,$1,$1,$1,$0,$4
     243/    C431 : 00 05 01 02 02 00    FCB $0,$5,$1,$2,$2,$0,$5,$5,$5
     246/    C43A : 00 08 02 03 03 00    FCB $0,$8,$2,$3,$3,$0,$8,$5,$A,$7,$2
     249/    C445 : 00 0F 00 04 03 00    FCB $0,$F,$0,$4,$3,$0,$C,$5,$14,$9,$1
     252/    C450 : 01 00 06 00 01 01    FCB $1,$0,$6,$0,$1,$1,$5
     255/    C457 : 01 02 00 01 01 01    FCB $1,$2,$0,$1,$1,$1,$8
     258/    C45E : 01 05 01 02 02 01    FCB $1,$5,$1,$2,$2,$1,$A,$0,$3
     261/    C467 : 01 08 02 03 03 01    FCB $1,$8,$2,$3,$3,$1,$C,$0,$5,$2,$2
     264/    C472 : 01 0F 01 04 03 01    FCB $1,$F,$1,$4,$3,$1,$14,$0,$A,$A,$1
     267/    C47D : 02 00 06 00 01 01    FCB $2,$0,$6,$0,$1,$1,$3
     270/    C484 : 02 02 00 01 01 01    FCB $2,$2,$0,$1,$1,$1,$5
     273/    C48B : 02 05 00 02 02 01    FCB $2,$5,$0,$2,$2,$1,$6,$6,$19
     276/    C494 : 02 08 01 03 03 01    FCB $2,$8,$1,$3,$3,$1,$7,$6,$32,$3,$2
     279/    C49F : 02 0F 00 04 03 01    FCB $2,$F,$0,$4,$3,$1,$C,$2,$4,$B,$0
     282/    C4AA : 03 00 06 00 01 02    FCB $3,$0,$6,$0,$1,$2,$4
     285/    C4B1 : 03 02 02 01 01 02    FCB $3,$2,$2,$1,$1,$2,$6
     288/    C4B8 : 03 05 00 02 02 02    FCB $3,$5,$0,$2,$2,$2,$8,$5,$A
     291/    C4C1 : 03 08 01 03 03 02    FCB $3,$8,$1,$3,$3,$2,$A,$5,$F,$0,$2
     294/    C4CC : 03 0F 02 04 03 02    FCB $3,$F,$2,$4,$3,$2,$C,$5,$1E,$C,$0
     297/    C4D7 : 04 00 06 00 01 03    FCB $4,$0,$6,$0,$1,$3,$1
     300/    C4DE : 04 02 02 01 01 03    FCB $4,$2,$2,$1,$1,$3,$2
     303/    C4E5 : 04 05 02 02 02 03    FCB $4,$5,$2,$2,$2,$3,$3,$7,$2
     306/    C4EE : 04 08 00 03 03 03    FCB $4,$8,$0,$3,$3,$3,$5,$7,$3,$0,$3
     309/    C4F9 : 04 0F 02 04 03 04    FCB $4,$F,$2,$4,$3,$4,$0,$8,$0,$D,$3
     312/    C504 : 48 65 61 6C 73 20    FCB "Heals HP to*full",$0
     315/    C515 : 2B 31 20 48 50 00    FCB "+1 HP",$0
     318/    C51B : 52 65 63 68 61 72    FCB "Recharges*battery to*full",$0
     321/    C535 : 2B 31 20 42 61 74    FCB "+1 Batt",$0
     324/    C53D : 2B 31 30 20 45 78    FCB "+10 Exp point",$0
     327/    C54B : 2B 31 20 44 6D 67    FCB "+1 Dmg",$0
     330/    C552 : 04 C5                FDB str_Res_HP_Heal
     331/    C554 : 15 C5                FDB str_Res_HP_Upgrade
     332/    C556 : 1B C5                FDB str_Res_Batt_Heal
     333/    C558 : 35 C5                FDB str_Res_Batt_Upgrade
     334/    C55A : 3D C5                FDB str_Res_Exp_Upgrade
     335/    C55C : 4B C5                FDB str_Res_Dmg_Upgrade
     338/    C55E : 0E 01 00 00          FCB $E,$1,$0,$0
     341/    C562 : 0E 0A 00 01          FCB $E,$A,$0,$1
     344/    C566 : 0E 01 01 02          FCB $E,$1,$1,$2
     347/    C56A : 0E 0A 01 03          FCB $E,$A,$1,$3
     350/    C56E : 0E 01 02 04          FCB $E,$1,$2,$4
     353/    C572 : 0E 0A 02 05          FCB $E,$A,$2,$5
     356/    C576 : 23 C4                FDB item_Basic_Head
     357/    C578 : 2A C4                FDB item_Head_MKII
     358/    C57A : 31 C4                FDB item_Head_MKIII
     359/    C57C : 3A C4                FDB item_Head_MKIV
     360/    C57E : 45 C4                FDB item_Lightning
     361/    C580 : 50 C4                FDB item_Basic_Body
     362/    C582 : 57 C4                FDB item_Tin_Body
     363/    C584 : 5E C4                FDB item_Iron_Body
     364/    C586 : 67 C4                FDB item_Steel_Body
     365/    C588 : 72 C4                FDB item_Fortress
     366/    C58A : 7D C4                FDB item_Basic_Legs
     367/    C58C : 84 C4                FDB item_Fast_Legs
     368/    C58E : 8B C4                FDB item_Quick_Legs
     369/    C590 : 94 C4                FDB item_Agile_Legs
     370/    C592 : 9F C4                FDB item_Mustang
     371/    C594 : AA C4                FDB item_Basic_Gun
     372/    C596 : B1 C4                FDB item_Blaster
     373/    C598 : B8 C4                FDB item_Laser
     374/    C59A : C1 C4                FDB item_Phaser
     375/    C59C : CC C4                FDB item_Death_Ray
     376/    C59E : D7 C4                FDB item_Basic_Tool
     377/    C5A0 : DE C4                FDB item_Rock_Pick
     378/    C5A2 : E5 C4                FDB item_Rock_Drill
     379/    C5A4 : EE C4                FDB item_Rock_Borer
     380/    C5A6 : F9 C4                FDB item_Laser_Bit
     381/    C5A8 : 5E C5                FDB item_Res_HP_Heal
     382/    C5AA : 62 C5                FDB item_Res_HP_Upgrade
     383/    C5AC : 66 C5                FDB item_Res_Batt_Heal
     384/    C5AE : 6A C5                FDB item_Res_Batt_Upgrade
     385/    C5B0 : 6E C5                FDB item_Res_Exp_Upgrade
     386/    C5B2 : 72 C5                FDB item_Res_Dmg_Upgrade
     389/    C5B4 : 2B 24 20 42 61 74    FCB "+$ Batt",$0
     392/    C5BC : 2B 24 20 48 50 00    FCB "+$ HP",$0
     395/    C5C2 : 2B 24 20 44 6D 67    FCB "+$ Dmg",$0
     398/    C5C9 : 2D 24 73 20 4D 69    FCB "-$s Mine",$0
     401/    C5D2 : 31 73 20 4D 69 6E    FCB "1s Mine",$0
     404/    C5DA : 2B 24 25 20 43 72    FCB "+$% Crit",$0
     407/    C5E3 : 2D 24 25 20 4C 61    FCB "-$% Lava",$0
     410/    C5EC : 2D 24 73 20 44 72    FCB "-$s Drill",$0
     413/    C5F6 : 31 73 20 44 72 69    FCB "1s Drill",$0
     416/    C5FF : 2B 24 2F 73 20 42    FCB "+$/s Batt",$0
     419/    C609 : 2B 24 2F 73 20 48    FCB "+$/s HP",$0
     422/    C611 : 4C 61 76 61 20 48    FCB "Lava Heals",$0
     425/    C61C : 2D 35 30 25 20 43    FCB "-50% Cost",$0
     428/    C626 : 2D 35 30 25 20 43    FCB "-50% Cost",$0
     431/    C630 : B4 C5                FDB str_stat_Batt
     432/    C632 : BC C5                FDB str_stat_HP
     433/    C634 : C2 C5                FDB str_stat_Dmg
     434/    C636 : C9 C5                FDB str_stat_Mine
     435/    C638 : D2 C5                FDB str_stat_Mine1s
     436/    C63A : DA C5                FDB str_stat_Crit
     437/    C63C : E3 C5                FDB str_stat_Lava
     438/    C63E : EC C5                FDB str_stat_Drill
     439/    C640 : F6 C5                FDB str_stat_Drill1s
     440/    C642 : FF C5                FDB str_stat_Batt_Recharge
     441/    C644 : 09 C6                FDB str_stat_HP_Recharge
     442/    C646 : 11 C6                FDB str_stat_LavaHeals
     443/    C648 : 1C C6                FDB str_stat_AttackCost50
     444/    C64A : 26 C6                FDB str_stat_MineCost50
     447/    C64C : 30                   FCB $30
     448/    C64D : 03                   FCB $3
     449/    C64E : 01                   FCB $1
     450/    C64F : 17                   FCB $17
     451/    C650 : 17                   FCB $17
     452/    C651 : 01                   FCB $1
     453/    C652 : 0B                   FCB $B
     454/    C653 : 32                   FCB $32
     455/    C654 : 32                   FCB $32
     456/    C655 : 30                   FCB $30
     457/    C656 : 03                   FCB $3
     458/    C657 : 03                   FCB $3
     459/    C658 : 01                   FCB $1
     460/    C659 : 17                   FCB $17
     463/    C65A : 0B 02                FDB hero_Batt_Max
     464/    C65C : 08 02                FDB hero_HP_Max_temp
     465/    C65E : 0D 02                FDB hero_Dmg
     466/    C660 : 00 00                FDB $0
     467/    C662 : 00 00                FDB $0
     468/    C664 : 13 02                FDB hero_Crit_Rate
     469/    C666 : 11 02                FDB hero_Lava_Res
     470/    C668 : 00 00                FDB $0
     471/    C66A : 00 00                FDB $0
     472/    C66C : 12 02                FDB hero_Batt_Recharge
     473/    C66E : 14 02                FDB hero_HP_Recharge
     474/    C670 : 00 00                FDB $0
     475/    C672 : 00 00                FDB $0
     476/    C674 : 00 00                FDB $0
     479/    C676 : 48 50 3A 20 20 20    FCB "HP:   $",$0
     482/    C67E : 42 61 74 74 3A 20    FCB "Batt: $",$0
     485/    C686 : 44 6D 67 3A 20 20    FCB "Dmg:  $",$0
     488/    C68E : 43 72 69 74 3A 20    FCB "Crit: $%",$0
     491/    C697 : 4D 69 6E 65 3A 20    FCB "Mine: $s",$0
     494/    C6A0 : 44 72 69 6C 6C 3A    FCB "Drill:$s",$0
     497/    C6A9 : 4C 61 76 61 3A 20    FCB "Lava: -$%",$0
     500/    C6B3 : 03                   FCB $3
     501/    C6B4 : 30                   FCB $30
     502/    C6B5 : 01                   FCB $1
     503/    C6B6 : 01                   FCB $1
     504/    C6B7 : 17                   FCB $17
     505/    C6B8 : 32                   FCB $32
     506/    C6B9 : 0B                   FCB $B
     509/    C6BA : 76 C6                FDB str_hero_stat_HP
     510/    C6BC : 7E C6                FDB str_hero_stat_Batt
     511/    C6BE : 86 C6                FDB str_hero_stat_Dmg
     512/    C6C0 : 8E C6                FDB str_hero_stat_Crit
     513/    C6C2 : 97 C6                FDB str_hero_stat_Mine
     514/    C6C4 : A0 C6                FDB str_hero_stat_Drill
     515/    C6C6 : A9 C6                FDB str_hero_stat_Lava
     518/    C6C8 : 00 00                FDB $0
     519/    C6CA : 0B 02                FDB hero_Batt_Max
     520/    C6CC : 0D 02                FDB hero_Dmg
     521/    C6CE : 13 02                FDB hero_Crit_Rate
     522/    C6D0 : 0F 02                FDB hero_Mine_Speed
     523/    C6D2 : 10 02                FDB hero_Drill_Speed
     524/    C6D4 : 11 02                FDB hero_Lava_Res
     527/    C6D6 : 42 61 74 74 65 72    FCB "Battery Saver",$0
     530/    C6E4 : 42 6F 75 6E 74 79    FCB "Bounty Hunter",$0
     533/    C6F2 : 46 61 73 74 20 44    FCB "Fast Digger",$0
     536/    C6FE : 4C 75 63 6B 79 20    FCB "Lucky Driller",$0
     539/    C70C : 4D 61 73 74 65 72    FCB "Master Miner",$0
     542/    C719 : 4C 75 63 6B 79 20    FCB "Lucky Crit",$0
     545/    C724 : 43 72 69 74 20 4C    FCB "Crit Lord",$0
     548/    C72E : 45 78 70 65 72 69    FCB "Experienced",$0
     551/    C73A : 49 6E 73 74 61 6B    FCB "Instakill",$0
     554/    C744 : 47 68 6F 73 74 00    FCB "Ghost",$0
     557/    C74A : 46 72 65 65 20 4C    FCB "Free Lunch",$0
     560/    C755 : 57 69 73 65 20 52    FCB "Wise Rewards",$0
     563/    C762 : 42 69 67 20 44 69    FCB "Big Discount",$0
     566/    C76F : 4F 6E 6C 79 20 74    FCB "Only the Best",$0
     569/    C77D : 43 72 79 73 74 61    FCB "Crystalsmith",$0
     572/    C78A : D6 C6                FDB str_Skill0_title
     573/    C78C : E4 C6                FDB str_Skill1_title
     574/    C78E : F2 C6                FDB str_Skill2_title
     575/    C790 : FE C6                FDB str_Skill3_title
     576/    C792 : 0C C7                FDB str_Skill4_title
     577/    C794 : 19 C7                FDB str_Skill5_title
     578/    C796 : 24 C7                FDB str_Skill6_title
     579/    C798 : 2E C7                FDB str_Skill7_title
     580/    C79A : 3A C7                FDB str_Skill8_title
     581/    C79C : 44 C7                FDB str_Skill9_title
     582/    C79E : 4A C7                FDB str_Skill10_title
     583/    C7A0 : 55 C7                FDB str_Skill11_title
     584/    C7A2 : 62 C7                FDB str_Skill12_title
     585/    C7A4 : 6F C7                FDB str_Skill13_title
     586/    C7A6 : 7D C7                FDB str_Skill14_title
     589/    C7A8 : 32 30 25 20 63 68    FCB "20% chance that*mining won't*consume energy",$0
     592/    C7D4 : 31 30 25 20 63 68    FCB "10% chance of*crystal when*you kill an*enemy",$0
     595/    C801 : 2D 32 20 4D 69 6E    FCB "-2 Mine and*Drill time",$0
     598/    C818 : 32 35 25 20 63 68    FCB "25% chance of*crystal when*mining rock",$0
     601/    C83F : 4D 69 6E 65 20 64    FCB "Mine double*crystals",$0
     604/    C854 : 2B 32 30 25 20 63    FCB "+20% chance of*critical hit",$0
     607/    C870 : 43 72 69 74 20 64    FCB "Crit damage*raised from*150% to 200%",$0
     610/    C895 : 2B 31 30 25 20 62    FCB "+10% bonus to*experience on*kill",$0
     613/    C8B6 : 35 25 20 63 68 61    FCB "5% chance to*kill enemy in*one hit",$0
     616/    C8D9 : 57 61 6C 6B 20 74    FCB "Walk through*enemies",$0
     619/    C8EE : 32 30 25 20 63 68    FCB "20% chance that*crafting will*cost nothing",$0
     622/    C919 : 2B 35 20 72 61 6E    FCB "+5 random*crystal when*leveling up",$0
     625/    C93C : 2D 31 20 74 6F 20    FCB "-1 to cost of*items",$0
     628/    C950 : 31 30 25 20 63 68    FCB "10% chance*that crafted*items will be*yellow quality",$0
     631/    C985 : 50 61 79 20 77 69    FCB "Pay with any*crystal",$0
     634/    C99A : A8 C7                FDB str_Skill0_description
     635/    C99C : D4 C7                FDB str_Skill1_description
     636/    C99E : 01 C8                FDB str_Skill2_description
     637/    C9A0 : 18 C8                FDB str_Skill3_description
     638/    C9A2 : 3F C8                FDB str_Skill4_description
     639/    C9A4 : 54 C8                FDB str_Skill5_description
     640/    C9A6 : 70 C8                FDB str_Skill6_description
     641/    C9A8 : 95 C8                FDB str_Skill7_description
     642/    C9AA : B6 C8                FDB str_Skill8_description
     643/    C9AC : D9 C8                FDB str_Skill9_description
     644/    C9AE : EE C8                FDB str_Skill10_description
     645/    C9B0 : 19 C9                FDB str_Skill11_description
     646/    C9B2 : 3C C9                FDB str_Skill12_description
     647/    C9B4 : 50 C9                FDB str_Skill13_description
     648/    C9B6 : 85 C9                FDB str_Skill14_description
     651/    C9B8 : 00 00 00 00 00 00    FCB [$B6]$0
     654/    CA6E : 00 00 00 00 00 00    FCB [$BA]$0
     657/    CB28 : 00 00 00 00 00 00    FCB [$B6]$0
     660/    CBDE : 00 00 00 00 00 00    FCB [$BA]$0
     663/    CC98 : 00 00 00 00 00 00    FCB [$B6]$0
     666/    CD4E : 00 00 00 00 00 00    FCB [$B6]$0
     669/    CE04 : 00 00 00 00 00 00    FCB [$22A]$0
     672/    D02E : 00 00 00 00 00 00    FCB [$22A]$0
     675/    D258 : 00 00 00 00 00 00    FCB [$22A]$0
     678/    D482 : 00 00 00 00 00 00    FCB [$202]$0
     681/    D684 : 00 00 00 00 00 00    FCB [$202]$0
     684/    D886 : 00 00 00 00 00 00    FCB [$B2]$0
     687/    D938 : 00 00 00 00 00 00    FCB [$4B]$0
     690/    D983 : 10 10 10 40 00 10    FCB $10,$10,$10,$40,$0,$10,$40,$0,$10,$40,$0,$10,$40,$0,$5,$40,$6,$41,$5,$40,$0,$3,$40,$3,$41,$4,$42,$3,$41,$3,$40,$0,$2,$40
     691/    D9A5 : 01 41 01 42 01 41    FCB $1,$41,$1,$42,$1,$41,$6,$42,$1,$41,$1,$42,$1,$41,$2,$40,$0,$1,$40,$1,$41,$2,$42,$1,$41,$6,$42,$1,$41,$2,$42,$1,$41,$1,$40
     692/    D9C8 : 00 01 41 03 42 01    FCB $0,$1,$41,$3,$42,$1,$41,$6,$42,$1,$41,$3,$42,$1,$41,$0,$1,$41,$2,$42,$2,$41,$6,$42,$2,$41,$2,$42,$1,$41,$0,$1,$40,$2,$41
     693/    D9EB : 01 40 01 41 06 42    FCB $1,$40,$1,$41,$6,$42,$1,$41,$1,$40,$2,$41,$1,$40,$0,$4,$40,$2,$41,$4,$42,$2,$41,$4,$40,$0,$5,$40,$6,$41,$5,$40,$0,$10,$40
     694/    DA0E : 00 10 40 00 10 40    FCB $0,$10,$40,$0,$10,$40,$0
     697/    DA15 : 10 10 10 40 00 03    FCB $10,$10,$10,$40,$0,$3,$40,$1,$47,$3,$48,$9,$40,$0,$2,$40,$3,$47,$3,$48,$8,$40,$0,$3,$40,$1,$47,$2,$40,$2,$48,$8,$40,$0,$7
     698/    DA38 : 40 02 48 07 40 00    FCB $40,$2,$48,$7,$40,$0,$7,$40,$2,$48,$7,$40,$0,$2,$40,$C,$49,$2,$40,$0,$1,$40,$2,$49,$A,$4A,$2,$49,$1,$40,$0,$1,$40,$1,$49
     699/    DA5B : 0C 4A 01 49 01 40    FCB $C,$4A,$1,$49,$1,$40,$0,$1,$40,$1,$49,$3,$4A,$1,$3F,$1,$0,$3,$4A,$1,$3F,$1,$0,$2,$4A,$1,$49,$1,$40,$0,$1,$40,$1,$49,$3,$4A
     700/    DA7F : 02 3F 03 4A 02 3F    FCB $2,$3F,$3,$4A,$2,$3F,$2,$4A,$1,$49,$1,$40,$0,$1,$40,$1,$49,$C,$4A,$1,$49,$1,$40,$0,$1,$40,$1,$49,$3,$4A,$1,$4B,$8,$4A,$1
     701/    DAA2 : 49 01 40 00 01 40    FCB $49,$1,$40,$0,$1,$40,$1,$49,$4,$4A,$5,$4B,$3,$4A,$1,$49,$1,$40,$0,$1,$40,$2,$49,$A,$4A,$2,$49,$1,$40,$0,$2,$40,$C,$49,$2
     702/    DAC5 : 40 00                FCB $40,$0
     705/    DAC7 : 10 10 10 40 00 10    FCB $10,$10,$10,$40,$0,$10,$40,$0,$10,$40,$0,$10,$40,$0,$10,$40,$0,$3,$40,$3,$43,$3,$40,$3,$43,$4,$40,$0,$3,$40,$1,$43,$1,$44
     706/    DAE9 : 01 43 03 40 01 43    FCB $1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$4,$40,$0,$3,$40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$4,$40,$0,$3,$40,$1,$43
     707/    DB0D : 01 44 01 43 03 40    FCB $1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$4,$40,$0,$3,$40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$4,$40,$0,$3,$40
     708/    DB31 : 01 43 02 44 01 43    FCB $1,$43,$2,$44,$1,$43,$2,$40,$1,$43,$2,$44,$1,$43,$3,$40,$0,$3,$40,$1,$43,$3,$44,$1,$43,$1,$40,$1,$43,$3,$44,$1,$43,$2,$40,$0
     709/    DB55 : 03 40 05 43 01 40    FCB $3,$40,$5,$43,$1,$40,$5,$43,$2,$40,$0,$10,$40,$0,$10,$40,$0,$10,$40,$0
     712/    DB69 : 10 10 10 40 00 10    FCB $10,$10,$10,$40,$0,$10,$40,$0,$10,$40,$0,$9,$40,$1,$45,$6,$40,$0,$8,$40,$3,$45,$5,$40,$0,$7,$40,$1,$45,$2,$46,$2,$45,$4,$40
     713/    DB8C : 00 06 40 01 45 03    FCB $0,$6,$40,$1,$45,$3,$46,$1,$45,$5,$40,$0,$6,$40,$1,$45,$2,$46,$3,$45,$4,$40,$0,$5,$40,$8,$45,$3,$40,$0,$4,$40,$3,$45,$3,$40
     714/    DBB0 : 04 45 02 40 00 03    FCB $4,$45,$2,$40,$0,$3,$40,$2,$46,$1,$45,$5,$40,$3,$45,$2,$40,$0,$3,$40,$2,$46,$7,$40,$1,$45,$3,$40,$0,$10,$40,$0,$10,$40,$0
     715/    DBD3 : 10 40 00 10 40 00    FCB $10,$40,$0,$10,$40,$0
     718/    DBD9 : 10 10 10 40 00 10    FCB $10,$10,$10,$40,$0,$10,$40,$0,$10,$40,$0,$9,$40,$2,$4C,$5,$40,$0,$8,$40,$2,$4C,$6,$40,$0,$8,$40,$2,$4C,$2,$40,$1,$4C,$3,$40
     719/    DBFC : 00 07 40 06 4C 03    FCB $0,$7,$40,$6,$4C,$3,$40,$0,$6,$40,$6,$4C,$4,$40,$0,$5,$40,$5,$4C,$6,$40,$0,$4,$40,$5,$4C,$7,$40,$0,$3,$40,$5,$4C,$8,$40,$0,$3,$40
     720/    DC22 : 04 4C 09 40 00 04    FCB $4,$4C,$9,$40,$0,$4,$40,$2,$4C,$A,$40,$0,$10,$40,$0,$10,$40,$0,$10,$40,$0
     723/    DC37 : 20 20 20 40 00 12    FCB $20,$20,$20,$40,$0,$12,$40,$3,$48,$1,$47,$A,$40,$0,$11,$40,$3,$48,$3,$47,$9,$40,$0,$11,$40,$2,$48,$2,$40,$1,$47,$A,$40
     724/    DC58 : 00 10 40 02 48 0E    FCB $0,$10,$40,$2,$48,$E,$40,$0,$10,$40,$2,$48,$E,$40,$0,$B,$40,$C,$49,$9,$40,$0,$A,$40,$2,$49,$A,$4A,$2,$49,$8,$40,$0
     725/    DC79 : 0A 40 01 49 0C 4A    FCB $A,$40,$1,$49,$C,$4A,$1,$49,$8,$40,$0,$A,$40,$1,$49,$2,$4A,$1,$0,$1,$3F,$3,$4A,$1,$0,$1,$3F,$3,$4A,$1,$49,$8,$40,$0,$A
     726/    DC9C : 40 01 49 02 4A 02    FCB $40,$1,$49,$2,$4A,$2,$3F,$3,$4A,$2,$3F,$3,$4A,$1,$49,$8,$40,$0,$A,$40,$1,$49,$C,$4A,$1,$49,$8,$40,$0,$A,$40,$1,$49,$8
     727/    DCBE : 4A 01 4B 03 4A 01    FCB $4A,$1,$4B,$3,$4A,$1,$49,$8,$40,$0,$A,$40
     728/    DCCA : 01 49 03 4A 05 4B    FCB $1,$49,$3,$4A,$5,$4B,$4,$4A,$1,$49,$8,$40,$0,$6,$40,$1,$45,$3,$40,$2,$49,$A,$4A,$2,$49,$8,$40,$0,$5,$40,$3,$45,$3,$40,$C
     729/    DCED : 49 05 40 02 4C 02    FCB $49,$5,$40,$2,$4C,$2,$40,$0,$4,$40,$1,$45,$2,$46,$2,$45,$3,$40,$A,$41,$5,$40,$2,$4C,$3,$40,$0,$3,$40,$1,$45,$3,$46,$1,$45
     730/    DD10 : 01 40 04 41 08 42    FCB $1,$40,$4,$41,$8,$42
     731/    DD16 : 04 41 02 40 02 4C    FCB $4,$41,$2,$40,$2,$4C,$2,$40,$1,$4C,$0,$3,$40,$1,$45,$2,$46,$2,$45,$1,$41,$2,$42,$1,$41,$A,$42,$1,$41,$2,$42,$1,$41,$6,$4C
     732/    DD39 : 00 02 40 05 45 01    FCB $0,$2,$40,$5,$45,$1,$41,$3,$42,$1,$41,$A,$42,$1,$41,$3,$42,$1,$41,$4,$4C,$1,$40,$0,$1,$40,$3,$45,$2,$40,$1,$41,$3,$42,$2
     733/    DD5C : 41 0A 42 02 41 03    FCB $41,$A,$42,$2,$41,$3
     734/    DD62 : 42 01 41 01 4C 03    FCB $42,$1,$41,$1,$4C,$3,$40,$0,$2,$46,$1,$45,$3,$40,$1,$41,$2,$42,$1,$41,$1,$40,$1,$41,$A,$42,$1,$41,$1,$40,$1,$41,$2,$42
     735/    DD84 : 01 41 04 40 00 02    FCB $1,$41,$4,$40,$0,$2,$46,$5,$40,$2,$41,$1,$45,$1,$40,$2,$41,$8,$42,$2,$41,$1,$40,$1,$4C,$2,$41,$5,$40,$0,$C,$40,$A,$41
     736/    DDA6 : 01 40 03 4C 06 40    FCB $1,$40,$3,$4C,$6,$40,$0,$D
     737/    DDAE : 40 03 43 03 40 03    FCB $40,$3,$43,$3,$40,$3,$43,$1,$40,$2,$4C,$7,$40,$0,$D,$40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$A,$40,$0,$D
     738/    DDD0 : 40 01 43 01 44 01    FCB $40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$A,$40,$0,$D,$40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43
     739/    DDF2 : 0A 40 00 0D 40 01    FCB $A,$40,$0,$D,$40,$1
     740/    DDF8 : 43 01 44 01 43 03    FCB $43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$A,$40,$0,$C,$40,$1,$43,$2,$44,$1,$43,$2,$40,$1,$43,$2,$44,$1,$43,$A,$40
     741/    DE1A : 00 0B 40 01 43 03    FCB $0,$B,$40,$1,$43,$3,$44,$1,$43,$1,$40,$1,$43,$3,$44,$1,$43,$A,$40,$0,$B,$40,$5,$43,$1,$40,$5,$43,$A,$40,$0
     744/    DE39 : 20 20 20 40 00 0C    FCB $20,$20,$20,$40,$0,$C,$40,$1,$47,$3,$48,$10,$40,$0,$B,$40,$3,$47,$3,$48,$F,$40,$0,$C,$40,$1,$47,$2,$40,$2,$48,$F,$40
     745/    DE5A : 00 10 40 02 48 0E    FCB $0,$10,$40,$2,$48,$E,$40,$0,$10,$40,$2,$48,$E,$40,$0,$B,$40,$C,$49,$9,$40,$0,$A,$40,$2,$49,$A,$4A,$2,$49,$8,$40,$0
     746/    DE7B : 0A 40 01 49 0C       FCB $A,$40,$1,$49,$C
     747/    DE80 : 4A 01 49 08 40 00    FCB $4A,$1,$49,$8,$40,$0,$A,$40,$1,$49,$3,$4A,$1,$3F,$1,$0,$3,$4A,$1,$3F,$1,$0,$2,$4A,$1,$49,$8,$40,$0,$A,$40,$1,$49,$3,$4A,$2
     748/    DEA4 : 3F 03 4A 02 3F 02    FCB $3F,$3,$4A,$2,$3F,$2,$4A,$1,$49,$8,$40,$0,$A,$40,$1,$49,$C,$4A,$1,$49,$8,$40,$0,$A,$40,$1,$49,$3,$4A,$1,$4B,$8,$4A,$1,$49,$8
     749/    DEC8 : 40 00 0A 40          FCB $40,$0,$A,$40
     750/    DECC : 01 49 04 4A 05 4B    FCB $1,$49,$4,$4A,$5,$4B,$3,$4A,$1,$49,$8,$40,$0,$6,$40,$1,$45,$3,$40,$2,$49,$A,$4A,$2,$49,$8,$40,$0,$5,$40,$3,$45,$3,$40,$C
     751/    DEEF : 49 05 40 02 4C 02    FCB $49,$5,$40,$2,$4C,$2,$40,$0,$4,$40,$1,$45,$2,$46,$2,$45,$3,$40,$A,$41,$5,$40,$2,$4C,$3,$40,$0,$3,$40,$1,$45,$3,$46,$1,$45,$1,$40
     752/    DF14 : 04 41 08 42          FCB $4,$41,$8,$42
     753/    DF18 : 04 41 02 40 02 4C    FCB $4,$41,$2,$40,$2,$4C,$2,$40,$1,$4C,$0,$3,$40,$1,$45,$2,$46,$2,$45,$1,$41,$2,$42,$1,$41,$A,$42,$1,$41,$2,$42,$1,$41,$6,$4C
     754/    DF3B : 00 02 40 05 45 01    FCB $0,$2,$40,$5,$45,$1,$41,$3,$42,$1,$41,$A,$42,$1,$41,$3,$42,$1,$41,$4,$4C,$1,$40,$0,$1,$40,$3,$45,$2,$40,$1,$41,$3,$42,$2,$41,$A
     755/    DF60 : 42 02 41 03          FCB $42,$2,$41,$3
     756/    DF64 : 42 01 41 01 4C 03    FCB $42,$1,$41,$1,$4C,$3,$40,$0,$2,$46,$1,$45,$3,$40,$1,$41,$2,$42,$1,$41,$1,$40,$1,$41,$A,$42,$1,$41,$1,$40,$1,$41,$2,$42,$1
     757/    DF87 : 41 04 40 00 02 46    FCB $41,$4,$40,$0,$2,$46,$5,$40,$2,$41,$1,$45,$1,$40,$2,$41,$8,$42,$2,$41,$1,$40,$1,$4C,$2,$41,$5,$40,$0,$C,$40,$A,$41,$1,$40,$3
     758/    DFAB : 4C 06 40 00 0C       FCB $4C,$6,$40,$0,$C
     759/    DFB0 : 40 03 43 03 40 03    FCB $40,$3,$43,$3,$40,$3,$43,$2,$40,$2,$4C,$7,$40,$0,$C,$40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$B,$40,$0,$C
     760/    DFD2 : 40 01 43 01 44 01    FCB $40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$B,$40,$0,$C,$40,$1,$43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$B
     761/    DFF5 : 40 00 0C 40 01       FCB $40,$0,$C,$40,$1
     762/    DFFA : 43 01 44 01 43 03    FCB $43,$1,$44,$1,$43,$3,$40,$1,$43,$1,$44,$1,$43,$B,$40,$0,$C,$40,$1,$43,$2,$44,$1,$43,$2,$40,$1,$43,$2,$44,$1,$43,$A
     763/    E01B : 40 00 0C 40 01 43    FCB $40,$0,$C,$40,$1,$43,$3,$44,$1,$43,$1,$40,$1,$43,$3,$44,$1,$43,$9,$40,$0,$C,$40,$5,$43,$1,$40,$5,$43,$9,$40,$0
     766/    E03B : 20 20 20 40 00 0B    FCB $20,$20,$20,$40,$0,$B,$40,$1,$4D,$14,$40,$0,$A,$40,$1,$4D,$1,$4E,$1,$4D,$7,$40,$1,$4D,$B,$40,$0,$A,$40,$1,$4D,$2
     767/    E05B : 4E 01 4D 06 40 01    FCB $4E,$1,$4D,$6,$40,$1,$4D,$B,$40,$0,$9,$40,$1,$4D,$4,$4E,$1,$4D,$4,$40,$2,$4D,$B,$40,$0,$8,$40,$1,$4D,$6,$4E,$1,$4D,$3,$40
     768/    E07E : 01 4D 01 4F 01 4D    FCB $1,$4D,$1,$4F,$1,$4D,$A
     769/    E085 : 40 00 08 40 01 4D    FCB $40,$0,$8,$40,$1,$4D,$6,$4E,$1,$4D,$2,$40,$1,$4D,$2,$4F,$1,$4D,$A,$40,$0,$8,$40,$1,$4D,$6,$4E,$1,$4D,$2,$40,$1,$4D,$2
     770/    E0A7 : 4F 01 4D 0A 40 00    FCB $4F,$1,$4D,$A,$40,$0,$8,$40,$1,$4D,$6,$4E,$1,$4D,$1,$40,$1,$4D,$3,$4F,$1,$4D,$A,$40,$0,$9,$40,$1,$4D,$5,$4E,$1,$4D,$1,$40
     771/    E0CA : 01 4D 03 4F 01 4D    FCB $1,$4D,$3,$4F,$1,$4D,$A
     772/    E0D1 : 40 00 09 40 01 4D    FCB $40,$0,$9,$40,$1,$4D,$5,$4E,$2,$4D,$4,$4F,$1,$4D,$3,$40,$1,$4D,$6,$40,$0,$9,$40,$1,$4D,$6,$4E,$1,$4D,$5,$4F,$1,$4D,$1
     773/    E0F3 : 40 01 4D 01 4E 02    FCB $40,$1,$4D,$1,$4E,$2,$4D,$4,$40,$0,$3,$40,$3,$4D,$3,$40,$1,$4D,$6,$4E,$1,$4D,$5,$4F,$2,$4D,$4,$4E,$1,$4D,$3,$40,$0,$3,$40,$1
     774/    E117 : 4D 02 4F 01 4D 02    FCB $4D,$2,$4F,$1,$4D,$2,$40
     775/    E11E : 01 4D 06 4E 01 4D    FCB $1,$4D,$6,$4E,$1,$4D,$4,$4F,$2,$4D,$5,$4E,$1,$4D,$3,$40,$0,$4,$40,$1,$4D,$1,$4F,$2,$4D,$1,$40,$1,$4D,$6,$4E,$1,$4D,$3
     776/    E140 : 4F 01 4D 07 4E 01    FCB $4F,$1,$4D,$7,$4E,$1,$4D,$3,$40,$0,$4,$40,$1,$4D,$3,$4F,$1,$4D,$1,$40,$1,$4D,$5,$4E,$1,$4D,$1,$4F,$2,$4D,$7,$4E,$1,$4D,$4
     777/    E163 : 40 00 05 40 01 4D    FCB $40,$0,$5,$40,$1,$4D,$3,$4F
     778/    E16B : 02 4D 05 4E 02 4D    FCB $2,$4D,$5,$4E,$2,$4D,$9,$4E,$1,$4D,$4,$40,$0,$5,$40,$1,$4D,$4,$4F,$1,$4D,$5,$4E,$1,$4D,$A,$4E,$1,$4D,$4,$40,$0,$6
     779/    E18C : 40 01 4D 03 4F 01    FCB $40,$1,$4D,$3,$4F,$1,$4D,$5,$4E,$1,$4D,$9,$4E,$1,$4D,$5,$40,$0,$6,$40,$1,$4D,$3,$4F,$1,$4D,$6,$4E,$1,$4D,$7,$4E,$1,$4D,$6
     780/    E1AF : 40 00 07 40 01 4D    FCB $40,$0,$7,$40,$1,$4D,$2,$4F,$1
     781/    E1B8 : 4D 06 4E 01 4D 06    FCB $4D,$6,$4E,$1,$4D,$6,$4E,$1,$4D,$7,$40,$0,$7,$40,$1,$4D,$3,$4F,$1,$4D,$5,$4E,$1,$4D,$5,$4E,$1,$4D,$8,$40,$0,$8,$40
     782/    E1D9 : 01 4D 02 4F 04 4D    FCB $1,$4D,$2,$4F,$4,$4D,$2,$4E,$1,$4D,$4,$4E,$1,$4D,$9,$40,$0,$8,$40,$1,$4D,$2,$4F,$1,$4D,$2,$50,$1,$4D,$2,$4E,$3,$4D,$1,$4E
     783/    E1FC : 02 4D 09 40 00 07    FCB $2,$4D,$9,$40,$0,$7,$40,$4,$4D
     784/    E205 : 03 50 04 4D 01 50    FCB $3,$50,$4,$4D,$1,$50,$5,$4D,$8,$40,$0,$6,$40,$1,$4D,$8,$50,$2,$4D,$6,$50,$2,$4D,$7,$40,$0,$5,$40,$1,$4D,$6,$50,$1
     785/    E226 : 51 08 50 01 51 02    FCB $51,$8,$50,$1,$51,$2,$50,$2,$4D,$6,$40,$0,$5,$40,$1,$4D,$1,$50,$1,$52,$11,$50,$1,$4D,$6,$40,$0,$5,$40,$1,$4D,$A,$50,$1
     786/    E248 : 52 08 50 01 4D 06    FCB $52,$8,$50,$1,$4D,$6,$40,$0,$5,$40
     787/    E252 : 08 4D 06 50 07 4D    FCB $8,$4D,$6,$50,$7,$4D,$6,$40,$0,$C,$40,$7,$4D,$D,$40,$0,$20,$40,$0
     790/    E265 : 20 20 20 53 00 0F    FCB $20,$20,$20,$53,$0,$F,$53,$1,$54,$10,$53,$0,$2,$53,$1,$55,$1D,$53,$0,$20,$53,$0,$17,$53,$1,$55,$8,$53,$0,$20,$53,$0
     791/    E285 : 05 53 01 54 1A 53    FCB $5,$53,$1,$54,$1A,$53,$0,$1F,$53,$1,$54,$0,$B,$53,$1,$55,$14,$53,$0,$20,$53,$0,$20,$53,$0,$17,$53,$1,$54,$8,$53,$0,$11,$53
     792/    E2A7 : 01 55 0E             FCB $1,$55,$E
     793/    E2AA : 53 00 03 53 01 55    FCB $53,$0,$3,$53,$1,$55,$1C,$53,$0,$19,$53,$1,$55,$6,$53,$0,$1D,$53,$1,$55,$2,$53,$0,$20,$53,$0,$A,$53,$1,$54,$15,$53
     794/    E2CA : 00 20 53 00 20 53    FCB $0,$20,$53,$0,$20,$53,$0,$D,$53,$1,$55,$C,$53,$1,$54,$5,$53,$0,$13,$53,$1,$54,$C,$53,$0,$20,$53,$0,$1,$55,$1F,$53,$0
     795/    E2EB : 04 53 01 54 1B 53    FCB $4,$53,$1,$54,$1B,$53
     796/    E2F1 : 00 16 53 01 55 09    FCB $0,$16,$53,$1,$55,$9,$53,$0,$C,$53,$1,$54,$F,$53,$1,$55,$3,$53,$0,$20,$53,$0,$20,$53,$0,$20,$53,$0,$15,$53,$1,$54
     797/    E311 : 0A 53 00 03 53 01    FCB $A,$53,$0,$3,$53,$1,$55,$1C,$53,$0
     800/    E31B : 20 20 20 40 00 20    FCB $20,$20,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$9,$40,$E,$0,$9,$40,$0,$9,$40,$E,$0,$9,$40,$0,$9,$40
     801/    E33C : 02 00 04 03 02 00    FCB $2,$0,$4,$3,$2,$0,$4,$3,$2,$0,$9,$40,$0,$9,$40,$2,$0,$4,$3,$2,$0,$4,$3,$2,$0,$9,$40,$0,$9,$40,$E,$0,$9,$40,$0,$9,$40,$5,$0,$4,$3
     802/    E365 : 05 00 09 40 00 09    FCB $5,$0,$9,$40,$0,$9,$40,$4
     803/    E36D : 00 01 03 04 00 01    FCB $0,$1,$3,$4,$0,$1,$3,$4,$0,$9,$40,$0,$9,$40,$E,$0,$9,$40,$0,$6,$40,$14,$0,$6,$40,$0,$5,$40,$2,$0,$2,$3,$1,$0,$C,$15,$1,$0
     804/    E393 : 02 03 02 00 05 40    FCB $2,$3,$2,$0,$5,$40,$0,$4,$40,$3,$0,$3,$3,$2,$0,$8,$15,$2,$0,$3,$3,$3,$0,$4,$40,$0,$3,$40,$5,$0,$4,$3,$2,$0,$4,$15,$2,$0,$4,$3,$5,$0
     805/    E3BD : 03 40 00 02 40 05    FCB $3,$40,$0,$2,$40,$5,$0
     806/    E3C4 : 01 15 02 00 04 03    FCB $1,$15,$2,$0,$4,$3,$4,$0,$4,$3,$2,$0,$1,$15,$5,$0,$2,$40,$0,$1,$40,$6,$0,$3,$15,$1,$0,$A,$3,$1,$0,$3,$15,$6,$0,$1,$40,$0,$1
     807/    E3EB : 40 06 00 03 15 01    FCB $40,$6,$0,$3,$15,$1,$0,$A,$3,$1,$0,$3,$15,$6,$0,$1,$40,$0,$1,$40,$4,$0,$1,$40,$1,$0,$1,$15,$2,$0,$4,$3,$4,$0,$4,$3,$2,$0,$1,$15
     808/    E413 : 01 00 01 40 04 00    FCB $1,$0,$1,$40,$4,$0,$1,$40
     809/    E41B : 00 01 40 03 00 02    FCB $0,$1,$40,$3,$0,$2,$40,$2,$0,$4,$3,$2,$0,$4,$15,$2,$0,$4,$3,$2,$0,$2,$40,$3,$0,$1,$40,$0,$1,$40,$2,$0,$3,$40,$1,$0,$3,$3,$2
     810/    E442 : 00 08 15 02 00 03    FCB $0,$8,$15,$2,$0,$3,$3,$1,$0,$3,$40,$2,$0,$1,$40,$0,$6,$40,$1,$0,$2,$3,$1,$0,$C,$15,$1,$0,$2,$3,$1,$0,$6,$40,$0,$6,$40,$14,$0,$6
     811/    E46A : 40 00 08 40 07 00    FCB $40,$0,$8,$40,$7,$0,$2,$40
     812/    E472 : 07 00 08 40 00 08    FCB $7,$0,$8,$40,$0,$8,$40,$7,$0,$2,$40,$7,$0,$8,$40,$0,$8,$40,$7,$0,$2,$40,$7,$0,$8,$40,$0,$8,$40,$7,$0,$2,$40,$7,$0,$8,$40
     813/    E497 : 00 08 40 07 00 02    FCB $0,$8,$40,$7,$0,$2,$40,$7,$0,$8,$40,$0,$8,$40,$7,$0,$2,$40,$7,$0,$8,$40,$0,$8,$40,$7,$0,$2,$40,$7,$0,$8,$40,$0
     816/    E4B9 : 20 20 20 40 00 20    FCB $20,$20,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40
     817/    E4D8 : 00 20 40 00 20 40    FCB $0,$20,$40,$0,$20,$40,$0,$9,$40,$C,$0,$B,$40,$0,$9,$40,$1,$0,$2,$2A,$1,$0,$1,$15,$7,$0,$B,$40,$0,$2,$40,$8,$0,$3,$2A,$6
     818/    E4FC : 00 01 2A 01 00 0B    FCB $0,$1,$2A,$1,$0,$B,$40,$0
     819/    E504 : 02 40 09 00 01 2A    FCB $2,$40,$9,$0,$1,$2A,$6,$0,$1,$2A,$A,$0,$3,$40,$0,$2,$40,$8,$0,$1,$15,$6,$0,$1,$2A,$1,$0,$1,$15,$9,$0,$3,$40,$0,$2,$40
     820/    E528 : 08 00 01 15 05 00    FCB $8,$0,$1,$15,$5,$0,$2,$2A,$1,$0,$1,$15,$5,$0,$1,$2A,$1,$0,$1,$2A,$1,$0,$3,$40,$0,$2,$40,$8,$0,$2,$15,$1,$0,$4,$2A,$1,$0,$2,$15
     821/    E54F : 06 00 01 2A 02 00    FCB $6,$0,$1,$2A,$2,$0,$3,$40
     822/    E557 : 00 02 40 08 00 02    FCB $0,$2,$40,$8,$0,$2,$15,$1,$0,$4,$2A,$1,$0,$2,$15,$2,$0,$1,$2A,$2,$0,$1,$2A,$1,$0,$1,$2A,$1,$0,$3,$40,$0,$2,$40,$8,$0,$3
     823/    E57C : 15 01 00 02 2A 01    FCB $15,$1,$0,$2,$2A,$1,$0,$3,$15,$3,$0,$1,$2A,$5,$0,$3,$40,$0,$9,$40,$1,$0,$3,$15,$1,$0,$2,$2A,$1,$0,$3,$15,$3,$0,$1,$2A,$5,$0
     824/    E5A2 : 03 40 00 09 40 01    FCB $3,$40,$0,$9,$40,$1,$0,$3,$15
     825/    E5AB : 01 00 02 2A 01 00    FCB $1,$0,$2,$2A,$1,$0,$3,$15,$3,$0,$1,$2A,$5,$0,$3,$40,$0,$2,$40,$8,$0,$3,$15,$1,$0,$2,$2A,$1,$0,$3,$15,$3,$0,$1,$2A,$1,$0
     826/    E5D0 : 01 2A 01 00 01 2A    FCB $1,$2A,$1,$0,$1,$2A,$1,$0,$3,$40,$0,$2,$40,$8,$0,$2,$15,$1,$0,$4,$2A,$1,$0,$2,$15,$2,$0,$1,$2A,$3,$0,$1,$2A,$2,$0,$3,$40,$0
     827/    E5F6 : 02 40 08 00 02 15    FCB $2,$40,$8,$0,$2,$15,$1,$0,$4
     828/    E5FF : 2A 01 00 02 15 05    FCB $2A,$1,$0,$2,$15,$5,$0,$1,$2A,$1,$0,$1,$2A,$1,$0,$3,$40,$0,$2,$40,$8,$0,$1,$15,$5,$0,$2,$2A,$1,$0,$1,$15,$9,$0,$3,$40
     829/    E623 : 00 02 40 08 00 01    FCB $0,$2,$40,$8,$0,$1,$15,$6,$0,$1,$2A,$1,$0,$1,$15,$9,$0,$3,$40,$0,$2,$40,$9,$0,$1,$2A,$6,$0,$1,$2A,$A,$0,$3,$40,$0,$2,$40
     830/    E648 : 08 00 03 2A 06 00    FCB $8,$0,$3,$2A,$6,$0,$1,$2A,$1,$0
     831/    E652 : 0B 40 00 09 40 01    FCB $B,$40,$0,$9,$40,$1,$0,$2,$2A,$1,$0,$1,$15,$7,$0,$B,$40,$0,$9,$40,$C,$0,$B,$40,$0
     834/    E66B : 10 10 10 00 00 01    FCB $10,$10,$10,$0,$0,$1,$0,$F,$8,$0,$1,$0,$1,$8,$D,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0
     835/    E691 : 0B 04 01 00 01 08    FCB $B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4
     836/    E6BA : 01 00 01 08 00 01    FCB $1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0
     837/    E6C5 : 0B 04 01 00 01 08    FCB $B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0
     838/    E6EC : 0B 04 01 00 01 08    FCB $B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$1,$0,$B,$4,$1,$0,$1,$8,$0,$1,$0,$1,$8,$D,$0,$1
     839/    E714 : 08 00 01 00 0F 08    FCB $8,$0,$1,$0,$F,$8,$0
     842/    E71B : 20 20 20 40 00 20    FCB $20,$20,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40
     843/    E73A : 00 20 40 00 20 40    FCB $0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40,$0,$20,$40
     844/    E75B : 00 20 40 00 0B 40    FCB $0,$20,$40,$0,$B,$40,$4,$0
     845/    E763 : 11 40 00 0B 40 01    FCB $11,$40,$0,$B,$40,$1,$0,$2,$21,$1,$0,$2,$40,$3,$0,$1,$40,$2,$0,$9,$40,$0,$7,$40,$4,$0,$3,$21,$4,$0,$1,$21,$5,$0,$8,$40
     846/    E787 : 00 06 40 01 00 08    FCB $0,$6,$40,$1,$0,$8,$21,$2,$0,$6,$21,$2,$0,$7,$40,$0,$5,$40,$1,$0,$6,$21,$1,$2,$8,$21,$1,$2,$2,$21,$2,$0,$6,$40,$0,$5,$40,$1,$0
     847/    E7AE : 01 21 01 20 11 21    FCB $1,$21,$1,$20,$11,$21,$1,$0
     848/    E7B6 : 06 40 00 05 40 01    FCB $6,$40,$0,$5,$40,$1,$0,$A,$21,$1,$20,$8,$21,$1,$0,$6,$40,$0,$5,$40,$8,$0,$6,$21,$7,$0,$6,$40,$0,$C,$40,$7,$0,$D,$40
     849/    E7D9 : 00 20 40 00          FCB $0,$20,$40,$0
     852/    E7DD : 20 20 00 00 00 00    FCB $20,$20,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$F,$F0,$F,$F0,$F,$F0,$F,$F0,$C,$0,$0,$30,$C,$0,$0
     853/    E7FF : 30 0C 00 00 30 0C    FCB $30,$C,$0,$0,$30,$C,$0,$0,$30,$C,$0,$0,$30,$C,$0,$0,$30,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0
     854/    E827 : 00 00 00 00 00 00    FCB $0,$0,$0,$0,$0,$0,$0
     855/    E82E : 00 00 0C 00 00 30    FCB $0,$0,$C,$0,$0,$30,$C,$0,$0,$30,$C,$0,$0,$30,$C,$0,$0,$30,$C,$0,$0,$30,$C,$0,$0,$30,$F,$F0,$F,$F0,$F,$F0
     856/    E84E : 0F F0 00 00 00 00    FCB $F,$F0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0,$0
     859/    E860 : 11 11 00 07 F0 00    FCB $11,$11,$0,$7,$F0,$0,$7,$F0,$0,$3F,$FE,$0,$3F,$FE,$0,$3F,$FE,$0,$FF,$FF,$80,$FF,$FF,$80,$FF,$FF
     860/    E87A : 80 FF FF 80 FF FF    FCB $80,$FF,$FF,$80,$FF,$FF,$80,$FF,$FF,$80,$FF,$FF,$80,$3F,$FE,$0,$3F,$FE,$0,$3F,$FE,$0,$7,$F0,$0
     861/    E893 : 07 F0 00             FCB $7,$F0,$0
     864/    E896 : 18 18 00 00 FF 00    FCB $18,$18,$0,$0,$FF,$0,$0,$FF,$0,$3F,$FF,$FC,$3F,$FF,$FC,$3F,$FF,$FC,$3F,$FF,$FC,$3F,$FF,$FC,$3F
     865/    E8AF : FF FC FF FF FF FF    FCB $FF,$FC,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
     866/    E8C7 : FF FF 3F FF FC 3F    FCB $FF,$FF,$3F,$FF,$FC,$3F,$FF,$FC,$3F,$FF,$FC,$3F,$FF,$FC,$3F,$FF,$FC,$3F,$FF,$FC,$0,$FF,$0,$0,$FF,$0
     869/    E8E1 : 20 20 00 7F FF 00    FCB $20,$20,$0,$7F,$FF,$0,$0,$3F,$FF,$0,$1,$1F,$FF,$0,$3,$F,$FF,$0,$7,$7,$FF,$0,$F,$3,$FF,$0,$1F,$1,$FF,$0
     870/    E8FF : 3F 00 FF 00 7F 00    FCB $3F,$0,$FF,$0,$7F,$0,$7F,$0,$FF,$0,$3F,$1,$FF,$0,$1F,$3,$FF,$0,$F,$7,$FF,$0,$7,$F,$FF,$0,$3,$1F,$FF,$0,$1
     871/    E91E : 3F FF 00 00 7F FF    FCB $3F,$FF,$0,$0,$7F,$FF
     872/    E924 : FF FE 00 00 FF FC    FCB $FF,$FE,$0,$0,$FF,$FC,$80,$0,$FF,$F8,$C0,$0,$FF,$F0,$E0,$0,$FF,$E0,$F0,$0,$FF,$C0,$F8,$0
     873/    E93C : FF 80 FC 00 FF 00    FCB $FF,$80,$FC,$0,$FF,$0,$FE,$0,$FE,$0,$FF,$0,$FC,$0,$FF,$80,$F8,$0,$FF,$C0,$F0,$0,$FF,$E0,$E0,$0
     874/    E956 : FF F0 C0 00 FF       FCB $FF,$F0,$C0,$0,$FF
     875/    E95B : F8 80 00 FF FC 00    FCB $F8,$80,$0,$FF,$FC,$0,$0,$FF,$FE
     878/    E964 : 10 10 01 7F FE C0    FCB $10,$10,$1,$7F,$FE,$C0,$3,$80,$1,$83,$C1,$83,$C1,$83,$C1,$9F,$F9,$9F,$F9,$9F,$F9,$9F,$F9
     879/    E97B : 83 C1 83 C1 83 C1    FCB $83,$C1,$83,$C1,$83,$C1,$80,$1,$C0,$3,$7F,$FE
     882/    E987 : 10 10 01 7F FE C0    FCB $10,$10,$1,$7F,$FE,$C0,$3,$80,$1,$83,$C1,$83,$C1,$83,$C1,$9F,$F9,$9F,$F9,$9F,$F9,$9F,$F9
     883/    E99E : 83 C1 83 C1 83 C1    FCB $83,$C1,$83,$C1,$83,$C1,$80,$1,$C0,$3,$7F,$FE
     886/    E9AA : 10 10 01 7F FE C0    FCB $10,$10,$1,$7F,$FE,$C0,$3,$80,$1,$A2,$79,$A2,$45,$A2,$45,$A2,$45,$BE,$79,$A2,$41,$A2,$41,$A2
     887/    E9C2 : 41 A2 41 A2 41 80    FCB $41,$A2,$41,$A2,$41,$80,$1,$C0,$3,$7F,$FE
     890/    E9CD : 10 10 01 7F FE C0    FCB $10,$10,$1,$7F,$FE,$C0,$3,$80,$1,$87,$C1,$84,$21,$84,$21,$84,$21,$87,$C1,$84,$21,$84,$21,$84
     891/    E9E5 : 21 84 21 87 C1 80    FCB $21,$84,$21,$87,$C1,$80,$1,$C0,$3,$7F,$FE
     894/    E9F0 : 10 10 01 7F FE C0    FCB $10,$10,$1,$7F,$FE,$C0,$3,$80,$1,$BA,$B9,$A2,$A5,$A2,$A5,$A2,$A5,$B9,$39,$A2,$A1,$A2,$A1
     895/    EA07 : A2 A1 A2 A1 BA A1    FCB $A2,$A1,$A2,$A1,$BA,$A1,$80,$1,$C0,$3,$7F,$FE
     898/    EA13 : 10 10 01 7F FE C0    FCB $10,$10,$1,$7F,$FE,$C0,$3,$80,$1,$87,$81,$84,$C1,$84,$61,$84,$21,$84,$21,$84,$21,$84,$21,$84
     899/    EA2B : 61 84 C1 87 81 80    FCB $61,$84,$C1,$87,$81,$80,$1,$C0,$3,$7F,$FE
     902/    EA36 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$0,$3,$80,$0,$1,$87,$E7,$E1,$84,$24,$21,$84,$24,$21,$9F,$FF
     903/    EA50 : F9 90 00 09 90 00    FCB $F9,$90,$0,$9,$90,$0,$89,$90,$0,$89,$97,$C3,$E9,$90,$0,$89,$90,$0,$89,$90,$0,$9,$90,$0,$9,$90,$0
     904/    EA6B : 09 90 00 09 9F FF    FCB $9,$90,$0,$9,$9F,$FF
     905/    EA71 : F9 80 00 01 80 00    FCB $F9,$80,$0,$1,$80,$0,$1,$C0,$0,$3,$60,$0,$6,$3F,$FF,$FC
     908/    EA81 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C7,$C0,$3,$88,$20,$1,$90,$10,$1,$AA,$A8,$1,$A4,$48,$1,$AA,$A8,$1
     909/    EA9C : A0 08 01 9F F0 81    FCB $A0,$8,$1,$9F,$F0,$81,$95,$51,$C1,$9F,$F3,$41,$95,$52,$61,$8F,$E2,$3D,$80,$6,$65,$80,$3C,$CD,$80
     910/    EAB5 : 27 89 80 13 19       FCB $27,$89,$80,$13,$19
     911/    EABA : 80 09 91 80 0F F1    FCB $80,$9,$91,$80,$F,$F1,$80,$8,$11,$C0,$F,$F3,$60,$0,$6,$3F,$FF,$FC
     914/    EACC : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$0,$3,$80,$7E,$1,$80,$42,$1,$80,$42,$1,$80,$42,$1,$80,$42,$1,$87
     915/    EAE8 : FF E1 84 C6 21 84    FCB $FF,$E1,$84,$C6,$21,$84,$31,$A1,$83,$8C,$41,$82,$63,$41,$81,$18,$81,$81,$C6,$81,$80,$B1,$1,$80
     916/    EB00 : 8D 01 80 62 01       FCB $8D,$1,$80,$62,$1
     917/    EB05 : 80 5A 01 80 24 01    FCB $80,$5A,$1,$80,$24,$1,$80,$18,$1,$C0,$0,$3,$60,$0,$6,$3F,$FF,$FC
     920/    EB17 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C1,$E0,$3,$8F,$F0,$1,$9F,$F0,$1,$9E,$D8,$1,$BF,$F8,$1,$BF,$F8
     921/    EB31 : 01 B7 F0 01 BF E0    FCB $1,$B7,$F0,$1,$BF,$E0,$81,$9E,$C1,$C1,$87,$83,$41,$80,$2,$61,$80,$2,$3D,$80,$6,$65,$80,$3C,$CD
     922/    EB4A : 80 27 89 80 13       FCB $80,$27,$89,$80,$13
     923/    EB4F : 19 80 09 91 80 0F    FCB $19,$80,$9,$91,$80,$F,$F1,$80,$8,$11,$C0,$F,$F3,$60,$0,$6,$3F,$FF,$FC
     926/    EB62 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$80,$6,$C1,$C0,$3,$83,$40,$1,$82,$60,$1,$82,$3C,$1,$86,$64,$1,$BC,$CC,$1
     927/    EB7D : A7 88 01 93 18 81    FCB $A7,$88,$1,$93,$18,$81,$89,$91,$C1,$8F,$F3,$41,$88,$12,$61,$8F,$F2,$3D,$80,$6,$65,$80,$3C,$CD,$80
     928/    EB96 : 27 89 80             FCB $27,$89,$80
     929/    EB99 : 13 19 80 09 91 80    FCB $13,$19,$80,$9,$91,$80,$F,$F1,$80,$8,$11,$C0,$F,$F3,$60,$0,$6,$3F,$FF,$FC
     932/    EBAD : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$7C,$3,$80,$82,$1,$81,$1,$1,$82,$AA,$81,$82,$44,$81,$82,$AA
     933/    EBC7 : 81 82 00 81 81 FF    FCB $81,$82,$0,$81,$81,$FF,$1,$81,$55,$1,$81,$FF,$1,$81,$55,$1,$80,$FE,$1,$80,$0,$1,$9E,$F7,$11,$82,$95
     934/    EBE2 : 21 9E 97 41          FCB $21,$9E,$97,$41
     935/    EBE6 : 90 90 B9 90 91 29    FCB $90,$90,$B9,$90,$91,$29,$9E,$F2,$39,$C0,$0,$3,$60,$0,$6,$3F,$FF,$FC
     938/    EBF8 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$0,$3,$80,$0,$1,$80,$3F,$E1,$80,$10,$21,$80,$8,$21,$80,$14,$21,$80
     939/    EC14 : 3E 21 80 41 21 80    FCB $3E,$21,$80,$41,$21,$80,$F0,$A1,$81,$F,$61,$83,$82,$21,$84,$64,$1,$8C,$18,$1,$92,$10,$1,$A1,$20,$1,$98
     940/    EC2F : C0 01 86             FCB $C0,$1,$86
     941/    EC32 : 80 01 81 00 01 80    FCB $80,$1,$81,$0,$1,$80,$0,$1,$C0,$0,$3,$60,$0,$6,$3F,$FF,$FC
     944/    EC43 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C1,$0,$83,$82,$81,$41,$84,$42,$21,$88,$3C,$11,$93,$81,$C9,$A4,$42
     945/    EC5D : 25 A8 24 15 A9 24    FCB $25,$A8,$24,$15,$A9,$24,$95,$A4,$42,$25,$A3,$81,$C5,$A0,$10,$5,$A0,$24,$5,$A0,$48,$5,$90,$52,$9,$88,$64
     946/    EC78 : 11 84 18             FCB $11,$84,$18
     947/    EC7B : 21 82 00 41 81 FF    FCB $21,$82,$0,$41,$81,$FF,$81,$80,$0,$1,$C0,$0,$3,$60,$0,$6,$3F,$FF,$FC
     950/    EC8E : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$0,$3,$80,$0,$1,$80,$0,$1,$80,$3,$E1,$B3,$4,$11,$88,$88,$9,$80,$15
     951/    ECAB : 55 BE D2 25 80 15    FCB $55,$BE,$D2,$25,$80,$15,$55,$88,$10,$5,$B1,$F,$F9,$86,$A,$A9,$80,$F,$F9,$80,$A,$A9,$80,$7,$F1,$80
     952/    ECC5 : 00 01 80 00          FCB $0,$1,$80,$0
     953/    ECC9 : 01 80 00 01 80 00    FCB $1,$80,$0,$1,$80,$0,$1,$C0,$0,$3,$60,$0,$6,$3F,$FF,$FC
     956/    ECD9 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$70,$3,$BC,$88,$1,$81,$4,$1,$81,$4,$1,$BD,$4,$1,$80,$88,$21,$8E
     957/    ECF5 : 70 11 89 E0 09 88    FCB $70,$11,$89,$E0,$9,$88,$63,$FD,$88,$50,$9,$88,$91,$11,$80,$89,$21,$BD,$A,$1,$81,$84,$1,$81,$60,$1
     958/    ED0F : A2 18 01 92 10       FCB $A2,$18,$1,$92,$10
     959/    ED14 : 01 8C 20 01 80 40    FCB $1,$8C,$20,$1,$80,$40,$1,$C0,$80,$3,$60,$0,$6,$3F,$FF,$FC
     962/    ED24 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$7E,$3,$81,$81,$81,$82,$0,$41,$84,$8,$21,$8C,$1C,$11,$92,$34,$9
     963/    ED3F : 91 26 09 A0 E3 C5    FCB $91,$26,$9,$A0,$E3,$C5,$A0,$66,$45,$A3,$DC,$C5,$A2,$78,$85,$A1,$35,$85,$A0,$9B,$5,$90,$FF,$89
     964/    ED57 : 90 81 49             FCB $90,$81,$49
     965/    ED5A : 88 FF 31 84 00 21    FCB $88,$FF,$31,$84,$0,$21,$82,$0,$41,$81,$81,$81,$C0,$7E,$3,$60,$0,$6,$3F,$FF,$FC
     968/    ED6F : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C2,$0,$3,$85,$0,$1,$88,$80,$1,$90,$40,$1,$BF,$E0,$1,$88,$80,$1,$88
     969/    ED8B : 80 01 88 80 81 88    FCB $80,$1,$88,$80,$81,$88,$81,$C1,$88,$83,$41,$8F,$82,$61,$80,$2,$3D,$80,$6,$65,$80,$3C,$CD,$80,$27
     970/    EDA4 : 89 80 13             FCB $89,$80,$13
     971/    EDA7 : 19 80 09 91 80 0F    FCB $19,$80,$9,$91,$80,$F,$F1,$80,$8,$11,$C0,$F,$F3,$60,$0,$6,$3F,$FF,$FC
     974/    EDBA : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$0,$3,$80,$40,$1,$80,$C0,$1,$81,$40,$1,$9C,$40,$1,$80,$40,$1,$80
     975/    EDD6 : 40 01 81 F0 81 80    FCB $40,$1,$81,$F0,$81,$80,$1,$C1,$80,$3,$41,$80,$2,$61,$80,$2,$3D,$80,$6,$65,$80,$3C,$CD,$80,$27,$89,$80
     976/    EDF1 : 13 19 80 09          FCB $13,$19,$80,$9
     977/    EDF5 : 91 80 0F F1 80 08    FCB $91,$80,$F,$F1,$80,$8,$11,$C0,$F,$F3,$60,$0,$6,$3F,$FF,$FC
     980/    EE05 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$8,$3,$80,$14,$1,$80,$22,$1,$80,$41,$1,$80,$FF,$81,$80,$22,$1,$80
     981/    EE21 : 22 01 80 22 01 80    FCB $22,$1,$80,$22,$1,$80,$3E,$1,$80,$0,$1,$80,$7E,$1,$81,$C3,$81,$82,$81,$41,$84,$81,$21,$88,$81,$11,$89
     982/    EE3C : 81 91 86             FCB $81,$91,$86
     983/    EE3F : 81 61 80 C3 01 80    FCB $81,$61,$80,$C3,$1,$80,$7E,$1,$C0,$0,$3,$60,$0,$6,$3F,$FF,$FC
     986/    EE50 : 18 18 02 3F FF FC    FCB $18,$18,$2,$3F,$FF,$FC,$60,$0,$6,$C0,$2,$3,$84,$2,$9,$82,$2,$11,$81,$8,$21,$80,$9C,$41,$80,$34,$1,$B0,$26
     987/    EE6D : 01 8C 23 C5 80 66    FCB $1,$8C,$23,$C5,$80,$66,$59,$83,$CC,$C1,$82,$78,$81,$81,$31,$81,$80,$99,$1,$82,$FF,$21,$84,$81,$11
     988/    EE86 : 88 FF 09             FCB $88,$FF,$9
     989/    EE89 : 90 00 05 80 82 01    FCB $90,$0,$5,$80,$82,$1,$80,$82,$1,$C1,$1,$3,$60,$0,$6,$3F,$FF,$FC
     991/    EE9B :                     tiles:
     992/    EE9B : B8 C9                FDB tile_Ground_0
     993/    EE9D : 6E CA                FDB tile_Ground_90
     994/    EE9F : 28 CB                FDB tile_Ground_180
     995/    EEA1 : DE CB                FDB tile_Ground_270
     996/    EEA3 : 98 CC                FDB tile_Rock
     997/    EEA5 : 4E CD                FDB tile_Lava
     998/    EEA7 : 04 CE                FDB tile_Crystal_red
     999/    EEA9 : 2E D0                FDB tile_Crystal_yellow
    1000/    EEAB : 58 D2                FDB tile_Crystal_blue
    1001/    EEAD : 82 D4                FDB tile_Robot_left
    1002/    EEAF : 84 D6                FDB tile_Robot_right
    1003/    EEB1 : 86 D8                FDB tile_Menu_item_temp
    1004/    EEB3 : 38 D9                FDB tile_Skill_temp
    1005/    EEB5 : 15 DA                FDB tile_Menu_head
    1006/    EEB7 : 83 D9                FDB tile_Menu_body
    1007/    EEB9 : C7 DA                FDB tile_Menu_legs
    1008/    EEBB : 69 DB                FDB tile_Menu_gun
    1009/    EEBD : D9 DB                FDB tile_Menu_tool
    1010/    EEBF : 37 DC                FDB tile_Robot_left_raw
    1011/    EEC1 : 39 DE                FDB tile_Robot_right_raw
    1012/    EEC3 : 3B E0                FDB tile_Crystal_raw
    1013/    EEC5 : 65 E2                FDB tile_Ground_raw
    1014/    EEC7 : 1B E3                FDB tile_Monster
    1015/    EEC9 : B9 E4                FDB tile_Monster_dead
    1016/    EECB : 6B E6                FDB tile_Menu_item_slot
    1017/    EECD : 1B E7                FDB tile_Crystal_base
    1018/    EECF : DD E7                FDB tile_Hero_target
    1019/    EED1 : 60 E8                FDB tile_Menu_item_selector
    1020/    EED3 : 96 E8                FDB tile_Menu_skill_selector
    1021/    EED5 : E1 E8                FDB tile_Exit
    1022/    EED7 : 64 E9                FDB tile_Res_HP_Heal
    1023/    EED9 : AA E9                FDB tile_Res_HP_Upgrade
    1024/    EEDB : 87 E9                FDB tile_Res_Batt_Heal
    1025/    EEDD : CD E9                FDB tile_Res_Batt_Upgrade
    1026/    EEDF : F0 E9                FDB tile_Res_Exp_Upgrade
    1027/    EEE1 : 13 EA                FDB tile_Res_Dmg_Upgrade
    1028/    EEE3 : 36 EA                FDB tile_Skill0
    1029/    EEE5 : 81 EA                FDB tile_Skill1
    1030/    EEE7 : CC EA                FDB tile_Skill2
    1031/    EEE9 : 17 EB                FDB tile_Skill3
    1032/    EEEB : 62 EB                FDB tile_Skill4
    1033/    EEED : AD EB                FDB tile_Skill5
    1034/    EEEF : F8 EB                FDB tile_Skill6
    1035/    EEF1 : 43 EC                FDB tile_Skill7
    1036/    EEF3 : 8E EC                FDB tile_Skill8
    1037/    EEF5 : D9 EC                FDB tile_Skill9
    1038/    EEF7 : 24 ED                FDB tile_Skill10
    1039/    EEF9 : 6F ED                FDB tile_Skill11
    1040/    EEFB : BA ED                FDB tile_Skill12
    1041/    EEFD : 05 EE                FDB tile_Skill13
    1042/    EEFF : 50 EE                FDB tile_Skill14
    1045/    EF01 : 00 05 49 15 4A 2A    FCB $0,$5,$49,$15,$4A,$2A,$48,$2A,$47,$C,$4B,$3F
    1048/    EF0D : 00 05 49 15 4A 3A    FCB $0,$5,$49,$15,$4A,$3A,$48,$3A,$47,$30,$4B,$3F
    1051/    EF19 : 00 05 49 15 4A 35    FCB $0,$5,$49,$15,$4A,$35,$48,$35,$47,$F,$4B,$3F
    1054/    EF25 : 00 05 49 15 4A 20    FCB $0,$5,$49,$15,$4A,$20,$48,$20,$47,$32,$4B,$3F
    1057/    EF31 : 00 05 49 30 4A 3F    FCB $0,$5,$49,$30,$4A,$3F,$48,$3F,$47,$30,$4B,$3
    1060/    EF3D : 01 02 41 15 42 2A    FCB $1,$2,$41,$15,$42,$2A
    1063/    EF43 : 01 02 41 15 42 2B    FCB $1,$2,$41,$15,$42,$2B
    1066/    EF49 : 01 02 41 15 42 17    FCB $1,$2,$41,$15,$42,$17
    1069/    EF4F : 01 02 41 15 42 02    FCB $1,$2,$41,$15,$42,$2
    1072/    EF55 : 01 02 41 03 42 3F    FCB $1,$2,$41,$3,$42,$3F
    1075/    EF5B : 02 02 43 15 44 2A    FCB $2,$2,$43,$15,$44,$2A
    1078/    EF61 : 02 02 43 15 44 2E    FCB $2,$2,$43,$15,$44,$2E
    1081/    EF67 : 02 02 43 15 44 1D    FCB $2,$2,$43,$15,$44,$1D
    1084/    EF6D : 02 02 43 15 44 08    FCB $2,$2,$43,$15,$44,$8
    1087/    EF73 : 02 02 43 0C 44 3F    FCB $2,$2,$43,$C,$44,$3F
    1090/    EF79 : 03 02 45 15 46 2A    FCB $3,$2,$45,$15,$46,$2A
    1093/    EF7F : 03 02 45 15 46 3B    FCB $3,$2,$45,$15,$46,$3B
    1096/    EF85 : 03 02 45 15 46 37    FCB $3,$2,$45,$15,$46,$37
    1099/    EF8B : 03 02 45 15 46 22    FCB $3,$2,$45,$15,$46,$22
    1102/    EF91 : 03 02 45 32 46 3F    FCB $3,$2,$45,$32,$46,$3F
    1105/    EF97 : 04 01 4C 2A          FCB $4,$1,$4C,$2A
    1108/    EF9B : 04 01 4C 2F          FCB $4,$1,$4C,$2F
    1111/    EF9F : 04 01 4C 1F          FCB $4,$1,$4C,$1F
    1114/    EFA3 : 04 01 4C 0A          FCB $4,$1,$4C,$A
    1117/    EFA7 : 04 01 4C 0F          FCB $4,$1,$4C,$F
    1120/    EFAB : 05 03 53 3B 54 20    FCB $5,$3,$53,$3B,$54,$20,$55,$2
    1123/    EFB3 : 05 03 53 3B 54 02    FCB $5,$3,$53,$3B,$54,$2,$55,$8
    1126/    EFBB : 05 03 53 3B 54 08    FCB $5,$3,$53,$3B,$54,$8,$55,$A
    1129/    EFC3 : 05 03 53 3B 54 0A    FCB $5,$3,$53,$3B,$54,$A,$55,$20
    1132/    EFCB : 05 03 53 21 54 32    FCB $5,$3,$53,$21,$54,$32,$55,$20
    1135/    EFD3 : 05 03 53 0B 54 02    FCB $5,$3,$53,$B,$54,$2,$55,$F
    1138/    EFDB : 06 05 50 21 52 20    FCB $6,$5,$50,$21,$52,$20,$51,$2,$4E,$17,$4F,$2B
    1141/    EFE7 : 06 05 50 21 52 20    FCB $6,$5,$50,$21,$52,$20,$51,$2,$4E,$1F,$4F,$2F
    1144/    EFF3 : 06 05 50 21 52 20    FCB $6,$5,$50,$21,$52,$20,$51,$2,$4E,$35,$4F,$3A
    1147/    EFFF : 01 EF                FDB color_Basic_Head
    1148/    F001 : 0D EF                FDB color_Head_MKII
    1149/    F003 : 19 EF                FDB color_Head_MKIII
    1150/    F005 : 25 EF                FDB color_Head_MKIV
    1151/    F007 : 31 EF                FDB color_Lightning
    1152/    F009 : 3D EF                FDB color_Basic_Body
    1153/    F00B : 43 EF                FDB color_Tin_Body
    1154/    F00D : 49 EF                FDB color_Iron_Body
    1155/    F00F : 4F EF                FDB color_Steel_Body
    1156/    F011 : 55 EF                FDB color_Fortress
    1157/    F013 : 5B EF                FDB color_Basic_Legs
    1158/    F015 : 61 EF                FDB color_Fast_Legs
    1159/    F017 : 67 EF                FDB color_Quick_Legs
    1160/    F019 : 6D EF                FDB color_Agile_Legs
    1161/    F01B : 73 EF                FDB color_Mustang
    1162/    F01D : 79 EF                FDB color_Basic_Gun
    1163/    F01F : 7F EF                FDB color_Blaster
    1164/    F021 : 85 EF                FDB color_Laser
    1165/    F023 : 8B EF                FDB color_Phaser
    1166/    F025 : 91 EF                FDB color_Death_Ray
    1167/    F027 : 97 EF                FDB color_Basic_Tool
    1168/    F029 : 9B EF                FDB color_Rock_Pick
    1169/    F02B : 9F EF                FDB color_Rock_Drill
    1170/    F02D : A3 EF                FDB color_Rock_Borer
    1171/    F02F : A7 EF                FDB color_Laser_Bit
    1174/    F031 : AB EF                FDB color_Ground_0
    1175/    F033 : B3 EF                FDB color_Ground_90
    1176/    F035 : BB EF                FDB color_Ground_180
    1177/    F037 : C3 EF                FDB color_Ground_270
    1178/    F039 : CB EF                FDB color_Rock
    1179/    F03B : D3 EF                FDB color_Lava
    1180/    F03D : DB EF                FDB color_Crystal_red
    1181/    F03F : E7 EF                FDB color_Crystal_yellow
    1182/    F041 : F3 EF                FDB color_Crystal_blue
    1185/    F043 : 2A                   FCB $2A
    1186/    F044 : 0C                   FCB $C
    1187/    F045 : 30                   FCB $30
    1188/    F046 : 32                   FCB $32
    1189/    F047 : 0F                   FCB $F
    1192/    F048 : 17                   FCB $17
    1193/    F049 : 35                   FCB $35
    1194/    F04A : 1F                   FCB $1F
    1362/     CDE :                     EnableGfxRAM:
    1363/     CDE : A9 04                LDA #$4
    1364/     CE0 : 8D E1 FF             STA $FFE1
    1365/     CE3 : 85 01                STA RB2_COPY
    1366/     CE5 : A9 05                LDA #$5
    1367/     CE7 : 8D E2 FF             STA $FFE2
    1368/     CEA : 85 02                STA RB3_COPY
    1369/     CEC : 60                   RTS
    1371/     CED :                     EnableBankROM:
    1372/     CED : A9 01                LDA #$1
    1373/     CEF : 8D E1 FF             STA $FFE1
    1374/     CF2 : 85 01                STA RB2_COPY
    1375/     CF4 : A9 02                LDA #$2
    1376/     CF6 : 8D E2 FF             STA $FFE2
    1377/     CF9 : 85 02                STA RB3_COPY
    1378/     CFB : 60                   RTS
    1380/     CFC :                     Setup:
    1381/     CFC : A2 00                LDX #$0
    1382/     CFE : A9 00                LDA #$0
    1383/     D00 : 8D E0 FF             STA $FFE0
    1384/     D03 : 85 00                STA RB1_COPY
    1385/     D05 : 20 DE 0C             JSR EnableGfxRAM
    1386/     D08 : A9 20                LDA #$20
    1387/     D0A : 85 08                STA rand_val
    1388/     D0C : A9 00                LDA #$0
    1389/     D0E : 85 09                STA rand_val+$1
    1390/     D10 : 60                   RTS
    1392/     D11 :                     clrscr:
    1393/     D11 : A2 80                LDX #$80
    1394/     D13 : A9 00                LDA #$0
    1395/     D15 : 85 05                STA dummy
    1396/     D17 : A9 40                LDA #$40
    1397/     D19 : 85 06                STA dummy+$1
    1398/     D1B : A5 05                LDA dummy
    1399/     D1D : A0 00                LDY #$0
    1402/     D1F : 91 05                STA (dummy),Y
    1403/     D21 : 88                   DEY
    1404/     D22 : D0 FB                BNE .loop_inner
    1405/     D24 : E6 06                INC dummy+$1
    1406/     D26 : CA                   DEX
    1407/     D27 : D0 F6                BNE .loop_outer
    1408/     D29 : 60                   RTS
    1410/     D2A :                     CalcXY:
    1411/     D2A : A5 61                LDA $61 ;posx
    1412/     D2C : 85 06                STA ret_val
    1413/     D2E : A9 40                LDA #$40
    1414/     D30 : 18                   CLC
    1415/     D31 : 65 62                ADC $62 ;posy
    1416/     D33 : 85 07                STA ret_val+$1
    1417/     D35 : 60                   RTS
    1419/     D36 :                     TileAddress:
    1420/     D36 : A5 61                LDA $61 ;tile_id
    1421/     D38 : 0A                   ASL
    1422/     D39 : 69 9B                ADC #tiles # $100
    1423/     D3B : 85 06                STA ret_val
    1424/     D3D : A9 00                LDA #$0
    1425/     D3F : 69 EE                ADC #tiles>>$8
    1426/     D41 : 85 07                STA ret_val+$1
    1427/     D43 : B2 06                LDA (ret_val)
    1428/     D45 : 48                   PHA
    1429/     D46 : E6 06                INC ret_val
    1430/     D48 : D0 02                BNE .._304.no_carry
    1431/     D4A : E6 07                INC ret_val+$1
    1433/     D4C : B2 06                LDA (ret_val)
    1434/     D4E : 85 07                STA ret_val+$1
    1435/     D50 : 68                   PLA
    1436/     D51 : 85 06                STA ret_val
    1437/     D53 : 60                   RTS
    1439/     D54 :                     CopyTile:
    1440/     D54 : A5 54                LDA $54 ;dest_id
    1441/     D56 : 85 61                STA $61 ;TileAddress.tile_id
    1442/     D58 : 20 36 0D             JSR TileAddress
    1443/     D5B : A5 06                LDA ret_val
    1444/     D5D : 85 56                STA $56 ;dest_ptr
    1445/     D5F : A5 07                LDA ret_val+$1
    1446/     D61 : 85 57                STA $57 ;dest_ptr
    1447/     D63 : A5 55                LDA $55 ;source_id
    1448/     D65 : 85 61                STA $61 ;TileAddress.tile_id
    1449/     D67 : 20 36 0D             JSR TileAddress
    1450/     D6A : A5 06                LDA ret_val
    1451/     D6C : 85 58                STA $58 ;source_ptr
    1452/     D6E : A5 07                LDA ret_val+$1
    1453/     D70 : 85 59                STA $59 ;source_ptr
    1454/     D72 : A0 00                LDY #$0
    1455/     D74 : B1 58                LDA ($58),Y ;source_ptr
    1456/     D76 : 91 56                STA ($56),Y ;dest_ptr
    1457/     D78 : C8                   INY
    1458/     D79 : B1 58                LDA ($58),Y ;source_ptr
    1459/     D7B : 91 56                STA ($56),Y ;dest_ptr
    1460/     D7D : AA                   TAX
    1461/     D7E : C8                   INY
    1463/     D7F : B1 58                LDA ($58),Y ;source_ptr
    1464/     D81 : 91 56                STA ($56),Y ;dest_ptr
    1465/     D83 : D0 03                BNE .._410.skip
    1466/     D85 : 4C 93 0D             JMP .if0
    1468/     D88 : C8                   INY
    1469/     D89 : B1 58                LDA ($58),Y ;source_ptr
    1470/     D8B : 91 56                STA ($56),Y ;dest_ptr
    1471/     D8D : C8                   INY
    1472/     D8E : 80 EF                BRA .ct.loop
    1473/     D90 : 4C B8 0D             JMP .if1
    1474/     D93 :                      .if0:
    1475/     D93 : CA                   DEX
    1476/     D94 : F0 22                BEQ .ct.done
    1477/     D96 : C8                   INY
    1478/     D97 : C0 C8                CPY #$C8
    1479/     D99 : 90 E4                BCC .ct.loop
    1480/     D9B : 98                   TYA
    1481/     D9C : 38                   SEC
    1482/     D9D : E9 C8                SBC #$C8
    1483/     D9F : A8                   TAY
    1484/     DA0 : A9 C8                LDA #$C8
    1485/     DA2 : 18                   CLC
    1486/     DA3 : 65 58                ADC $58 ;source_ptr
    1487/     DA5 : 85 58                STA $58 ;source_ptr
    1488/     DA7 : 90 02                BCC .._413.skip
    1489/     DA9 : E6 59                INC $59 ;source_ptr
    1491/     DAB : A9 C8                LDA #$C8
    1492/     DAD : 18                   CLC
    1493/     DAE : 65 56                ADC $56 ;dest_ptr
    1494/     DB0 : 85 56                STA $56 ;dest_ptr
    1495/     DB2 : 90 02                BCC .._423.skip
    1496/     DB4 : E6 57                INC $57 ;dest_ptr
    1498/     DB6 : 80 C7                BRA .ct.loop
    1499/     DB8 :                      .if1:
    1501/     DB8 : 60                   RTS
    1503/     DB9 :                     DrawTile:
    1504/     DB9 : A5 55                LDA $55 ;xpos
    1505/     DBB : 85 61                STA $61 ;CalcXY.posx
    1506/     DBD : A5 56                LDA $56 ;ypos
    1507/     DBF : 85 62                STA $62 ;CalcXY.posy
    1508/     DC1 : 20 2A 0D             JSR CalcXY
    1509/     DC4 : A5 06                LDA ret_val
    1510/     DC6 : 85 5B                STA $5B ;gfx_ptr
    1511/     DC8 : A5 07                LDA ret_val+$1
    1512/     DCA : 85 5C                STA $5C ;gfx_ptr
    1513/     DCC : A9 9B                LDA # (tiles) # $100
    1514/     DCE : 85 5D                STA $5D ;tile_ptr
    1515/     DD0 : A9 EE                LDA # (tiles)/$100
    1516/     DD2 : 85 5E                STA $5E ;tile_ptr
    1517/     DD4 : A5 54                LDA $54 ;tile
    1518/     DD6 : 85 61                STA $61 ;TileAddress.tile_id
    1519/     DD8 : 20 36 0D             JSR TileAddress
    1520/     DDB : A5 06                LDA ret_val
    1521/     DDD : 85 5D                STA $5D ;tile_ptr
    1522/     DDF : A5 07                LDA ret_val+$1
    1523/     DE1 : 85 5E                STA $5E ;tile_ptr
    1524/     DE3 : B2 5D                LDA ($5D) ;tile_ptr
    1525/     DE5 : 85 57                STA $57 ;t_width
    1526/     DE7 : A0 01                LDY #$1
    1527/     DE9 : B1 5D                LDA ($5D),Y ;tile_ptr
    1528/     DEB : AA                   TAX
    1529/     DEC : C8                   INY
    1531/     DED : B1 5D                LDA ($5D),Y ;tile_ptr
    1532/     DEF : 85 59                STA $59 ;t_count
    1533/     DF1 : C8                   INY
    1534/     DF2 : F0 03                BEQ .._617.skip
    1535/     DF4 : 4C F9 0D             JMP .if2
    1537/     DF7 : E6 5E                INC $5E ;tile_ptr
    1538/     DF9 :                      .if2:
    1539/     DF9 : C9 00                CMP #$0
    1540/     DFB : F0 03                BEQ .._622.skip
    1541/     DFD : 4C 16 0E             JMP .if3
    1543/     E00 : CA                   DEX
    1544/     E01 : F0 4B                BEQ .dt.return
    1545/     E03 : A9 00                LDA #$0
    1546/     E05 : 38                   SEC
    1547/     E06 : E5 57                SBC $57 ;t_width
    1548/     E08 : 18                   CLC
    1549/     E09 : 65 5B                ADC $5B ;gfx_ptr
    1550/     E0B : 85 5B                STA $5B ;gfx_ptr
    1551/     E0D : 90 02                BCC .._623.skip
    1552/     E0F : E6 5C                INC $5C ;gfx_ptr
    1554/     E11 : 80 DA                BRA .dt.loop
    1555/     E13 : 4C 4C 0E             JMP .if4
    1556/     E16 :                      .if3:
    1557/     E16 : B1 5D                LDA ($5D),Y ;tile_ptr
    1558/     E18 : 85 5A                STA $5A ;t_color
    1559/     E1A : C8                   INY
    1560/     E1B : F0 03                BEQ .._643.skip
    1561/     E1D : 4C 22 0E             JMP .if5
    1563/     E20 : E6 5E                INC $5E ;tile_ptr
    1564/     E22 :                      .if5:
    1565/     E22 : C9 40                CMP #$40
    1566/     E24 : F0 03                BEQ .._647.skip
    1567/     E26 : 4C 39 0E             JMP .if6
    1569/     E29 : A5 59                LDA $59 ;t_count
    1570/     E2B : 18                   CLC
    1571/     E2C : 65 5B                ADC $5B ;gfx_ptr
    1572/     E2E : 85 5B                STA $5B ;gfx_ptr
    1573/     E30 : 90 02                BCC .._648.skip
    1574/     E32 : E6 5C                INC $5C ;gfx_ptr
    1576/     E34 : 80 B7                BRA .dt.loop
    1577/     E36 : 4C 4C 0E             JMP .if7
    1578/     E39 :                      .if6:
    1579/     E39 : 5A                   PHY
    1580/     E3A : A4 59                LDY $59 ;t_count
    1581/     E3C : 88                   DEY
    1582/     E3D : A5 5A                LDA $5A ;t_color
    1584/     E3F : 91 5B                STA ($5B),Y ;gfx_ptr
    1585/     E41 : 88                   DEY
    1586/     E42 : 10 FB                BPL .color.for
    1587/     E44 : A5 59                LDA $59 ;t_count
    1588/     E46 : 18                   CLC
    1589/     E47 : 65 5B                ADC $5B ;gfx_ptr
    1590/     E49 : 85 5B                STA $5B ;gfx_ptr
    1591/     E4B : 7A                   PLY
    1592/     E4C :                      .if7:
    1593/     E4C :                      .if4:
    1594/     E4C : 80 9F                BRA .dt.loop
    1596/     E4E : 60                   RTS
    1598/     E4F :                     DrawTile1bpp:
    1599/     E4F : 64 4D                STZ $4D ;byte_count
    1600/     E51 : 64 4E                STZ $4E ;bit_count
    1601/     E53 : A5 41                LDA $41 ;xpos
    1602/     E55 : 85 61                STA $61 ;CalcXY.posx
    1603/     E57 : A5 42                LDA $42 ;ypos
    1604/     E59 : 85 62                STA $62 ;CalcXY.posy
    1605/     E5B : 20 2A 0D             JSR CalcXY
    1606/     E5E : A5 06                LDA ret_val
    1607/     E60 : 85 45                STA $45 ;gfx_ptr
    1608/     E62 : A5 07                LDA ret_val+$1
    1609/     E64 : 85 46                STA $46 ;gfx_ptr
    1610/     E66 : A9 9B                LDA # (tiles) # $100
    1611/     E68 : 85 47                STA $47 ;tile_ptr
    1612/     E6A : A9 EE                LDA # (tiles)/$100
    1613/     E6C : 85 48                STA $48 ;tile_ptr
    1614/     E6E : A5 40                LDA $40 ;tile
    1615/     E70 : 85 61                STA $61 ;TileAddress.tile_id
    1616/     E72 : 20 36 0D             JSR TileAddress
    1617/     E75 : A5 06                LDA ret_val
    1618/     E77 : 85 47                STA $47 ;tile_ptr
    1619/     E79 : A5 07                LDA ret_val+$1
    1620/     E7B : 85 48                STA $48 ;tile_ptr
    1621/     E7D : B2 47                LDA ($47) ;tile_ptr
    1622/     E7F : 85 49                STA $49 ;t_width
    1623/     E81 : A0 01                LDY #$1
    1624/     E83 : B1 47                LDA ($47),Y ;tile_ptr
    1625/     E85 : 85 4A                STA $4A ;t_height
    1626/     E87 : 85 4C                STA $4C ;row_count
    1627/     E89 : C8                   INY
    1628/     E8A : B1 47                LDA ($47),Y ;tile_ptr
    1629/     E8C : 85 4B                STA $4B ;edge_style
    1630/     E8E : C8                   INY
    1632/     E8F : E0 00                CPX #$0
    1633/     E91 : F0 03                BEQ .._1002.skip
    1634/     E93 : 4C 17 0F             JMP .if8
    1636/     E96 : B1 47                LDA ($47),Y ;tile_ptr
    1637/     E98 : 85 4F                STA $4F ;t_pixel
    1638/     E9A : C8                   INY
    1639/     E9B : A5 4E                LDA $4E ;bit_count
    1640/     E9D : F0 03                BEQ .._1005.skip
    1641/     E9F : 4C 17 0F             JMP .if9
    1643/     EA2 : A5 4B                LDA $4B ;edge_style
    1644/     EA4 : F0 03                BEQ .._1008.skip
    1645/     EA6 : 4C B0 0E             JMP .if10
    1647/     EA9 : A9 00                LDA #$0
    1648/     EAB : 85 51                STA $51 ;trans_row
    1649/     EAD : 4C 17 0F             JMP .if11
    1650/     EB0 :                      .if10:
    1651/     EB0 : A5 4C                LDA $4C ;row_count
    1652/     EB2 : C9 01                CMP #$1
    1653/     EB4 : F0 04                BEQ .dt1.row1
    1654/     EB6 : C5 4A                CMP $4A ;t_height
    1655/     EB8 : D0 29                BNE .dt1.row1_done
    1657/     EBA : 64 52                STZ $52 ;t0
    1658/     EBC : A5 49                LDA $49 ;t_width
    1659/     EBE : 3A                   DEC
    1660/     EBF : 85 53                STA $53 ;t1
    1661/     EC1 : A5 4B                LDA $4B ;edge_style
    1662/     EC3 : C9 02                CMP #$2
    1663/     EC5 : F0 03                BEQ .._1037.skip
    1664/     EC7 : 4C D7 0E             JMP .if12
    1666/     ECA : A9 01                LDA #$1
    1667/     ECC : 85 54                STA $54 ;t2
    1668/     ECE : A5 49                LDA $49 ;t_width
    1669/     ED0 : 3A                   DEC
    1670/     ED1 : 3A                   DEC
    1671/     ED2 : 85 55                STA $55 ;t3
    1672/     ED4 : 4C DD 0E             JMP .if13
    1673/     ED7 :                      .if12:
    1674/     ED7 : A9 FF                LDA #$FF
    1675/     ED9 : 85 54                STA $54 ;t2
    1676/     EDB : 85 55                STA $55 ;t3
    1677/     EDD :                      .if13:
    1678/     EDD : A9 FF                LDA #$FF
    1679/     EDF : 85 51                STA $51 ;trans_row
    1680/     EE1 : 80 34                BRA .dt1.rows_done
    1682/     EE3 : A5 4C                LDA $4C ;row_count
    1683/     EE5 : C9 02                CMP #$2
    1684/     EE7 : F0 09                BEQ .dt1.row2a
    1685/     EE9 : A5 4A                LDA $4A ;t_height
    1686/     EEB : 3A                   DEC
    1687/     EEC : C5 4C                CMP $4C ;row_count
    1688/     EEE : F0 02                BEQ .dt1.row2a
    1689/     EF0 : 80 21                BRA .dt1.row_else
    1691/     EF2 : A5 4B                LDA $4B ;edge_style
    1692/     EF4 : C9 02                CMP #$2
    1693/     EF6 : F0 03                BEQ .._1067.skip
    1694/     EF8 : 4C 0F 0F             JMP .if14
    1696/     EFB : 64 52                STZ $52 ;t0
    1697/     EFD : A5 49                LDA $49 ;t_width
    1698/     EFF : 3A                   DEC
    1699/     F00 : 85 53                STA $53 ;t1
    1700/     F02 : A9 FF                LDA #$FF
    1701/     F04 : 85 54                STA $54 ;t2
    1702/     F06 : 85 55                STA $55 ;t3
    1703/     F08 : A9 FF                LDA #$FF
    1704/     F0A : 85 51                STA $51 ;trans_row
    1705/     F0C : 4C 11 0F             JMP .if15
    1706/     F0F :                      .if14:
    1707/     F0F : 80 02                BRA .dt1.row_else
    1708/     F11 :                      .if15:
    1709/     F11 : 80 04                BRA .dt1.rows_done
    1711/     F13 : A9 00                LDA #$0
    1712/     F15 : 85 51                STA $51 ;trans_row
    1714/     F17 :                      .if11:
    1715/     F17 :                      .if9:
    1716/     F17 :                      .if8:
    1717/     F17 : A9 00                LDA #$0
    1718/     F19 : 85 50                STA $50 ;skip_pixel
    1719/     F1B : A5 51                LDA $51 ;trans_row
    1720/     F1D : D0 03                BNE .._1132.skip
    1721/     F1F : 4C 4C 0F             JMP .if16
    1723/     F22 : A5 4E                LDA $4E ;bit_count
    1724/     F24 : 80 03                BRA .s1c0
    1725/     F26 : 4C 4C 0F             JMP .s1done
    1726/     F29 :                      .s1c0:
    1727/     F29 : C5 52                CMP $52 ;t0
    1728/     F2B : F0 03                BEQ .._1135.skip
    1729/     F2D : 4C 32 0F             JMP .s1c1
    1731/     F30 : 80 16                BRA .s1b1
    1732/     F32 :                      .s1c1:
    1733/     F32 : C5 53                CMP $53 ;t1
    1734/     F34 : D0 04                BNE .s1c2
    1735/     F36 : 80 10                BRA .s1b1
    1736/     F38 : 80 0E                BRA .s1b1
    1737/     F3A :                      .s1c2:
    1738/     F3A : C5 54                CMP $54 ;t2
    1739/     F3C : D0 04                BNE .s1c3
    1740/     F3E : 80 08                BRA .s1b1
    1741/     F40 : 80 06                BRA .s1b1
    1742/     F42 :                      .s1c3:
    1743/     F42 : C5 55                CMP $55 ;t3
    1744/     F44 : D0 06                BNE .s1c4
    1745/     F46 : 80 00                BRA .s1b1
    1746/     F48 :                      .s1b1:
    1747/     F48 : A9 FF                LDA #$FF
    1748/     F4A : 85 50                STA $50 ;skip_pixel
    1749/     F4C :                      .s1c4:
    1750/     F4C :                      .s1done:
    1751/     F4C :                      .if16:
    1753/     F4C : A5 50                LDA $50 ;skip_pixel
    1754/     F4E : F0 03                BEQ .._1166.skip
    1755/     F50 : 4C 6A 0F             JMP .if17
    1757/     F53 : A5 4F                LDA $4F ;t_pixel
    1758/     F55 : 30 03                BMI .._1168.skip
    1759/     F57 : 4C 5F 0F             JMP .if18
    1761/     F5A : A5 43                LDA $43 ;color1
    1762/     F5C : 4C 61 0F             JMP .if19
    1763/     F5F :                      .if18:
    1764/     F5F : A5 44                LDA $44 ;color2
    1765/     F61 :                      .if19:
    1766/     F61 : C9 40                CMP #$40
    1767/     F63 : D0 03                BNE .._1174.skip
    1768/     F65 : 4C 6A 0F             JMP .if20
    1770/     F68 : 92 45                STA ($45) ;gfx_ptr
    1771/     F6A :                      .if20:
    1772/     F6A :                      .if17:
    1773/     F6A : E6 45                INC $45 ;gfx_ptr
    1774/     F6C : D0 02                BNE .._1179.no_carry
    1775/     F6E : E6 46                INC $46 ;gfx_ptr
    1777/     F70 : 06 4F                ASL $4F ;t_pixel
    1778/     F72 : E6 4E                INC $4E ;bit_count
    1779/     F74 : A5 4E                LDA $4E ;bit_count
    1780/     F76 : C5 49                CMP $49 ;t_width
    1781/     F78 : F0 03                BEQ .._1181.skip
    1782/     F7A : 4C 94 0F             JMP .if21
    1784/     F7D : 64 4E                STZ $4E ;bit_count
    1785/     F7F : A2 00                LDX #$0
    1786/     F81 : C6 4C                DEC $4C ;row_count
    1787/     F83 : A9 00                LDA #$0
    1788/     F85 : 38                   SEC
    1789/     F86 : E5 49                SBC $49 ;t_width
    1790/     F88 : 18                   CLC
    1791/     F89 : 65 45                ADC $45 ;gfx_ptr
    1792/     F8B : 85 45                STA $45 ;gfx_ptr
    1793/     F8D : 90 02                BCC .._1199.skip
    1794/     F8F : E6 46                INC $46 ;gfx_ptr
    1796/     F91 : 4C A1 0F             JMP .if22
    1797/     F94 :                      .if21:
    1798/     F94 : E0 07                CPX #$7
    1799/     F96 : F0 03                BEQ .._1228.skip
    1800/     F98 : 4C A0 0F             JMP .if23
    1802/     F9B : A2 00                LDX #$0
    1803/     F9D : 4C A1 0F             JMP .if24
    1804/     FA0 :                      .if23:
    1805/     FA0 : E8                   INX
    1806/     FA1 :                      .if24:
    1807/     FA1 :                      .if22:
    1808/     FA1 : A5 4C                LDA $4C ;row_count
    1809/     FA3 : F0 03                BEQ .._1235.skip
    1810/     FA5 : 4C 8F 0E             JMP .dt1.loop
    1812/     FA8 : 60                   RTS
    1814/     FA9 :                     RotateTile90:
    1815/     FA9 : A5 23                LDA $23 ;src
    1816/     FAB : 85 54                STA $54 ;DrawTile.tile
    1817/     FAD : 64 55                STZ $55 ;DrawTile.xpos
    1818/     FAF : 64 56                STZ $56 ;DrawTile.ypos
    1819/     FB1 : 20 B9 0D             JSR DrawTile
    1820/     FB4 : A5 22                LDA $22 ;dest
    1821/     FB6 : 85 61                STA $61 ;TileAddress.tile_id
    1822/     FB8 : 20 36 0D             JSR TileAddress
    1823/     FBB : A5 06                LDA ret_val
    1824/     FBD : 85 26                STA $26 ;dest_ptr
    1825/     FBF : A5 07                LDA ret_val+$1
    1826/     FC1 : 85 27                STA $27 ;dest_ptr
    1827/     FC3 : A5 23                LDA $23 ;src
    1828/     FC5 : 85 61                STA $61 ;TileAddress.tile_id
    1829/     FC7 : 20 36 0D             JSR TileAddress
    1830/     FCA : A5 06                LDA ret_val
    1831/     FCC : 85 24                STA $24 ;gfx_ptr
    1832/     FCE : A5 07                LDA ret_val+$1
    1833/     FD0 : 85 25                STA $25 ;gfx_ptr
    1834/     FD2 : A0 01                LDY #$1
    1835/     FD4 : B1 24                LDA ($24),Y ;gfx_ptr
    1836/     FD6 : 85 29                STA $29 ;row_count
    1837/     FD8 : 91 26                STA ($26),Y ;dest_ptr
    1838/     FDA : 88                   DEY
    1839/     FDB : B1 24                LDA ($24),Y ;gfx_ptr
    1840/     FDD : 85 28                STA $28 ;t_width
    1841/     FDF : 91 26                STA ($26),Y ;dest_ptr
    1842/     FE1 : A0 02                LDY #$2
    1843/     FE3 : 64 24                STZ $24 ;gfx_ptr
    1845/     FE5 : A5 28                LDA $28 ;t_width
    1846/     FE7 : 18                   CLC
    1847/     FE8 : 69 3F                ADC #$3F
    1848/     FEA : 85 25                STA $25 ;gfx_ptr
    1849/     FEC : B2 24                LDA ($24) ;gfx_ptr
    1850/     FEE : 85 2B                STA $2B ;new_color
    1851/     FF0 : A9 01                LDA #$1
    1852/     FF2 : 85 2C                STA $2C ;new_count
    1853/     FF4 : C6 25                DEC $25 ;gfx_ptr
    1854/     FF6 : A5 28                LDA $28 ;t_width
    1855/     FF8 : 3A                   DEC
    1856/     FF9 : A6 28                LDX $28 ;t_width
    1857/     FFB : CA                   DEX
    1859/     FFC : B2 24                LDA ($24) ;gfx_ptr
    1860/     FFE : C5 2B                CMP $2B ;new_color
    1861/    1000 : F0 03                BEQ .._1468.skip
    1862/    1002 : 4C 0A 10             JMP .if25
    1864/    1005 : E6 2C                INC $2C ;new_count
    1865/    1007 : 4C 1C 10             JMP .if26
    1866/    100A :                      .if25:
    1867/    100A : 48                   PHA
    1868/    100B : A5 2C                LDA $2C ;new_count
    1869/    100D : 91 26                STA ($26),Y ;dest_ptr
    1870/    100F : C8                   INY
    1871/    1010 : A5 2B                LDA $2B ;new_color
    1872/    1012 : 91 26                STA ($26),Y ;dest_ptr
    1873/    1014 : C8                   INY
    1874/    1015 : 68                   PLA
    1875/    1016 : 85 2B                STA $2B ;new_color
    1876/    1018 : A9 01                LDA #$1
    1877/    101A : 85 2C                STA $2C ;new_count
    1878/    101C :                      .if26:
    1879/    101C : C6 25                DEC $25 ;gfx_ptr
    1880/    101E : CA                   DEX
    1881/    101F : D0 DB                BNE .rt.loop_inner
    1882/    1021 : A5 2C                LDA $2C ;new_count
    1883/    1023 : 91 26                STA ($26),Y ;dest_ptr
    1884/    1025 : C8                   INY
    1885/    1026 : A5 2B                LDA $2B ;new_color
    1886/    1028 : 91 26                STA ($26),Y ;dest_ptr
    1887/    102A : C8                   INY
    1888/    102B : A9 00                LDA #$0
    1889/    102D : 91 26                STA ($26),Y ;dest_ptr
    1890/    102F : C8                   INY
    1891/    1030 : E6 24                INC $24 ;gfx_ptr
    1892/    1032 : C0 C8                CPY #$C8
    1893/    1034 : B0 03                BCS .._1474.skip
    1894/    1036 : 4C 49 10             JMP .if27
    1896/    1039 : 98                   TYA
    1897/    103A : 38                   SEC
    1898/    103B : E9 C8                SBC #$C8
    1899/    103D : A8                   TAY
    1900/    103E : A9 C8                LDA #$C8
    1901/    1040 : 18                   CLC
    1902/    1041 : 65 26                ADC $26 ;dest_ptr
    1903/    1043 : 85 26                STA $26 ;dest_ptr
    1904/    1045 : 90 02                BCC .._1475.skip
    1905/    1047 : E6 27                INC $27 ;dest_ptr
    1907/    1049 :                      .if27:
    1908/    1049 : C6 29                DEC $29 ;row_count
    1909/    104B : D0 98                BNE .rt.loop_outer
    1910/    104D : 60                   RTS
    1912/    104E :                     ColorTile:
    1913/    104E : A5 54                LDA $54 ;tile
    1914/    1050 : 85 61                STA $61 ;TileAddress.tile_id
    1915/    1052 : 20 36 0D             JSR TileAddress
    1916/    1055 : A5 06                LDA ret_val
    1917/    1057 : 85 56                STA $56 ;tile_ptr
    1918/    1059 : A5 07                LDA ret_val+$1
    1919/    105B : 85 57                STA $57 ;tile_ptr
    1920/    105D : A5 54                LDA $54 ;tile
    1921/    105F : 80 03                BRA .s2c0
    1922/    1061 : 4C 8E 10             JMP .s2done
    1923/    1064 :                      .s2c0:
    1924/    1064 : C9 09                CMP #$9
    1925/    1066 : F0 03                BEQ .._1563.skip
    1926/    1068 : 4C 6D 10             JMP .s2c1
    1928/    106B : 80 0E                BRA .s2b1
    1929/    106D :                      .s2c1:
    1930/    106D : C9 0A                CMP #$A
    1931/    106F : D0 04                BNE .s2c2
    1932/    1071 : 80 08                BRA .s2b1
    1933/    1073 : 80 06                BRA .s2b1
    1934/    1075 :                      .s2c2:
    1935/    1075 : C9 0B                CMP #$B
    1936/    1077 : D0 0D                BNE .s2c3
    1937/    1079 : 80 00                BRA .s2b1
    1938/    107B :                      .s2b1:
    1939/    107B : A9 FF                LDA # (item_colors) # $100
    1940/    107D : 85 58                STA $58 ;color_table
    1941/    107F : A9 EF                LDA # (item_colors)/$100
    1942/    1081 : 85 59                STA $59 ;color_table
    1943/    1083 : 4C 8E 10             JMP .s2done
    1944/    1086 :                      .s2c3:
    1945/    1086 : A9 31                LDA # (tile_colors) # $100
    1946/    1088 : 85 58                STA $58 ;color_table
    1947/    108A : A9 F0                LDA # (tile_colors)/$100
    1948/    108C : 85 59                STA $59 ;color_table
    1949/    108E :                      .s2c4:
    1950/    108E :                      .s2done:
    1951/    108E : A5 55                LDA $55 ;color_index
    1952/    1090 : 0A                   ASL
    1953/    1091 : 18                   CLC
    1954/    1092 : 65 58                ADC $58 ;color_table
    1955/    1094 : 85 58                STA $58 ;color_table
    1956/    1096 : 90 02                BCC .._1608.skip
    1957/    1098 : E6 59                INC $59 ;color_table
    1959/    109A : B2 58                LDA ($58) ;color_table
    1960/    109C : 48                   PHA
    1961/    109D : A0 01                LDY #$1
    1962/    109F : B1 58                LDA ($58),Y ;color_table
    1963/    10A1 : 85 59                STA $59 ;color_table
    1964/    10A3 : 68                   PLA
    1965/    10A4 : 85 58                STA $58 ;color_table
    1966/    10A6 : B1 56                LDA ($56),Y ;tile_ptr
    1967/    10A8 : 85 5A                STA $5A ;row_count
    1968/    10AA : B1 58                LDA ($58),Y ;color_table
    1969/    10AC : 85 5C                STA $5C ;c_size
    1970/    10AE : C8                   INY
    1972/    10AF : B1 56                LDA ($56),Y ;tile_ptr
    1973/    10B1 : F0 03                BEQ .._1623.skip
    1974/    10B3 : 4C D5 10             JMP .if28
    1976/    10B6 : C8                   INY
    1977/    10B7 : C0 C8                CPY #$C8
    1978/    10B9 : B0 03                BCS .._1626.skip
    1979/    10BB : 4C CE 10             JMP .if29
    1981/    10BE : 98                   TYA
    1982/    10BF : 38                   SEC
    1983/    10C0 : E9 C8                SBC #$C8
    1984/    10C2 : A8                   TAY
    1985/    10C3 : A9 C8                LDA #$C8
    1986/    10C5 : 18                   CLC
    1987/    10C6 : 65 56                ADC $56 ;tile_ptr
    1988/    10C8 : 85 56                STA $56 ;tile_ptr
    1989/    10CA : 90 02                BCC .._1627.skip
    1990/    10CC : E6 57                INC $57 ;tile_ptr
    1992/    10CE :                      .if29:
    1993/    10CE : C6 5A                DEC $5A ;row_count
    1994/    10D0 : D0 DD                BNE .color.loop1
    1995/    10D2 : 4C 04 11             JMP .if30
    1996/    10D5 :                      .if28:
    1997/    10D5 : C8                   INY
    1998/    10D6 : B1 56                LDA ($56),Y ;tile_ptr
    1999/    10D8 : 85 5B                STA $5B ;t_color
    2000/    10DA : C9 41                CMP #$41
    2001/    10DC : B0 03                BCS .._1647.skip
    2002/    10DE : 4C 01 11             JMP .if31
    2004/    10E1 : 5A                   PHY
    2005/    10E2 : A0 02                LDY #$2
    2006/    10E4 : A6 5C                LDX $5C ;c_size
    2008/    10E6 : A5 5B                LDA $5B ;t_color
    2009/    10E8 : D1 58                CMP ($58),Y ;color_table
    2010/    10EA : F0 03                BEQ .._1649.skip
    2011/    10EC : 4C FB 10             JMP .if32
    2013/    10EF : C8                   INY
    2014/    10F0 : B1 58                LDA ($58),Y ;color_table
    2015/    10F2 : 7A                   PLY
    2016/    10F3 : 91 56                STA ($56),Y ;tile_ptr
    2017/    10F5 : C8                   INY
    2018/    10F6 : 80 B7                BRA .color.loop1
    2019/    10F8 : 4C 01 11             JMP .if33
    2020/    10FB :                      .if32:
    2021/    10FB : C8                   INY
    2022/    10FC : C8                   INY
    2023/    10FD : CA                   DEX
    2024/    10FE : D0 E6                BNE .color.loop2
    2025/    1100 : 7A                   PLY
    2026/    1101 :                      .if33:
    2027/    1101 :                      .if31:
    2028/    1101 : C8                   INY
    2029/    1102 : 80 AB                BRA .color.loop1
    2030/    1104 :                      .if30:
    2031/    1104 : 60                   RTS
    2034/    1105 : 00 01 02 03 04 05    FCB $0,$1,$2,$3,$4,$5
    2035/    110B : 06 08 07             FCB $6,$8,$7
    2037/    110E :                     LoadTiles:
    2038/    110E : A9 00                LDA #$0
    2039/    1110 : 85 54                STA $54 ;CopyTile.dest_id
    2040/    1112 : A9 15                LDA #$15
    2041/    1114 : 85 55                STA $55 ;CopyTile.source_id
    2042/    1116 : 20 54 0D             JSR CopyTile
    2043/    1119 : A9 01                LDA #$1
    2044/    111B : 85 22                STA $22 ;RotateTile90.dest
    2045/    111D : A9 00                LDA #$0
    2046/    111F : 85 23                STA $23 ;RotateTile90.src
    2047/    1121 : 20 A9 0F             JSR RotateTile90
    2048/    1124 : A9 02                LDA #$2
    2049/    1126 : 85 22                STA $22 ;RotateTile90.dest
    2050/    1128 : A9 01                LDA #$1
    2051/    112A : 85 23                STA $23 ;RotateTile90.src
    2052/    112C : 20 A9 0F             JSR RotateTile90
    2053/    112F : A9 03                LDA #$3
    2054/    1131 : 85 22                STA $22 ;RotateTile90.dest
    2055/    1133 : A9 02                LDA #$2
    2056/    1135 : 85 23                STA $23 ;RotateTile90.src
    2057/    1137 : 20 A9 0F             JSR RotateTile90
    2058/    113A : A9 04                LDA #$4
    2059/    113C : 85 54                STA $54 ;CopyTile.dest_id
    2060/    113E : A9 15                LDA #$15
    2061/    1140 : 85 55                STA $55 ;CopyTile.source_id
    2062/    1142 : 20 54 0D             JSR CopyTile
    2063/    1145 : A9 05                LDA #$5
    2064/    1147 : 85 54                STA $54 ;CopyTile.dest_id
    2065/    1149 : A9 15                LDA #$15
    2066/    114B : 85 55                STA $55 ;CopyTile.source_id
    2067/    114D : 20 54 0D             JSR CopyTile
    2068/    1150 : A9 06                LDA #$6
    2069/    1152 : 85 54                STA $54 ;CopyTile.dest_id
    2070/    1154 : A9 14                LDA #$14
    2071/    1156 : 85 55                STA $55 ;CopyTile.source_id
    2072/    1158 : 20 54 0D             JSR CopyTile
    2073/    115B : A9 08                LDA #$8
    2074/    115D : 85 54                STA $54 ;CopyTile.dest_id
    2075/    115F : A9 14                LDA #$14
    2076/    1161 : 85 55                STA $55 ;CopyTile.source_id
    2077/    1163 : 20 54 0D             JSR CopyTile
    2078/    1166 : A9 07                LDA #$7
    2079/    1168 : 85 54                STA $54 ;CopyTile.dest_id
    2080/    116A : A9 14                LDA #$14
    2081/    116C : 85 55                STA $55 ;CopyTile.source_id
    2082/    116E : 20 54 0D             JSR CopyTile
    2083/    1171 : A0 00                LDY #$0
    2085/    1173 : B9 05 11             LDA tiles_to_color,Y
    2086/    1176 : 85 21                STA $21 ;color_tile
    2087/    1178 : 5A                   PHY
    2088/    1179 : A5 21                LDA $21 ;color_tile
    2089/    117B : 85 54                STA $54 ;ColorTile.tile
    2090/    117D : A5 21                LDA $21 ;color_tile
    2091/    117F : 85 55                STA $55 ;ColorTile.color_index
    2092/    1181 : 20 4E 10             JSR ColorTile
    2093/    1184 : 7A                   PLY
    2094/    1185 : C8                   INY
    2095/    1186 : C0 09                CPY #$9
    2096/    1188 : D0 E9                BNE .lt.loop
    2097/    118A : 60                   RTS
    2099/    118B :                     ColorHero:
    2100/    118B : A9 09                LDA #$9
    2101/    118D : 85 54                STA $54 ;CopyTile.dest_id
    2102/    118F : A9 12                LDA #$12
    2103/    1191 : 85 55                STA $55 ;CopyTile.source_id
    2104/    1193 : 20 54 0D             JSR CopyTile
    2105/    1196 : A9 09                LDA #$9
    2106/    1198 : 85 54                STA $54 ;ColorTile.tile
    2107/    119A : AD 2B 02             LDA hero_equipped+$0
    2108/    119D : 85 55                STA $55 ;ColorTile.color_index
    2109/    119F : 20 4E 10             JSR ColorTile
    2110/    11A2 : A9 09                LDA #$9
    2111/    11A4 : 85 54                STA $54 ;ColorTile.tile
    2112/    11A6 : AD 2C 02             LDA hero_equipped+$1
    2113/    11A9 : 85 55                STA $55 ;ColorTile.color_index
    2114/    11AB : 20 4E 10             JSR ColorTile
    2115/    11AE : A9 09                LDA #$9
    2116/    11B0 : 85 54                STA $54 ;ColorTile.tile
    2117/    11B2 : AD 2D 02             LDA hero_equipped+$2
    2118/    11B5 : 85 55                STA $55 ;ColorTile.color_index
    2119/    11B7 : 20 4E 10             JSR ColorTile
    2120/    11BA : A9 09                LDA #$9
    2121/    11BC : 85 54                STA $54 ;ColorTile.tile
    2122/    11BE : AD 2E 02             LDA hero_equipped+$3
    2123/    11C1 : 85 55                STA $55 ;ColorTile.color_index
    2124/    11C3 : 20 4E 10             JSR ColorTile
    2125/    11C6 : A9 09                LDA #$9
    2126/    11C8 : 85 54                STA $54 ;ColorTile.tile
    2127/    11CA : AD 2F 02             LDA hero_equipped+$4
    2128/    11CD : 85 55                STA $55 ;ColorTile.color_index
    2129/    11CF : 20 4E 10             JSR ColorTile
    2130/    11D2 : A9 0A                LDA #$A
    2131/    11D4 : 85 54                STA $54 ;CopyTile.dest_id
    2132/    11D6 : A9 13                LDA #$13
    2133/    11D8 : 85 55                STA $55 ;CopyTile.source_id
    2134/    11DA : 20 54 0D             JSR CopyTile
    2135/    11DD : A9 0A                LDA #$A
    2136/    11DF : 85 54                STA $54 ;ColorTile.tile
    2137/    11E1 : AD 2B 02             LDA hero_equipped+$0
    2138/    11E4 : 85 55                STA $55 ;ColorTile.color_index
    2139/    11E6 : 20 4E 10             JSR ColorTile
    2140/    11E9 : A9 0A                LDA #$A
    2141/    11EB : 85 54                STA $54 ;ColorTile.tile
    2142/    11ED : AD 2C 02             LDA hero_equipped+$1
    2143/    11F0 : 85 55                STA $55 ;ColorTile.color_index
    2144/    11F2 : 20 4E 10             JSR ColorTile
    2145/    11F5 : A9 0A                LDA #$A
    2146/    11F7 : 85 54                STA $54 ;ColorTile.tile
    2147/    11F9 : AD 2D 02             LDA hero_equipped+$2
    2148/    11FC : 85 55                STA $55 ;ColorTile.color_index
    2149/    11FE : 20 4E 10             JSR ColorTile
    2150/    1201 : A9 0A                LDA #$A
    2151/    1203 : 85 54                STA $54 ;ColorTile.tile
    2152/    1205 : AD 2E 02             LDA hero_equipped+$3
    2153/    1208 : 85 55                STA $55 ;ColorTile.color_index
    2154/    120A : 20 4E 10             JSR ColorTile
    2155/    120D : A9 0A                LDA #$A
    2156/    120F : 85 54                STA $54 ;ColorTile.tile
    2157/    1211 : AD 2F 02             LDA hero_equipped+$4
    2158/    1214 : 85 55                STA $55 ;ColorTile.color_index
    2159/    1216 : 20 4E 10             JSR ColorTile
    2160/    1219 : 60                   RTS
    2162/    121A :                     rand:
    2163/    121A : A5 09                LDA rand_val+$1
    2164/    121C : 18                   CLC
    2165/    121D : 6A                   ROR
    2166/    121E : A5 08                LDA rand_val
    2167/    1220 : 6A                   ROR
    2168/    1221 : 45 09                EOR rand_val+$1
    2169/    1223 : 85 09                STA rand_val+$1
    2170/    1225 : A9 00                LDA #$0
    2171/    1227 : 6A                   ROR
    2172/    1228 : 45 08                EOR rand_val
    2173/    122A : 85 08                STA rand_val
    2174/    122C : A5 09                LDA rand_val+$1
    2175/    122E : 18                   CLC
    2176/    122F : 6A                   ROR
    2177/    1230 : 45 08                EOR rand_val
    2178/    1232 : 85 08                STA rand_val
    2179/    1234 : A5 08                LDA rand_val
    2180/    1236 : 45 09                EOR rand_val+$1
    2181/    1238 : 85 09                STA rand_val+$1
    2182/    123A : 60                   RTS
    2184/    123B :                     rand8:
    2185/    123B : 20 1A 12             JSR rand
    2186/    123E : A5 08                LDA rand_val
    2187/    1240 : 85 06                STA ret_val
    2188/    1242 : A5 09                LDA rand_val+$1
    2189/    1244 : 85 07                STA ret_val+$1
    2190/    1246 : A5 2F                LDA $2F ;max
    2191/    1248 : 85 31                STA $31 ;divisor
    2192/    124A : 64 30                STZ $30 ;divisor
    2194/    124C : A5 06                LDA ret_val
    2195/    124E : 38                   SEC
    2196/    124F : E5 30                SBC $30 ;divisor
    2197/    1251 : 85 06                STA ret_val
    2198/    1253 : A5 07                LDA ret_val+$1
    2199/    1255 : E5 31                SBC $31 ;divisor
    2200/    1257 : 85 07                STA ret_val+$1
    2201/    1259 : B0 F1                BCS .r8.loop
    2202/    125B : A5 30                LDA $30 ;divisor
    2203/    125D : 18                   CLC
    2204/    125E : 65 06                ADC ret_val
    2205/    1260 : 85 06                STA ret_val
    2206/    1262 : A5 31                LDA $31 ;divisor
    2207/    1264 : 65 07                ADC ret_val+$1
    2208/    1266 : 85 07                STA ret_val+$1
    2209/    1268 : 18                   CLC
    2210/    1269 : 66 31                ROR $31 ;divisor
    2211/    126B : 66 30                ROR $30 ;divisor
    2212/    126D : A5 07                LDA ret_val+$1
    2213/    126F : D0 DB                BNE .r8.loop
    2214/    1271 : A5 06                LDA ret_val
    2215/    1273 : C5 2F                CMP $2F ;max
    2216/    1275 : B0 D5                BCS .r8.loop
    2217/    1277 : 60                   RTS
    2219/    1278 :                     rand5050:
    2220/    1278 : 20 1A 12             JSR rand
    2221/    127B : A5 08                LDA rand_val
    2222/    127D : 29 01                AND #$1
    2223/    127F : 85 06                STA ret_val
    2224/    1281 : 60                   RTS
    2226/    1282 :                     CalcStats:
    2227/    1282 : AD 09 02             LDA hero_HP_Upgrade
    2228/    1285 : 18                   CLC
    2229/    1286 : 69 02                ADC #$2
    2230/    1288 : 8D 08 02             STA hero_HP_Max_temp
    2231/    128B : AD 0C 02             LDA hero_Batt_Upgrade
    2232/    128E : 18                   CLC
    2233/    128F : 69 03                ADC #$3
    2234/    1291 : 8D 0B 02             STA hero_Batt_Max
    2235/    1294 : AD 0E 02             LDA hero_Dmg_Upgrade
    2236/    1297 : 8D 0D 02             STA hero_Dmg
    2237/    129A : A9 08                LDA #$8
    2238/    129C : 8D 0F 02             STA hero_Mine_Speed
    2239/    129F : A9 0C                LDA #$C
    2240/    12A1 : 8D 10 02             STA hero_Drill_Speed
    2241/    12A4 : A9 01                LDA #$1
    2242/    12A6 : 8D 12 02             STA hero_Batt_Recharge
    2243/    12A9 : A9 05                LDA #$5
    2244/    12AB : 8D 13 02             STA hero_Crit_Rate
    2245/    12AE : 9C 14 02             STZ hero_HP_Recharge
    2246/    12B1 : 9C 11 02             STZ hero_Lava_Res
    2247/    12B4 : A9 04                LDA #$4
    2248/    12B6 : 8D 15 02             STA hero_Lava_Dmg
    2249/    12B9 : A9 00                LDA #$0
    2250/    12BB : 8D 16 02             STA hero_Lava_Dmg+$1
    2251/    12BE : A9 04                LDA #$4
    2252/    12C0 : 8D 17 02             STA hero_Dmg_Cost
    2253/    12C3 : A9 02                LDA #$2
    2254/    12C5 : 8D 18 02             STA hero_Mine_Cost
    2255/    12C8 : A9 02                LDA #$2
    2256/    12CA : 8D 19 02             STA hero_Drill_Cost
    2257/    12CD : A9 00                LDA #$0
    2258/    12CF : 85 2D                STA $2D ;Mine1s
    2259/    12D1 : A9 00                LDA #$0
    2260/    12D3 : 85 2E                STA $2E ;Drill1s
    2261/    12D5 : 64 2F                STZ $2F ;item_counter
    2263/    12D7 : A4 2F                LDY $2F ;item_counter
    2264/    12D9 : B9 2B 02             LDA hero_equipped,Y
    2265/    12DC : 0A                   ASL
    2266/    12DD : A8                   TAY
    2267/    12DE : B9 76 C5             LDA item_stats,Y
    2268/    12E1 : 85 34                STA $34 ;item_ptr
    2269/    12E3 : B9 77 C5             LDA item_stats+$1,Y
    2270/    12E6 : 85 35                STA $35 ;item_ptr
    2271/    12E8 : A0 04                LDY #$4
    2272/    12EA : B1 34                LDA ($34),Y ;item_ptr
    2273/    12EC : 85 31                STA $31 ;stat_max
    2274/    12EE : A2 00                LDX #$0
    2276/    12F0 : 8A                   TXA
    2277/    12F1 : 0A                   ASL
    2278/    12F2 : 69 05                ADC #$5
    2279/    12F4 : A8                   TAY
    2280/    12F5 : B1 34                LDA ($34),Y ;item_ptr
    2281/    12F7 : 5A                   PHY
    2282/    12F8 : 85 32                STA $32 ;stat_ID
    2283/    12FA : 0A                   ASL
    2284/    12FB : A8                   TAY
    2285/    12FC : B9 5A C6             LDA stat_pointers,Y
    2286/    12FF : 85 36                STA $36 ;stat_ptr
    2287/    1301 : B9 5B C6             LDA stat_pointers+$1,Y
    2288/    1304 : 85 37                STA $37 ;stat_ptr
    2289/    1306 : 7A                   PLY
    2290/    1307 : C8                   INY
    2291/    1308 : B1 34                LDA ($34),Y ;item_ptr
    2292/    130A : 85 33                STA $33 ;stat_val
    2293/    130C : A5 36                LDA $36 ;stat_ptr
    2294/    130E : 05 37                ORA $37 ;stat_ptr
    2295/    1310 : F0 03                BEQ .._2590.skip
    2296/    1312 : 4C 90 13             JMP .if34
    2298/    1315 : A5 32                LDA $32 ;stat_ID
    2299/    1317 : 80 03                BRA .s3c0
    2300/    1319 : 4C 8D 13             JMP .s3done
    2301/    131C :                      .s3c0:
    2302/    131C : C9 03                CMP #$3
    2303/    131E : F0 03                BEQ .._2593.skip
    2304/    1320 : 4C 2F 13             JMP .s3c1
    2306/    1323 :                      .s3b1:
    2307/    1323 : AD 0F 02             LDA hero_Mine_Speed
    2308/    1326 : 38                   SEC
    2309/    1327 : E5 33                SBC $33 ;stat_val
    2310/    1329 : 8D 0F 02             STA hero_Mine_Speed
    2311/    132C : 4C 8D 13             JMP .s3done
    2312/    132F :                      .s3c1:
    2313/    132F : C9 04                CMP #$4
    2314/    1331 : F0 03                BEQ .._2602.skip
    2315/    1333 : 4C 3D 13             JMP .s3c2
    2317/    1336 :                      .s3b2:
    2318/    1336 : A9 FF                LDA #$FF
    2319/    1338 : 85 2D                STA $2D ;Mine1s
    2320/    133A : 4C 8D 13             JMP .s3done
    2321/    133D :                      .s3c2:
    2322/    133D : C9 07                CMP #$7
    2323/    133F : F0 03                BEQ .._2626.skip
    2324/    1341 : 4C 50 13             JMP .s3c3
    2326/    1344 :                      .s3b3:
    2327/    1344 : AD 10 02             LDA hero_Drill_Speed
    2328/    1347 : 38                   SEC
    2329/    1348 : E5 33                SBC $33 ;stat_val
    2330/    134A : 8D 10 02             STA hero_Drill_Speed
    2331/    134D : 4C 8D 13             JMP .s3done
    2332/    1350 :                      .s3c3:
    2333/    1350 : C9 08                CMP #$8
    2334/    1352 : F0 03                BEQ .._2635.skip
    2335/    1354 : 4C 5E 13             JMP .s3c4
    2337/    1357 :                      .s3b4:
    2338/    1357 : A9 FF                LDA #$FF
    2339/    1359 : 85 2E                STA $2E ;Drill1s
    2340/    135B : 4C 8D 13             JMP .s3done
    2341/    135E :                      .s3c4:
    2342/    135E : C9 0B                CMP #$B
    2343/    1360 : F0 03                BEQ .._2658.skip
    2344/    1362 : 4C 72 13             JMP .s3c5
    2346/    1365 :                      .s3b5:
    2347/    1365 : A9 FF                LDA #$FF
    2348/    1367 : 8D 15 02             STA hero_Lava_Dmg
    2349/    136A : A9 FF                LDA #$FF
    2350/    136C : 8D 16 02             STA hero_Lava_Dmg+$1
    2351/    136F : 4C 8D 13             JMP .s3done
    2352/    1372 :                      .s3c5:
    2353/    1372 : C9 0C                CMP #$C
    2354/    1374 : F0 03                BEQ .._2684.skip
    2355/    1376 : 4C 81 13             JMP .s3c6
    2357/    1379 :                      .s3b6:
    2358/    1379 : A9 02                LDA #$2
    2359/    137B : 8D 17 02             STA hero_Dmg_Cost
    2360/    137E : 4C 8D 13             JMP .s3done
    2361/    1381 :                      .s3c6:
    2362/    1381 : C9 0D                CMP #$D
    2363/    1383 : F0 03                BEQ .._2710.skip
    2364/    1385 : 4C 8D 13             JMP .s3c7
    2366/    1388 :                      .s3b7:
    2367/    1388 : A9 01                LDA #$1
    2368/    138A : 8D 18 02             STA hero_Mine_Cost
    2369/    138D :                      .s3c7:
    2370/    138D :                      .s3done:
    2371/    138D : 4C 97 13             JMP .if35
    2372/    1390 :                      .if34:
    2373/    1390 : A5 33                LDA $33 ;stat_val
    2374/    1392 : 18                   CLC
    2375/    1393 : 72 36                ADC ($36) ;stat_ptr
    2376/    1395 : 92 36                STA ($36) ;stat_ptr
    2377/    1397 :                      .if35:
    2378/    1397 : E8                   INX
    2379/    1398 : E4 31                CPX $31 ;stat_max
    2380/    139A : F0 03                BEQ .._2744.skip
    2381/    139C : 4C F0 12             JMP .cs.stats
    2383/    139F : E6 2F                INC $2F ;item_counter
    2384/    13A1 : A5 2F                LDA $2F ;item_counter
    2385/    13A3 : C9 05                CMP #$5
    2386/    13A5 : F0 03                BEQ .._2745.skip
    2387/    13A7 : 4C D7 12             JMP .cs.loop
    2389/    13AA : AD 50 02             LDA skill_list+$2
    2390/    13AD : D0 03                BNE .._2748.skip
    2391/    13AF : 4C BE 13             JMP .if36
    2393/    13B2 : CE 0F 02             DEC hero_Mine_Speed
    2394/    13B5 : CE 0F 02             DEC hero_Mine_Speed
    2395/    13B8 : CE 10 02             DEC hero_Drill_Speed
    2396/    13BB : CE 10 02             DEC hero_Drill_Speed
    2397/    13BE :                      .if36:
    2398/    13BE : A5 2D                LDA $2D ;Mine1s
    2399/    13C0 : D0 03                BNE .._2753.skip
    2400/    13C2 : 4C CA 13             JMP .if37
    2402/    13C5 : A9 01                LDA #$1
    2403/    13C7 : 8D 0F 02             STA hero_Mine_Speed
    2404/    13CA :                      .if37:
    2405/    13CA : A5 2E                LDA $2E ;Drill1s
    2406/    13CC : D0 03                BNE .._2775.skip
    2407/    13CE : 4C D6 13             JMP .if38
    2409/    13D1 : A9 01                LDA #$1
    2410/    13D3 : 8D 10 02             STA hero_Drill_Speed
    2411/    13D6 :                      .if38:
    2412/    13D6 : AD 53 02             LDA skill_list+$5
    2413/    13D9 : D0 03                BNE .._2797.skip
    2414/    13DB : 4C E7 13             JMP .if39
    2416/    13DE : AD 13 02             LDA hero_Crit_Rate
    2417/    13E1 : 18                   CLC
    2418/    13E2 : 69 14                ADC #$14
    2419/    13E4 : 8D 13 02             STA hero_Crit_Rate
    2420/    13E7 :                      .if39:
    2421/    13E7 : AD 15 02             LDA hero_Lava_Dmg
    2422/    13EA : 2D 16 02             AND hero_Lava_Dmg+$1
    2423/    13ED : C9 FF                CMP #$FF
    2424/    13EF : D0 03                BNE .._2801.skip
    2425/    13F1 : 4C 21 14             JMP .if40
    2427/    13F4 : AD 11 02             LDA hero_Lava_Res
    2428/    13F7 : 80 03                BRA .s4c0
    2429/    13F9 : 4C 21 14             JMP .s4done
    2430/    13FC :                      .s4c0:
    2431/    13FC : C9 19                CMP #$19
    2432/    13FE : F0 03                BEQ .._2804.skip
    2433/    1400 : 4C 10 14             JMP .s4c1
    2435/    1403 :                      .s4b1:
    2436/    1403 : A9 03                LDA #$3
    2437/    1405 : 8D 15 02             STA hero_Lava_Dmg
    2438/    1408 : A9 00                LDA #$0
    2439/    140A : 8D 16 02             STA hero_Lava_Dmg+$1
    2440/    140D : 4C 21 14             JMP .s4done
    2441/    1410 :                      .s4c1:
    2442/    1410 : C9 32                CMP #$32
    2443/    1412 : F0 03                BEQ .._2830.skip
    2444/    1414 : 4C 21 14             JMP .s4c2
    2446/    1417 :                      .s4b2:
    2447/    1417 : A9 02                LDA #$2
    2448/    1419 : 8D 15 02             STA hero_Lava_Dmg
    2449/    141C : A9 00                LDA #$0
    2450/    141E : 8D 16 02             STA hero_Lava_Dmg+$1
    2451/    1421 :                      .s4c2:
    2452/    1421 :                      .s4done:
    2453/    1421 :                      .if40:
    2454/    1421 : AD 08 02             LDA hero_HP_Max_temp
    2455/    1424 : 8D 06 02             STA hero_HP_Max
    2456/    1427 : AD 06 02             LDA hero_HP_Max
    2457/    142A : CD 04 02             CMP hero_HP
    2458/    142D : 90 03                BCC .._2890.skip
    2459/    142F : 4C 3E 14             JMP .if41
    2461/    1432 : AD 06 02             LDA hero_HP_Max
    2462/    1435 : 8D 04 02             STA hero_HP
    2463/    1438 : AD 07 02             LDA hero_HP_Max+$1
    2464/    143B : 8D 05 02             STA hero_HP+$1
    2465/    143E :                      .if41:
    2466/    143E : AD 0B 02             LDA hero_Batt_Max
    2467/    1441 : CD 0A 02             CMP hero_Batt
    2468/    1444 : 90 03                BCC .._2921.skip
    2469/    1446 : 4C 4F 14             JMP .if42
    2471/    1449 : AD 0B 02             LDA hero_Batt_Max
    2472/    144C : 8D 0A 02             STA hero_Batt
    2473/    144F :                      .if42:
    2474/    144F : 60                   RTS
    2476/    1450 :                     MazeHorizStripe:
    2477/    1450 : A9 28                LDA #$28
    2478/    1452 : 85 2F                STA $2F ;rand8.max
    2479/    1454 : 20 3B 12             JSR rand8
    2480/    1457 : A5 06                LDA ret_val
    2481/    1459 : 85 25                STA $25 ;stripe_X
    2482/    145B : A9 14                LDA #$14
    2483/    145D : 85 2F                STA $2F ;rand8.max
    2484/    145F : 20 3B 12             JSR rand8
    2485/    1462 : A5 06                LDA ret_val
    2486/    1464 : 85 26                STA $26 ;stripe_Y
    2487/    1466 : A9 04                LDA #$4
    2488/    1468 : 85 2F                STA $2F ;rand8.max
    2489/    146A : 20 3B 12             JSR rand8
    2490/    146D : A5 06                LDA ret_val
    2491/    146F : 18                   CLC
    2492/    1470 : 69 01                ADC #$1
    2493/    1472 : 85 27                STA $27 ;stripe_width
    2494/    1474 : A9 04                LDA #$4
    2495/    1476 : 85 2F                STA $2F ;rand8.max
    2496/    1478 : 20 3B 12             JSR rand8
    2497/    147B : A5 06                LDA ret_val
    2498/    147D : 18                   CLC
    2499/    147E : 69 01                ADC #$1
    2500/    1480 : 85 28                STA $28 ;stripe_height
    2501/    1482 : 20 78 12             JSR rand5050
    2502/    1485 : A5 06                LDA ret_val
    2503/    1487 : 85 29                STA $29 ;stripe_dx
    2504/    1489 : 20 78 12             JSR rand5050
    2505/    148C : A5 06                LDA ret_val
    2506/    148E : 85 2A                STA $2A ;stripe_dy
    2507/    1490 : A9 7E                LDA #map_data # $100
    2508/    1492 : 18                   CLC
    2509/    1493 : 65 25                ADC $25 ;stripe_X
    2510/    1495 : 85 2B                STA $2B ;map_ptr
    2511/    1497 : A9 03                LDA #map_data>>$8
    2512/    1499 : 69 00                ADC #$0
    2513/    149B : 85 2C                STA $2C ;map_ptr
    2514/    149D : A4 26                LDY $26 ;stripe_Y
    2515/    149F : D0 03                BNE .._3181.skip
    2516/    14A1 : 4C B2 14             JMP .if43
    2519/    14A4 : A9 28                LDA #$28
    2520/    14A6 : 18                   CLC
    2521/    14A7 : 65 2B                ADC $2B ;map_ptr
    2522/    14A9 : 85 2B                STA $2B ;map_ptr
    2523/    14AB : 90 02                BCC .._3182.skip
    2524/    14AD : E6 2C                INC $2C ;map_ptr
    2526/    14AF : 88                   DEY
    2527/    14B0 : D0 F2                BNE .mhs.mult
    2528/    14B2 :                      .if43:
    2530/    14B2 : A4 27                LDY $27 ;stripe_width
    2532/    14B4 : A5 25                LDA $25 ;stripe_X
    2533/    14B6 : C9 28                CMP #$28
    2534/    14B8 : B0 58                BCS .mhs.done
    2535/    14BA : A5 26                LDA $26 ;stripe_Y
    2536/    14BC : C9 14                CMP #$14
    2537/    14BE : B0 52                BCS .mhs.done
    2538/    14C0 : A5 24                LDA $24 ;value
    2539/    14C2 : 92 2B                STA ($2B) ;map_ptr
    2540/    14C4 : A5 29                LDA $29 ;stripe_dx
    2541/    14C6 : D0 03                BNE .._3202.skip
    2542/    14C8 : 4C DD 14             JMP .if44
    2544/    14CB : C6 25                DEC $25 ;stripe_X
    2545/    14CD : 30 43                BMI .mhs.done
    2546/    14CF : A5 2B                LDA $2B ;map_ptr
    2547/    14D1 : 38                   SEC
    2548/    14D2 : E9 01                SBC #$1
    2549/    14D4 : 85 2B                STA $2B ;map_ptr
    2550/    14D6 : B0 02                BCS .._3203.no_underflow
    2551/    14D8 : C6 2C                DEC $2C ;map_ptr
    2553/    14DA : 4C E5 14             JMP .if45
    2554/    14DD :                      .if44:
    2555/    14DD : E6 25                INC $25 ;stripe_X
    2556/    14DF : E6 2B                INC $2B ;map_ptr
    2557/    14E1 : D0 02                BNE .._3206.no_carry
    2558/    14E3 : E6 2C                INC $2C ;map_ptr
    2560/    14E5 :                      .if45:
    2561/    14E5 : 88                   DEY
    2562/    14E6 : D0 CC                BNE .mhs.width
    2563/    14E8 : A5 2A                LDA $2A ;stripe_dy
    2564/    14EA : D0 03                BNE .._3211.skip
    2565/    14EC : 4C 01 15             JMP .if46
    2567/    14EF : C6 26                DEC $26 ;stripe_Y
    2568/    14F1 : 30 1F                BMI .mhs.done
    2569/    14F3 : A5 2B                LDA $2B ;map_ptr
    2570/    14F5 : 38                   SEC
    2571/    14F6 : E9 28                SBC #$28
    2572/    14F8 : 85 2B                STA $2B ;map_ptr
    2573/    14FA : B0 02                BCS .._3212.skip
    2574/    14FC : C6 2C                DEC $2C ;map_ptr
    2576/    14FE : 4C 0E 15             JMP .if47
    2577/    1501 :                      .if46:
    2578/    1501 : E6 26                INC $26 ;stripe_Y
    2579/    1503 : A9 28                LDA #$28
    2580/    1505 : 18                   CLC
    2581/    1506 : 65 2B                ADC $2B ;map_ptr
    2582/    1508 : 85 2B                STA $2B ;map_ptr
    2583/    150A : 90 02                BCC .._3230.skip
    2584/    150C : E6 2C                INC $2C ;map_ptr
    2586/    150E :                      .if47:
    2587/    150E : C6 28                DEC $28 ;stripe_height
    2588/    1510 : D0 A0                BNE .mhs.height
    2590/    1512 : 60                   RTS
    2592/    1513 :                     FillMap:
    2593/    1513 : A5 24                LDA $24 ;ptr_in
    2594/    1515 : 85 27                STA $27 ;map_ptr
    2595/    1517 : A5 25                LDA $25 ;ptr_in
    2596/    1519 : 85 28                STA $28 ;map_ptr
    2597/    151B : A9 04                LDA #$4
    2598/    151D : 85 29                STA $29 ;counter
    2600/    151F : A5 26                LDA $26 ;value
    2601/    1521 : A0 C8                LDY #$C8
    2603/    1523 : 88                   DEY
    2604/    1524 : 91 27                STA ($27),Y ;map_ptr
    2605/    1526 : D0 FB                BNE .fm.loop
    2606/    1528 : A9 C8                LDA #$C8
    2607/    152A : 18                   CLC
    2608/    152B : 65 27                ADC $27 ;map_ptr
    2609/    152D : 85 27                STA $27 ;map_ptr
    2610/    152F : 90 02                BCC .._3286.skip
    2611/    1531 : E6 28                INC $28 ;map_ptr
    2613/    1533 : C6 29                DEC $29 ;counter
    2614/    1535 : D0 E8                BNE .fm.loop_outer
    2615/    1537 : 60                   RTS
    2617/    1538 :                     OffsetXY:
    2618/    1538 : A5 2D                LDA $2D ;map
    2619/    153A : 85 06                STA ret_val
    2620/    153C : A5 2E                LDA $2E ;map
    2621/    153E : 85 07                STA ret_val+$1
    2622/    1540 : A4 30                LDY $30 ;mY
    2624/    1542 : D0 03                BNE .._3322.skip
    2625/    1544 : 4C 55 15             JMP .if48
    2627/    1547 : A9 28                LDA #$28
    2628/    1549 : 18                   CLC
    2629/    154A : 65 06                ADC ret_val
    2630/    154C : 85 06                STA ret_val
    2631/    154E : 90 02                BCC .._3323.skip
    2632/    1550 : E6 07                INC ret_val+$1
    2634/    1552 : 88                   DEY
    2635/    1553 : 80 ED                BRA .oxy.mult
    2636/    1555 :                      .if48:
    2637/    1555 : A5 2F                LDA $2F ;mX
    2638/    1557 : 18                   CLC
    2639/    1558 : 65 06                ADC ret_val
    2640/    155A : 85 06                STA ret_val
    2641/    155C : 90 02                BCC .._3334.skip
    2642/    155E : E6 07                INC ret_val+$1
    2644/    1560 : 60                   RTS
    2646/    1561 :                     MapXY:
    2647/    1561 : A5 2D                LDA $2D ;map
    2648/    1563 : 85 06                STA ret_val
    2649/    1565 : A5 2E                LDA $2E ;map
    2650/    1567 : 85 07                STA ret_val+$1
    2651/    1569 : A4 30                LDY $30 ;mY
    2653/    156B : D0 03                BNE .._3372.skip
    2654/    156D : 4C 7E 15             JMP .if49
    2656/    1570 : A9 28                LDA #$28
    2657/    1572 : 18                   CLC
    2658/    1573 : 65 06                ADC ret_val
    2659/    1575 : 85 06                STA ret_val
    2660/    1577 : 90 02                BCC .._3373.skip
    2661/    1579 : E6 07                INC ret_val+$1
    2663/    157B : 88                   DEY
    2664/    157C : 80 ED                BRA .mxy.mult
    2665/    157E :                      .if49:
    2666/    157E : A4 2F                LDY $2F ;mX
    2667/    1580 : B1 06                LDA (ret_val),Y
    2668/    1582 : 85 06                STA ret_val
    2669/    1584 : 60                   RTS
    2671/    1585 :                     MakeMap:
    2672/    1585 : A9 7E                LDA # (map_data) # $100
    2673/    1587 : 85 24                STA $24 ;FillMap.ptr_in
    2674/    1589 : A9 03                LDA # (map_data)/$100
    2675/    158B : 85 25                STA $25 ;FillMap.ptr_in
    2676/    158D : A9 00                LDA #$0
    2677/    158F : 85 26                STA $26 ;FillMap.value
    2678/    1591 : 20 13 15             JSR FillMap
    2679/    1594 : A2 14                LDX #$14
    2681/    1596 : A9 05                LDA #$5
    2682/    1598 : 85 24                STA $24 ;MazeHorizStripe.value
    2683/    159A : 20 50 14             JSR MazeHorizStripe
    2684/    159D : CA                   DEX
    2685/    159E : D0 F6                BNE .mm.lava_loop
    2686/    15A0 : A2 3C                LDX #$3C
    2688/    15A2 : A9 04                LDA #$4
    2689/    15A4 : 85 24                STA $24 ;MazeHorizStripe.value
    2690/    15A6 : 20 50 14             JSR MazeHorizStripe
    2691/    15A9 : CA                   DEX
    2692/    15AA : D0 F6                BNE .mm.rock_loop
    2693/    15AC : A9 7E                LDA # (map_data) # $100
    2694/    15AE : 85 21                STA $21 ;map_ptr
    2695/    15B0 : A9 03                LDA # (map_data)/$100
    2696/    15B2 : 85 22                STA $22 ;map_ptr
    2697/    15B4 : A2 04                LDX #$4
    2698/    15B6 : A0 00                LDY #$0
    2700/    15B8 : B1 21                LDA ($21),Y ;map_ptr
    2701/    15BA : C9 00                CMP #$0
    2702/    15BC : F0 03                BEQ .._3479.skip
    2703/    15BE : 4C F7 15             JMP .if50
    2705/    15C1 : A9 04                LDA #$4
    2706/    15C3 : 85 2F                STA $2F ;rand8.max
    2707/    15C5 : 20 3B 12             JSR rand8
    2708/    15C8 : A5 06                LDA ret_val
    2709/    15CA : 80 03                BRA .s5c0
    2710/    15CC : 4C F5 15             JMP .s5done
    2711/    15CF :                      .s5c0:
    2712/    15CF : C9 01                CMP #$1
    2713/    15D1 : F0 03                BEQ .._3503.skip
    2714/    15D3 : 4C DB 15             JMP .s5c1
    2716/    15D6 :                      .s5b1:
    2717/    15D6 : A9 01                LDA #$1
    2718/    15D8 : 4C F5 15             JMP .s5done
    2719/    15DB :                      .s5c1:
    2720/    15DB : C9 02                CMP #$2
    2721/    15DD : F0 03                BEQ .._3512.skip
    2722/    15DF : 4C E7 15             JMP .s5c2
    2724/    15E2 :                      .s5b2:
    2725/    15E2 : A9 02                LDA #$2
    2726/    15E4 : 4C F5 15             JMP .s5done
    2727/    15E7 :                      .s5c2:
    2728/    15E7 : C9 03                CMP #$3
    2729/    15E9 : F0 03                BEQ .._3521.skip
    2730/    15EB : 4C F3 15             JMP .s5c3
    2732/    15EE :                      .s5b3:
    2733/    15EE : A9 03                LDA #$3
    2734/    15F0 : 4C F5 15             JMP .s5done
    2735/    15F3 :                      .s5c3:
    2736/    15F3 : A9 00                LDA #$0
    2737/    15F5 :                      .s5c4:
    2738/    15F5 :                      .s5done:
    2739/    15F5 : 91 21                STA ($21),Y ;map_ptr
    2740/    15F7 :                      .if50:
    2741/    15F7 : C8                   INY
    2742/    15F8 : C0 C8                CPY #$C8
    2743/    15FA : D0 BC                BNE .mm.blank_loop
    2744/    15FC : A0 00                LDY #$0
    2745/    15FE : A9 C8                LDA #$C8
    2746/    1600 : 18                   CLC
    2747/    1601 : 65 21                ADC $21 ;map_ptr
    2748/    1603 : 85 21                STA $21 ;map_ptr
    2749/    1605 : 90 02                BCC .._3538.skip
    2750/    1607 : E6 22                INC $22 ;map_ptr
    2752/    1609 : CA                   DEX
    2753/    160A : D0 AC                BNE .mm.blank_loop
    2754/    160C : A9 7E                LDA # (map_data) # $100
    2755/    160E : 85 2D                STA $2D ;OffsetXY.map
    2756/    1610 : A9 03                LDA # (map_data)/$100
    2757/    1612 : 85 2E                STA $2E ;OffsetXY.map
    2758/    1614 : A9 01                LDA #$1
    2759/    1616 : 85 2F                STA $2F ;OffsetXY.mX
    2760/    1618 : A9 01                LDA #$1
    2761/    161A : 85 30                STA $30 ;OffsetXY.mY
    2762/    161C : 20 38 15             JSR OffsetXY
    2763/    161F : A9 00                LDA #$0
    2764/    1621 : 92 06                STA (ret_val)
    2765/    1623 : A9 0A                LDA #$A
    2766/    1625 : 85 2F                STA $2F ;rand8.max
    2767/    1627 : 20 3B 12             JSR rand8
    2768/    162A : A5 06                LDA ret_val
    2769/    162C : 18                   CLC
    2770/    162D : 69 0A                ADC #$A
    2771/    162F : 85 23                STA $23 ;counter
    2772/    1631 : A9 14                LDA #$14
    2773/    1633 : 85 2F                STA $2F ;rand8.max
    2774/    1635 : 20 3B 12             JSR rand8
    2775/    1638 : A5 06                LDA ret_val
    2776/    163A : 18                   CLC
    2777/    163B : 69 14                ADC #$14
    2778/    163D : 85 06                STA ret_val
    2779/    163F : A9 7E                LDA # (map_data) # $100
    2780/    1641 : 85 2D                STA $2D ;OffsetXY.map
    2781/    1643 : A9 03                LDA # (map_data)/$100
    2782/    1645 : 85 2E                STA $2E ;OffsetXY.map
    2783/    1647 : A5 06                LDA ret_val
    2784/    1649 : 85 2F                STA $2F ;OffsetXY.mX
    2785/    164B : A5 23                LDA $23 ;counter
    2786/    164D : 85 30                STA $30 ;OffsetXY.mY
    2787/    164F : 20 38 15             JSR OffsetXY
    2788/    1652 : A9 06                LDA #$6
    2789/    1654 : 92 06                STA (ret_val)
    2790/    1656 : 60                   RTS
    2792/    1657 :                     CheckForMonster:
    2793/    1657 : A9 9E                LDA # (monster_map) # $100
    2794/    1659 : 85 2D                STA $2D ;MapXY.map
    2795/    165B : A9 06                LDA # (monster_map)/$100
    2796/    165D : 85 2E                STA $2E ;MapXY.map
    2797/    165F : A5 31                LDA $31 ;mX
    2798/    1661 : 85 2F                STA $2F ;MapXY.mX
    2799/    1663 : A5 32                LDA $32 ;mY
    2800/    1665 : 85 30                STA $30 ;MapXY.mY
    2801/    1667 : 20 61 15             JSR MapXY
    2802/    166A : A5 06                LDA ret_val
    2803/    166C : 64 06                STZ ret_val
    2804/    166E : 85 31                STA $31 ;mX
    2805/    1670 : C9 FF                CMP #$FF
    2806/    1672 : D0 03                BNE .._3748.skip
    2807/    1674 : 4C 83 16             JMP .if51
    2809/    1677 : 0A                   ASL
    2810/    1678 : 18                   CLC
    2811/    1679 : 65 31                ADC $31 ;mX
    2812/    167B : 69 02                ADC #$2
    2813/    167D : A8                   TAY
    2814/    167E : B9 66 02             LDA monster_list,Y
    2815/    1681 : 85 06                STA ret_val
    2816/    1683 :                      .if51:
    2817/    1683 : 60                   RTS
    2819/    1684 :                     CheckForCrystal:
    2820/    1684 : A9 BE                LDA # (crystal_map) # $100
    2821/    1686 : 85 2D                STA $2D ;MapXY.map
    2822/    1688 : A9 09                LDA # (crystal_map)/$100
    2823/    168A : 85 2E                STA $2E ;MapXY.map
    2824/    168C : A5 31                LDA $31 ;mX
    2825/    168E : 85 2F                STA $2F ;MapXY.mX
    2826/    1690 : A5 32                LDA $32 ;mY
    2827/    1692 : 85 30                STA $30 ;MapXY.mY
    2828/    1694 : 20 61 15             JSR MapXY
    2829/    1697 : A5 06                LDA ret_val
    2830/    1699 : 64 06                STZ ret_val
    2831/    169B : C9 FF                CMP #$FF
    2832/    169D : D0 03                BNE .._3806.skip
    2833/    169F : 4C AD 16             JMP .if52
    2835/    16A2 : 0A                   ASL
    2836/    16A3 : 0A                   ASL
    2837/    16A4 : 18                   CLC
    2838/    16A5 : 69 02                ADC #$2
    2839/    16A7 : A8                   TAY
    2840/    16A8 : B9 DE 02             LDA crystal_list,Y
    2841/    16AB : 85 06                STA ret_val
    2842/    16AD :                      .if52:
    2843/    16AD : 60                   RTS
    2845/    16AE :                     LoadMonsters:
    2846/    16AE : A9 9E                LDA # (monster_map) # $100
    2847/    16B0 : 85 24                STA $24 ;FillMap.ptr_in
    2848/    16B2 : A9 06                LDA # (monster_map)/$100
    2849/    16B4 : 85 25                STA $25 ;FillMap.ptr_in
    2850/    16B6 : A9 FF                LDA #$FF
    2851/    16B8 : 85 26                STA $26 ;FillMap.value
    2852/    16BA : 20 13 15             JSR FillMap
    2853/    16BD : 64 23                STZ $23 ;counter
    2855/    16BF : A9 28                LDA #$28
    2856/    16C1 : 85 2F                STA $2F ;rand8.max
    2857/    16C3 : 20 3B 12             JSR rand8
    2858/    16C6 : A5 06                LDA ret_val
    2859/    16C8 : 85 21                STA $21 ;mX
    2860/    16CA : A9 14                LDA #$14
    2861/    16CC : 85 2F                STA $2F ;rand8.max
    2862/    16CE : 20 3B 12             JSR rand8
    2863/    16D1 : A5 06                LDA ret_val
    2864/    16D3 : 85 22                STA $22 ;mY
    2865/    16D5 : C9 01                CMP #$1
    2866/    16D7 : F0 03                BEQ .._3933.skip
    2867/    16D9 : 4C E7 16             JMP .if53
    2869/    16DC : A5 21                LDA $21 ;mX
    2870/    16DE : C9 01                CMP #$1
    2871/    16E0 : F0 03                BEQ .._3935.skip
    2872/    16E2 : 4C E7 16             JMP .if54
    2874/    16E5 : 80 D8                BRA .lm.loop
    2875/    16E7 :                      .if54:
    2876/    16E7 :                      .if53:
    2877/    16E7 : A5 21                LDA $21 ;mX
    2878/    16E9 : 85 31                STA $31 ;CheckForMonster.mX
    2879/    16EB : A5 22                LDA $22 ;mY
    2880/    16ED : 85 32                STA $32 ;CheckForMonster.mY
    2881/    16EF : 20 57 16             JSR CheckForMonster
    2882/    16F2 : A5 06                LDA ret_val
    2883/    16F4 : F0 03                BEQ .._3980.skip
    2884/    16F6 : 4C 6A 17             JMP .if55
    2886/    16F9 : A9 7E                LDA # (map_data) # $100
    2887/    16FB : 85 2D                STA $2D ;MapXY.map
    2888/    16FD : A9 03                LDA # (map_data)/$100
    2889/    16FF : 85 2E                STA $2E ;MapXY.map
    2890/    1701 : A5 21                LDA $21 ;mX
    2891/    1703 : 85 2F                STA $2F ;MapXY.mX
    2892/    1705 : A5 22                LDA $22 ;mY
    2893/    1707 : 85 30                STA $30 ;MapXY.mY
    2894/    1709 : 20 61 15             JSR MapXY
    2895/    170C : A5 06                LDA ret_val
    2896/    170E : 80 03                BRA .s6c0
    2897/    1710 : 4C 6A 17             JMP .s6done
    2898/    1713 :                      .s6c0:
    2899/    1713 : C9 00                CMP #$0
    2900/    1715 : F0 03                BEQ .._4032.skip
    2901/    1717 : 4C 1C 17             JMP .s6c1
    2903/    171A : 80 16                BRA .s6b1
    2904/    171C :                      .s6c1:
    2905/    171C : C9 01                CMP #$1
    2906/    171E : D0 04                BNE .s6c2
    2907/    1720 : 80 10                BRA .s6b1
    2908/    1722 : 80 0E                BRA .s6b1
    2909/    1724 :                      .s6c2:
    2910/    1724 : C9 02                CMP #$2
    2911/    1726 : D0 04                BNE .s6c3
    2912/    1728 : 80 08                BRA .s6b1
    2913/    172A : 80 06                BRA .s6b1
    2914/    172C :                      .s6c3:
    2915/    172C : C9 03                CMP #$3
    2916/    172E : D0 3A                BNE .s6c4
    2917/    1730 : 80 00                BRA .s6b1
    2918/    1732 :                      .s6b1:
    2919/    1732 : A9 9E                LDA # (monster_map) # $100
    2920/    1734 : 85 2D                STA $2D ;OffsetXY.map
    2921/    1736 : A9 06                LDA # (monster_map)/$100
    2922/    1738 : 85 2E                STA $2E ;OffsetXY.map
    2923/    173A : A5 21                LDA $21 ;mX
    2924/    173C : 85 2F                STA $2F ;OffsetXY.mX
    2925/    173E : A5 22                LDA $22 ;mY
    2926/    1740 : 85 30                STA $30 ;OffsetXY.mY
    2927/    1742 : 20 38 15             JSR OffsetXY
    2928/    1745 : A5 23                LDA $23 ;counter
    2929/    1747 : 92 06                STA (ret_val)
    2930/    1749 : 0A                   ASL
    2931/    174A : 65 23                ADC $23 ;counter
    2932/    174C : A8                   TAY
    2933/    174D : A5 21                LDA $21 ;mX
    2934/    174F : 99 66 02             STA monster_list,Y
    2935/    1752 : C8                   INY
    2936/    1753 : A5 22                LDA $22 ;mY
    2937/    1755 : 99 66 02             STA monster_list,Y
    2938/    1758 : C8                   INY
    2939/    1759 : A9 FF                LDA #$FF
    2940/    175B : 99 66 02             STA monster_list,Y
    2941/    175E : A5 23                LDA $23 ;counter
    2942/    1760 : 1A                   INC
    2943/    1761 : C9 28                CMP #$28
    2944/    1763 : F0 08                BEQ .lm.done
    2945/    1765 : 85 23                STA $23 ;counter
    2946/    1767 : 4C BF 16             JMP .lm.loop
    2947/    176A :                      .s6c4:
    2948/    176A :                      .s6done:
    2949/    176A :                      .if55:
    2950/    176A : 4C BF 16             JMP .lm.loop
    2952/    176D : 60                   RTS
    2954/    176E :                     LoadCrystals:
    2955/    176E : A9 BE                LDA # (crystal_map) # $100
    2956/    1770 : 85 24                STA $24 ;FillMap.ptr_in
    2957/    1772 : A9 09                LDA # (crystal_map)/$100
    2958/    1774 : 85 25                STA $25 ;FillMap.ptr_in
    2959/    1776 : A9 FF                LDA #$FF
    2960/    1778 : 85 26                STA $26 ;FillMap.value
    2961/    177A : 20 13 15             JSR FillMap
    2962/    177D : A2 00                LDX #$0
    2964/    177F : A9 28                LDA #$28
    2965/    1781 : 85 2F                STA $2F ;rand8.max
    2966/    1783 : 20 3B 12             JSR rand8
    2967/    1786 : A5 06                LDA ret_val
    2968/    1788 : 85 21                STA $21 ;mX
    2969/    178A : A9 14                LDA #$14
    2970/    178C : 85 2F                STA $2F ;rand8.max
    2971/    178E : 20 3B 12             JSR rand8
    2972/    1791 : A5 06                LDA ret_val
    2973/    1793 : 85 22                STA $22 ;mY
    2974/    1795 : C9 01                CMP #$1
    2975/    1797 : F0 03                BEQ .._4211.skip
    2976/    1799 : 4C A7 17             JMP .if56
    2978/    179C : A5 21                LDA $21 ;mX
    2979/    179E : C9 01                CMP #$1
    2980/    17A0 : F0 03                BEQ .._4213.skip
    2981/    17A2 : 4C A7 17             JMP .if57
    2983/    17A5 : 80 D8                BRA .lc.loop
    2984/    17A7 :                      .if57:
    2985/    17A7 :                      .if56:
    2986/    17A7 : A5 21                LDA $21 ;mX
    2987/    17A9 : 85 31                STA $31 ;CheckForMonster.mX
    2988/    17AB : A5 22                LDA $22 ;mY
    2989/    17AD : 85 32                STA $32 ;CheckForMonster.mY
    2990/    17AF : 20 57 16             JSR CheckForMonster
    2991/    17B2 : A5 06                LDA ret_val
    2992/    17B4 : F0 03                BEQ .._4258.skip
    2993/    17B6 : 4C 69 18             JMP .if58
    2995/    17B9 : A5 21                LDA $21 ;mX
    2996/    17BB : 85 31                STA $31 ;CheckForCrystal.mX
    2997/    17BD : A5 22                LDA $22 ;mY
    2998/    17BF : 85 32                STA $32 ;CheckForCrystal.mY
    2999/    17C1 : 20 84 16             JSR CheckForCrystal
    3000/    17C4 : A5 06                LDA ret_val
    3001/    17C6 : F0 03                BEQ .._4299.skip
    3002/    17C8 : 4C 69 18             JMP .if59
    3004/    17CB : A9 7E                LDA # (map_data) # $100
    3005/    17CD : 85 2D                STA $2D ;MapXY.map
    3006/    17CF : A9 03                LDA # (map_data)/$100
    3007/    17D1 : 85 2E                STA $2E ;MapXY.map
    3008/    17D3 : A5 21                LDA $21 ;mX
    3009/    17D5 : 85 2F                STA $2F ;MapXY.mX
    3010/    17D7 : A5 22                LDA $22 ;mY
    3011/    17D9 : 85 30                STA $30 ;MapXY.mY
    3012/    17DB : 20 61 15             JSR MapXY
    3013/    17DE : A5 06                LDA ret_val
    3014/    17E0 : 80 03                BRA .s7c0
    3015/    17E2 : 4C 69 18             JMP .s7done
    3016/    17E5 :                      .s7c0:
    3017/    17E5 : C9 00                CMP #$0
    3018/    17E7 : F0 03                BEQ .._4351.skip
    3019/    17E9 : 4C EE 17             JMP .s7c1
    3021/    17EC : 80 16                BRA .s7b1
    3022/    17EE :                      .s7c1:
    3023/    17EE : C9 01                CMP #$1
    3024/    17F0 : D0 04                BNE .s7c2
    3025/    17F2 : 80 10                BRA .s7b1
    3026/    17F4 : 80 0E                BRA .s7b1
    3027/    17F6 :                      .s7c2:
    3028/    17F6 : C9 02                CMP #$2
    3029/    17F8 : D0 04                BNE .s7c3
    3030/    17FA : 80 08                BRA .s7b1
    3031/    17FC : 80 06                BRA .s7b1
    3032/    17FE :                      .s7c3:
    3033/    17FE : C9 03                CMP #$3
    3034/    1800 : D0 67                BNE .s7c4
    3035/    1802 : 80 00                BRA .s7b1
    3036/    1804 :                      .s7b1:
    3037/    1804 : A9 BE                LDA # (crystal_map) # $100
    3038/    1806 : 85 2D                STA $2D ;OffsetXY.map
    3039/    1808 : A9 09                LDA # (crystal_map)/$100
    3040/    180A : 85 2E                STA $2E ;OffsetXY.map
    3041/    180C : A5 21                LDA $21 ;mX
    3042/    180E : 85 2F                STA $2F ;OffsetXY.mX
    3043/    1810 : A5 22                LDA $22 ;mY
    3044/    1812 : 85 30                STA $30 ;OffsetXY.mY
    3045/    1814 : 20 38 15             JSR OffsetXY
    3046/    1817 : 8A                   TXA
    3047/    1818 : 92 06                STA (ret_val)
    3048/    181A : 0A                   ASL
    3049/    181B : 0A                   ASL
    3050/    181C : A8                   TAY
    3051/    181D : A5 21                LDA $21 ;mX
    3052/    181F : 99 DE 02             STA crystal_list,Y
    3053/    1822 : C8                   INY
    3054/    1823 : A5 22                LDA $22 ;mY
    3055/    1825 : 99 DE 02             STA crystal_list,Y
    3056/    1828 : C8                   INY
    3057/    1829 : A9 FF                LDA #$FF
    3058/    182B : 99 DE 02             STA crystal_list,Y
    3059/    182E : C8                   INY
    3060/    182F : A9 03                LDA #$3
    3061/    1831 : 85 2F                STA $2F ;rand8.max
    3062/    1833 : 20 3B 12             JSR rand8
    3063/    1836 : A5 06                LDA ret_val
    3064/    1838 : 80 03                BRA .s8c0
    3065/    183A : 4C 5E 18             JMP .s8done
    3066/    183D :                      .s8c0:
    3067/    183D : C9 00                CMP #$0
    3068/    183F : F0 03                BEQ .._4432.skip
    3069/    1841 : 4C 49 18             JMP .s8c1
    3071/    1844 :                      .s8b1:
    3072/    1844 : A9 00                LDA #$0
    3073/    1846 : 4C 5E 18             JMP .s8done
    3074/    1849 :                      .s8c1:
    3075/    1849 : C9 01                CMP #$1
    3076/    184B : F0 03                BEQ .._4441.skip
    3077/    184D : 4C 55 18             JMP .s8c2
    3079/    1850 :                      .s8b2:
    3080/    1850 : A9 01                LDA #$1
    3081/    1852 : 4C 5E 18             JMP .s8done
    3082/    1855 :                      .s8c2:
    3083/    1855 : C9 02                CMP #$2
    3084/    1857 : F0 03                BEQ .._4450.skip
    3085/    1859 : 4C 5E 18             JMP .s8c3
    3087/    185C :                      .s8b3:
    3088/    185C : A9 02                LDA #$2
    3089/    185E :                      .s8c3:
    3090/    185E :                      .s8done:
    3091/    185E : 99 DE 02             STA crystal_list,Y
    3092/    1861 : E8                   INX
    3093/    1862 : E0 28                CPX #$28
    3094/    1864 : F0 06                BEQ .lc.done
    3095/    1866 : 4C 7F 17             JMP .lc.loop
    3096/    1869 :                      .s7c4:
    3097/    1869 :                      .s7done:
    3098/    1869 :                      .if59:
    3099/    1869 :                      .if58:
    3100/    1869 : 4C 7F 17             JMP .lc.loop
    3102/    186C : 60                   RTS
    3104/    186D :                     UpdateTarget:
    3105/    186D : AD 00 02             LDA display_X
    3106/    1870 : 18                   CLC
    3107/    1871 : 6D 02 02             ADC hero_X
    3108/    1874 : 85 21                STA $21 ;tX
    3109/    1876 : AD 01 02             LDA display_Y
    3110/    1879 : 18                   CLC
    3111/    187A : 6D 03 02             ADC hero_Y
    3112/    187D : 85 22                STA $22 ;tY
    3113/    187F : A9 00                LDA #$0
    3114/    1881 : 8D 23 02             STA hero_target_type
    3115/    1884 : AD 22 02             LDA hero_target_direction
    3116/    1887 : 80 03                BRA .s9c0
    3117/    1889 : 4C DD 18             JMP .s9done
    3118/    188C :                      .s9c0:
    3119/    188C : C9 01                CMP #$1
    3120/    188E : F0 03                BEQ .._4495.skip
    3121/    1890 : 4C A0 18             JMP .s9c1
    3123/    1893 :                      .s9b1:
    3124/    1893 : AD 03 02             LDA hero_Y
    3125/    1896 : D0 03                BNE .._4503.skip
    3126/    1898 : 4C 80 19             JMP .ut.done
    3128/    189B : C6 22                DEC $22 ;tY
    3129/    189D : 4C DD 18             JMP .s9done
    3130/    18A0 :                      .s9c1:
    3131/    18A0 : C9 02                CMP #$2
    3132/    18A2 : F0 03                BEQ .._4505.skip
    3133/    18A4 : 4C B6 18             JMP .s9c2
    3135/    18A7 :                      .s9b2:
    3136/    18A7 : AD 03 02             LDA hero_Y
    3137/    18AA : C9 03                CMP #$3
    3138/    18AC : D0 03                BNE .._4513.skip
    3139/    18AE : 4C 80 19             JMP .ut.done
    3141/    18B1 : E6 22                INC $22 ;tY
    3142/    18B3 : 4C DD 18             JMP .s9done
    3143/    18B6 :                      .s9c2:
    3144/    18B6 : C9 03                CMP #$3
    3145/    18B8 : F0 03                BEQ .._4515.skip
    3146/    18BA : 4C CA 18             JMP .s9c3
    3148/    18BD :                      .s9b3:
    3149/    18BD : AD 02 02             LDA hero_X
    3150/    18C0 : D0 03                BNE .._4523.skip
    3151/    18C2 : 4C 80 19             JMP .ut.done
    3153/    18C5 : C6 21                DEC $21 ;tX
    3154/    18C7 : 4C DD 18             JMP .s9done
    3155/    18CA :                      .s9c3:
    3156/    18CA : C9 04                CMP #$4
    3157/    18CC : F0 03                BEQ .._4525.skip
    3158/    18CE : 4C DD 18             JMP .s9c4
    3160/    18D1 :                      .s9b4:
    3161/    18D1 : AD 02 02             LDA hero_X
    3162/    18D4 : C9 04                CMP #$4
    3163/    18D6 : D0 03                BNE .._4533.skip
    3164/    18D8 : 4C 80 19             JMP .ut.done
    3166/    18DB : E6 21                INC $21 ;tX
    3167/    18DD :                      .s9c4:
    3168/    18DD :                      .s9done:
    3169/    18DD : A5 21                LDA $21 ;tX
    3170/    18DF : 8D 24 02             STA hero_target_index
    3171/    18E2 : A5 22                LDA $22 ;tY
    3172/    18E4 : 8D 25 02             STA hero_target_index2
    3173/    18E7 : A9 7E                LDA # (map_data) # $100
    3174/    18E9 : 85 2D                STA $2D ;MapXY.map
    3175/    18EB : A9 03                LDA # (map_data)/$100
    3176/    18ED : 85 2E                STA $2E ;MapXY.map
    3177/    18EF : A5 21                LDA $21 ;tX
    3178/    18F1 : 85 2F                STA $2F ;MapXY.mX
    3179/    18F3 : A5 22                LDA $22 ;tY
    3180/    18F5 : 85 30                STA $30 ;MapXY.mY
    3181/    18F7 : 20 61 15             JSR MapXY
    3182/    18FA : A5 06                LDA ret_val
    3183/    18FC : 80 03                BRA .s10c0
    3184/    18FE : 4C 80 19             JMP .s10done
    3185/    1901 :                      .s10c0:
    3186/    1901 : C9 04                CMP #$4
    3187/    1903 : F0 03                BEQ .._4608.skip
    3188/    1905 : 4C 10 19             JMP .s10c1
    3190/    1908 :                      .s10b1:
    3191/    1908 : A9 01                LDA #$1
    3192/    190A : 8D 23 02             STA hero_target_type
    3193/    190D : 4C 80 19             JMP .s10done
    3194/    1910 :                      .s10c1:
    3195/    1910 : C9 06                CMP #$6
    3196/    1912 : F0 03                BEQ .._4627.skip
    3197/    1914 : 4C 1F 19             JMP .s10c2
    3199/    1917 :                      .s10b2:
    3200/    1917 : A9 02                LDA #$2
    3201/    1919 : 8D 23 02             STA hero_target_type
    3202/    191C : 4C 80 19             JMP .s10done
    3203/    191F :                      .s10c2:
    3204/    191F : A5 21                LDA $21 ;tX
    3205/    1921 : 85 31                STA $31 ;CheckForMonster.mX
    3206/    1923 : A5 22                LDA $22 ;tY
    3207/    1925 : 85 32                STA $32 ;CheckForMonster.mY
    3208/    1927 : 20 57 16             JSR CheckForMonster
    3209/    192A : A5 06                LDA ret_val
    3210/    192C : D0 03                BNE .._4683.skip
    3211/    192E : 4C 51 19             JMP .if60
    3213/    1931 : A9 03                LDA #$3
    3214/    1933 : 8D 23 02             STA hero_target_type
    3215/    1936 : A9 9E                LDA # (monster_map) # $100
    3216/    1938 : 85 2D                STA $2D ;MapXY.map
    3217/    193A : A9 06                LDA # (monster_map)/$100
    3218/    193C : 85 2E                STA $2E ;MapXY.map
    3219/    193E : A5 21                LDA $21 ;tX
    3220/    1940 : 85 2F                STA $2F ;MapXY.mX
    3221/    1942 : A5 22                LDA $22 ;tY
    3222/    1944 : 85 30                STA $30 ;MapXY.mY
    3223/    1946 : 20 61 15             JSR MapXY
    3224/    1949 : A5 06                LDA ret_val
    3225/    194B : 8D 24 02             STA hero_target_index
    3226/    194E : 4C 80 19             JMP .if61
    3227/    1951 :                      .if60:
    3228/    1951 : A5 21                LDA $21 ;tX
    3229/    1953 : 85 31                STA $31 ;CheckForCrystal.mX
    3230/    1955 : A5 22                LDA $22 ;tY
    3231/    1957 : 85 32                STA $32 ;CheckForCrystal.mY
    3232/    1959 : 20 84 16             JSR CheckForCrystal
    3233/    195C : A5 06                LDA ret_val
    3234/    195E : D0 03                BNE .._4788.skip
    3235/    1960 : 4C 80 19             JMP .if62
    3237/    1963 : A9 04                LDA #$4
    3238/    1965 : 8D 23 02             STA hero_target_type
    3239/    1968 : A9 BE                LDA # (crystal_map) # $100
    3240/    196A : 85 2D                STA $2D ;MapXY.map
    3241/    196C : A9 09                LDA # (crystal_map)/$100
    3242/    196E : 85 2E                STA $2E ;MapXY.map
    3243/    1970 : A5 21                LDA $21 ;tX
    3244/    1972 : 85 2F                STA $2F ;MapXY.mX
    3245/    1974 : A5 22                LDA $22 ;tY
    3246/    1976 : 85 30                STA $30 ;MapXY.mY
    3247/    1978 : 20 61 15             JSR MapXY
    3248/    197B : A5 06                LDA ret_val
    3249/    197D : 8D 24 02             STA hero_target_index
    3250/    1980 :                      .if62:
    3251/    1980 :                      .if61:
    3252/    1980 :                      .s10c3:
    3253/    1980 :                      .s10done:
    3255/    1980 : 60                   RTS
    3257/    1981 :                     DrawRect:
    3258/    1981 : A5 44                LDA $44 ;width
    3259/    1983 : F0 23                BEQ .dr.done
    3260/    1985 : 64 61                STZ $61 ;CalcXY.posx
    3261/    1987 : A5 43                LDA $43 ;ypos
    3262/    1989 : 85 62                STA $62 ;CalcXY.posy
    3263/    198B : 20 2A 0D             JSR CalcXY
    3264/    198E : A5 06                LDA ret_val
    3265/    1990 : 85 47                STA $47 ;gfx_ptr
    3266/    1992 : A5 07                LDA ret_val+$1
    3267/    1994 : 85 48                STA $48 ;gfx_ptr
    3269/    1996 : A4 42                LDY $42 ;xpos
    3270/    1998 : A5 46                LDA $46 ;color
    3271/    199A : A6 44                LDX $44 ;width
    3273/    199C : 91 47                STA ($47),Y ;gfx_ptr
    3274/    199E : C8                   INY
    3275/    199F : CA                   DEX
    3276/    19A0 : D0 FA                BNE .dr.loop
    3277/    19A2 : E6 48                INC $48 ;gfx_ptr
    3278/    19A4 : C6 45                DEC $45 ;height
    3279/    19A6 : D0 EE                BNE .dr.loop_outer
    3281/    19A8 : 60                   RTS
    3283/    19A9 :                     DrawText:
    3284/    19A9 : AD 64 02             LDA draw_X
    3285/    19AC : 85 5E                STA $5E ;original_X
    3286/    19AE : AD 64 02             LDA draw_X
    3287/    19B1 : 85 61                STA $61 ;CalcXY.posx
    3288/    19B3 : A5 53                LDA $53 ;ypos
    3289/    19B5 : 85 62                STA $62 ;CalcXY.posy
    3290/    19B7 : 20 2A 0D             JSR CalcXY
    3291/    19BA : A5 06                LDA ret_val
    3292/    19BC : 85 56                STA $56 ;gfx_ptr
    3293/    19BE : A5 07                LDA ret_val+$1
    3294/    19C0 : 85 57                STA $57 ;gfx_ptr
    3295/    19C2 : 64 5A                STZ $5A ;digit_count
    3297/    19C4 : A5 5A                LDA $5A ;digit_count
    3298/    19C6 : D0 03                BNE .._5098.skip
    3299/    19C8 : 4C 18 1A             JMP .if63
    3301/    19CB : A5 5A                LDA $5A ;digit_count
    3302/    19CD : 80 03                BRA .s11c0
    3303/    19CF : 4C F3 19             JMP .s11done
    3304/    19D2 :                      .s11c0:
    3305/    19D2 : C9 01                CMP #$1
    3306/    19D4 : F0 03                BEQ .._5101.skip
    3307/    19D6 : 4C DE 19             JMP .s11c1
    3309/    19D9 :                      .s11b1:
    3310/    19D9 : A9 01                LDA #$1
    3311/    19DB : 4C F3 19             JMP .s11done
    3312/    19DE :                      .s11c1:
    3313/    19DE : C9 02                CMP #$2
    3314/    19E0 : F0 03                BEQ .._5110.skip
    3315/    19E2 : 4C EA 19             JMP .s11c2
    3317/    19E5 :                      .s11b2:
    3318/    19E5 : A9 0A                LDA #$A
    3319/    19E7 : 4C F3 19             JMP .s11done
    3320/    19EA :                      .s11c2:
    3321/    19EA : C9 03                CMP #$3
    3322/    19EC : F0 03                BEQ .._5119.skip
    3323/    19EE : 4C F3 19             JMP .s11c3
    3325/    19F1 :                      .s11b3:
    3326/    19F1 : A9 64                LDA #$64
    3327/    19F3 :                      .s11c3:
    3328/    19F3 :                      .s11done:
    3329/    19F3 : C6 5A                DEC $5A ;digit_count
    3330/    19F5 : 85 5C                STA $5C ;subtractor
    3331/    19F7 : A9 30                LDA #$30
    3332/    19F9 : 85 5D                STA $5D ;character
    3334/    19FB : A5 5B                LDA $5B ;digit
    3335/    19FD : 38                   SEC
    3336/    19FE : E5 5C                SBC $5C ;subtractor
    3337/    1A00 : B0 03                BCS .._5143.skip
    3338/    1A02 : 4C 0E 1A             JMP .if64
    3340/    1A05 : 85 5B                STA $5B ;digit
    3341/    1A07 : E6 5D                INC $5D ;character
    3342/    1A09 : 80 F0                BRA .dtxt.digit
    3343/    1A0B : 4C 13 1A             JMP .if65
    3344/    1A0E :                      .if64:
    3345/    1A0E : 18                   CLC
    3346/    1A0F : 65 5C                ADC $5C ;subtractor
    3347/    1A11 : 85 5B                STA $5B ;digit
    3348/    1A13 :                      .if65:
    3349/    1A13 : A5 5D                LDA $5D ;character
    3350/    1A15 : 4C 66 1A             JMP .if66
    3351/    1A18 :                      .if63:
    3353/    1A18 : B2 4F                LDA ($4F) ;str_ptr
    3354/    1A1A : D0 03                BNE .._5150.skip
    3355/    1A1C : 4C BB 1A             JMP .dtxt.done
    3357/    1A1F : E6 4F                INC $4F ;str_ptr
    3358/    1A21 : D0 02                BNE .._5151.no_carry
    3359/    1A23 : E6 50                INC $50 ;str_ptr
    3361/    1A25 : C9 24                CMP #$24
    3362/    1A27 : F0 03                BEQ .._5153.skip
    3363/    1A29 : 4C 4C 1A             JMP .if67
    3365/    1A2C : A9 01                LDA #$1
    3366/    1A2E : 85 5A                STA $5A ;digit_count
    3367/    1A30 : A5 51                LDA $51 ;arg1
    3368/    1A32 : 85 5B                STA $5B ;digit
    3369/    1A34 : 48                   PHA
    3370/    1A35 : A5 52                LDA $52 ;arg2
    3371/    1A37 : 85 51                STA $51 ;arg1
    3372/    1A39 : 68                   PLA
    3373/    1A3A : C9 0A                CMP #$A
    3374/    1A3C : 90 86                BCC .dtxt.loop
    3375/    1A3E : E6 5A                INC $5A ;digit_count
    3376/    1A40 : C9 64                CMP #$64
    3377/    1A42 : 90 80                BCC .dtxt.loop
    3378/    1A44 : E6 5A                INC $5A ;digit_count
    3379/    1A46 : 4C C4 19             JMP .dtxt.loop
    3380/    1A49 : 4C 66 1A             JMP .if68
    3381/    1A4C :                      .if67:
    3382/    1A4C : C9 2A                CMP #$2A
    3383/    1A4E : F0 03                BEQ .._5220.skip
    3384/    1A50 : 4C 66 1A             JMP .if69
    3386/    1A53 : A5 5E                LDA $5E ;original_X
    3387/    1A55 : 85 56                STA $56 ;gfx_ptr
    3388/    1A57 : A9 00                LDA #$0
    3389/    1A59 : 18                   CLC
    3390/    1A5A : 65 56                ADC $56 ;gfx_ptr
    3391/    1A5C : 85 56                STA $56 ;gfx_ptr
    3392/    1A5E : A9 0A                LDA #$A
    3393/    1A60 : 65 57                ADC $57 ;gfx_ptr
    3394/    1A62 : 85 57                STA $57 ;gfx_ptr
    3395/    1A64 : 80 B2                BRA .dtxt.next
    3396/    1A66 :                      .if69:
    3397/    1A66 :                      .if68:
    3398/    1A66 :                      .if66:
    3399/    1A66 : 38                   SEC
    3400/    1A67 : E9 20                SBC #$20
    3401/    1A69 : 64 59                STZ $59 ;char_ptr
    3402/    1A6B : 0A                   ASL
    3403/    1A6C : 26 59                ROL $59 ;char_ptr
    3404/    1A6E : 2A                   ROL
    3405/    1A6F : 26 59                ROL $59 ;char_ptr
    3406/    1A71 : 2A                   ROL
    3407/    1A72 : 26 59                ROL $59 ;char_ptr
    3408/    1A74 : 69 00                ADC #CharTable # $100
    3409/    1A76 : 85 58                STA $58 ;char_ptr
    3410/    1A78 : A5 59                LDA $59 ;char_ptr
    3411/    1A7A : 69 C0                ADC #CharTable>>$8
    3412/    1A7C : 85 59                STA $59 ;char_ptr
    3413/    1A7E : A0 00                LDY #$0
    3415/    1A80 : B1 58                LDA ($58),Y ;char_ptr
    3416/    1A82 : A2 06                LDX #$6
    3417/    1A84 : 18                   CLC
    3419/    1A85 : 6A                   ROR
    3420/    1A86 : 48                   PHA
    3421/    1A87 : 90 03                BCC .._5231.skip
    3422/    1A89 : 4C 91 1A             JMP .if70
    3424/    1A8C : A5 55                LDA $55 ;bg_color
    3425/    1A8E : 4C 94 1A             JMP .if71
    3426/    1A91 :                      .if70:
    3427/    1A91 : 18                   CLC
    3428/    1A92 : A5 54                LDA $54 ;fg_color
    3429/    1A94 :                      .if71:
    3430/    1A94 : 92 56                STA ($56) ;gfx_ptr
    3431/    1A96 : E6 56                INC $56 ;gfx_ptr
    3432/    1A98 : 68                   PLA
    3433/    1A99 : CA                   DEX
    3434/    1A9A : D0 E9                BNE .dtxt.pixel
    3435/    1A9C : A5 56                LDA $56 ;gfx_ptr
    3436/    1A9E : 38                   SEC
    3437/    1A9F : E9 06                SBC #$6
    3438/    1AA1 : 85 56                STA $56 ;gfx_ptr
    3439/    1AA3 : E6 57                INC $57 ;gfx_ptr
    3440/    1AA5 : C8                   INY
    3441/    1AA6 : C0 08                CPY #$8
    3442/    1AA8 : D0 D6                BNE .dtxt.row
    3443/    1AAA : A5 56                LDA $56 ;gfx_ptr
    3444/    1AAC : 18                   CLC
    3445/    1AAD : 69 06                ADC #$6
    3446/    1AAF : 85 56                STA $56 ;gfx_ptr
    3447/    1AB1 : A5 57                LDA $57 ;gfx_ptr
    3448/    1AB3 : 38                   SEC
    3449/    1AB4 : E9 08                SBC #$8
    3450/    1AB6 : 85 57                STA $57 ;gfx_ptr
    3451/    1AB8 : 4C C4 19             JMP .dtxt.loop
    3453/    1ABB : 60                   RTS
    3455/    1ABC :                     DrawBar:
    3456/    1ABC : A5 2F                LDA $2F ;stat1
    3457/    1ABE : 85 33                STA $33 ;bar_width
    3458/    1AC0 : 64 34                STZ $34 ;bar_width
    3459/    1AC2 : 18                   CLC
    3460/    1AC3 : 26 33                ROL $33 ;bar_width
    3461/    1AC5 : 26 34                ROL $34 ;bar_width
    3462/    1AC7 : 26 33                ROL $33 ;bar_width
    3463/    1AC9 : 26 34                ROL $34 ;bar_width
    3464/    1ACB : 26 33                ROL $33 ;bar_width
    3465/    1ACD : 26 34                ROL $34 ;bar_width
    3466/    1ACF : 26 33                ROL $33 ;bar_width
    3467/    1AD1 : 26 34                ROL $34 ;bar_width
    3468/    1AD3 : A5 33                LDA $33 ;bar_width
    3469/    1AD5 : 85 35                STA $35 ;mult_buff
    3470/    1AD7 : A5 34                LDA $34 ;bar_width
    3471/    1AD9 : 85 36                STA $36 ;mult_buff
    3472/    1ADB : 26 33                ROL $33 ;bar_width
    3473/    1ADD : 26 34                ROL $34 ;bar_width
    3474/    1ADF : 26 33                ROL $33 ;bar_width
    3475/    1AE1 : 26 34                ROL $34 ;bar_width
    3476/    1AE3 : A5 33                LDA $33 ;bar_width
    3477/    1AE5 : 18                   CLC
    3478/    1AE6 : 65 35                ADC $35 ;mult_buff
    3479/    1AE8 : 85 35                STA $35 ;mult_buff
    3480/    1AEA : A5 34                LDA $34 ;bar_width
    3481/    1AEC : 65 36                ADC $36 ;mult_buff
    3482/    1AEE : 85 36                STA $36 ;mult_buff
    3483/    1AF0 : 64 33                STZ $33 ;bar_width
    3484/    1AF2 : 64 34                STZ $34 ;bar_width
    3485/    1AF4 : A5 30                LDA $30 ;stat2
    3486/    1AF6 : 85 38                STA $38 ;div_buff
    3487/    1AF8 : 64 37                STZ $37 ;div_buff
    3488/    1AFA : A9 00                LDA #$0
    3489/    1AFC : 85 06                STA ret_val
    3490/    1AFE : A9 01                LDA #$1
    3491/    1B00 : 85 07                STA ret_val+$1
    3493/    1B02 : A5 35                LDA $35 ;mult_buff
    3494/    1B04 : 38                   SEC
    3495/    1B05 : E5 37                SBC $37 ;div_buff
    3496/    1B07 : 85 35                STA $35 ;mult_buff
    3497/    1B09 : A5 36                LDA $36 ;mult_buff
    3498/    1B0B : E5 38                SBC $38 ;div_buff
    3499/    1B0D : 85 36                STA $36 ;mult_buff
    3500/    1B0F : B0 03                BCS .._5357.skip
    3501/    1B11 : 4C 23 1B             JMP .if72
    3503/    1B14 : A5 06                LDA ret_val
    3504/    1B16 : 18                   CLC
    3505/    1B17 : 65 33                ADC $33 ;bar_width
    3506/    1B19 : 85 33                STA $33 ;bar_width
    3507/    1B1B : A5 07                LDA ret_val+$1
    3508/    1B1D : 65 34                ADC $34 ;bar_width
    3509/    1B1F : 85 34                STA $34 ;bar_width
    3510/    1B21 : 80 DF                BRA .dbar.div1
    3511/    1B23 :                      .if72:
    3512/    1B23 : A5 37                LDA $37 ;div_buff
    3513/    1B25 : 18                   CLC
    3514/    1B26 : 65 35                ADC $35 ;mult_buff
    3515/    1B28 : 85 35                STA $35 ;mult_buff
    3516/    1B2A : A5 38                LDA $38 ;div_buff
    3517/    1B2C : 65 36                ADC $36 ;mult_buff
    3518/    1B2E : 85 36                STA $36 ;mult_buff
    3519/    1B30 : 18                   CLC
    3520/    1B31 : 66 38                ROR $38 ;div_buff
    3521/    1B33 : 66 37                ROR $37 ;div_buff
    3522/    1B35 : 18                   CLC
    3523/    1B36 : 66 07                ROR ret_val+$1
    3524/    1B38 : 66 06                ROR ret_val
    3525/    1B3A : A5 06                LDA ret_val
    3526/    1B3C : 05 07                ORA ret_val+$1
    3527/    1B3E : D0 C2                BNE .dbar.div1
    3528/    1B40 : A5 2D                LDA $2D ;xpos
    3529/    1B42 : 85 42                STA $42 ;DrawRect.xpos
    3530/    1B44 : A5 2E                LDA $2E ;ypos
    3531/    1B46 : 85 43                STA $43 ;DrawRect.ypos
    3532/    1B48 : A5 33                LDA $33 ;bar_width
    3533/    1B4A : 85 44                STA $44 ;DrawRect.width
    3534/    1B4C : A9 06                LDA #$6
    3535/    1B4E : 85 45                STA $45 ;DrawRect.height
    3536/    1B50 : A5 31                LDA $31 ;fg_color
    3537/    1B52 : 85 46                STA $46 ;DrawRect.color
    3538/    1B54 : 20 81 19             JSR DrawRect
    3539/    1B57 : A5 2D                LDA $2D ;xpos
    3540/    1B59 : 18                   CLC
    3541/    1B5A : 65 33                ADC $33 ;bar_width
    3542/    1B5C : 85 2D                STA $2D ;xpos
    3543/    1B5E : A9 50                LDA #$50
    3544/    1B60 : 38                   SEC
    3545/    1B61 : E5 33                SBC $33 ;bar_width
    3546/    1B63 : 85 33                STA $33 ;bar_width
    3547/    1B65 : A5 2D                LDA $2D ;xpos
    3548/    1B67 : 85 42                STA $42 ;DrawRect.xpos
    3549/    1B69 : A5 2E                LDA $2E ;ypos
    3550/    1B6B : 85 43                STA $43 ;DrawRect.ypos
    3551/    1B6D : A5 33                LDA $33 ;bar_width
    3552/    1B6F : 85 44                STA $44 ;DrawRect.width
    3553/    1B71 : A9 06                LDA #$6
    3554/    1B73 : 85 45                STA $45 ;DrawRect.height
    3555/    1B75 : A5 32                LDA $32 ;bg_color
    3556/    1B77 : 85 46                STA $46 ;DrawRect.color
    3557/    1B79 : 20 81 19             JSR DrawRect
    3558/    1B7C : 60                   RTS
    3560/    1B7D :                     DrawLegend:
    3561/    1B7D : A9 A0                LDA #$A0
    3562/    1B7F : 85 42                STA $42 ;DrawRect.xpos
    3563/    1B81 : A9 00                LDA #$0
    3564/    1B83 : 85 43                STA $43 ;DrawRect.ypos
    3565/    1B85 : A9 60                LDA #$60
    3566/    1B87 : 85 44                STA $44 ;DrawRect.width
    3567/    1B89 : A9 80                LDA #$80
    3568/    1B8B : 85 45                STA $45 ;DrawRect.height
    3569/    1B8D : A9 15                LDA #$15
    3570/    1B8F : 85 46                STA $46 ;DrawRect.color
    3571/    1B91 : 20 81 19             JSR DrawRect
    3572/    1B94 : A9 A8                LDA #$A8
    3573/    1B96 : 8D 64 02             STA draw_X
    3574/    1B99 : 80 07                BRA .._5734.str_skip
    3576/    1B9B : 48 50 3A 24 2F 24    FCB "HP:$/$",$0
    3578/    1BA2 : A9 9B                LDA # (.._5734.str_addr) # $100
    3579/    1BA4 : 85 4F                STA $4F ;DrawText.str_ptr
    3580/    1BA6 : A9 1B                LDA # (.._5734.str_addr)/$100
    3581/    1BA8 : 85 50                STA $50 ;DrawText.str_ptr
    3582/    1BAA : AD 04 02             LDA hero_HP
    3583/    1BAD : 85 51                STA $51 ;DrawText.arg1
    3584/    1BAF : AD 06 02             LDA hero_HP_Max
    3585/    1BB2 : 85 52                STA $52 ;DrawText.arg2
    3586/    1BB4 : A9 04                LDA #$4
    3587/    1BB6 : 85 53                STA $53 ;DrawText.ypos
    3588/    1BB8 : A9 3F                LDA #$3F
    3589/    1BBA : 85 54                STA $54 ;DrawText.fg_color
    3590/    1BBC : A9 15                LDA #$15
    3591/    1BBE : 85 55                STA $55 ;DrawText.bg_color
    3592/    1BC0 : 20 A9 19             JSR DrawText
    3593/    1BC3 : A9 A8                LDA #$A8
    3594/    1BC5 : 85 2D                STA $2D ;DrawBar.xpos
    3595/    1BC7 : A9 0D                LDA #$D
    3596/    1BC9 : 85 2E                STA $2E ;DrawBar.ypos
    3597/    1BCB : AD 04 02             LDA hero_HP
    3598/    1BCE : 85 2F                STA $2F ;DrawBar.stat1
    3599/    1BD0 : AD 06 02             LDA hero_HP_Max
    3600/    1BD3 : 85 30                STA $30 ;DrawBar.stat2
    3601/    1BD5 : A9 03                LDA #$3
    3602/    1BD7 : 85 31                STA $31 ;DrawBar.fg_color
    3603/    1BD9 : A9 02                LDA #$2
    3604/    1BDB : 85 32                STA $32 ;DrawBar.bg_color
    3605/    1BDD : 20 BC 1A             JSR DrawBar
    3606/    1BE0 : A9 A8                LDA #$A8
    3607/    1BE2 : 8D 64 02             STA draw_X
    3608/    1BE5 : 80 09                BRA .._5979.str_skip
    3610/    1BE7 : 42 61 74 74 3A 24    FCB "Batt:$/$",$0
    3612/    1BF0 : A9 E7                LDA # (.._5979.str_addr) # $100
    3613/    1BF2 : 85 4F                STA $4F ;DrawText.str_ptr
    3614/    1BF4 : A9 1B                LDA # (.._5979.str_addr)/$100
    3615/    1BF6 : 85 50                STA $50 ;DrawText.str_ptr
    3616/    1BF8 : AD 0A 02             LDA hero_Batt
    3617/    1BFB : 85 51                STA $51 ;DrawText.arg1
    3618/    1BFD : AD 0B 02             LDA hero_Batt_Max
    3619/    1C00 : 85 52                STA $52 ;DrawText.arg2
    3620/    1C02 : A9 18                LDA #$18
    3621/    1C04 : 85 53                STA $53 ;DrawText.ypos
    3622/    1C06 : A9 3F                LDA #$3F
    3623/    1C08 : 85 54                STA $54 ;DrawText.fg_color
    3624/    1C0A : A9 15                LDA #$15
    3625/    1C0C : 85 55                STA $55 ;DrawText.bg_color
    3626/    1C0E : 20 A9 19             JSR DrawText
    3627/    1C11 : A9 A8                LDA #$A8
    3628/    1C13 : 85 2D                STA $2D ;DrawBar.xpos
    3629/    1C15 : A9 21                LDA #$21
    3630/    1C17 : 85 2E                STA $2E ;DrawBar.ypos
    3631/    1C19 : AD 0A 02             LDA hero_Batt
    3632/    1C1C : 85 2F                STA $2F ;DrawBar.stat1
    3633/    1C1E : AD 0B 02             LDA hero_Batt_Max
    3634/    1C21 : 85 30                STA $30 ;DrawBar.stat2
    3635/    1C23 : A9 30                LDA #$30
    3636/    1C25 : 85 31                STA $31 ;DrawBar.fg_color
    3637/    1C27 : A9 20                LDA #$20
    3638/    1C29 : 85 32                STA $32 ;DrawBar.bg_color
    3639/    1C2B : 20 BC 1A             JSR DrawBar
    3640/    1C2E : A9 A8                LDA #$A8
    3641/    1C30 : 8D 64 02             STA draw_X
    3642/    1C33 : 80 08                BRA .._6224.str_skip
    3644/    1C35 : 45 78 70 3A 24 2F    FCB "Exp:$/$",$0
    3646/    1C3D : A9 35                LDA # (.._6224.str_addr) # $100
    3647/    1C3F : 85 4F                STA $4F ;DrawText.str_ptr
    3648/    1C41 : A9 1C                LDA # (.._6224.str_addr)/$100
    3649/    1C43 : 85 50                STA $50 ;DrawText.str_ptr
    3650/    1C45 : AD 1A 02             LDA hero_Exp
    3651/    1C48 : 85 51                STA $51 ;DrawText.arg1
    3652/    1C4A : AD 1B 02             LDA hero_Exp_Max
    3653/    1C4D : 85 52                STA $52 ;DrawText.arg2
    3654/    1C4F : A9 2C                LDA #$2C
    3655/    1C51 : 85 53                STA $53 ;DrawText.ypos
    3656/    1C53 : A9 3F                LDA #$3F
    3657/    1C55 : 85 54                STA $54 ;DrawText.fg_color
    3658/    1C57 : A9 15                LDA #$15
    3659/    1C59 : 85 55                STA $55 ;DrawText.bg_color
    3660/    1C5B : 20 A9 19             JSR DrawText
    3661/    1C5E : A9 A8                LDA #$A8
    3662/    1C60 : 85 2D                STA $2D ;DrawBar.xpos
    3663/    1C62 : A9 35                LDA #$35
    3664/    1C64 : 85 2E                STA $2E ;DrawBar.ypos
    3665/    1C66 : AD 1A 02             LDA hero_Exp
    3666/    1C69 : 85 2F                STA $2F ;DrawBar.stat1
    3667/    1C6B : AD 1B 02             LDA hero_Exp_Max
    3668/    1C6E : 85 30                STA $30 ;DrawBar.stat2
    3669/    1C70 : A9 0C                LDA #$C
    3670/    1C72 : 85 31                STA $31 ;DrawBar.fg_color
    3671/    1C74 : A9 08                LDA #$8
    3672/    1C76 : 85 32                STA $32 ;DrawBar.bg_color
    3673/    1C78 : 20 BC 1A             JSR DrawBar
    3674/    1C7B : AD 23 02             LDA hero_target_type
    3675/    1C7E : 80 03                BRA .s12c0
    3676/    1C80 : 4C C2 1D             JMP .s12done
    3677/    1C83 :                      .s12c0:
    3678/    1C83 : C9 01                CMP #$1
    3679/    1C85 : F0 03                BEQ .._6453.skip
    3680/    1C87 : 4C B4 1C             JMP .s12c1
    3682/    1C8A :                      .s12b1:
    3683/    1C8A : A9 A8                LDA #$A8
    3684/    1C8C : 8D 64 02             STA draw_X
    3685/    1C8F : 80 05                BRA .._6479.str_skip
    3687/    1C91 : 52 6F 63 6B 00       FCB "Rock",$0
    3689/    1C96 : A9 91                LDA # (.._6479.str_addr) # $100
    3690/    1C98 : 85 4F                STA $4F ;DrawText.str_ptr
    3691/    1C9A : A9 1C                LDA # (.._6479.str_addr)/$100
    3692/    1C9C : 85 50                STA $50 ;DrawText.str_ptr
    3693/    1C9E : 64 51                STZ $51 ;DrawText.arg1
    3694/    1CA0 : 64 52                STZ $52 ;DrawText.arg2
    3695/    1CA2 : A9 40                LDA #$40
    3696/    1CA4 : 85 53                STA $53 ;DrawText.ypos
    3697/    1CA6 : A9 21                LDA #$21
    3698/    1CA8 : 85 54                STA $54 ;DrawText.fg_color
    3699/    1CAA : A9 15                LDA #$15
    3700/    1CAC : 85 55                STA $55 ;DrawText.bg_color
    3701/    1CAE : 20 A9 19             JSR DrawText
    3702/    1CB1 : 4C C2 1D             JMP .s12done
    3703/    1CB4 :                      .s12c1:
    3704/    1CB4 : C9 02                CMP #$2
    3705/    1CB6 : F0 03                BEQ .._6578.skip
    3706/    1CB8 : 4C E5 1C             JMP .s12c2
    3708/    1CBB :                      .s12b2:
    3709/    1CBB : A9 A8                LDA #$A8
    3710/    1CBD : 8D 64 02             STA draw_X
    3711/    1CC0 : 80 05                BRA .._6604.str_skip
    3713/    1CC2 : 45 78 69 74 00       FCB "Exit",$0
    3715/    1CC7 : A9 C2                LDA # (.._6604.str_addr) # $100
    3716/    1CC9 : 85 4F                STA $4F ;DrawText.str_ptr
    3717/    1CCB : A9 1C                LDA # (.._6604.str_addr)/$100
    3718/    1CCD : 85 50                STA $50 ;DrawText.str_ptr
    3719/    1CCF : 64 51                STZ $51 ;DrawText.arg1
    3720/    1CD1 : 64 52                STZ $52 ;DrawText.arg2
    3721/    1CD3 : A9 40                LDA #$40
    3722/    1CD5 : 85 53                STA $53 ;DrawText.ypos
    3723/    1CD7 : A9 35                LDA #$35
    3724/    1CD9 : 85 54                STA $54 ;DrawText.fg_color
    3725/    1CDB : A9 15                LDA #$15
    3726/    1CDD : 85 55                STA $55 ;DrawText.bg_color
    3727/    1CDF : 20 A9 19             JSR DrawText
    3728/    1CE2 : 4C C2 1D             JMP .s12done
    3729/    1CE5 :                      .s12c2:
    3730/    1CE5 : C9 03                CMP #$3
    3731/    1CE7 : F0 03                BEQ .._6703.skip
    3732/    1CE9 : 4C 1C 1D             JMP .s12c3
    3734/    1CEC :                      .s12b3:
    3735/    1CEC : A9 A8                LDA #$A8
    3736/    1CEE : 8D 64 02             STA draw_X
    3737/    1CF1 : 80 0B                BRA .._6729.str_skip
    3739/    1CF3 : 45 76 69 6C 20 72    FCB "Evil robot",$0
    3741/    1CFE : A9 F3                LDA # (.._6729.str_addr) # $100
    3742/    1D00 : 85 4F                STA $4F ;DrawText.str_ptr
    3743/    1D02 : A9 1C                LDA # (.._6729.str_addr)/$100
    3744/    1D04 : 85 50                STA $50 ;DrawText.str_ptr
    3745/    1D06 : 64 51                STZ $51 ;DrawText.arg1
    3746/    1D08 : 64 52                STZ $52 ;DrawText.arg2
    3747/    1D0A : A9 40                LDA #$40
    3748/    1D0C : 85 53                STA $53 ;DrawText.ypos
    3749/    1D0E : A9 01                LDA #$1
    3750/    1D10 : 85 54                STA $54 ;DrawText.fg_color
    3751/    1D12 : A9 15                LDA #$15
    3752/    1D14 : 85 55                STA $55 ;DrawText.bg_color
    3753/    1D16 : 20 A9 19             JSR DrawText
    3754/    1D19 : 4C C2 1D             JMP .s12done
    3755/    1D1C :                      .s12c3:
    3756/    1D1C : C9 04                CMP #$4
    3757/    1D1E : F0 03                BEQ .._6828.skip
    3758/    1D20 : 4C C2 1D             JMP .s12c4
    3760/    1D23 :                      .s12b4:
    3761/    1D23 : A9 A8                LDA #$A8
    3762/    1D25 : 8D 64 02             STA draw_X
    3763/    1D28 : AD 24 02             LDA hero_target_index
    3764/    1D2B : 0A                   ASL
    3765/    1D2C : 0A                   ASL
    3766/    1D2D : 69 03                ADC #$3
    3767/    1D2F : A8                   TAY
    3768/    1D30 : B9 DE 02             LDA crystal_list,Y
    3769/    1D33 : 80 03                BRA .s13c0
    3770/    1D35 : 4C C2 1D             JMP .s13done
    3771/    1D38 :                      .s13c0:
    3772/    1D38 : C9 00                CMP #$0
    3773/    1D3A : F0 03                BEQ .._6853.skip
    3774/    1D3C : 4C 67 1D             JMP .s13c1
    3776/    1D3F :                      .s13b1:
    3777/    1D3F : 80 08                BRA .._6864.str_skip
    3779/    1D41 : 43 72 79 73 74 61    FCB "Crystal",$0
    3781/    1D49 : A9 41                LDA # (.._6864.str_addr) # $100
    3782/    1D4B : 85 4F                STA $4F ;DrawText.str_ptr
    3783/    1D4D : A9 1D                LDA # (.._6864.str_addr)/$100
    3784/    1D4F : 85 50                STA $50 ;DrawText.str_ptr
    3785/    1D51 : 64 51                STZ $51 ;DrawText.arg1
    3786/    1D53 : 64 52                STZ $52 ;DrawText.arg2
    3787/    1D55 : A9 40                LDA #$40
    3788/    1D57 : 85 53                STA $53 ;DrawText.ypos
    3789/    1D59 : A9 17                LDA #$17
    3790/    1D5B : 85 54                STA $54 ;DrawText.fg_color
    3791/    1D5D : A9 15                LDA #$15
    3792/    1D5F : 85 55                STA $55 ;DrawText.bg_color
    3793/    1D61 : 20 A9 19             JSR DrawText
    3794/    1D64 : 4C C2 1D             JMP .s13done
    3795/    1D67 :                      .s13c1:
    3796/    1D67 : C9 01                CMP #$1
    3797/    1D69 : F0 03                BEQ .._6963.skip
    3798/    1D6B : 4C 96 1D             JMP .s13c2
    3800/    1D6E :                      .s13b2:
    3801/    1D6E : 80 08                BRA .._6974.str_skip
    3803/    1D70 : 43 72 79 73 74 61    FCB "Crystal",$0
    3805/    1D78 : A9 70                LDA # (.._6974.str_addr) # $100
    3806/    1D7A : 85 4F                STA $4F ;DrawText.str_ptr
    3807/    1D7C : A9 1D                LDA # (.._6974.str_addr)/$100
    3808/    1D7E : 85 50                STA $50 ;DrawText.str_ptr
    3809/    1D80 : 64 51                STZ $51 ;DrawText.arg1
    3810/    1D82 : 64 52                STZ $52 ;DrawText.arg2
    3811/    1D84 : A9 40                LDA #$40
    3812/    1D86 : 85 53                STA $53 ;DrawText.ypos
    3813/    1D88 : A9 35                LDA #$35
    3814/    1D8A : 85 54                STA $54 ;DrawText.fg_color
    3815/    1D8C : A9 15                LDA #$15
    3816/    1D8E : 85 55                STA $55 ;DrawText.bg_color
    3817/    1D90 : 20 A9 19             JSR DrawText
    3818/    1D93 : 4C C2 1D             JMP .s13done
    3819/    1D96 :                      .s13c2:
    3820/    1D96 : C9 02                CMP #$2
    3821/    1D98 : F0 03                BEQ .._7073.skip
    3822/    1D9A : 4C C2 1D             JMP .s13c3
    3824/    1D9D :                      .s13b3:
    3825/    1D9D : 80 08                BRA .._7084.str_skip
    3827/    1D9F : 43 72 79 73 74 61    FCB "Crystal",$0
    3829/    1DA7 : A9 9F                LDA # (.._7084.str_addr) # $100
    3830/    1DA9 : 85 4F                STA $4F ;DrawText.str_ptr
    3831/    1DAB : A9 1D                LDA # (.._7084.str_addr)/$100
    3832/    1DAD : 85 50                STA $50 ;DrawText.str_ptr
    3833/    1DAF : 64 51                STZ $51 ;DrawText.arg1
    3834/    1DB1 : 64 52                STZ $52 ;DrawText.arg2
    3835/    1DB3 : A9 40                LDA #$40
    3836/    1DB5 : 85 53                STA $53 ;DrawText.ypos
    3837/    1DB7 : A9 1F                LDA #$1F
    3838/    1DB9 : 85 54                STA $54 ;DrawText.fg_color
    3839/    1DBB : A9 15                LDA #$15
    3840/    1DBD : 85 55                STA $55 ;DrawText.bg_color
    3841/    1DBF : 20 A9 19             JSR DrawText
    3842/    1DC2 :                      .s13c3:
    3843/    1DC2 :                      .s13done:
    3844/    1DC2 :                      .s12c4:
    3845/    1DC2 :                      .s12done:
    3846/    1DC2 : AD 26 02             LDA hero_activity
    3847/    1DC5 : D0 03                BNE .._7194.skip
    3848/    1DC7 : 4C E7 1D             JMP .if73
    3850/    1DCA : A9 A8                LDA #$A8
    3851/    1DCC : 85 2D                STA $2D ;DrawBar.xpos
    3852/    1DCE : A9 49                LDA #$49
    3853/    1DD0 : 85 2E                STA $2E ;DrawBar.ypos
    3854/    1DD2 : AD 27 02             LDA hero_activity_ticks
    3855/    1DD5 : 85 2F                STA $2F ;DrawBar.stat1
    3856/    1DD7 : AD 29 02             LDA hero_activity_ticks_max
    3857/    1DDA : 85 30                STA $30 ;DrawBar.stat2
    3858/    1DDC : A9 32                LDA #$32
    3859/    1DDE : 85 31                STA $31 ;DrawBar.fg_color
    3860/    1DE0 : A9 21                LDA #$21
    3861/    1DE2 : 85 32                STA $32 ;DrawBar.bg_color
    3862/    1DE4 : 20 BC 1A             JSR DrawBar
    3863/    1DE7 :                      .if73:
    3864/    1DE7 : A9 7E                LDA # (map_data) # $100
    3865/    1DE9 : 85 3B                STA $3B ;map_ptr
    3866/    1DEB : A9 03                LDA # (map_data)/$100
    3867/    1DED : 85 3C                STA $3C ;map_ptr
    3868/    1DEF : A9 A8                LDA #$A8
    3869/    1DF1 : 85 61                STA $61 ;CalcXY.posx
    3870/    1DF3 : A9 54                LDA #$54
    3871/    1DF5 : 85 62                STA $62 ;CalcXY.posy
    3872/    1DF7 : 20 2A 0D             JSR CalcXY
    3873/    1DFA : A5 06                LDA ret_val
    3874/    1DFC : 85 39                STA $39 ;gfx_ptr
    3875/    1DFE : A5 07                LDA ret_val+$1
    3876/    1E00 : 85 3A                STA $3A ;gfx_ptr
    3877/    1E02 : A9 14                LDA #$14
    3878/    1E04 : 85 3D                STA $3D ;height
    3879/    1E06 : 64 3E                STZ $3E ;mX
    3880/    1E08 : 64 3F                STZ $3F ;mY
    3882/    1E0A : A0 00                LDY #$0
    3884/    1E0C : A9 00                LDA #$0
    3885/    1E0E : 85 40                STA $40 ;if_monster
    3886/    1E10 : A9 00                LDA #$0
    3887/    1E12 : 85 41                STA $41 ;if_crystal
    3888/    1E14 : 5A                   PHY
    3889/    1E15 : A5 3E                LDA $3E ;mX
    3890/    1E17 : 85 31                STA $31 ;CheckForMonster.mX
    3891/    1E19 : A5 3F                LDA $3F ;mY
    3892/    1E1B : 85 32                STA $32 ;CheckForMonster.mY
    3893/    1E1D : 20 57 16             JSR CheckForMonster
    3894/    1E20 : A5 06                LDA ret_val
    3895/    1E22 : 85 40                STA $40 ;if_monster
    3896/    1E24 : A5 3E                LDA $3E ;mX
    3897/    1E26 : 85 31                STA $31 ;CheckForCrystal.mX
    3898/    1E28 : A5 3F                LDA $3F ;mY
    3899/    1E2A : 85 32                STA $32 ;CheckForCrystal.mY
    3900/    1E2C : 20 84 16             JSR CheckForCrystal
    3901/    1E2F : A5 06                LDA ret_val
    3902/    1E31 : 85 41                STA $41 ;if_crystal
    3903/    1E33 : 7A                   PLY
    3904/    1E34 : A5 3E                LDA $3E ;mX
    3905/    1E36 : 1A                   INC
    3906/    1E37 : C9 28                CMP #$28
    3907/    1E39 : D0 03                BNE .._7574.skip
    3908/    1E3B : 4C 43 1E             JMP .if74
    3910/    1E3E : 85 3E                STA $3E ;mX
    3911/    1E40 : 4C 47 1E             JMP .if75
    3912/    1E43 :                      .if74:
    3913/    1E43 : 64 3E                STZ $3E ;mX
    3914/    1E45 : E6 3F                INC $3F ;mY
    3915/    1E47 :                      .if75:
    3916/    1E47 : A5 40                LDA $40 ;if_monster
    3917/    1E49 : D0 03                BNE .._7581.skip
    3918/    1E4B : 4C 52 1E             JMP .if76
    3920/    1E4E : A9 03                LDA #$3
    3921/    1E50 : 80 5C                BRA .dl.pixel
    3922/    1E52 :                      .if76:
    3923/    1E52 : A5 41                LDA $41 ;if_crystal
    3924/    1E54 : D0 03                BNE .._7586.skip
    3925/    1E56 : 4C 5D 1E             JMP .if77
    3927/    1E59 : A9 0F                LDA #$F
    3928/    1E5B : 80 51                BRA .dl.pixel
    3929/    1E5D :                      .if77:
    3930/    1E5D : B1 3B                LDA ($3B),Y ;map_ptr
    3931/    1E5F : 80 03                BRA .s14c0
    3932/    1E61 : 4C AE 1E             JMP .s14done
    3933/    1E64 :                      .s14c0:
    3934/    1E64 : C9 00                CMP #$0
    3935/    1E66 : F0 03                BEQ .._7591.skip
    3936/    1E68 : 4C 6D 1E             JMP .s14c1
    3938/    1E6B : 80 16                BRA .s14b1
    3939/    1E6D :                      .s14c1:
    3940/    1E6D : C9 01                CMP #$1
    3941/    1E6F : D0 04                BNE .s14c2
    3942/    1E71 : 80 10                BRA .s14b1
    3943/    1E73 : 80 0E                BRA .s14b1
    3944/    1E75 :                      .s14c2:
    3945/    1E75 : C9 02                CMP #$2
    3946/    1E77 : D0 04                BNE .s14c3
    3947/    1E79 : 80 08                BRA .s14b1
    3948/    1E7B : 80 06                BRA .s14b1
    3949/    1E7D :                      .s14c3:
    3950/    1E7D : C9 03                CMP #$3
    3951/    1E7F : D0 07                BNE .s14c4
    3952/    1E81 : 80 00                BRA .s14b1
    3953/    1E83 :                      .s14b1:
    3954/    1E83 : A9 3B                LDA #$3B
    3955/    1E85 : 4C AE 1E             JMP .s14done
    3956/    1E88 :                      .s14c4:
    3957/    1E88 : C9 04                CMP #$4
    3958/    1E8A : F0 03                BEQ .._7600.skip
    3959/    1E8C : 4C 94 1E             JMP .s14c5
    3961/    1E8F :                      .s14b2:
    3962/    1E8F : A9 21                LDA #$21
    3963/    1E91 : 4C AE 1E             JMP .s14done
    3964/    1E94 :                      .s14c5:
    3965/    1E94 : C9 05                CMP #$5
    3966/    1E96 : F0 03                BEQ .._7609.skip
    3967/    1E98 : 4C A0 1E             JMP .s14c6
    3969/    1E9B :                      .s14b3:
    3970/    1E9B : A9 0B                LDA #$B
    3971/    1E9D : 4C AE 1E             JMP .s14done
    3972/    1EA0 :                      .s14c6:
    3973/    1EA0 : C9 06                CMP #$6
    3974/    1EA2 : F0 03                BEQ .._7618.skip
    3975/    1EA4 : 4C AC 1E             JMP .s14c7
    3977/    1EA7 :                      .s14b4:
    3978/    1EA7 : A9 35                LDA #$35
    3979/    1EA9 : 4C AE 1E             JMP .s14done
    3980/    1EAC :                      .s14c7:
    3981/    1EAC : A9 3F                LDA #$3F
    3982/    1EAE :                      .s14c8:
    3983/    1EAE :                      .s14done:
    3985/    1EAE : 5A                   PHY
    3986/    1EAF : 48                   PHA
    3987/    1EB0 : 98                   TYA
    3988/    1EB1 : 0A                   ASL
    3989/    1EB2 : A8                   TAY
    3990/    1EB3 : 68                   PLA
    3991/    1EB4 : 91 39                STA ($39),Y ;gfx_ptr
    3992/    1EB6 : C8                   INY
    3993/    1EB7 : 91 39                STA ($39),Y ;gfx_ptr
    3994/    1EB9 : E6 3A                INC $3A ;gfx_ptr
    3995/    1EBB : 91 39                STA ($39),Y ;gfx_ptr
    3996/    1EBD : 88                   DEY
    3997/    1EBE : 91 39                STA ($39),Y ;gfx_ptr
    3998/    1EC0 : C6 3A                DEC $3A ;gfx_ptr
    3999/    1EC2 : 7A                   PLY
    4000/    1EC3 : C8                   INY
    4001/    1EC4 : C0 28                CPY #$28
    4002/    1EC6 : F0 03                BEQ .._7633.skip
    4003/    1EC8 : 4C 0C 1E             JMP .dl.loop
    4005/    1ECB : A9 A8                LDA #$A8
    4006/    1ECD : 85 39                STA $39 ;gfx_ptr
    4007/    1ECF : E6 3A                INC $3A ;gfx_ptr
    4008/    1ED1 : E6 3A                INC $3A ;gfx_ptr
    4009/    1ED3 : A9 28                LDA #$28
    4010/    1ED5 : 18                   CLC
    4011/    1ED6 : 65 3B                ADC $3B ;map_ptr
    4012/    1ED8 : 85 3B                STA $3B ;map_ptr
    4013/    1EDA : 90 02                BCC .._7634.skip
    4014/    1EDC : E6 3C                INC $3C ;map_ptr
    4016/    1EDE : C6 3D                DEC $3D ;height
    4017/    1EE0 : F0 03                BEQ .._7646.skip
    4018/    1EE2 : 4C 0A 1E             JMP .dl.loop_outer
    4020/    1EE5 : AD 00 02             LDA display_X
    4021/    1EE8 : 0A                   ASL
    4022/    1EE9 : 69 A8                ADC #$A8
    4023/    1EEB : 85 39                STA $39 ;gfx_ptr
    4024/    1EED : 85 3B                STA $3B ;map_ptr
    4025/    1EEF : AD 01 02             LDA display_Y
    4026/    1EF2 : 0A                   ASL
    4027/    1EF3 : 69 94                ADC #$94
    4028/    1EF5 : 85 3A                STA $3A ;gfx_ptr
    4029/    1EF7 : 69 07                ADC #$7
    4030/    1EF9 : 85 3C                STA $3C ;map_ptr
    4031/    1EFB : A0 00                LDY #$0
    4032/    1EFD : A9 0C                LDA #$C
    4034/    1EFF : 91 39                STA ($39),Y ;gfx_ptr
    4035/    1F01 : 91 3B                STA ($3B),Y ;map_ptr
    4036/    1F03 : C8                   INY
    4037/    1F04 : C0 0A                CPY #$A
    4038/    1F06 : D0 F7                BNE .dl.hline
    4039/    1F08 : A5 39                LDA $39 ;gfx_ptr
    4040/    1F0A : 18                   CLC
    4041/    1F0B : 69 09                ADC #$9
    4042/    1F0D : 85 3B                STA $3B ;map_ptr
    4043/    1F0F : E6 3A                INC $3A ;gfx_ptr
    4044/    1F11 : A5 3A                LDA $3A ;gfx_ptr
    4045/    1F13 : 85 3C                STA $3C ;map_ptr
    4046/    1F15 : A0 06                LDY #$6
    4047/    1F17 : A9 0C                LDA #$C
    4049/    1F19 : 92 39                STA ($39) ;gfx_ptr
    4050/    1F1B : 92 3B                STA ($3B) ;map_ptr
    4051/    1F1D : E6 3A                INC $3A ;gfx_ptr
    4052/    1F1F : E6 3C                INC $3C ;map_ptr
    4053/    1F21 : 88                   DEY
    4054/    1F22 : D0 F5                BNE .dh.vline
    4055/    1F24 : 60                   RTS
    4057/    1F25 :                     DrawFrame:
    4058/    1F25 : A9 7E                LDA # (map_data) # $100
    4059/    1F27 : 85 2D                STA $2D ;OffsetXY.map
    4060/    1F29 : A9 03                LDA # (map_data)/$100
    4061/    1F2B : 85 2E                STA $2E ;OffsetXY.map
    4062/    1F2D : AD 00 02             LDA display_X
    4063/    1F30 : 85 2F                STA $2F ;OffsetXY.mX
    4064/    1F32 : AD 01 02             LDA display_Y
    4065/    1F35 : 85 30                STA $30 ;OffsetXY.mY
    4066/    1F37 : 20 38 15             JSR OffsetXY
    4067/    1F3A : A5 06                LDA ret_val
    4068/    1F3C : 85 34                STA $34 ;map_ptr
    4069/    1F3E : A5 07                LDA ret_val+$1
    4070/    1F40 : 85 35                STA $35 ;map_ptr
    4071/    1F42 : A9 9E                LDA # (monster_map) # $100
    4072/    1F44 : 85 2D                STA $2D ;OffsetXY.map
    4073/    1F46 : A9 06                LDA # (monster_map)/$100
    4074/    1F48 : 85 2E                STA $2E ;OffsetXY.map
    4075/    1F4A : AD 00 02             LDA display_X
    4076/    1F4D : 85 2F                STA $2F ;OffsetXY.mX
    4077/    1F4F : AD 01 02             LDA display_Y
    4078/    1F52 : 85 30                STA $30 ;OffsetXY.mY
    4079/    1F54 : 20 38 15             JSR OffsetXY
    4080/    1F57 : A5 06                LDA ret_val
    4081/    1F59 : 85 36                STA $36 ;monster_ptr
    4082/    1F5B : A5 07                LDA ret_val+$1
    4083/    1F5D : 85 37                STA $37 ;monster_ptr
    4084/    1F5F : A9 BE                LDA # (crystal_map) # $100
    4085/    1F61 : 85 2D                STA $2D ;OffsetXY.map
    4086/    1F63 : A9 09                LDA # (crystal_map)/$100
    4087/    1F65 : 85 2E                STA $2E ;OffsetXY.map
    4088/    1F67 : AD 00 02             LDA display_X
    4089/    1F6A : 85 2F                STA $2F ;OffsetXY.mX
    4090/    1F6C : AD 01 02             LDA display_Y
    4091/    1F6F : 85 30                STA $30 ;OffsetXY.mY
    4092/    1F71 : 20 38 15             JSR OffsetXY
    4093/    1F74 : A5 06                LDA ret_val
    4094/    1F76 : 85 38                STA $38 ;crystal_ptr
    4095/    1F78 : A5 07                LDA ret_val+$1
    4096/    1F7A : 85 39                STA $39 ;crystal_ptr
    4097/    1F7C : 64 32                STZ $32 ;i
    4098/    1F7E : 64 33                STZ $33 ;j
    4101/    1F80 : B2 34                LDA ($34) ;map_ptr
    4102/    1F82 : 80 03                BRA .s15c0
    4103/    1F84 : 4C E6 1F             JMP .s15done
    4104/    1F87 :                      .s15c0:
    4105/    1F87 : C9 00                CMP #$0
    4106/    1F89 : F0 03                BEQ .._7934.skip
    4107/    1F8B : 4C 95 1F             JMP .s15c1
    4109/    1F8E :                      .s15b1:
    4110/    1F8E : A9 00                LDA #$0
    4111/    1F90 : 85 31                STA $31 ;tile
    4112/    1F92 : 4C E6 1F             JMP .s15done
    4113/    1F95 :                      .s15c1:
    4114/    1F95 : C9 01                CMP #$1
    4115/    1F97 : F0 03                BEQ .._7954.skip
    4116/    1F99 : 4C A3 1F             JMP .s15c2
    4118/    1F9C :                      .s15b2:
    4119/    1F9C : A9 01                LDA #$1
    4120/    1F9E : 85 31                STA $31 ;tile
    4121/    1FA0 : 4C E6 1F             JMP .s15done
    4122/    1FA3 :                      .s15c2:
    4123/    1FA3 : C9 02                CMP #$2
    4124/    1FA5 : F0 03                BEQ .._7974.skip
    4125/    1FA7 : 4C B1 1F             JMP .s15c3
    4127/    1FAA :                      .s15b3:
    4128/    1FAA : A9 02                LDA #$2
    4129/    1FAC : 85 31                STA $31 ;tile
    4130/    1FAE : 4C E6 1F             JMP .s15done
    4131/    1FB1 :                      .s15c3:
    4132/    1FB1 : C9 03                CMP #$3
    4133/    1FB3 : F0 03                BEQ .._7994.skip
    4134/    1FB5 : 4C BF 1F             JMP .s15c4
    4136/    1FB8 :                      .s15b4:
    4137/    1FB8 : A9 03                LDA #$3
    4138/    1FBA : 85 31                STA $31 ;tile
    4139/    1FBC : 4C E6 1F             JMP .s15done
    4140/    1FBF :                      .s15c4:
    4141/    1FBF : C9 04                CMP #$4
    4142/    1FC1 : F0 03                BEQ .._8014.skip
    4143/    1FC3 : 4C CD 1F             JMP .s15c5
    4145/    1FC6 :                      .s15b5:
    4146/    1FC6 : A9 04                LDA #$4
    4147/    1FC8 : 85 31                STA $31 ;tile
    4148/    1FCA : 4C E6 1F             JMP .s15done
    4149/    1FCD :                      .s15c5:
    4150/    1FCD : C9 05                CMP #$5
    4151/    1FCF : F0 03                BEQ .._8034.skip
    4152/    1FD1 : 4C DB 1F             JMP .s15c6
    4154/    1FD4 :                      .s15b6:
    4155/    1FD4 : A9 05                LDA #$5
    4156/    1FD6 : 85 31                STA $31 ;tile
    4157/    1FD8 : 4C E6 1F             JMP .s15done
    4158/    1FDB :                      .s15c6:
    4159/    1FDB : C9 06                CMP #$6
    4160/    1FDD : F0 03                BEQ .._8054.skip
    4161/    1FDF : 4C E6 1F             JMP .s15c7
    4163/    1FE2 :                      .s15b7:
    4164/    1FE2 : A9 1D                LDA #$1D
    4165/    1FE4 : 85 31                STA $31 ;tile
    4166/    1FE6 :                      .s15c7:
    4167/    1FE6 :                      .s15done:
    4168/    1FE6 : C9 1D                CMP #$1D
    4169/    1FE8 : F0 03                BEQ .._8079.skip
    4170/    1FEA : 4C 07 20             JMP .if78
    4172/    1FED : A9 1D                LDA #$1D
    4173/    1FEF : 85 40                STA $40 ;DrawTile1bpp.tile
    4174/    1FF1 : A5 32                LDA $32 ;i
    4175/    1FF3 : 85 41                STA $41 ;DrawTile1bpp.xpos
    4176/    1FF5 : A5 33                LDA $33 ;j
    4177/    1FF7 : 85 42                STA $42 ;DrawTile1bpp.ypos
    4178/    1FF9 : A9 00                LDA #$0
    4179/    1FFB : 85 43                STA $43 ;DrawTile1bpp.color1
    4180/    1FFD : A9 30                LDA #$30
    4181/    1FFF : 85 44                STA $44 ;DrawTile1bpp.color2
    4182/    2001 : 20 4F 0E             JSR DrawTile1bpp
    4183/    2004 : 4C 16 20             JMP .if79
    4184/    2007 :                      .if78:
    4185/    2007 : A5 31                LDA $31 ;tile
    4186/    2009 : 85 54                STA $54 ;DrawTile.tile
    4187/    200B : A5 32                LDA $32 ;i
    4188/    200D : 85 55                STA $55 ;DrawTile.xpos
    4189/    200F : A5 33                LDA $33 ;j
    4190/    2011 : 85 56                STA $56 ;DrawTile.ypos
    4191/    2013 : 20 B9 0D             JSR DrawTile
    4192/    2016 :                      .if79:
    4193/    2016 : E6 34                INC $34 ;map_ptr
    4194/    2018 : D0 02                BNE .._8227.no_carry
    4195/    201A : E6 35                INC $35 ;map_ptr
    4197/    201C : B2 36                LDA ($36) ;monster_ptr
    4198/    201E : C9 FF                CMP #$FF
    4199/    2020 : D0 03                BNE .._8229.skip
    4200/    2022 : 4C 54 20             JMP .if80
    4202/    2025 : 0A                   ASL
    4203/    2026 : 72 36                ADC ($36) ;monster_ptr
    4204/    2028 : 69 02                ADC #$2
    4205/    202A : A8                   TAY
    4206/    202B : B9 66 02             LDA monster_list,Y
    4207/    202E : D0 03                BNE .._8232.skip
    4208/    2030 : 4C 45 20             JMP .if81
    4210/    2033 : A9 16                LDA #$16
    4211/    2035 : 85 54                STA $54 ;DrawTile.tile
    4212/    2037 : A5 32                LDA $32 ;i
    4213/    2039 : 85 55                STA $55 ;DrawTile.xpos
    4214/    203B : A5 33                LDA $33 ;j
    4215/    203D : 85 56                STA $56 ;DrawTile.ypos
    4216/    203F : 20 B9 0D             JSR DrawTile
    4217/    2042 : 4C 54 20             JMP .if82
    4218/    2045 :                      .if81:
    4219/    2045 : A9 17                LDA #$17
    4220/    2047 : 85 54                STA $54 ;DrawTile.tile
    4221/    2049 : A5 32                LDA $32 ;i
    4222/    204B : 85 55                STA $55 ;DrawTile.xpos
    4223/    204D : A5 33                LDA $33 ;j
    4224/    204F : 85 56                STA $56 ;DrawTile.ypos
    4225/    2051 : 20 B9 0D             JSR DrawTile
    4226/    2054 :                      .if82:
    4227/    2054 :                      .if80:
    4228/    2054 : E6 36                INC $36 ;monster_ptr
    4229/    2056 : D0 02                BNE .._8351.no_carry
    4230/    2058 : E6 37                INC $37 ;monster_ptr
    4232/    205A : B2 38                LDA ($38) ;crystal_ptr
    4233/    205C : C9 FF                CMP #$FF
    4234/    205E : D0 03                BNE .._8353.skip
    4235/    2060 : 4C D9 20             JMP .if83
    4237/    2063 : 0A                   ASL
    4238/    2064 : 0A                   ASL
    4239/    2065 : 48                   PHA
    4240/    2066 : 69 02                ADC #$2
    4241/    2068 : A8                   TAY
    4242/    2069 : B9 DE 02             LDA crystal_list,Y
    4243/    206C : D0 03                BNE .._8356.skip
    4244/    206E : 4C C9 20             JMP .if84
    4246/    2071 : 68                   PLA
    4247/    2072 : 18                   CLC
    4248/    2073 : 69 03                ADC #$3
    4249/    2075 : A8                   TAY
    4250/    2076 : B9 DE 02             LDA crystal_list,Y
    4251/    2079 : 80 03                BRA .s16c0
    4252/    207B : 4C C6 20             JMP .s16done
    4253/    207E :                      .s16c0:
    4254/    207E : C9 00                CMP #$0
    4255/    2080 : F0 03                BEQ .._8359.skip
    4256/    2082 : 4C 97 20             JMP .s16c1
    4258/    2085 :                      .s16b1:
    4259/    2085 : A9 06                LDA #$6
    4260/    2087 : 85 54                STA $54 ;DrawTile.tile
    4261/    2089 : A5 32                LDA $32 ;i
    4262/    208B : 85 55                STA $55 ;DrawTile.xpos
    4263/    208D : A5 33                LDA $33 ;j
    4264/    208F : 85 56                STA $56 ;DrawTile.ypos
    4265/    2091 : 20 B9 0D             JSR DrawTile
    4266/    2094 : 4C C6 20             JMP .s16done
    4267/    2097 :                      .s16c1:
    4268/    2097 : C9 01                CMP #$1
    4269/    2099 : F0 03                BEQ .._8424.skip
    4270/    209B : 4C B0 20             JMP .s16c2
    4272/    209E :                      .s16b2:
    4273/    209E : A9 08                LDA #$8
    4274/    20A0 : 85 54                STA $54 ;DrawTile.tile
    4275/    20A2 : A5 32                LDA $32 ;i
    4276/    20A4 : 85 55                STA $55 ;DrawTile.xpos
    4277/    20A6 : A5 33                LDA $33 ;j
    4278/    20A8 : 85 56                STA $56 ;DrawTile.ypos
    4279/    20AA : 20 B9 0D             JSR DrawTile
    4280/    20AD : 4C C6 20             JMP .s16done
    4281/    20B0 :                      .s16c2:
    4282/    20B0 : C9 02                CMP #$2
    4283/    20B2 : F0 03                BEQ .._8489.skip
    4284/    20B4 : 4C C6 20             JMP .s16c3
    4286/    20B7 :                      .s16b3:
    4287/    20B7 : A9 07                LDA #$7
    4288/    20B9 : 85 54                STA $54 ;DrawTile.tile
    4289/    20BB : A5 32                LDA $32 ;i
    4290/    20BD : 85 55                STA $55 ;DrawTile.xpos
    4291/    20BF : A5 33                LDA $33 ;j
    4292/    20C1 : 85 56                STA $56 ;DrawTile.ypos
    4293/    20C3 : 20 B9 0D             JSR DrawTile
    4294/    20C6 :                      .s16c3:
    4295/    20C6 :                      .s16done:
    4296/    20C6 : 4C D9 20             JMP .if85
    4297/    20C9 :                      .if84:
    4298/    20C9 : 68                   PLA
    4299/    20CA : A9 19                LDA #$19
    4300/    20CC : 85 54                STA $54 ;DrawTile.tile
    4301/    20CE : A5 32                LDA $32 ;i
    4302/    20D0 : 85 55                STA $55 ;DrawTile.xpos
    4303/    20D2 : A5 33                LDA $33 ;j
    4304/    20D4 : 85 56                STA $56 ;DrawTile.ypos
    4305/    20D6 : 20 B9 0D             JSR DrawTile
    4306/    20D9 :                      .if85:
    4307/    20D9 :                      .if83:
    4308/    20D9 : E6 38                INC $38 ;crystal_ptr
    4309/    20DB : D0 02                BNE .._8620.no_carry
    4310/    20DD : E6 39                INC $39 ;crystal_ptr
    4312/    20DF : A5 32                LDA $32 ;i
    4313/    20E1 : 18                   CLC
    4314/    20E2 : 69 20                ADC #$20
    4315/    20E4 : 85 32                STA $32 ;i
    4316/    20E6 : C9 A0                CMP #$A0
    4317/    20E8 : F0 03                BEQ .._8621.skip
    4318/    20EA : 4C 80 1F             JMP .df.loop_x
    4320/    20ED : A9 23                LDA #$23
    4321/    20EF : 18                   CLC
    4322/    20F0 : 65 34                ADC $34 ;map_ptr
    4323/    20F2 : 85 34                STA $34 ;map_ptr
    4324/    20F4 : 90 02                BCC .._8622.skip
    4325/    20F6 : E6 35                INC $35 ;map_ptr
    4327/    20F8 : A9 23                LDA #$23
    4328/    20FA : 18                   CLC
    4329/    20FB : 65 36                ADC $36 ;monster_ptr
    4330/    20FD : 85 36                STA $36 ;monster_ptr
    4331/    20FF : 90 02                BCC .._8634.skip
    4332/    2101 : E6 37                INC $37 ;monster_ptr
    4334/    2103 : A9 23                LDA #$23
    4335/    2105 : 18                   CLC
    4336/    2106 : 65 38                ADC $38 ;crystal_ptr
    4337/    2108 : 85 38                STA $38 ;crystal_ptr
    4338/    210A : 90 02                BCC .._8645.skip
    4339/    210C : E6 39                INC $39 ;crystal_ptr
    4341/    210E : 64 32                STZ $32 ;i
    4342/    2110 : A5 33                LDA $33 ;j
    4343/    2112 : 18                   CLC
    4344/    2113 : 69 20                ADC #$20
    4345/    2115 : 85 33                STA $33 ;j
    4346/    2117 : C9 80                CMP #$80
    4347/    2119 : D0 03                BNE .._8656.skip
    4348/    211B : 4C 21 21             JMP .if86
    4350/    211E : 4C 80 1F             JMP .df.loop_y
    4351/    2121 :                      .if86:
    4352/    2121 : AD 02 02             LDA hero_X
    4353/    2124 : 0A                   ASL
    4354/    2125 : 0A                   ASL
    4355/    2126 : 0A                   ASL
    4356/    2127 : 0A                   ASL
    4357/    2128 : 0A                   ASL
    4358/    2129 : 85 32                STA $32 ;i
    4359/    212B : AD 03 02             LDA hero_Y
    4360/    212E : 0A                   ASL
    4361/    212F : 0A                   ASL
    4362/    2130 : 0A                   ASL
    4363/    2131 : 0A                   ASL
    4364/    2132 : 0A                   ASL
    4365/    2133 : 85 33                STA $33 ;j
    4366/    2135 : AD 21 02             LDA hero_facing
    4367/    2138 : C9 03                CMP #$3
    4368/    213A : F0 03                BEQ .._8660.skip
    4369/    213C : 4C 51 21             JMP .if87
    4371/    213F : A9 09                LDA #$9
    4372/    2141 : 85 54                STA $54 ;DrawTile.tile
    4373/    2143 : A5 32                LDA $32 ;i
    4374/    2145 : 85 55                STA $55 ;DrawTile.xpos
    4375/    2147 : A5 33                LDA $33 ;j
    4376/    2149 : 85 56                STA $56 ;DrawTile.ypos
    4377/    214B : 20 B9 0D             JSR DrawTile
    4378/    214E : 4C 60 21             JMP .if88
    4379/    2151 :                      .if87:
    4380/    2151 : A9 0A                LDA #$A
    4381/    2153 : 85 54                STA $54 ;DrawTile.tile
    4382/    2155 : A5 32                LDA $32 ;i
    4383/    2157 : 85 55                STA $55 ;DrawTile.xpos
    4384/    2159 : A5 33                LDA $33 ;j
    4385/    215B : 85 56                STA $56 ;DrawTile.ypos
    4386/    215D : 20 B9 0D             JSR DrawTile
    4387/    2160 :                      .if88:
    4388/    2160 : AD 22 02             LDA hero_target_direction
    4389/    2163 : 80 03                BRA .s17c0
    4390/    2165 : 4C B5 21             JMP .s17done
    4391/    2168 :                      .s17c0:
    4392/    2168 : C9 01                CMP #$1
    4393/    216A : F0 03                BEQ .._8779.skip
    4394/    216C : 4C 7B 21             JMP .s17c1
    4396/    216F :                      .s17b1:
    4397/    216F : A5 33                LDA $33 ;j
    4398/    2171 : F0 59                BEQ .df.no_draw
    4399/    2173 : 38                   SEC
    4400/    2174 : E9 20                SBC #$20
    4401/    2176 : 85 33                STA $33 ;j
    4402/    2178 : 4C B5 21             JMP .s17done
    4403/    217B :                      .s17c1:
    4404/    217B : C9 02                CMP #$2
    4405/    217D : F0 03                BEQ .._8788.skip
    4406/    217F : 4C 90 21             JMP .s17c2
    4408/    2182 :                      .s17b2:
    4409/    2182 : A5 33                LDA $33 ;j
    4410/    2184 : C9 60                CMP #$60
    4411/    2186 : F0 44                BEQ .df.no_draw
    4412/    2188 : 18                   CLC
    4413/    2189 : 69 20                ADC #$20
    4414/    218B : 85 33                STA $33 ;j
    4415/    218D : 4C B5 21             JMP .s17done
    4416/    2190 :                      .s17c2:
    4417/    2190 : C9 03                CMP #$3
    4418/    2192 : F0 03                BEQ .._8797.skip
    4419/    2194 : 4C A3 21             JMP .s17c3
    4421/    2197 :                      .s17b3:
    4422/    2197 : A5 32                LDA $32 ;i
    4423/    2199 : F0 31                BEQ .df.no_draw
    4424/    219B : 38                   SEC
    4425/    219C : E9 20                SBC #$20
    4426/    219E : 85 32                STA $32 ;i
    4427/    21A0 : 4C B5 21             JMP .s17done
    4428/    21A3 :                      .s17c3:
    4429/    21A3 : C9 04                CMP #$4
    4430/    21A5 : F0 03                BEQ .._8806.skip
    4431/    21A7 : 4C B5 21             JMP .s17c4
    4433/    21AA :                      .s17b4:
    4434/    21AA : A5 32                LDA $32 ;i
    4435/    21AC : C9 80                CMP #$80
    4436/    21AE : F0 1C                BEQ .df.no_draw
    4437/    21B0 : 18                   CLC
    4438/    21B1 : 69 20                ADC #$20
    4439/    21B3 : 85 32                STA $32 ;i
    4440/    21B5 :                      .s17c4:
    4441/    21B5 :                      .s17done:
    4442/    21B5 : A9 1A                LDA #$1A
    4443/    21B7 : 85 40                STA $40 ;DrawTile1bpp.tile
    4444/    21B9 : A5 32                LDA $32 ;i
    4445/    21BB : 85 41                STA $41 ;DrawTile1bpp.xpos
    4446/    21BD : A5 33                LDA $33 ;j
    4447/    21BF : 85 42                STA $42 ;DrawTile1bpp.ypos
    4448/    21C1 : A9 0C                LDA #$C
    4449/    21C3 : 85 43                STA $43 ;DrawTile1bpp.color1
    4450/    21C5 : A9 40                LDA #$40
    4451/    21C7 : 85 44                STA $44 ;DrawTile1bpp.color2
    4452/    21C9 : 20 4F 0E             JSR DrawTile1bpp
    4454/    21CC : 60                   RTS
    4456/    21CD :                     DrawBorder:
    4457/    21CD : C6 23                DEC $23 ;width
    4458/    21CF : C6 24                DEC $24 ;height
    4459/    21D1 : A5 21                LDA $21 ;xpos
    4460/    21D3 : 85 26                STA $26 ;gfx_ptr1
    4461/    21D5 : 85 28                STA $28 ;gfx_ptr2
    4462/    21D7 : A5 22                LDA $22 ;ypos
    4463/    21D9 : 18                   CLC
    4464/    21DA : 69 40                ADC #$40
    4465/    21DC : 85 27                STA $27 ;gfx_ptr1
    4466/    21DE : 65 24                ADC $24 ;height
    4467/    21E0 : 85 29                STA $29 ;gfx_ptr2
    4468/    21E2 : A4 23                LDY $23 ;width
    4469/    21E4 : A5 25                LDA $25 ;color
    4471/    21E6 : 91 26                STA ($26),Y ;gfx_ptr1
    4472/    21E8 : 91 28                STA ($28),Y ;gfx_ptr2
    4473/    21EA : 88                   DEY
    4474/    21EB : D0 F9                BNE .db.hline
    4475/    21ED : A5 26                LDA $26 ;gfx_ptr1
    4476/    21EF : 18                   CLC
    4477/    21F0 : 65 23                ADC $23 ;width
    4478/    21F2 : 85 28                STA $28 ;gfx_ptr2
    4479/    21F4 : A5 27                LDA $27 ;gfx_ptr1
    4480/    21F6 : 85 29                STA $29 ;gfx_ptr2
    4481/    21F8 : A4 24                LDY $24 ;height
    4482/    21FA : C8                   INY
    4483/    21FB : A5 25                LDA $25 ;color
    4485/    21FD : 92 26                STA ($26) ;gfx_ptr1
    4486/    21FF : 92 28                STA ($28) ;gfx_ptr2
    4487/    2201 : E6 27                INC $27 ;gfx_ptr1
    4488/    2203 : E6 29                INC $29 ;gfx_ptr2
    4489/    2205 : 88                   DEY
    4490/    2206 : D0 F5                BNE .db.vline
    4491/    2208 : 60                   RTS
    4493/    2209 :                     DrawMenuBorder:
    4494/    2209 : A9 01                LDA #$1
    4495/    220B : 85 42                STA $42 ;DrawRect.xpos
    4496/    220D : A9 01                LDA #$1
    4497/    220F : 85 43                STA $43 ;DrawRect.ypos
    4498/    2211 : A9 FE                LDA #$FE
    4499/    2213 : 85 44                STA $44 ;DrawRect.width
    4500/    2215 : A9 10                LDA #$10
    4501/    2217 : 85 45                STA $45 ;DrawRect.height
    4502/    2219 : A9 2A                LDA #$2A
    4503/    221B : 85 46                STA $46 ;DrawRect.color
    4504/    221D : 20 81 19             JSR DrawRect
    4505/    2220 : A9 01                LDA #$1
    4506/    2222 : 85 42                STA $42 ;DrawRect.xpos
    4507/    2224 : A9 78                LDA #$78
    4508/    2226 : 85 43                STA $43 ;DrawRect.ypos
    4509/    2228 : A9 FE                LDA #$FE
    4510/    222A : 85 44                STA $44 ;DrawRect.width
    4511/    222C : A9 07                LDA #$7
    4512/    222E : 85 45                STA $45 ;DrawRect.height
    4513/    2230 : A9 2A                LDA #$2A
    4514/    2232 : 85 46                STA $46 ;DrawRect.color
    4515/    2234 : 20 81 19             JSR DrawRect
    4516/    2237 : A9 01                LDA #$1
    4517/    2239 : 85 42                STA $42 ;DrawRect.xpos
    4518/    223B : A9 11                LDA #$11
    4519/    223D : 85 43                STA $43 ;DrawRect.ypos
    4520/    223F : A9 07                LDA #$7
    4521/    2241 : 85 44                STA $44 ;DrawRect.width
    4522/    2243 : A9 67                LDA #$67
    4523/    2245 : 85 45                STA $45 ;DrawRect.height
    4524/    2247 : A9 2A                LDA #$2A
    4525/    2249 : 85 46                STA $46 ;DrawRect.color
    4526/    224B : 20 81 19             JSR DrawRect
    4527/    224E : A9 F8                LDA #$F8
    4528/    2250 : 85 42                STA $42 ;DrawRect.xpos
    4529/    2252 : A9 11                LDA #$11
    4530/    2254 : 85 43                STA $43 ;DrawRect.ypos
    4531/    2256 : A9 07                LDA #$7
    4532/    2258 : 85 44                STA $44 ;DrawRect.width
    4533/    225A : A9 67                LDA #$67
    4534/    225C : 85 45                STA $45 ;DrawRect.height
    4535/    225E : A9 2A                LDA #$2A
    4536/    2260 : 85 46                STA $46 ;DrawRect.color
    4537/    2262 : 20 81 19             JSR DrawRect
    4538/    2265 : 64 21                STZ $21 ;DrawBorder.xpos
    4539/    2267 : 64 22                STZ $22 ;DrawBorder.ypos
    4540/    2269 : A9 00                LDA #$0
    4541/    226B : 85 23                STA $23 ;DrawBorder.width
    4542/    226D : A9 80                LDA #$80
    4543/    226F : 85 24                STA $24 ;DrawBorder.height
    4544/    2271 : A9 00                LDA #$0
    4545/    2273 : 85 25                STA $25 ;DrawBorder.color
    4546/    2275 : 20 CD 21             JSR DrawBorder
    4547/    2278 : A9 08                LDA #$8
    4548/    227A : 85 21                STA $21 ;DrawBorder.xpos
    4549/    227C : A9 08                LDA #$8
    4550/    227E : 85 22                STA $22 ;DrawBorder.ypos
    4551/    2280 : A9 F0                LDA #$F0
    4552/    2282 : 85 23                STA $23 ;DrawBorder.width
    4553/    2284 : A9 70                LDA #$70
    4554/    2286 : 85 24                STA $24 ;DrawBorder.height
    4555/    2288 : A9 00                LDA #$0
    4556/    228A : 85 25                STA $25 ;DrawBorder.color
    4557/    228C : 20 CD 21             JSR DrawBorder
    4558/    228F : A9 01                LDA #$1
    4559/    2291 : 85 2A                STA $2A ;counter
    4561/    2293 : A9 00                LDA #$0
    4562/    2295 : 18                   CLC
    4563/    2296 : E5 2A                SBC $2A ;counter
    4564/    2298 : 85 2B                STA $2B ;width
    4565/    229A : A9 80                LDA #$80
    4566/    229C : 18                   CLC
    4567/    229D : E5 2A                SBC $2A ;counter
    4568/    229F : 85 2C                STA $2C ;height
    4569/    22A1 : A5 2A                LDA $2A ;counter
    4570/    22A3 : 85 61                STA $61 ;CalcXY.posx
    4571/    22A5 : A5 2A                LDA $2A ;counter
    4572/    22A7 : 85 62                STA $62 ;CalcXY.posy
    4573/    22A9 : 20 2A 0D             JSR CalcXY
    4574/    22AC : A9 00                LDA #$0
    4575/    22AE : 92 06                STA (ret_val)
    4576/    22B0 : A5 2B                LDA $2B ;width
    4577/    22B2 : 85 61                STA $61 ;CalcXY.posx
    4578/    22B4 : A5 2A                LDA $2A ;counter
    4579/    22B6 : 85 62                STA $62 ;CalcXY.posy
    4580/    22B8 : 20 2A 0D             JSR CalcXY
    4581/    22BB : A9 00                LDA #$0
    4582/    22BD : 92 06                STA (ret_val)
    4583/    22BF : A5 2B                LDA $2B ;width
    4584/    22C1 : 85 61                STA $61 ;CalcXY.posx
    4585/    22C3 : A5 2C                LDA $2C ;height
    4586/    22C5 : 85 62                STA $62 ;CalcXY.posy
    4587/    22C7 : 20 2A 0D             JSR CalcXY
    4588/    22CA : A9 00                LDA #$0
    4589/    22CC : 92 06                STA (ret_val)
    4590/    22CE : A5 2A                LDA $2A ;counter
    4591/    22D0 : 85 61                STA $61 ;CalcXY.posx
    4592/    22D2 : A5 2C                LDA $2C ;height
    4593/    22D4 : 85 62                STA $62 ;CalcXY.posy
    4594/    22D6 : 20 2A 0D             JSR CalcXY
    4595/    22D9 : A9 00                LDA #$0
    4596/    22DB : 92 06                STA (ret_val)
    4597/    22DD : A5 2A                LDA $2A ;counter
    4598/    22DF : 1A                   INC
    4599/    22E0 : C9 08                CMP #$8
    4600/    22E2 : 85 2A                STA $2A ;counter
    4601/    22E4 : D0 AD                BNE .dmb.loop
    4602/    22E6 : A9 09                LDA #$9
    4603/    22E8 : 8D 64 02             STA draw_X
    4604/    22EB : 80 0C                BRA .._9540.str_skip
    4606/    22ED : 5B 43 5D 68 61 72    FCB "[C]haracter",$0
    4608/    22F9 : A9 ED                LDA # (.._9540.str_addr) # $100
    4609/    22FB : 85 4F                STA $4F ;DrawText.str_ptr
    4610/    22FD : A9 22                LDA # (.._9540.str_addr)/$100
    4611/    22FF : 85 50                STA $50 ;DrawText.str_ptr
    4612/    2301 : 64 51                STZ $51 ;DrawText.arg1
    4613/    2303 : 64 52                STZ $52 ;DrawText.arg2
    4614/    2305 : A9 09                LDA #$9
    4615/    2307 : 85 53                STA $53 ;DrawText.ypos
    4616/    2309 : A9 3F                LDA #$3F
    4617/    230B : 85 54                STA $54 ;DrawText.fg_color
    4618/    230D : A9 08                LDA #$8
    4619/    230F : 85 55                STA $55 ;DrawText.bg_color
    4620/    2311 : 20 A9 19             JSR DrawText
    4621/    2314 : A9 4C                LDA #$4C
    4622/    2316 : 8D 64 02             STA draw_X
    4623/    2319 : 80 09                BRA .._9628.str_skip
    4625/    231B : 53 5B 6B 5D 69 6C    FCB "S[k]ills",$0
    4627/    2324 : A9 1B                LDA # (.._9628.str_addr) # $100
    4628/    2326 : 85 4F                STA $4F ;DrawText.str_ptr
    4629/    2328 : A9 23                LDA # (.._9628.str_addr)/$100
    4630/    232A : 85 50                STA $50 ;DrawText.str_ptr
    4631/    232C : 64 51                STZ $51 ;DrawText.arg1
    4632/    232E : 64 52                STZ $52 ;DrawText.arg2
    4633/    2330 : A9 09                LDA #$9
    4634/    2332 : 85 53                STA $53 ;DrawText.ypos
    4635/    2334 : A9 3F                LDA #$3F
    4636/    2336 : 85 54                STA $54 ;DrawText.fg_color
    4637/    2338 : A9 20                LDA #$20
    4638/    233A : 85 55                STA $55 ;DrawText.bg_color
    4639/    233C : 20 A9 19             JSR DrawText
    4640/    233F : A9 7C                LDA #$7C
    4641/    2341 : 8D 64 02             STA draw_X
    4642/    2344 : 80 0C                BRA .._9716.str_skip
    4644/    2346 : 5B 52 5D 65 73 6F    FCB "[R]esources",$0
    4646/    2352 : A9 46                LDA # (.._9716.str_addr) # $100
    4647/    2354 : 85 4F                STA $4F ;DrawText.str_ptr
    4648/    2356 : A9 23                LDA # (.._9716.str_addr)/$100
    4649/    2358 : 85 50                STA $50 ;DrawText.str_ptr
    4650/    235A : 64 51                STZ $51 ;DrawText.arg1
    4651/    235C : 64 52                STZ $52 ;DrawText.arg2
    4652/    235E : A9 09                LDA #$9
    4653/    2360 : 85 53                STA $53 ;DrawText.ypos
    4654/    2362 : A9 3F                LDA #$3F
    4655/    2364 : 85 54                STA $54 ;DrawText.fg_color
    4656/    2366 : A9 02                LDA #$2
    4657/    2368 : 85 55                STA $55 ;DrawText.bg_color
    4658/    236A : 20 A9 19             JSR DrawText
    4659/    236D : A9 4B                LDA #$4B
    4660/    236F : 85 42                STA $42 ;DrawRect.xpos
    4661/    2371 : A9 09                LDA #$9
    4662/    2373 : 85 43                STA $43 ;DrawRect.ypos
    4663/    2375 : A9 01                LDA #$1
    4664/    2377 : 85 44                STA $44 ;DrawRect.width
    4665/    2379 : A9 08                LDA #$8
    4666/    237B : 85 45                STA $45 ;DrawRect.height
    4667/    237D : A9 20                LDA #$20
    4668/    237F : 85 46                STA $46 ;DrawRect.color
    4669/    2381 : 20 81 19             JSR DrawRect
    4670/    2384 : 60                   RTS
    4673/    2385 : 0D 0E 0F 10 11       FCB $D,$E,$F,$10,$11
    4675/    238A :                     DrawItem:
    4676/    238A : A5 4F                LDA $4F ;tile
    4677/    238C : 0A                   ASL
    4678/    238D : A8                   TAY
    4679/    238E : B9 76 C5             LDA item_stats,Y
    4680/    2391 : 85 52                STA $52 ;temp_ptr
    4681/    2393 : B9 77 C5             LDA item_stats+$1,Y
    4682/    2396 : 85 53                STA $53 ;temp_ptr
    4683/    2398 : A0 00                LDY #$0
    4684/    239A : B1 52                LDA ($52),Y ;temp_ptr
    4685/    239C : A8                   TAY
    4686/    239D : B9 85 23             LDA tile_src,Y
    4687/    23A0 : 85 52                STA $52 ;temp_ptr
    4688/    23A2 : A9 0B                LDA #$B
    4689/    23A4 : 85 54                STA $54 ;CopyTile.dest_id
    4690/    23A6 : A5 52                LDA $52 ;temp_ptr
    4691/    23A8 : 85 55                STA $55 ;CopyTile.source_id
    4692/    23AA : 20 54 0D             JSR CopyTile
    4693/    23AD : A9 0B                LDA #$B
    4694/    23AF : 85 54                STA $54 ;ColorTile.tile
    4695/    23B1 : A5 4F                LDA $4F ;tile
    4696/    23B3 : 85 55                STA $55 ;ColorTile.color_index
    4697/    23B5 : 20 4E 10             JSR ColorTile
    4698/    23B8 : A9 0B                LDA #$B
    4699/    23BA : 85 54                STA $54 ;DrawTile.tile
    4700/    23BC : A5 50                LDA $50 ;xpos
    4701/    23BE : 85 55                STA $55 ;DrawTile.xpos
    4702/    23C0 : A5 51                LDA $51 ;ypos
    4703/    23C2 : 85 56                STA $56 ;DrawTile.ypos
    4704/    23C4 : 20 B9 0D             JSR DrawTile
    4705/    23C7 : 60                   RTS
    4707/    23C8 :                     DrawItemStats:
    4708/    23C8 : A5 40                LDA $40 ;item
    4709/    23CA : 0A                   ASL
    4710/    23CB : A8                   TAY
    4711/    23CC : B9 76 C5             LDA item_stats,Y
    4712/    23CF : 85 4B                STA $4B ;stat_ptr
    4713/    23D1 : B9 77 C5             LDA item_stats+$1,Y
    4714/    23D4 : 85 4C                STA $4C ;stat_ptr
    4715/    23D6 : A0 00                LDY #$0
    4716/    23D8 : B1 4B                LDA ($4B),Y ;stat_ptr
    4717/    23DA : C9 0E                CMP #$E
    4718/    23DC : F0 03                BEQ .._10010.skip
    4719/    23DE : 4C 1A 24             JMP .if89
    4721/    23E1 : A0 03                LDY #$3
    4722/    23E3 : B1 4B                LDA ($4B),Y ;stat_ptr
    4723/    23E5 : 0A                   ASL
    4724/    23E6 : A8                   TAY
    4725/    23E7 : B9 52 C5             LDA res_descriptions,Y
    4726/    23EA : 85 4B                STA $4B ;stat_ptr
    4727/    23EC : B9 53 C5             LDA res_descriptions+$1,Y
    4728/    23EF : 85 4C                STA $4C ;stat_ptr
    4729/    23F1 : A5 41                LDA $41 ;xpos
    4730/    23F3 : 1A                   INC
    4731/    23F4 : 1A                   INC
    4732/    23F5 : 8D 64 02             STA draw_X
    4733/    23F8 : E6 42                INC $42 ;ypos
    4734/    23FA : E6 42                INC $42 ;ypos
    4735/    23FC : A5 4B                LDA $4B ;stat_ptr
    4736/    23FE : 85 4F                STA $4F ;DrawText.str_ptr
    4737/    2400 : A5 4C                LDA $4C ;stat_ptr
    4738/    2402 : 85 50                STA $50 ;DrawText.str_ptr
    4739/    2404 : 64 51                STZ $51 ;DrawText.arg1
    4740/    2406 : 64 52                STZ $52 ;DrawText.arg2
    4741/    2408 : A5 42                LDA $42 ;ypos
    4742/    240A : 85 53                STA $53 ;DrawText.ypos
    4743/    240C : A9 3F                LDA #$3F
    4744/    240E : 85 54                STA $54 ;DrawText.fg_color
    4745/    2410 : A5 43                LDA $43 ;bg_color
    4746/    2412 : 85 55                STA $55 ;DrawText.bg_color
    4747/    2414 : 20 A9 19             JSR DrawText
    4748/    2417 : 4C F9 24             JMP .if90
    4749/    241A :                      .if89:
    4750/    241A : A5 40                LDA $40 ;item
    4751/    241C : 85 4F                STA $4F ;DrawItem.tile
    4752/    241E : A5 41                LDA $41 ;xpos
    4753/    2420 : 85 50                STA $50 ;DrawItem.xpos
    4754/    2422 : A5 42                LDA $42 ;ypos
    4755/    2424 : 85 51                STA $51 ;DrawItem.ypos
    4756/    2426 : 20 8A 23             JSR DrawItem
    4757/    2429 : A5 40                LDA $40 ;item
    4758/    242B : 0A                   ASL
    4759/    242C : A8                   TAY
    4760/    242D : B9 F1 C3             LDA item_titles,Y
    4761/    2430 : 85 49                STA $49 ;title
    4762/    2432 : B9 F2 C3             LDA item_titles+$1,Y
    4763/    2435 : 85 4A                STA $4A ;title
    4764/    2437 : A5 41                LDA $41 ;xpos
    4765/    2439 : 18                   CLC
    4766/    243A : 69 12                ADC #$12
    4767/    243C : 8D 64 02             STA draw_X
    4768/    243F : A5 42                LDA $42 ;ypos
    4769/    2441 : 18                   CLC
    4770/    2442 : 69 04                ADC #$4
    4771/    2444 : 85 44                STA $44 ;stat_y
    4772/    2446 : A5 40                LDA $40 ;item
    4773/    2448 : 0A                   ASL
    4774/    2449 : A8                   TAY
    4775/    244A : B9 76 C5             LDA item_stats,Y
    4776/    244D : 85 4B                STA $4B ;stat_ptr
    4777/    244F : B9 77 C5             LDA item_stats+$1,Y
    4778/    2452 : 85 4C                STA $4C ;stat_ptr
    4779/    2454 : A0 03                LDY #$3
    4780/    2456 : B1 4B                LDA ($4B),Y ;stat_ptr
    4781/    2458 : A8                   TAY
    4782/    2459 : B9 43 F0             LDA title_colors,Y
    4783/    245C : 85 47                STA $47 ;temp_color
    4784/    245E : A5 49                LDA $49 ;title
    4785/    2460 : 85 4F                STA $4F ;DrawText.str_ptr
    4786/    2462 : A5 4A                LDA $4A ;title
    4787/    2464 : 85 50                STA $50 ;DrawText.str_ptr
    4788/    2466 : 64 51                STZ $51 ;DrawText.arg1
    4789/    2468 : 64 52                STZ $52 ;DrawText.arg2
    4790/    246A : A5 44                LDA $44 ;stat_y
    4791/    246C : 85 53                STA $53 ;DrawText.ypos
    4792/    246E : A9 00                LDA #$0
    4793/    2470 : 85 54                STA $54 ;DrawText.fg_color
    4794/    2472 : A5 47                LDA $47 ;temp_color
    4795/    2474 : 85 55                STA $55 ;DrawText.bg_color
    4796/    2476 : 20 A9 19             JSR DrawText
    4797/    2479 : A5 42                LDA $42 ;ypos
    4798/    247B : 18                   CLC
    4799/    247C : 69 0F                ADC #$F
    4800/    247E : 85 44                STA $44 ;stat_y
    4801/    2480 : A5 40                LDA $40 ;item
    4802/    2482 : 0A                   ASL
    4803/    2483 : A8                   TAY
    4804/    2484 : B9 76 C5             LDA item_stats,Y
    4805/    2487 : 85 4D                STA $4D ;item_ptr
    4806/    2489 : B9 77 C5             LDA item_stats+$1,Y
    4807/    248C : 85 4E                STA $4E ;item_ptr
    4808/    248E : A0 04                LDY #$4
    4809/    2490 : B1 4D                LDA ($4D),Y ;item_ptr
    4810/    2492 : 85 45                STA $45 ;count
    4811/    2494 : 64 46                STZ $46 ;counter
    4813/    2496 : A5 46                LDA $46 ;counter
    4814/    2498 : 0A                   ASL
    4815/    2499 : 69 05                ADC #$5
    4816/    249B : A8                   TAY
    4817/    249C : B1 4D                LDA ($4D),Y ;item_ptr
    4818/    249E : A8                   TAY
    4819/    249F : B9 4C C6             LDA stat_description_colors,Y
    4820/    24A2 : 85 47                STA $47 ;temp_color
    4821/    24A4 : 98                   TYA
    4822/    24A5 : 0A                   ASL
    4823/    24A6 : A8                   TAY
    4824/    24A7 : B9 30 C6             LDA stat_descriptions,Y
    4825/    24AA : 85 49                STA $49 ;title
    4826/    24AC : B9 31 C6             LDA stat_descriptions+$1,Y
    4827/    24AF : 85 4A                STA $4A ;title
    4828/    24B1 : A5 46                LDA $46 ;counter
    4829/    24B3 : 0A                   ASL
    4830/    24B4 : 69 06                ADC #$6
    4831/    24B6 : A8                   TAY
    4832/    24B7 : B1 4D                LDA ($4D),Y ;item_ptr
    4833/    24B9 : 85 48                STA $48 ;temp_stat
    4834/    24BB : A5 41                LDA $41 ;xpos
    4835/    24BD : 18                   CLC
    4836/    24BE : 69 12                ADC #$12
    4837/    24C0 : A5 47                LDA $47 ;temp_color
    4838/    24C2 : C5 43                CMP $43 ;bg_color
    4839/    24C4 : F0 03                BEQ .._10414.skip
    4840/    24C6 : 4C CD 24             JMP .if91
    4842/    24C9 : A9 03                LDA #$3
    4843/    24CB : 85 47                STA $47 ;temp_color
    4844/    24CD :                      .if91:
    4845/    24CD : A5 49                LDA $49 ;title
    4846/    24CF : 85 4F                STA $4F ;DrawText.str_ptr
    4847/    24D1 : A5 4A                LDA $4A ;title
    4848/    24D3 : 85 50                STA $50 ;DrawText.str_ptr
    4849/    24D5 : A5 48                LDA $48 ;temp_stat
    4850/    24D7 : 85 51                STA $51 ;DrawText.arg1
    4851/    24D9 : 64 52                STZ $52 ;DrawText.arg2
    4852/    24DB : A5 44                LDA $44 ;stat_y
    4853/    24DD : 85 53                STA $53 ;DrawText.ypos
    4854/    24DF : A5 47                LDA $47 ;temp_color
    4855/    24E1 : 85 54                STA $54 ;DrawText.fg_color
    4856/    24E3 : A5 43                LDA $43 ;bg_color
    4857/    24E5 : 85 55                STA $55 ;DrawText.bg_color
    4858/    24E7 : 20 A9 19             JSR DrawText
    4859/    24EA : A5 44                LDA $44 ;stat_y
    4860/    24EC : 18                   CLC
    4861/    24ED : 69 0A                ADC #$A
    4862/    24EF : 85 44                STA $44 ;stat_y
    4863/    24F1 : E6 46                INC $46 ;counter
    4864/    24F3 : A5 46                LDA $46 ;counter
    4865/    24F5 : C5 45                CMP $45 ;count
    4866/    24F7 : D0 9D                BNE .dis.stats
    4867/    24F9 :                      .if90:
    4868/    24F9 : 60                   RTS
    4870/    24FA :                     DrawMenuInventory:
    4871/    24FA : A9 50                LDA #$50
    4872/    24FC : 85 42                STA $42 ;DrawRect.xpos
    4873/    24FE : A9 16                LDA #$16
    4874/    2500 : 85 43                STA $43 ;DrawRect.ypos
    4875/    2502 : A9 50                LDA #$50
    4876/    2504 : 85 44                STA $44 ;DrawRect.width
    4877/    2506 : A9 2D                LDA #$2D
    4878/    2508 : 85 45                STA $45 ;DrawRect.height
    4879/    250A : A9 04                LDA #$4
    4880/    250C : 85 46                STA $46 ;DrawRect.color
    4881/    250E : 20 81 19             JSR DrawRect
    4882/    2511 : A9 50                LDA #$50
    4883/    2513 : 85 42                STA $42 ;DrawRect.xpos
    4884/    2515 : A9 46                LDA #$46
    4885/    2517 : 85 43                STA $43 ;DrawRect.ypos
    4886/    2519 : A9 50                LDA #$50
    4887/    251B : 85 44                STA $44 ;DrawRect.width
    4888/    251D : A9 2D                LDA #$2D
    4889/    251F : 85 45                STA $45 ;DrawRect.height
    4890/    2521 : A9 04                LDA #$4
    4891/    2523 : 85 46                STA $46 ;DrawRect.color
    4892/    2525 : 20 81 19             JSR DrawRect
    4893/    2528 : 64 37                STZ $37 ;index
    4894/    252A : 64 33                STZ $33 ;i
    4896/    252C : 64 34                STZ $34 ;j
    4898/    252E : A5 34                LDA $34 ;j
    4899/    2530 : 0A                   ASL
    4900/    2531 : 0A                   ASL
    4901/    2532 : 0A                   ASL
    4902/    2533 : 0A                   ASL
    4903/    2534 : 69 A4                ADC #$A4
    4904/    2536 : 85 36                STA $36 ;xpos
    4905/    2538 : A5 33                LDA $33 ;i
    4906/    253A : 0A                   ASL
    4907/    253B : 0A                   ASL
    4908/    253C : 0A                   ASL
    4909/    253D : 0A                   ASL
    4910/    253E : 69 14                ADC #$14
    4911/    2540 : 85 35                STA $35 ;ypos
    4912/    2542 : A9 18                LDA #$18
    4913/    2544 : 85 54                STA $54 ;DrawTile.tile
    4914/    2546 : A5 36                LDA $36 ;xpos
    4915/    2548 : 85 55                STA $55 ;DrawTile.xpos
    4916/    254A : A5 35                LDA $35 ;ypos
    4917/    254C : 85 56                STA $56 ;DrawTile.ypos
    4918/    254E : 20 B9 0D             JSR DrawTile
    4919/    2551 : A4 37                LDY $37 ;index
    4920/    2553 : B9 30 02             LDA hero_inventory,Y
    4921/    2556 : C9 20                CMP #$20
    4922/    2558 : D0 03                BNE .._10860.skip
    4923/    255A : 4C EB 25             JMP .if92
    4925/    255D : 0A                   ASL
    4926/    255E : A8                   TAY
    4927/    255F : B9 76 C5             LDA item_stats,Y
    4928/    2562 : 85 39                STA $39 ;item_ptr
    4929/    2564 : B9 77 C5             LDA item_stats+$1,Y
    4930/    2567 : 85 3A                STA $3A ;item_ptr
    4931/    2569 : A0 00                LDY #$0
    4932/    256B : B1 39                LDA ($39),Y ;item_ptr
    4933/    256D : C9 0E                CMP #$E
    4934/    256F : D0 03                BNE .._10862.skip
    4935/    2571 : 4C EB 25             JMP .if93
    4937/    2574 : 85 38                STA $38 ;item_type
    4938/    2576 : A4 37                LDY $37 ;index
    4939/    2578 : B9 30 02             LDA hero_inventory,Y
    4940/    257B : 85 39                STA $39 ;item_ptr
    4941/    257D : A5 39                LDA $39 ;item_ptr
    4942/    257F : 85 4F                STA $4F ;DrawItem.tile
    4943/    2581 : A5 36                LDA $36 ;xpos
    4944/    2583 : 85 50                STA $50 ;DrawItem.xpos
    4945/    2585 : A5 35                LDA $35 ;ypos
    4946/    2587 : 85 51                STA $51 ;DrawItem.ypos
    4947/    2589 : 20 8A 23             JSR DrawItem
    4948/    258C : AD 5D 02             LDA menu_char_x
    4949/    258F : C5 34                CMP $34 ;j
    4950/    2591 : F0 03                BEQ .._10934.skip
    4951/    2593 : 4C EB 25             JMP .if94
    4953/    2596 : AD 5E 02             LDA menu_char_y
    4954/    2599 : C5 33                CMP $33 ;i
    4955/    259B : F0 03                BEQ .._10936.skip
    4956/    259D : 4C EB 25             JMP .if95
    4958/    25A0 : A4 38                LDY $38 ;item_type
    4959/    25A2 : B9 2B 02             LDA hero_equipped,Y
    4960/    25A5 : 85 39                STA $39 ;item_ptr
    4961/    25A7 : A5 39                LDA $39 ;item_ptr
    4962/    25A9 : 85 40                STA $40 ;DrawItemStats.item
    4963/    25AB : A9 50                LDA #$50
    4964/    25AD : 85 41                STA $41 ;DrawItemStats.xpos
    4965/    25AF : A9 16                LDA #$16
    4966/    25B1 : 85 42                STA $42 ;DrawItemStats.ypos
    4967/    25B3 : A9 04                LDA #$4
    4968/    25B5 : 85 43                STA $43 ;DrawItemStats.bg_color
    4969/    25B7 : 20 C8 23             JSR DrawItemStats
    4970/    25BA : A4 37                LDY $37 ;index
    4971/    25BC : B9 30 02             LDA hero_inventory,Y
    4972/    25BF : 85 39                STA $39 ;item_ptr
    4973/    25C1 : A5 39                LDA $39 ;item_ptr
    4974/    25C3 : 85 40                STA $40 ;DrawItemStats.item
    4975/    25C5 : A9 50                LDA #$50
    4976/    25C7 : 85 41                STA $41 ;DrawItemStats.xpos
    4977/    25C9 : A9 46                LDA #$46
    4978/    25CB : 85 42                STA $42 ;DrawItemStats.ypos
    4979/    25CD : A9 04                LDA #$4
    4980/    25CF : 85 43                STA $43 ;DrawItemStats.bg_color
    4981/    25D1 : 20 C8 23             JSR DrawItemStats
    4982/    25D4 : A9 1B                LDA #$1B
    4983/    25D6 : 85 40                STA $40 ;DrawTile1bpp.tile
    4984/    25D8 : A9 50                LDA #$50
    4985/    25DA : 85 41                STA $41 ;DrawTile1bpp.xpos
    4986/    25DC : A9 46                LDA #$46
    4987/    25DE : 85 42                STA $42 ;DrawTile1bpp.ypos
    4988/    25E0 : A9 40                LDA #$40
    4989/    25E2 : 85 43                STA $43 ;DrawTile1bpp.color1
    4990/    25E4 : A9 0C                LDA #$C
    4991/    25E6 : 85 44                STA $44 ;DrawTile1bpp.color2
    4992/    25E8 : 20 4F 0E             JSR DrawTile1bpp
    4993/    25EB :                      .if95:
    4994/    25EB :                      .if94:
    4995/    25EB :                      .if93:
    4996/    25EB :                      .if92:
    4997/    25EB : E6 37                INC $37 ;index
    4998/    25ED : E6 34                INC $34 ;j
    4999/    25EF : A5 34                LDA $34 ;j
    5000/    25F1 : C9 05                CMP #$5
    5001/    25F3 : F0 03                BEQ .._11187.skip
    5002/    25F5 : 4C 2E 25             JMP .dmi.loopx
    5004/    25F8 : E6 33                INC $33 ;i
    5005/    25FA : A5 33                LDA $33 ;i
    5006/    25FC : C9 06                CMP #$6
    5007/    25FE : F0 03                BEQ .._11188.skip
    5008/    2600 : 4C 2C 25             JMP .dmi.loopy
    5010/    2603 : A9 A4                LDA #$A4
    5011/    2605 : 85 42                STA $42 ;DrawRect.xpos
    5012/    2607 : A9 74                LDA #$74
    5013/    2609 : 85 43                STA $43 ;DrawRect.ypos
    5014/    260B : A9 50                LDA #$50
    5015/    260D : 85 44                STA $44 ;DrawRect.width
    5016/    260F : A9 01                LDA #$1
    5017/    2611 : 85 45                STA $45 ;DrawRect.height
    5018/    2613 : A9 00                LDA #$0
    5019/    2615 : 85 46                STA $46 ;DrawRect.color
    5020/    2617 : 20 81 19             JSR DrawRect
    5021/    261A : A9 F4                LDA #$F4
    5022/    261C : 85 42                STA $42 ;DrawRect.xpos
    5023/    261E : A9 14                LDA #$14
    5024/    2620 : 85 43                STA $43 ;DrawRect.ypos
    5025/    2622 : A9 01                LDA #$1
    5026/    2624 : 85 44                STA $44 ;DrawRect.width
    5027/    2626 : A9 61                LDA #$61
    5028/    2628 : 85 45                STA $45 ;DrawRect.height
    5029/    262A : A9 00                LDA #$0
    5030/    262C : 85 46                STA $46 ;DrawRect.color
    5031/    262E : 20 81 19             JSR DrawRect
    5032/    2631 : AD 5D 02             LDA menu_char_x
    5033/    2634 : 0A                   ASL
    5034/    2635 : 0A                   ASL
    5035/    2636 : 0A                   ASL
    5036/    2637 : 0A                   ASL
    5037/    2638 : 18                   CLC
    5038/    2639 : 69 A4                ADC #$A4
    5039/    263B : 85 36                STA $36 ;xpos
    5040/    263D : AD 5E 02             LDA menu_char_y
    5041/    2640 : 0A                   ASL
    5042/    2641 : 0A                   ASL
    5043/    2642 : 0A                   ASL
    5044/    2643 : 0A                   ASL
    5045/    2644 : 18                   CLC
    5046/    2645 : 69 14                ADC #$14
    5047/    2647 : 85 35                STA $35 ;ypos
    5048/    2649 : A9 1B                LDA #$1B
    5049/    264B : 85 40                STA $40 ;DrawTile1bpp.tile
    5050/    264D : A5 36                LDA $36 ;xpos
    5051/    264F : 85 41                STA $41 ;DrawTile1bpp.xpos
    5052/    2651 : A5 35                LDA $35 ;ypos
    5053/    2653 : 85 42                STA $42 ;DrawTile1bpp.ypos
    5054/    2655 : A9 40                LDA #$40
    5055/    2657 : 85 43                STA $43 ;DrawTile1bpp.color1
    5056/    2659 : A9 0C                LDA #$C
    5057/    265B : 85 44                STA $44 ;DrawTile1bpp.color2
    5058/    265D : 20 4F 0E             JSR DrawTile1bpp
    5059/    2660 : 60                   RTS
    5062/    2661 : 1D 3B 59             FCB $1D,$3B,$59
    5065/    2664 : 2E 3A 2B             FCB $2E,$3A,$2B
    5068/    2667 : 04 10 01             FCB $4,$10,$1
    5071/    266A : 08 35 17             FCB $8,$35,$17
    5073/    266D :                     DrawSkills:
    5074/    266D : A9 98                LDA #$98
    5075/    266F : 85 42                STA $42 ;DrawRect.xpos
    5076/    2671 : A9 1D                LDA #$1D
    5077/    2673 : 85 43                STA $43 ;DrawRect.ypos
    5078/    2675 : A9 5C                LDA #$5C
    5079/    2677 : 85 44                STA $44 ;DrawRect.width
    5080/    2679 : A9 57                LDA #$57
    5081/    267B : 85 45                STA $45 ;DrawRect.height
    5082/    267D : A9 10                LDA #$10
    5083/    267F : 85 46                STA $46 ;DrawRect.color
    5084/    2681 : 20 81 19             JSR DrawRect
    5085/    2684 : A9 24                LDA #$24
    5086/    2686 : 85 35                STA $35 ;index
    5087/    2688 : 64 33                STZ $33 ;row
    5089/    268A : A4 33                LDY $33 ;row
    5090/    268C : B9 61 26             LDA ds.tops,Y
    5091/    268F : 85 37                STA $37 ;top
    5092/    2691 : B9 64 26             LDA ds.colors,Y
    5093/    2694 : 85 38                STA $38 ;color
    5094/    2696 : A9 09                LDA #$9
    5095/    2698 : 85 42                STA $42 ;DrawRect.xpos
    5096/    269A : A5 37                LDA $37 ;top
    5097/    269C : 85 43                STA $43 ;DrawRect.ypos
    5098/    269E : A9 8C                LDA #$8C
    5099/    26A0 : 85 44                STA $44 ;DrawRect.width
    5100/    26A2 : A9 1E                LDA #$1E
    5101/    26A4 : 85 45                STA $45 ;DrawRect.height
    5102/    26A6 : A5 38                LDA $38 ;color
    5103/    26A8 : 85 46                STA $46 ;DrawRect.color
    5104/    26AA : 20 81 19             JSR DrawRect
    5105/    26AD : 64 34                STZ $34 ;column
    5107/    26AF : A5 34                LDA $34 ;column
    5108/    26B1 : 0A                   ASL
    5109/    26B2 : 0A                   ASL
    5110/    26B3 : 85 3A                STA $3A ;mult_buff
    5111/    26B5 : 0A                   ASL
    5112/    26B6 : 0A                   ASL
    5113/    26B7 : 0A                   ASL
    5114/    26B8 : 38                   SEC
    5115/    26B9 : E5 3A                SBC $3A ;mult_buff
    5116/    26BB : 18                   CLC
    5117/    26BC : 69 0B                ADC #$B
    5118/    26BE : 85 36                STA $36 ;tleft
    5119/    26C0 : A5 33                LDA $33 ;row
    5120/    26C2 : 0A                   ASL
    5121/    26C3 : 85 3A                STA $3A ;mult_buff
    5122/    26C5 : 0A                   ASL
    5123/    26C6 : 0A                   ASL
    5124/    26C7 : 0A                   ASL
    5125/    26C8 : 0A                   ASL
    5126/    26C9 : 38                   SEC
    5127/    26CA : E5 3A                SBC $3A ;mult_buff
    5128/    26CC : 18                   CLC
    5129/    26CD : 69 20                ADC #$20
    5130/    26CF : 85 37                STA $37 ;top
    5131/    26D1 : A5 35                LDA $35 ;index
    5132/    26D3 : 38                   SEC
    5133/    26D4 : E9 24                SBC #$24
    5134/    26D6 : A8                   TAY
    5135/    26D7 : B9 4E 02             LDA skill_list,Y
    5136/    26DA : D0 03                BNE .._11727.skip
    5137/    26DC : 4C 05 27             JMP .if96
    5139/    26DF : A4 33                LDY $33 ;row
    5140/    26E1 : B9 67 26             LDA ds.color1,Y
    5141/    26E4 : 85 38                STA $38 ;color
    5142/    26E6 : B9 6A 26             LDA ds.color2,Y
    5143/    26E9 : 85 39                STA $39 ;color2
    5144/    26EB : A5 35                LDA $35 ;index
    5145/    26ED : 85 40                STA $40 ;DrawTile1bpp.tile
    5146/    26EF : A5 36                LDA $36 ;tleft
    5147/    26F1 : 85 41                STA $41 ;DrawTile1bpp.xpos
    5148/    26F3 : A5 37                LDA $37 ;top
    5149/    26F5 : 85 42                STA $42 ;DrawTile1bpp.ypos
    5150/    26F7 : A5 38                LDA $38 ;color
    5151/    26F9 : 85 43                STA $43 ;DrawTile1bpp.color1
    5152/    26FB : A5 39                LDA $39 ;color2
    5153/    26FD : 85 44                STA $44 ;DrawTile1bpp.color2
    5154/    26FF : 20 4F 0E             JSR DrawTile1bpp
    5155/    2702 : 4C 1C 27             JMP .if97
    5156/    2705 :                      .if96:
    5157/    2705 : A5 35                LDA $35 ;index
    5158/    2707 : 85 40                STA $40 ;DrawTile1bpp.tile
    5159/    2709 : A5 36                LDA $36 ;tleft
    5160/    270B : 85 41                STA $41 ;DrawTile1bpp.xpos
    5161/    270D : A5 37                LDA $37 ;top
    5162/    270F : 85 42                STA $42 ;DrawTile1bpp.ypos
    5163/    2711 : A9 15                LDA #$15
    5164/    2713 : 85 43                STA $43 ;DrawTile1bpp.color1
    5165/    2715 : A9 2A                LDA #$2A
    5166/    2717 : 85 44                STA $44 ;DrawTile1bpp.color2
    5167/    2719 : 20 4F 0E             JSR DrawTile1bpp
    5168/    271C :                      .if97:
    5169/    271C : AD 5F 02             LDA menu_skills_x
    5170/    271F : C5 34                CMP $34 ;column
    5171/    2721 : F0 03                BEQ .._11978.skip
    5172/    2723 : 4C 1A 28             JMP .if98
    5174/    2726 : AD 60 02             LDA menu_skills_y
    5175/    2729 : C5 33                CMP $33 ;row
    5176/    272B : F0 03                BEQ .._11980.skip
    5177/    272D : 4C 1A 28             JMP .if99
    5179/    2730 : A9 1C                LDA #$1C
    5180/    2732 : 85 40                STA $40 ;DrawTile1bpp.tile
    5181/    2734 : A5 36                LDA $36 ;tleft
    5182/    2736 : 85 41                STA $41 ;DrawTile1bpp.xpos
    5183/    2738 : A5 37                LDA $37 ;top
    5184/    273A : 85 42                STA $42 ;DrawTile1bpp.ypos
    5185/    273C : A9 40                LDA #$40
    5186/    273E : 85 43                STA $43 ;DrawTile1bpp.color1
    5187/    2740 : A9 0C                LDA #$C
    5188/    2742 : 85 44                STA $44 ;DrawTile1bpp.color2
    5189/    2744 : 20 4F 0E             JSR DrawTile1bpp
    5190/    2747 : AD 60 02             LDA menu_skills_y
    5191/    274A : 0A                   ASL
    5192/    274B : 0A                   ASL
    5193/    274C : 18                   CLC
    5194/    274D : 6D 60 02             ADC menu_skills_y
    5195/    2750 : 6D 5F 02             ADC menu_skills_x
    5196/    2753 : 0A                   ASL
    5197/    2754 : 85 3B                STA $3B ;index_buff
    5198/    2756 : A8                   TAY
    5199/    2757 : B9 8A C7             LDA skill_titles,Y
    5200/    275A : 85 3C                STA $3C ;str_ptr
    5201/    275C : B9 8B C7             LDA skill_titles+$1,Y
    5202/    275F : 85 3D                STA $3D ;str_ptr
    5203/    2761 : A0 00                LDY #$0
    5205/    2763 : B1 3C                LDA ($3C),Y ;str_ptr
    5206/    2765 : F0 03                BEQ .ds.title_done
    5207/    2767 : C8                   INY
    5208/    2768 : D0 F9                BNE .ds.title
    5210/    276A : 98                   TYA
    5211/    276B : 0A                   ASL
    5212/    276C : 85 3A                STA $3A ;mult_buff
    5213/    276E : 0A                   ASL
    5214/    276F : 18                   CLC
    5215/    2770 : 65 3A                ADC $3A ;mult_buff
    5216/    2772 : 85 3A                STA $3A ;mult_buff
    5217/    2774 : A9 5C                LDA #$5C
    5218/    2776 : 38                   SEC
    5219/    2777 : E5 3A                SBC $3A ;mult_buff
    5220/    2779 : 4A                   LSR
    5221/    277A : 18                   CLC
    5222/    277B : 69 98                ADC #$98
    5223/    277D : 8D 64 02             STA draw_X
    5224/    2780 : AC 60 02             LDY menu_skills_y
    5225/    2783 : B9 6A 26             LDA ds.color2,Y
    5226/    2786 : 85 38                STA $38 ;color
    5227/    2788 : A5 3C                LDA $3C ;str_ptr
    5228/    278A : 85 4F                STA $4F ;DrawText.str_ptr
    5229/    278C : A5 3D                LDA $3D ;str_ptr
    5230/    278E : 85 50                STA $50 ;DrawText.str_ptr
    5231/    2790 : 64 51                STZ $51 ;DrawText.arg1
    5232/    2792 : 64 52                STZ $52 ;DrawText.arg2
    5233/    2794 : A9 1F                LDA #$1F
    5234/    2796 : 85 53                STA $53 ;DrawText.ypos
    5235/    2798 : A9 3F                LDA #$3F
    5236/    279A : 85 54                STA $54 ;DrawText.fg_color
    5237/    279C : A5 38                LDA $38 ;color
    5238/    279E : 85 55                STA $55 ;DrawText.bg_color
    5239/    27A0 : 20 A9 19             JSR DrawText
    5240/    27A3 : A4 3B                LDY $3B ;index_buff
    5241/    27A5 : B9 9A C9             LDA skill_descriptions,Y
    5242/    27A8 : 85 3C                STA $3C ;str_ptr
    5243/    27AA : B9 9B C9             LDA skill_descriptions+$1,Y
    5244/    27AD : 85 3D                STA $3D ;str_ptr
    5245/    27AF : A9 9A                LDA #$9A
    5246/    27B1 : 8D 64 02             STA draw_X
    5247/    27B4 : A5 3C                LDA $3C ;str_ptr
    5248/    27B6 : 85 4F                STA $4F ;DrawText.str_ptr
    5249/    27B8 : A5 3D                LDA $3D ;str_ptr
    5250/    27BA : 85 50                STA $50 ;DrawText.str_ptr
    5251/    27BC : 64 51                STZ $51 ;DrawText.arg1
    5252/    27BE : 64 52                STZ $52 ;DrawText.arg2
    5253/    27C0 : A9 2B                LDA #$2B
    5254/    27C2 : 85 53                STA $53 ;DrawText.ypos
    5255/    27C4 : A9 3F                LDA #$3F
    5256/    27C6 : 85 54                STA $54 ;DrawText.fg_color
    5257/    27C8 : A9 10                LDA #$10
    5258/    27CA : 85 55                STA $55 ;DrawText.bg_color
    5259/    27CC : 20 A9 19             JSR DrawText
    5260/    27CF : A5 3B                LDA $3B ;index_buff
    5261/    27D1 : 4A                   LSR
    5262/    27D2 : A8                   TAY
    5263/    27D3 : B9 4E 02             LDA skill_list,Y
    5264/    27D6 : F0 03                BEQ .._12375.skip
    5265/    27D8 : 4C 1A 28             JMP .if100
    5267/    27DB : AD 5F 02             LDA menu_skills_x
    5268/    27DE : F0 09                BEQ .ds.upgrade
    5269/    27E0 : 88                   DEY
    5270/    27E1 : B9 4E 02             LDA skill_list,Y
    5271/    27E4 : D0 03                BNE .._12378.skip
    5272/    27E6 : 4C 1A 28             JMP .if101
    5275/    27E9 : A9 9A                LDA #$9A
    5276/    27EB : 8D 64 02             STA draw_X
    5277/    27EE : 80 0F                BRA .._12400.str_skip
    5279/    27F0 : 5B 45 6E 74 65 72    FCB "[Enter]Upgrade",$0
    5281/    27FF : A9 F0                LDA # (.._12400.str_addr) # $100
    5282/    2801 : 85 4F                STA $4F ;DrawText.str_ptr
    5283/    2803 : A9 27                LDA # (.._12400.str_addr)/$100
    5284/    2805 : 85 50                STA $50 ;DrawText.str_ptr
    5285/    2807 : 64 51                STZ $51 ;DrawText.arg1
    5286/    2809 : 64 52                STZ $52 ;DrawText.arg2
    5287/    280B : A9 6A                LDA #$6A
    5288/    280D : 85 53                STA $53 ;DrawText.ypos
    5289/    280F : A9 0F                LDA #$F
    5290/    2811 : 85 54                STA $54 ;DrawText.fg_color
    5291/    2813 : A9 10                LDA #$10
    5292/    2815 : 85 55                STA $55 ;DrawText.bg_color
    5293/    2817 : 20 A9 19             JSR DrawText
    5294/    281A :                      .if101:
    5295/    281A :                      .if100:
    5296/    281A :                      .if99:
    5297/    281A :                      .if98:
    5298/    281A : E6 35                INC $35 ;index
    5299/    281C : E6 34                INC $34 ;column
    5300/    281E : A5 34                LDA $34 ;column
    5301/    2820 : C9 05                CMP #$5
    5302/    2822 : F0 03                BEQ .._12524.skip
    5303/    2824 : 4C AF 26             JMP .ds.columns
    5305/    2827 : E6 33                INC $33 ;row
    5306/    2829 : A5 33                LDA $33 ;row
    5307/    282B : C9 03                CMP #$3
    5308/    282D : F0 03                BEQ .._12525.skip
    5309/    282F : 4C 8A 26             JMP .ds.rows
    5311/    2832 : 60                   RTS
    5314/    2833 : 08 35 32 0A 2A 2A    FCB $8,$35,$32,$A,$2A,$2A
    5317/    2839 : 1E 20 22 1F 21 23    FCB $1E,$20,$22,$1F,$21,$23
    5319/    283F :                     DrawResources:
    5320/    283F : A9 20                LDA #$20
    5321/    2841 : 8D 63 02             STA menu_res_target
    5322/    2844 : 85 36                STA $36 ;draw_item
    5323/    2846 : A9 98                LDA #$98
    5324/    2848 : 85 42                STA $42 ;DrawRect.xpos
    5325/    284A : A9 1D                LDA #$1D
    5326/    284C : 85 43                STA $43 ;DrawRect.ypos
    5327/    284E : A9 5C                LDA #$5C
    5328/    2850 : 85 44                STA $44 ;DrawRect.width
    5329/    2852 : A9 57                LDA #$57
    5330/    2854 : 85 45                STA $45 ;DrawRect.height
    5331/    2856 : A9 01                LDA #$1
    5332/    2858 : 85 46                STA $46 ;DrawRect.color
    5333/    285A : 20 81 19             JSR DrawRect
    5334/    285D : 64 33                STZ $33 ;row
    5336/    285F : A5 33                LDA $33 ;row
    5337/    2861 : 1A                   INC
    5338/    2862 : 85 35                STA $35 ;tile_index
    5339/    2864 : A9 00                LDA #$0
    5340/    2866 : 18                   CLC
    5341/    2867 : A4 33                LDY $33 ;row
    5343/    2869 : F0 05                BEQ .._12669.done
    5344/    286B : 69 17                ADC #$17
    5345/    286D : 88                   DEY
    5346/    286E : D0 F9                BNE .._12669.loop
    5348/    2870 : 69 0B                ADC #$B
    5349/    2872 : 85 37                STA $37 ;tleft
    5350/    2874 : A4 33                LDY $33 ;row
    5351/    2876 : B9 33 28             LDA dres.colors,Y
    5352/    2879 : 85 39                STA $39 ;color
    5353/    287B : A5 37                LDA $37 ;tleft
    5354/    287D : 85 42                STA $42 ;DrawRect.xpos
    5355/    287F : A9 13                LDA #$13
    5356/    2881 : 85 43                STA $43 ;DrawRect.ypos
    5357/    2883 : A9 17                LDA #$17
    5358/    2885 : 85 44                STA $44 ;DrawRect.width
    5359/    2887 : A9 61                LDA #$61
    5360/    2889 : 85 45                STA $45 ;DrawRect.height
    5361/    288B : A5 39                LDA $39 ;color
    5362/    288D : 85 46                STA $46 ;DrawRect.color
    5363/    288F : 20 81 19             JSR DrawRect
    5364/    2892 : 64 34                STZ $34 ;column
    5366/    2894 : A5 33                LDA $33 ;row
    5367/    2896 : C9 04                CMP #$4
    5368/    2898 : 90 03                BCC .._12813.skip
    5369/    289A : 4C DA 28             JMP .if102
    5371/    289D : A9 00                LDA #$0
    5372/    289F : 18                   CLC
    5373/    28A0 : A4 33                LDY $33 ;row
    5375/    28A2 : F0 05                BEQ .._12814.done
    5376/    28A4 : 69 17                ADC #$17
    5377/    28A6 : 88                   DEY
    5378/    28A7 : D0 F9                BNE .._12814.loop
    5380/    28A9 : 69 0E                ADC #$E
    5381/    28AB : 85 37                STA $37 ;tleft
    5382/    28AD : A9 00                LDA #$0
    5383/    28AF : 18                   CLC
    5384/    28B0 : A4 34                LDY $34 ;column
    5386/    28B2 : F0 05                BEQ .._12815.done
    5387/    28B4 : 69 13                ADC #$13
    5388/    28B6 : 88                   DEY
    5389/    28B7 : D0 F9                BNE .._12815.loop
    5391/    28B9 : 69 15                ADC #$15
    5392/    28BB : 85 38                STA $38 ;top
    5393/    28BD : A5 35                LDA $35 ;tile_index
    5394/    28BF : 85 4F                STA $4F ;DrawItem.tile
    5395/    28C1 : A5 37                LDA $37 ;tleft
    5396/    28C3 : 85 50                STA $50 ;DrawItem.xpos
    5397/    28C5 : A5 38                LDA $38 ;top
    5398/    28C7 : 85 51                STA $51 ;DrawItem.ypos
    5399/    28C9 : 20 8A 23             JSR DrawItem
    5400/    28CC : A5 35                LDA $35 ;tile_index
    5401/    28CE : 85 36                STA $36 ;draw_item
    5402/    28D0 : A5 35                LDA $35 ;tile_index
    5403/    28D2 : 18                   CLC
    5404/    28D3 : 69 05                ADC #$5
    5405/    28D5 : 85 35                STA $35 ;tile_index
    5406/    28D7 : 4C 90 29             JMP .if103
    5407/    28DA :                      .if102:
    5408/    28DA : A5 34                LDA $34 ;column
    5409/    28DC : C9 03                CMP #$3
    5410/    28DE : 90 03                BCC .._12938.skip
    5411/    28E0 : 4C 8C 29             JMP .if104
    5413/    28E3 : A5 33                LDA $33 ;row
    5414/    28E5 : 38                   SEC
    5415/    28E6 : E9 04                SBC #$4
    5416/    28E8 : 85 3D                STA $3D ;mult_buff
    5417/    28EA : 0A                   ASL
    5418/    28EB : 65 3D                ADC $3D ;mult_buff
    5419/    28ED : 65 34                ADC $34 ;column
    5420/    28EF : A8                   TAY
    5421/    28F0 : B9 39 28             LDA dres.items,Y
    5422/    28F3 : 85 3B                STA $3B ;item
    5423/    28F5 : A9 00                LDA #$0
    5424/    28F7 : 18                   CLC
    5425/    28F8 : A4 33                LDY $33 ;row
    5427/    28FA : F0 05                BEQ .._12939.done
    5428/    28FC : 69 17                ADC #$17
    5429/    28FE : 88                   DEY
    5430/    28FF : D0 F9                BNE .._12939.loop
    5432/    2901 : 69 0E                ADC #$E
    5433/    2903 : 85 37                STA $37 ;tleft
    5434/    2905 : A9 00                LDA #$0
    5435/    2907 : 18                   CLC
    5436/    2908 : A4 34                LDY $34 ;column
    5438/    290A : F0 05                BEQ .._12940.done
    5439/    290C : 69 13                ADC #$13
    5440/    290E : 88                   DEY
    5441/    290F : D0 F9                BNE .._12940.loop
    5443/    2911 : 69 15                ADC #$15
    5444/    2913 : 85 38                STA $38 ;top
    5445/    2915 : A5 3B                LDA $3B ;item
    5446/    2917 : 80 03                BRA .s18c0
    5447/    2919 : 4C 67 29             JMP .s18done
    5448/    291C :                      .s18c0:
    5449/    291C : C9 1E                CMP #$1E
    5450/    291E : F0 03                BEQ .._12943.skip
    5451/    2920 : 4C 25 29             JMP .s18c1
    5453/    2923 : 80 06                BRA .s18b1
    5454/    2925 :                      .s18c1:
    5455/    2925 : C9 1F                CMP #$1F
    5456/    2927 : D0 0D                BNE .s18c2
    5457/    2929 : 80 00                BRA .s18b1
    5458/    292B :                      .s18b1:
    5459/    292B : A9 01                LDA #$1
    5460/    292D : 85 39                STA $39 ;color
    5461/    292F : A9 17                LDA #$17
    5462/    2931 : 85 3A                STA $3A ;color2
    5463/    2933 : 4C 67 29             JMP .s18done
    5464/    2936 :                      .s18c2:
    5465/    2936 : C9 20                CMP #$20
    5466/    2938 : F0 03                BEQ .._12977.skip
    5467/    293A : 4C 3F 29             JMP .s18c3
    5469/    293D : 80 06                BRA .s18b2
    5470/    293F :                      .s18c3:
    5471/    293F : C9 21                CMP #$21
    5472/    2941 : D0 0D                BNE .s18c4
    5473/    2943 : 80 00                BRA .s18b2
    5474/    2945 :                      .s18b2:
    5475/    2945 : A9 10                LDA #$10
    5476/    2947 : 85 39                STA $39 ;color
    5477/    2949 : A9 35                LDA #$35
    5478/    294B : 85 3A                STA $3A ;color2
    5479/    294D : 4C 67 29             JMP .s18done
    5480/    2950 :                      .s18c4:
    5481/    2950 : C9 22                CMP #$22
    5482/    2952 : F0 03                BEQ .._13011.skip
    5483/    2954 : 4C 59 29             JMP .s18c5
    5485/    2957 : 80 06                BRA .s18b3
    5486/    2959 :                      .s18c5:
    5487/    2959 : C9 23                CMP #$23
    5488/    295B : D0 0A                BNE .s18c6
    5489/    295D : 80 00                BRA .s18b3
    5490/    295F :                      .s18b3:
    5491/    295F : A9 05                LDA #$5
    5492/    2961 : 85 39                STA $39 ;color
    5493/    2963 : A9 1F                LDA #$1F
    5494/    2965 : 85 3A                STA $3A ;color2
    5495/    2967 :                      .s18c6:
    5496/    2967 :                      .s18done:
    5497/    2967 : A5 3B                LDA $3B ;item
    5498/    2969 : 85 40                STA $40 ;DrawTile1bpp.tile
    5499/    296B : A5 37                LDA $37 ;tleft
    5500/    296D : 85 41                STA $41 ;DrawTile1bpp.xpos
    5501/    296F : A5 38                LDA $38 ;top
    5502/    2971 : 85 42                STA $42 ;DrawTile1bpp.ypos
    5503/    2973 : A5 39                LDA $39 ;color
    5504/    2975 : 85 43                STA $43 ;DrawTile1bpp.color1
    5505/    2977 : A5 3A                LDA $3A ;color2
    5506/    2979 : 85 44                STA $44 ;DrawTile1bpp.color2
    5507/    297B : 20 4F 0E             JSR DrawTile1bpp
    5508/    297E : A5 34                LDA $34 ;column
    5509/    2980 : 0A                   ASL
    5510/    2981 : 18                   CLC
    5511/    2982 : 65 33                ADC $33 ;row
    5512/    2984 : 18                   CLC
    5513/    2985 : 69 15                ADC #$15
    5514/    2987 : 85 36                STA $36 ;draw_item
    5515/    2989 : 4C 90 29             JMP .if105
    5516/    298C :                      .if104:
    5517/    298C : A9 20                LDA #$20
    5518/    298E : 85 36                STA $36 ;draw_item
    5519/    2990 :                      .if105:
    5520/    2990 :                      .if103:
    5521/    2990 : A5 33                LDA $33 ;row
    5522/    2992 : CD 61 02             CMP menu_res_x
    5523/    2995 : F0 03                BEQ .._13208.skip
    5524/    2997 : 4C EC 29             JMP .if106
    5526/    299A : A5 34                LDA $34 ;column
    5527/    299C : CD 62 02             CMP menu_res_y
    5528/    299F : F0 03                BEQ .._13210.skip
    5529/    29A1 : 4C EC 29             JMP .if107
    5531/    29A4 : A9 00                LDA #$0
    5532/    29A6 : 18                   CLC
    5533/    29A7 : A4 34                LDY $34 ;column
    5535/    29A9 : F0 05                BEQ .._13211.done
    5536/    29AB : 69 13                ADC #$13
    5537/    29AD : 88                   DEY
    5538/    29AE : D0 F9                BNE .._13211.loop
    5540/    29B0 : 69 15                ADC #$15
    5541/    29B2 : 85 38                STA $38 ;top
    5542/    29B4 : A9 1B                LDA #$1B
    5543/    29B6 : 85 40                STA $40 ;DrawTile1bpp.tile
    5544/    29B8 : A5 37                LDA $37 ;tleft
    5545/    29BA : 85 41                STA $41 ;DrawTile1bpp.xpos
    5546/    29BC : A5 38                LDA $38 ;top
    5547/    29BE : 85 42                STA $42 ;DrawTile1bpp.ypos
    5548/    29C0 : A9 40                LDA #$40
    5549/    29C2 : 85 43                STA $43 ;DrawTile1bpp.color1
    5550/    29C4 : A9 0C                LDA #$C
    5551/    29C6 : 85 44                STA $44 ;DrawTile1bpp.color2
    5552/    29C8 : 20 4F 0E             JSR DrawTile1bpp
    5553/    29CB : A5 36                LDA $36 ;draw_item
    5554/    29CD : C9 20                CMP #$20
    5555/    29CF : D0 03                BNE .._13337.skip
    5556/    29D1 : 4C EC 29             JMP .if108
    5558/    29D4 : A5 36                LDA $36 ;draw_item
    5559/    29D6 : 85 40                STA $40 ;DrawItemStats.item
    5560/    29D8 : A9 98                LDA #$98
    5561/    29DA : 85 41                STA $41 ;DrawItemStats.xpos
    5562/    29DC : A9 1D                LDA #$1D
    5563/    29DE : 85 42                STA $42 ;DrawItemStats.ypos
    5564/    29E0 : A9 01                LDA #$1
    5565/    29E2 : 85 43                STA $43 ;DrawItemStats.bg_color
    5566/    29E4 : 20 C8 23             JSR DrawItemStats
    5567/    29E7 : A5 36                LDA $36 ;draw_item
    5568/    29E9 : 8D 63 02             STA menu_res_target
    5569/    29EC :                      .if108:
    5570/    29EC :                      .if107:
    5571/    29EC :                      .if106:
    5572/    29EC : E6 34                INC $34 ;column
    5573/    29EE : A5 34                LDA $34 ;column
    5574/    29F0 : C9 05                CMP #$5
    5575/    29F2 : F0 03                BEQ .._13471.skip
    5576/    29F4 : 4C 94 28             JMP .dres.columns
    5578/    29F7 : E6 33                INC $33 ;row
    5579/    29F9 : A5 33                LDA $33 ;row
    5580/    29FB : C9 06                CMP #$6
    5581/    29FD : F0 03                BEQ .._13472.skip
    5582/    29FF : 4C 5F 28             JMP .dres.rows
    5584/    2A02 : AD 63 02             LDA menu_res_target
    5585/    2A05 : C9 20                CMP #$20
    5586/    2A07 : D0 03                BNE .._13474.skip
    5587/    2A09 : 4C 54 2A             JMP .if109
    5589/    2A0C : 0A                   ASL
    5590/    2A0D : A8                   TAY
    5591/    2A0E : B9 76 C5             LDA item_stats,Y
    5592/    2A11 : 85 3E                STA $3E ;item_ptr
    5593/    2A13 : B9 77 C5             LDA item_stats+$1,Y
    5594/    2A16 : 85 3F                STA $3F ;item_ptr
    5595/    2A18 : A0 01                LDY #$1
    5596/    2A1A : B1 3E                LDA ($3E),Y ;item_ptr
    5597/    2A1C : 85 3C                STA $3C ;temp_cost
    5598/    2A1E : A0 02                LDY #$2
    5599/    2A20 : B1 3E                LDA ($3E),Y ;item_ptr
    5600/    2A22 : A8                   TAY
    5601/    2A23 : B9 48 F0             LDA crystal_colors,Y
    5602/    2A26 : 85 39                STA $39 ;color
    5603/    2A28 : A9 9A                LDA #$9A
    5604/    2A2A : 8D 64 02             STA draw_X
    5605/    2A2D : 80 08                BRA .._13498.str_skip
    5607/    2A2F : 43 6F 73 74 3A 20    FCB "Cost: $",$0
    5609/    2A37 : A9 2F                LDA # (.._13498.str_addr) # $100
    5610/    2A39 : 85 4F                STA $4F ;DrawText.str_ptr
    5611/    2A3B : A9 2A                LDA # (.._13498.str_addr)/$100
    5612/    2A3D : 85 50                STA $50 ;DrawText.str_ptr
    5613/    2A3F : A5 3C                LDA $3C ;temp_cost
    5614/    2A41 : 85 51                STA $51 ;DrawText.arg1
    5615/    2A43 : 64 52                STZ $52 ;DrawText.arg2
    5616/    2A45 : A9 6B                LDA #$6B
    5617/    2A47 : 85 53                STA $53 ;DrawText.ypos
    5618/    2A49 : A5 39                LDA $39 ;color
    5619/    2A4B : 85 54                STA $54 ;DrawText.fg_color
    5620/    2A4D : A9 01                LDA #$1
    5621/    2A4F : 85 55                STA $55 ;DrawText.bg_color
    5622/    2A51 : 20 A9 19             JSR DrawText
    5623/    2A54 :                      .if109:
    5624/    2A54 : 60                   RTS
    5626/    2A55 :                     DrawMenu:
    5627/    2A55 : AD 65 02             LDA output_mode
    5628/    2A58 : 80 03                BRA .s19c0
    5629/    2A5A : 4C FB 2B             JMP .s19done
    5630/    2A5D :                      .s19c0:
    5631/    2A5D : C9 01                CMP #$1
    5632/    2A5F : F0 03                BEQ .._13648.skip
    5633/    2A61 : 4C FB 2A             JMP .s19c1
    5635/    2A64 :                      .s19b1:
    5636/    2A64 : A9 09                LDA #$9
    5637/    2A66 : 85 42                STA $42 ;DrawRect.xpos
    5638/    2A68 : A9 11                LDA #$11
    5639/    2A6A : 85 43                STA $43 ;DrawRect.ypos
    5640/    2A6C : A9 EE                LDA #$EE
    5641/    2A6E : 85 44                STA $44 ;DrawRect.width
    5642/    2A70 : A9 66                LDA #$66
    5643/    2A72 : 85 45                STA $45 ;DrawRect.height
    5644/    2A74 : A9 08                LDA #$8
    5645/    2A76 : 85 46                STA $46 ;DrawRect.color
    5646/    2A78 : 20 81 19             JSR DrawRect
    5647/    2A7B : A9 0A                LDA #$A
    5648/    2A7D : 85 54                STA $54 ;DrawTile.tile
    5649/    2A7F : A9 1B                LDA #$1B
    5650/    2A81 : 85 55                STA $55 ;DrawTile.xpos
    5651/    2A83 : A9 15                LDA #$15
    5652/    2A85 : 85 56                STA $56 ;DrawTile.ypos
    5653/    2A87 : 20 B9 0D             JSR DrawTile
    5654/    2A8A : A9 38                LDA #$38
    5655/    2A8C : 85 2D                STA $2D ;stat_y
    5656/    2A8E : 64 2E                STZ $2E ;counter
    5658/    2A90 : A5 2E                LDA $2E ;counter
    5659/    2A92 : 0A                   ASL
    5660/    2A93 : A8                   TAY
    5661/    2A94 : B9 C8 C6             LDA hero_stat_pointers,Y
    5662/    2A97 : 85 31                STA $31 ;stat_ptr
    5663/    2A99 : B9 C9 C6             LDA hero_stat_pointers+$1,Y
    5664/    2A9C : 85 32                STA $32 ;stat_ptr
    5665/    2A9E : 19 C8 C6             ORA hero_stat_pointers,Y
    5666/    2AA1 : F0 03                BEQ .._13796.skip
    5667/    2AA3 : 4C AE 2A             JMP .if110
    5669/    2AA6 : AD 06 02             LDA hero_HP_Max
    5670/    2AA9 : 85 2F                STA $2F ;temp_stat
    5671/    2AAB : 4C B2 2A             JMP .if111
    5672/    2AAE :                      .if110:
    5673/    2AAE : B2 31                LDA ($31) ;stat_ptr
    5674/    2AB0 : 85 2F                STA $2F ;temp_stat
    5675/    2AB2 :                      .if111:
    5676/    2AB2 : B9 BA C6             LDA hero_stat_texts,Y
    5677/    2AB5 : 85 31                STA $31 ;stat_ptr
    5678/    2AB7 : B9 BB C6             LDA hero_stat_texts+$1,Y
    5679/    2ABA : 85 32                STA $32 ;stat_ptr
    5680/    2ABC : A4 2E                LDY $2E ;counter
    5681/    2ABE : B9 B3 C6             LDA hero_stat_colors,Y
    5682/    2AC1 : 85 30                STA $30 ;temp_color
    5683/    2AC3 : A9 0D                LDA #$D
    5684/    2AC5 : 8D 64 02             STA draw_X
    5685/    2AC8 : A5 31                LDA $31 ;stat_ptr
    5686/    2ACA : 85 4F                STA $4F ;DrawText.str_ptr
    5687/    2ACC : A5 32                LDA $32 ;stat_ptr
    5688/    2ACE : 85 50                STA $50 ;DrawText.str_ptr
    5689/    2AD0 : A5 2F                LDA $2F ;temp_stat
    5690/    2AD2 : 85 51                STA $51 ;DrawText.arg1
    5691/    2AD4 : 64 52                STZ $52 ;DrawText.arg2
    5692/    2AD6 : A5 2D                LDA $2D ;stat_y
    5693/    2AD8 : 85 53                STA $53 ;DrawText.ypos
    5694/    2ADA : A5 30                LDA $30 ;temp_color
    5695/    2ADC : 85 54                STA $54 ;DrawText.fg_color
    5696/    2ADE : A9 08                LDA #$8
    5697/    2AE0 : 85 55                STA $55 ;DrawText.bg_color
    5698/    2AE2 : 20 A9 19             JSR DrawText
    5699/    2AE5 : A5 2D                LDA $2D ;stat_y
    5700/    2AE7 : 18                   CLC
    5701/    2AE8 : 69 09                ADC #$9
    5702/    2AEA : 85 2D                STA $2D ;stat_y
    5703/    2AEC : A5 2E                LDA $2E ;counter
    5704/    2AEE : 1A                   INC
    5705/    2AEF : 85 2E                STA $2E ;counter
    5706/    2AF1 : C9 07                CMP #$7
    5707/    2AF3 : D0 9B                BNE .dm.loop
    5708/    2AF5 : 20 FA 24             JSR DrawMenuInventory
    5709/    2AF8 : 4C FB 2B             JMP .s19done
    5710/    2AFB :                      .s19c1:
    5711/    2AFB : C9 02                CMP #$2
    5712/    2AFD : F0 03                BEQ .._13933.skip
    5713/    2AFF : 4C 4E 2B             JMP .s19c2
    5715/    2B02 :                      .s19b2:
    5716/    2B02 : A9 09                LDA #$9
    5717/    2B04 : 85 42                STA $42 ;DrawRect.xpos
    5718/    2B06 : A9 11                LDA #$11
    5719/    2B08 : 85 43                STA $43 ;DrawRect.ypos
    5720/    2B0A : A9 EE                LDA #$EE
    5721/    2B0C : 85 44                STA $44 ;DrawRect.width
    5722/    2B0E : A9 66                LDA #$66
    5723/    2B10 : 85 45                STA $45 ;DrawRect.height
    5724/    2B12 : A9 20                LDA #$20
    5725/    2B14 : 85 46                STA $46 ;DrawRect.color
    5726/    2B16 : 20 81 19             JSR DrawRect
    5727/    2B19 : A9 0B                LDA #$B
    5728/    2B1B : 8D 64 02             STA draw_X
    5729/    2B1E : 80 0A                BRA .._14033.str_skip
    5731/    2B20 : 50 6F 69 6E 74 73    FCB "Points: $",$0
    5733/    2B2A : A9 20                LDA # (.._14033.str_addr) # $100
    5734/    2B2C : 85 4F                STA $4F ;DrawText.str_ptr
    5735/    2B2E : A9 2B                LDA # (.._14033.str_addr)/$100
    5736/    2B30 : 85 50                STA $50 ;DrawText.str_ptr
    5737/    2B32 : AD 20 02             LDA hero_Points
    5738/    2B35 : 85 51                STA $51 ;DrawText.arg1
    5739/    2B37 : 64 52                STZ $52 ;DrawText.arg2
    5740/    2B39 : A9 14                LDA #$14
    5741/    2B3B : 85 53                STA $53 ;DrawText.ypos
    5742/    2B3D : A9 3F                LDA #$3F
    5743/    2B3F : 85 54                STA $54 ;DrawText.fg_color
    5744/    2B41 : A9 20                LDA #$20
    5745/    2B43 : 85 55                STA $55 ;DrawText.bg_color
    5746/    2B45 : 20 A9 19             JSR DrawText
    5747/    2B48 : 20 6D 26             JSR DrawSkills
    5748/    2B4B : 4C FB 2B             JMP .s19done
    5749/    2B4E :                      .s19c2:
    5750/    2B4E : C9 03                CMP #$3
    5751/    2B50 : F0 03                BEQ .._14127.skip
    5752/    2B52 : 4C FB 2B             JMP .s19c3
    5754/    2B55 :                      .s19b3:
    5755/    2B55 : A9 09                LDA #$9
    5756/    2B57 : 85 42                STA $42 ;DrawRect.xpos
    5757/    2B59 : A9 11                LDA #$11
    5758/    2B5B : 85 43                STA $43 ;DrawRect.ypos
    5759/    2B5D : A9 EE                LDA #$EE
    5760/    2B5F : 85 44                STA $44 ;DrawRect.width
    5761/    2B61 : A9 66                LDA #$66
    5762/    2B63 : 85 45                STA $45 ;DrawRect.height
    5763/    2B65 : A9 02                LDA #$2
    5764/    2B67 : 85 46                STA $46 ;DrawRect.color
    5765/    2B69 : 20 81 19             JSR DrawRect
    5766/    2B6C : A9 98                LDA #$98
    5767/    2B6E : 85 42                STA $42 ;DrawRect.xpos
    5768/    2B70 : A9 13                LDA #$13
    5769/    2B72 : 85 43                STA $43 ;DrawRect.ypos
    5770/    2B74 : A9 5C                LDA #$5C
    5771/    2B76 : 85 44                STA $44 ;DrawRect.width
    5772/    2B78 : A9 0A                LDA #$A
    5773/    2B7A : 85 45                STA $45 ;DrawRect.height
    5774/    2B7C : A9 00                LDA #$0
    5775/    2B7E : 85 46                STA $46 ;DrawRect.color
    5776/    2B80 : 20 81 19             JSR DrawRect
    5777/    2B83 : A9 AB                LDA #$AB
    5778/    2B85 : 8D 64 02             STA draw_X
    5779/    2B88 : 80 02                BRA .._14303.str_skip
    5781/    2B8A : 24 00                FCB "$",$0
    5783/    2B8C : A9 8A                LDA # (.._14303.str_addr) # $100
    5784/    2B8E : 85 4F                STA $4F ;DrawText.str_ptr
    5785/    2B90 : A9 2B                LDA # (.._14303.str_addr)/$100
    5786/    2B92 : 85 50                STA $50 ;DrawText.str_ptr
    5787/    2B94 : AD 1D 02             LDA hero_Red
    5788/    2B97 : 85 51                STA $51 ;DrawText.arg1
    5789/    2B99 : 64 52                STZ $52 ;DrawText.arg2
    5790/    2B9B : A9 15                LDA #$15
    5791/    2B9D : 85 53                STA $53 ;DrawText.ypos
    5792/    2B9F : A9 17                LDA #$17
    5793/    2BA1 : 85 54                STA $54 ;DrawText.fg_color
    5794/    2BA3 : A9 00                LDA #$0
    5795/    2BA5 : 85 55                STA $55 ;DrawText.bg_color
    5796/    2BA7 : 20 A9 19             JSR DrawText
    5797/    2BAA : A9 C3                LDA #$C3
    5798/    2BAC : 8D 64 02             STA draw_X
    5799/    2BAF : 80 02                BRA .._14410.str_skip
    5801/    2BB1 : 24 00                FCB "$",$0
    5803/    2BB3 : A9 B1                LDA # (.._14410.str_addr) # $100
    5804/    2BB5 : 85 4F                STA $4F ;DrawText.str_ptr
    5805/    2BB7 : A9 2B                LDA # (.._14410.str_addr)/$100
    5806/    2BB9 : 85 50                STA $50 ;DrawText.str_ptr
    5807/    2BBB : AD 1E 02             LDA hero_Blue
    5808/    2BBE : 85 51                STA $51 ;DrawText.arg1
    5809/    2BC0 : 64 52                STZ $52 ;DrawText.arg2
    5810/    2BC2 : A9 15                LDA #$15
    5811/    2BC4 : 85 53                STA $53 ;DrawText.ypos
    5812/    2BC6 : A9 35                LDA #$35
    5813/    2BC8 : 85 54                STA $54 ;DrawText.fg_color
    5814/    2BCA : A9 00                LDA #$0
    5815/    2BCC : 85 55                STA $55 ;DrawText.bg_color
    5816/    2BCE : 20 A9 19             JSR DrawText
    5817/    2BD1 : A9 DB                LDA #$DB
    5818/    2BD3 : 8D 64 02             STA draw_X
    5819/    2BD6 : 80 02                BRA .._14517.str_skip
    5821/    2BD8 : 24 00                FCB "$",$0
    5823/    2BDA : A9 D8                LDA # (.._14517.str_addr) # $100
    5824/    2BDC : 85 4F                STA $4F ;DrawText.str_ptr
    5825/    2BDE : A9 2B                LDA # (.._14517.str_addr)/$100
    5826/    2BE0 : 85 50                STA $50 ;DrawText.str_ptr
    5827/    2BE2 : AD 1F 02             LDA hero_Yellow
    5828/    2BE5 : 85 51                STA $51 ;DrawText.arg1
    5829/    2BE7 : 64 52                STZ $52 ;DrawText.arg2
    5830/    2BE9 : A9 15                LDA #$15
    5831/    2BEB : 85 53                STA $53 ;DrawText.ypos
    5832/    2BED : A9 1F                LDA #$1F
    5833/    2BEF : 85 54                STA $54 ;DrawText.fg_color
    5834/    2BF1 : A9 00                LDA #$0
    5835/    2BF3 : 85 55                STA $55 ;DrawText.bg_color
    5836/    2BF5 : 20 A9 19             JSR DrawText
    5837/    2BF8 : 20 3F 28             JSR DrawResources
    5838/    2BFB :                      .s19c3:
    5839/    2BFB :                      .s19done:
    5840/    2BFB : 60                   RTS
    5842/    2BFC :                     CheckHP:
    5843/    2BFC : AD 05 02             LDA hero_HP+$1
    5844/    2BFF : 30 07                BMI .chp.dead
    5845/    2C01 : 0D 04 02             ORA hero_HP
    5846/    2C04 : F0 02                BEQ .chp.dead
    5847/    2C06 : 80 50                BRA .chp.alive
    5849/    2C08 : 9C 04 02             STZ hero_HP
    5850/    2C0B : 9C 05 02             STZ hero_HP+$1
    5851/    2C0E : 20 25 1F             JSR DrawFrame
    5852/    2C11 : 20 7D 1B             JSR DrawLegend
    5853/    2C14 : A9 64                LDA #$64
    5854/    2C16 : 85 42                STA $42 ;DrawRect.xpos
    5855/    2C18 : A9 38                LDA #$38
    5856/    2C1A : 85 43                STA $43 ;DrawRect.ypos
    5857/    2C1C : A9 36                LDA #$36
    5858/    2C1E : 85 44                STA $44 ;DrawRect.width
    5859/    2C20 : A9 10                LDA #$10
    5860/    2C22 : 85 45                STA $45 ;DrawRect.height
    5861/    2C24 : A9 00                LDA #$0
    5862/    2C26 : 85 46                STA $46 ;DrawRect.color
    5863/    2C28 : 20 81 19             JSR DrawRect
    5864/    2C2B : A9 68                LDA #$68
    5865/    2C2D : 8D 64 02             STA draw_X
    5866/    2C30 : 80 09                BRA .._14706.str_skip
    5868/    2C32 : 59 6F 75 20 64 69    FCB "You died",$0
    5870/    2C3B : A9 32                LDA # (.._14706.str_addr) # $100
    5871/    2C3D : 85 4F                STA $4F ;DrawText.str_ptr
    5872/    2C3F : A9 2C                LDA # (.._14706.str_addr)/$100
    5873/    2C41 : 85 50                STA $50 ;DrawText.str_ptr
    5874/    2C43 : 64 51                STZ $51 ;DrawText.arg1
    5875/    2C45 : 64 52                STZ $52 ;DrawText.arg2
    5876/    2C47 : A9 3C                LDA #$3C
    5877/    2C49 : 85 53                STA $53 ;DrawText.ypos
    5878/    2C4B : A9 3F                LDA #$3F
    5879/    2C4D : 85 54                STA $54 ;DrawText.fg_color
    5880/    2C4F : A9 00                LDA #$0
    5881/    2C51 : 85 55                STA $55 ;DrawText.bg_color
    5882/    2C53 : 20 A9 19             JSR DrawText
    5884/    2C56 : 80 FE                BRA .chp.loop
    5886/    2C58 : AD 06 02             LDA hero_HP_Max
    5887/    2C5B : CD 04 02             CMP hero_HP
    5888/    2C5E : 90 03                BCC .._14770.skip
    5889/    2C60 : 4C 6F 2C             JMP .if112
    5891/    2C63 : AD 06 02             LDA hero_HP_Max
    5892/    2C66 : 8D 04 02             STA hero_HP
    5893/    2C69 : AD 07 02             LDA hero_HP_Max+$1
    5894/    2C6C : 8D 05 02             STA hero_HP+$1
    5895/    2C6F :                      .if112:
    5897/    2C6F : 60                   RTS
    5899/    2C70 :                     CheckLavaExit:
    5900/    2C70 : AD 00 02             LDA display_X
    5901/    2C73 : 18                   CLC
    5902/    2C74 : 6D 02 02             ADC hero_X
    5903/    2C77 : 85 6B                STA $6B ;mX
    5904/    2C79 : AD 01 02             LDA display_Y
    5905/    2C7C : 18                   CLC
    5906/    2C7D : 6D 03 02             ADC hero_Y
    5907/    2C80 : 85 6C                STA $6C ;mY
    5908/    2C82 : A9 7E                LDA # (map_data) # $100
    5909/    2C84 : 85 2D                STA $2D ;MapXY.map
    5910/    2C86 : A9 03                LDA # (map_data)/$100
    5911/    2C88 : 85 2E                STA $2E ;MapXY.map
    5912/    2C8A : A5 6B                LDA $6B ;mX
    5913/    2C8C : 85 2F                STA $2F ;MapXY.mX
    5914/    2C8E : A5 6C                LDA $6C ;mY
    5915/    2C90 : 85 30                STA $30 ;MapXY.mY
    5916/    2C92 : 20 61 15             JSR MapXY
    5917/    2C95 : A5 06                LDA ret_val
    5918/    2C97 : 80 03                BRA .s20c0
    5919/    2C99 : 4C DB 2C             JMP .s20done
    5920/    2C9C :                      .s20c0:
    5921/    2C9C : C9 05                CMP #$5
    5922/    2C9E : F0 03                BEQ .._14839.skip
    5923/    2CA0 : 4C C2 2C             JMP .s20c1
    5925/    2CA3 :                      .s20b1:
    5926/    2CA3 : AD 04 02             LDA hero_HP
    5927/    2CA6 : 38                   SEC
    5928/    2CA7 : ED 15 02             SBC hero_Lava_Dmg
    5929/    2CAA : 8D 04 02             STA hero_HP
    5930/    2CAD : AD 05 02             LDA hero_HP+$1
    5931/    2CB0 : ED 16 02             SBC hero_Lava_Dmg+$1
    5932/    2CB3 : 8D 05 02             STA hero_HP+$1
    5933/    2CB6 : 20 FC 2B             JSR CheckHP
    5934/    2CB9 : A9 FF                LDA #$FF
    5935/    2CBB : 85 06                STA ret_val
    5936/    2CBD : 80 20                BRA .cle.done
    5937/    2CBF : 4C DB 2C             JMP .s20done
    5938/    2CC2 :                      .s20c1:
    5939/    2CC2 : C9 06                CMP #$6
    5940/    2CC4 : F0 03                BEQ .._14865.skip
    5941/    2CC6 : 4C DB 2C             JMP .s20c2
    5943/    2CC9 :                      .s20b2:
    5944/    2CC9 : 20 85 15             JSR MakeMap
    5945/    2CCC : 20 AE 16             JSR LoadMonsters
    5946/    2CCF : 20 6E 17             JSR LoadCrystals
    5947/    2CD2 : 20 12 3A             JSR ResetGame
    5948/    2CD5 : A9 FF                LDA #$FF
    5949/    2CD7 : 85 06                STA ret_val
    5950/    2CD9 : 80 04                BRA .cle.done
    5951/    2CDB :                      .s20c2:
    5952/    2CDB :                      .s20done:
    5953/    2CDB : A9 00                LDA #$0
    5954/    2CDD : 85 06                STA ret_val
    5956/    2CDF : 60                   RTS
    5958/    2CE0 :                     AddExp:
    5959/    2CE0 : AD 1A 02             LDA hero_Exp
    5960/    2CE3 : 18                   CLC
    5961/    2CE4 : 65 2D                ADC $2D ;exp
    5962/    2CE6 : 8D 1A 02             STA hero_Exp
    5963/    2CE9 : CD 1B 02             CMP hero_Exp_Max
    5964/    2CEC : B0 03                BCS .._14918.skip
    5965/    2CEE : 4C 68 2D             JMP .if113
    5967/    2CF1 : AD 1A 02             LDA hero_Exp
    5968/    2CF4 : 38                   SEC
    5969/    2CF5 : ED 1B 02             SBC hero_Exp_Max
    5970/    2CF8 : 8D 1A 02             STA hero_Exp
    5971/    2CFB : AD 1B 02             LDA hero_Exp_Max
    5972/    2CFE : 18                   CLC
    5973/    2CFF : 69 0A                ADC #$A
    5974/    2D01 : 8D 1B 02             STA hero_Exp_Max
    5975/    2D04 : EE 1C 02             INC hero_Level
    5976/    2D07 : EE 20 02             INC hero_Points
    5977/    2D0A : AD 06 02             LDA hero_HP_Max
    5978/    2D0D : 8D 04 02             STA hero_HP
    5979/    2D10 : AD 07 02             LDA hero_HP_Max+$1
    5980/    2D13 : 8D 05 02             STA hero_HP+$1
    5981/    2D16 : AD 0B 02             LDA hero_Batt_Max
    5982/    2D19 : 8D 0A 02             STA hero_Batt
    5983/    2D1C : AD 59 02             LDA skill_list+$B
    5984/    2D1F : D0 03                BNE .._14941.skip
    5985/    2D21 : 4C 68 2D             JMP .if114
    5987/    2D24 : A9 03                LDA #$3
    5988/    2D26 : 85 2F                STA $2F ;rand8.max
    5989/    2D28 : 20 3B 12             JSR rand8
    5990/    2D2B : A5 06                LDA ret_val
    5991/    2D2D : 80 03                BRA .s21c0
    5992/    2D2F : 4C 68 2D             JMP .s21done
    5993/    2D32 :                      .s21c0:
    5994/    2D32 : C9 00                CMP #$0
    5995/    2D34 : F0 03                BEQ .._14964.skip
    5996/    2D36 : 4C 45 2D             JMP .s21c1
    5998/    2D39 :                      .s21b1:
    5999/    2D39 : AD 1E 02             LDA hero_Blue
    6000/    2D3C : 18                   CLC
    6001/    2D3D : 69 05                ADC #$5
    6002/    2D3F : 8D 1E 02             STA hero_Blue
    6003/    2D42 : 4C 68 2D             JMP .s21done
    6004/    2D45 :                      .s21c1:
    6005/    2D45 : C9 01                CMP #$1
    6006/    2D47 : F0 03                BEQ .._14973.skip
    6007/    2D49 : 4C 58 2D             JMP .s21c2
    6009/    2D4C :                      .s21b2:
    6010/    2D4C : AD 1D 02             LDA hero_Red
    6011/    2D4F : 18                   CLC
    6012/    2D50 : 69 05                ADC #$5
    6013/    2D52 : 8D 1D 02             STA hero_Red
    6014/    2D55 : 4C 68 2D             JMP .s21done
    6015/    2D58 :                      .s21c2:
    6016/    2D58 : C9 02                CMP #$2
    6017/    2D5A : F0 03                BEQ .._14982.skip
    6018/    2D5C : 4C 68 2D             JMP .s21c3
    6020/    2D5F :                      .s21b3:
    6021/    2D5F : AD 1F 02             LDA hero_Yellow
    6022/    2D62 : 18                   CLC
    6023/    2D63 : 69 05                ADC #$5
    6024/    2D65 : 8D 1F 02             STA hero_Yellow
    6025/    2D68 :                      .s21c3:
    6026/    2D68 :                      .s21done:
    6027/    2D68 :                      .if114:
    6028/    2D68 :                      .if113:
    6029/    2D68 : 60                   RTS
    6031/    2D69 :                     TickHandler:
    6032/    2D69 : A9 00                LDA #$0
    6033/    2D6B : 85 63                STA $63 ;redraw
    6034/    2D6D : AD 04 02             LDA hero_HP
    6035/    2D70 : 85 64                STA $64 ;original_hp
    6036/    2D72 : AD 0A 02             LDA hero_Batt
    6037/    2D75 : 85 65                STA $65 ;original_batt
    6038/    2D77 : AD 14 02             LDA hero_HP_Recharge
    6039/    2D7A : 18                   CLC
    6040/    2D7B : 6D 04 02             ADC hero_HP
    6041/    2D7E : 8D 04 02             STA hero_HP
    6042/    2D81 : 90 03                BCC .._15063.skip
    6043/    2D83 : EE 05 02             INC hero_HP+$1
    6045/    2D86 : AD 12 02             LDA hero_Batt_Recharge
    6046/    2D89 : 18                   CLC
    6047/    2D8A : 6D 0A 02             ADC hero_Batt
    6048/    2D8D : 8D 0A 02             STA hero_Batt
    6049/    2D90 : 90 03                BCC .._15083.skip
    6050/    2D92 : EE 0B 02             INC hero_Batt+$1
    6052/    2D95 : AD 26 02             LDA hero_activity
    6053/    2D98 : D0 03                BNE .._15105.skip
    6054/    2D9A : 4C 5D 30             JMP .if115
    6056/    2D9D : AD 23 02             LDA hero_target_type
    6057/    2DA0 : 80 03                BRA .s22c0
    6058/    2DA2 : 4C 5D 30             JMP .s22done
    6059/    2DA5 :                      .s22c0:
    6060/    2DA5 : C9 04                CMP #$4
    6061/    2DA7 : F0 03                BEQ .._15108.skip
    6062/    2DA9 : 4C 7B 2E             JMP .s22c1
    6064/    2DAC :                      .s22b1:
    6065/    2DAC : AD 0A 02             LDA hero_Batt
    6066/    2DAF : CD 18 02             CMP hero_Mine_Cost
    6067/    2DB2 : B0 03                BCS .._15118.skip
    6068/    2DB4 : 4C 78 2E             JMP .if116
    6070/    2DB7 : AD 4E 02             LDA skill_list+$0
    6071/    2DBA : F0 0B                BEQ .th.batt_saver
    6072/    2DBC : A9 05                LDA #$5
    6073/    2DBE : 85 2F                STA $2F ;rand8.max
    6074/    2DC0 : 20 3B 12             JSR rand8
    6075/    2DC3 : A5 06                LDA ret_val
    6076/    2DC5 : F0 0A                BEQ .th.batt_saver_done
    6078/    2DC7 : AD 0A 02             LDA hero_Batt
    6079/    2DCA : 38                   SEC
    6080/    2DCB : ED 18 02             SBC hero_Mine_Cost
    6081/    2DCE : 8D 0A 02             STA hero_Batt
    6083/    2DD1 : EE 27 02             INC hero_activity_ticks
    6084/    2DD4 : A9 FF                LDA #$FF
    6085/    2DD6 : 85 63                STA $63 ;redraw
    6086/    2DD8 : AD 27 02             LDA hero_activity_ticks
    6087/    2DDB : CD 29 02             CMP hero_activity_ticks_max
    6088/    2DDE : F0 03                BEQ .._15160.skip
    6089/    2DE0 : 4C 78 2E             JMP .if117
    6091/    2DE3 : AD 24 02             LDA hero_target_index
    6092/    2DE6 : 0A                   ASL
    6093/    2DE7 : 0A                   ASL
    6094/    2DE8 : 18                   CLC
    6095/    2DE9 : 85 68                STA $68 ;index5
    6096/    2DEB : 69 03                ADC #$3
    6097/    2DED : A8                   TAY
    6098/    2DEE : B9 DE 02             LDA crystal_list,Y
    6099/    2DF1 : 80 03                BRA .s23c0
    6100/    2DF3 : 4C 1A 2E             JMP .s23done
    6101/    2DF6 :                      .s23c0:
    6102/    2DF6 : C9 00                CMP #$0
    6103/    2DF8 : F0 03                BEQ .._15163.skip
    6104/    2DFA : 4C 03 2E             JMP .s23c1
    6106/    2DFD :                      .s23b1:
    6107/    2DFD : EE 1D 02             INC hero_Red
    6108/    2E00 : 4C 1A 2E             JMP .s23done
    6109/    2E03 :                      .s23c1:
    6110/    2E03 : C9 01                CMP #$1
    6111/    2E05 : F0 03                BEQ .._15172.skip
    6112/    2E07 : 4C 10 2E             JMP .s23c2
    6114/    2E0A :                      .s23b2:
    6115/    2E0A : EE 1E 02             INC hero_Blue
    6116/    2E0D : 4C 1A 2E             JMP .s23done
    6117/    2E10 :                      .s23c2:
    6118/    2E10 : C9 02                CMP #$2
    6119/    2E12 : F0 03                BEQ .._15181.skip
    6120/    2E14 : 4C 1A 2E             JMP .s23c3
    6122/    2E17 :                      .s23b3:
    6123/    2E17 : EE 1F 02             INC hero_Yellow
    6124/    2E1A :                      .s23c3:
    6125/    2E1A :                      .s23done:
    6126/    2E1A : AD 52 02             LDA skill_list+$4
    6127/    2E1D : D0 03                BNE .._15196.skip
    6128/    2E1F : 4C 55 2E             JMP .if118
    6130/    2E22 : B9 DE 02             LDA crystal_list,Y
    6131/    2E25 : 80 03                BRA .s24c0
    6132/    2E27 : 4C 4E 2E             JMP .s24done
    6133/    2E2A :                      .s24c0:
    6134/    2E2A : C9 00                CMP #$0
    6135/    2E2C : F0 03                BEQ .._15199.skip
    6136/    2E2E : 4C 37 2E             JMP .s24c1
    6138/    2E31 :                      .s24b1:
    6139/    2E31 : EE 1D 02             INC hero_Red
    6140/    2E34 : 4C 4E 2E             JMP .s24done
    6141/    2E37 :                      .s24c1:
    6142/    2E37 : C9 01                CMP #$1
    6143/    2E39 : F0 03                BEQ .._15208.skip
    6144/    2E3B : 4C 44 2E             JMP .s24c2
    6146/    2E3E :                      .s24b2:
    6147/    2E3E : EE 1E 02             INC hero_Blue
    6148/    2E41 : 4C 4E 2E             JMP .s24done
    6149/    2E44 :                      .s24c2:
    6150/    2E44 : C9 02                CMP #$2
    6151/    2E46 : F0 03                BEQ .._15217.skip
    6152/    2E48 : 4C 4E 2E             JMP .s24c3
    6154/    2E4B :                      .s24b3:
    6155/    2E4B : EE 1F 02             INC hero_Yellow
    6156/    2E4E :                      .s24c3:
    6157/    2E4E :                      .s24done:
    6158/    2E4E : A9 02                LDA #$2
    6159/    2E50 : 85 2D                STA $2D ;AddExp.exp
    6160/    2E52 : 20 E0 2C             JSR AddExp
    6161/    2E55 :                      .if118:
    6162/    2E55 : A5 68                LDA $68 ;index5
    6163/    2E57 : 18                   CLC
    6164/    2E58 : 69 02                ADC #$2
    6165/    2E5A : A8                   TAY
    6166/    2E5B : A9 00                LDA #$0
    6167/    2E5D : 99 DE 02             STA crystal_list,Y
    6168/    2E60 : A9 02                LDA #$2
    6169/    2E62 : 85 2D                STA $2D ;AddExp.exp
    6170/    2E64 : 20 E0 2C             JSR AddExp
    6171/    2E67 : A9 00                LDA #$0
    6172/    2E69 : 8D 23 02             STA hero_target_type
    6173/    2E6C : A9 00                LDA #$0
    6174/    2E6E : 8D 26 02             STA hero_activity
    6175/    2E71 : 20 25 1F             JSR DrawFrame
    6176/    2E74 : A9 FF                LDA #$FF
    6177/    2E76 : 85 63                STA $63 ;redraw
    6178/    2E78 :                      .if117:
    6179/    2E78 :                      .if116:
    6180/    2E78 : 4C 5D 30             JMP .s22done
    6181/    2E7B :                      .s22c1:
    6182/    2E7B : C9 01                CMP #$1
    6183/    2E7D : F0 03                BEQ .._15335.skip
    6184/    2E7F : 4C 2C 2F             JMP .s22c2
    6186/    2E82 :                      .s22b2:
    6187/    2E82 : AD 0A 02             LDA hero_Batt
    6188/    2E85 : CD 19 02             CMP hero_Drill_Cost
    6189/    2E88 : B0 03                BCS .._15345.skip
    6190/    2E8A : 4C 29 2F             JMP .if119
    6192/    2E8D : AD 0A 02             LDA hero_Batt
    6193/    2E90 : 38                   SEC
    6194/    2E91 : ED 19 02             SBC hero_Drill_Cost
    6195/    2E94 : 8D 0A 02             STA hero_Batt
    6196/    2E97 : EE 27 02             INC hero_activity_ticks
    6197/    2E9A : A9 FF                LDA #$FF
    6198/    2E9C : 85 63                STA $63 ;redraw
    6199/    2E9E : AD 27 02             LDA hero_activity_ticks
    6200/    2EA1 : CD 29 02             CMP hero_activity_ticks_max
    6201/    2EA4 : F0 03                BEQ .._15361.skip
    6202/    2EA6 : 4C 29 2F             JMP .if120
    6204/    2EA9 : A9 7E                LDA # (map_data) # $100
    6205/    2EAB : 85 2D                STA $2D ;OffsetXY.map
    6206/    2EAD : A9 03                LDA # (map_data)/$100
    6207/    2EAF : 85 2E                STA $2E ;OffsetXY.map
    6208/    2EB1 : AD 24 02             LDA hero_target_index
    6209/    2EB4 : 85 2F                STA $2F ;OffsetXY.mX
    6210/    2EB6 : AD 25 02             LDA hero_target_index2
    6211/    2EB9 : 85 30                STA $30 ;OffsetXY.mY
    6212/    2EBB : 20 38 15             JSR OffsetXY
    6213/    2EBE : A9 00                LDA #$0
    6214/    2EC0 : 92 06                STA (ret_val)
    6215/    2EC2 : A9 01                LDA #$1
    6216/    2EC4 : 85 2D                STA $2D ;AddExp.exp
    6217/    2EC6 : 20 E0 2C             JSR AddExp
    6218/    2EC9 : A9 00                LDA #$0
    6219/    2ECB : 8D 23 02             STA hero_target_type
    6220/    2ECE : A9 00                LDA #$0
    6221/    2ED0 : 8D 26 02             STA hero_activity
    6222/    2ED3 : AD 51 02             LDA skill_list+$3
    6223/    2ED6 : D0 03                BNE .._15490.skip
    6224/    2ED8 : 4C 22 2F             JMP .if121
    6226/    2EDB : A9 04                LDA #$4
    6227/    2EDD : 85 2F                STA $2F ;rand8.max
    6228/    2EDF : 20 3B 12             JSR rand8
    6229/    2EE2 : A5 06                LDA ret_val
    6230/    2EE4 : F0 03                BEQ .._15519.skip
    6231/    2EE6 : 4C 22 2F             JMP .if122
    6233/    2EE9 : A9 03                LDA #$3
    6234/    2EEB : 85 2F                STA $2F ;rand8.max
    6235/    2EED : 20 3B 12             JSR rand8
    6236/    2EF0 : A5 06                LDA ret_val
    6237/    2EF2 : 80 03                BRA .s25c0
    6238/    2EF4 : 4C 1B 2F             JMP .s25done
    6239/    2EF7 :                      .s25c0:
    6240/    2EF7 : C9 00                CMP #$0
    6241/    2EF9 : F0 03                BEQ .._15548.skip
    6242/    2EFB : 4C 04 2F             JMP .s25c1
    6244/    2EFE :                      .s25b1:
    6245/    2EFE : EE 1D 02             INC hero_Red
    6246/    2F01 : 4C 1B 2F             JMP .s25done
    6247/    2F04 :                      .s25c1:
    6248/    2F04 : C9 01                CMP #$1
    6249/    2F06 : F0 03                BEQ .._15557.skip
    6250/    2F08 : 4C 11 2F             JMP .s25c2
    6252/    2F0B :                      .s25b2:
    6253/    2F0B : EE 1E 02             INC hero_Blue
    6254/    2F0E : 4C 1B 2F             JMP .s25done
    6255/    2F11 :                      .s25c2:
    6256/    2F11 : C9 02                CMP #$2
    6257/    2F13 : F0 03                BEQ .._15566.skip
    6258/    2F15 : 4C 1B 2F             JMP .s25c3
    6260/    2F18 :                      .s25b3:
    6261/    2F18 : EE 1F 02             INC hero_Yellow
    6262/    2F1B :                      .s25c3:
    6263/    2F1B :                      .s25done:
    6264/    2F1B : A9 02                LDA #$2
    6265/    2F1D : 85 2D                STA $2D ;AddExp.exp
    6266/    2F1F : 20 E0 2C             JSR AddExp
    6267/    2F22 :                      .if122:
    6268/    2F22 :                      .if121:
    6269/    2F22 : 20 25 1F             JSR DrawFrame
    6270/    2F25 : A9 FF                LDA #$FF
    6271/    2F27 : 85 63                STA $63 ;redraw
    6272/    2F29 :                      .if120:
    6273/    2F29 :                      .if119:
    6274/    2F29 : 4C 5D 30             JMP .s22done
    6275/    2F2C :                      .s22c2:
    6276/    2F2C : C9 03                CMP #$3
    6277/    2F2E : F0 03                BEQ .._15630.skip
    6278/    2F30 : 4C 5D 30             JMP .s22c3
    6280/    2F33 :                      .s22b3:
    6281/    2F33 : AD 0A 02             LDA hero_Batt
    6282/    2F36 : CD 17 02             CMP hero_Dmg_Cost
    6283/    2F39 : B0 03                BCS .._15640.skip
    6284/    2F3B : 4C 45 30             JMP .if123
    6286/    2F3E : AD 0A 02             LDA hero_Batt
    6287/    2F41 : 38                   SEC
    6288/    2F42 : ED 17 02             SBC hero_Dmg_Cost
    6289/    2F45 : 8D 0A 02             STA hero_Batt
    6290/    2F48 : AD 56 02             LDA skill_list+$8
    6291/    2F4B : D0 03                BNE .._15643.skip
    6292/    2F4D : 4C 61 2F             JMP .if124
    6294/    2F50 : A9 14                LDA #$14
    6295/    2F52 : 85 2F                STA $2F ;rand8.max
    6296/    2F54 : 20 3B 12             JSR rand8
    6297/    2F57 : A5 06                LDA ret_val
    6298/    2F59 : F0 03                BEQ .._15672.skip
    6299/    2F5B : 4C 61 2F             JMP .if125
    6301/    2F5E : 9C 27 02             STZ hero_activity_ticks
    6302/    2F61 :                      .if125:
    6303/    2F61 :                      .if124:
    6304/    2F61 : AD 27 02             LDA hero_activity_ticks
    6305/    2F64 : D0 03                BNE .._15694.skip
    6306/    2F66 : 4C B7 2F             JMP .if126
    6308/    2F69 : AD 27 02             LDA hero_activity_ticks
    6309/    2F6C : 38                   SEC
    6310/    2F6D : ED 0D 02             SBC hero_Dmg
    6311/    2F70 : 8D 27 02             STA hero_activity_ticks
    6312/    2F73 : B0 03                BCS .._15695.skip
    6313/    2F75 : CE 28 02             DEC hero_activity_ticks+$1
    6315/    2F78 : A9 64                LDA #$64
    6316/    2F7A : 85 2F                STA $2F ;rand8.max
    6317/    2F7C : 20 3B 12             JSR rand8
    6318/    2F7F : A5 06                LDA ret_val
    6319/    2F81 : CD 13 02             CMP hero_Crit_Rate
    6320/    2F84 : 90 03                BCC .._15743.skip
    6321/    2F86 : 4C B7 2F             JMP .if127
    6323/    2F89 : AD 54 02             LDA skill_list+$6
    6324/    2F8C : D0 03                BNE .._15746.skip
    6325/    2F8E : 4C A3 2F             JMP .if128
    6327/    2F91 : AD 27 02             LDA hero_activity_ticks
    6328/    2F94 : 38                   SEC
    6329/    2F95 : ED 0D 02             SBC hero_Dmg
    6330/    2F98 : 8D 27 02             STA hero_activity_ticks
    6331/    2F9B : B0 03                BCS .._15747.skip
    6332/    2F9D : CE 28 02             DEC hero_activity_ticks+$1
    6334/    2FA0 : 4C B7 2F             JMP .if129
    6335/    2FA3 :                      .if128:
    6336/    2FA3 : AD 0D 02             LDA hero_Dmg
    6337/    2FA6 : 4A                   LSR
    6338/    2FA7 : 85 67                STA $67 ;mult_buff
    6339/    2FA9 : AD 27 02             LDA hero_activity_ticks
    6340/    2FAC : 38                   SEC
    6341/    2FAD : E5 67                SBC $67 ;mult_buff
    6342/    2FAF : 8D 27 02             STA hero_activity_ticks
    6343/    2FB2 : B0 03                BCS .._15769.skip
    6344/    2FB4 : CE 28 02             DEC hero_activity_ticks+$1
    6346/    2FB7 :                      .if129:
    6347/    2FB7 :                      .if127:
    6348/    2FB7 :                      .if126:
    6349/    2FB7 : AD 28 02             LDA hero_activity_ticks+$1
    6350/    2FBA : 30 07                BMI .th.mob_dead
    6351/    2FBC : 0D 27 02             ORA hero_activity_ticks
    6352/    2FBF : F0 02                BEQ .th.mob_dead
    6353/    2FC1 : 80 7E                BRA .th.mob_done
    6355/    2FC3 : AD 24 02             LDA hero_target_index
    6356/    2FC6 : 0A                   ASL
    6357/    2FC7 : 18                   CLC
    6358/    2FC8 : 6D 24 02             ADC hero_target_index
    6359/    2FCB : 69 02                ADC #$2
    6360/    2FCD : A8                   TAY
    6361/    2FCE : A9 00                LDA #$0
    6362/    2FD0 : 99 66 02             STA monster_list,Y
    6363/    2FD3 : AD 55 02             LDA skill_list+$7
    6364/    2FD6 : D0 03                BNE .._15792.skip
    6365/    2FD8 : 4C E5 2F             JMP .if130
    6367/    2FDB : A9 0B                LDA #$B
    6368/    2FDD : 85 2D                STA $2D ;AddExp.exp
    6369/    2FDF : 20 E0 2C             JSR AddExp
    6370/    2FE2 : 4C EC 2F             JMP .if131
    6371/    2FE5 :                      .if130:
    6372/    2FE5 : A9 0A                LDA #$A
    6373/    2FE7 : 85 2D                STA $2D ;AddExp.exp
    6374/    2FE9 : 20 E0 2C             JSR AddExp
    6375/    2FEC :                      .if131:
    6376/    2FEC : A9 00                LDA #$0
    6377/    2FEE : 8D 23 02             STA hero_target_type
    6378/    2FF1 : A9 00                LDA #$0
    6379/    2FF3 : 8D 26 02             STA hero_activity
    6380/    2FF6 : AD 4F 02             LDA skill_list+$1
    6381/    2FF9 : D0 03                BNE .._15881.skip
    6382/    2FFB : 4C 3E 30             JMP .if132
    6384/    2FFE : A9 0A                LDA #$A
    6385/    3000 : 85 2F                STA $2F ;rand8.max
    6386/    3002 : 20 3B 12             JSR rand8
    6387/    3005 : A5 06                LDA ret_val
    6388/    3007 : F0 03                BEQ .._15910.skip
    6389/    3009 : 4C 3E 30             JMP .if133
    6391/    300C : A9 03                LDA #$3
    6392/    300E : 85 2F                STA $2F ;rand8.max
    6393/    3010 : 20 3B 12             JSR rand8
    6394/    3013 : A5 06                LDA ret_val
    6395/    3015 : 80 03                BRA .s26c0
    6396/    3017 : 4C 3E 30             JMP .s26done
    6397/    301A :                      .s26c0:
    6398/    301A : C9 00                CMP #$0
    6399/    301C : F0 03                BEQ .._15939.skip
    6400/    301E : 4C 27 30             JMP .s26c1
    6402/    3021 :                      .s26b1:
    6403/    3021 : EE 1D 02             INC hero_Red
    6404/    3024 : 4C 3E 30             JMP .s26done
    6405/    3027 :                      .s26c1:
    6406/    3027 : C9 01                CMP #$1
    6407/    3029 : F0 03                BEQ .._15948.skip
    6408/    302B : 4C 34 30             JMP .s26c2
    6410/    302E :                      .s26b2:
    6411/    302E : EE 1E 02             INC hero_Blue
    6412/    3031 : 4C 3E 30             JMP .s26done
    6413/    3034 :                      .s26c2:
    6414/    3034 : C9 02                CMP #$2
    6415/    3036 : F0 03                BEQ .._15957.skip
    6416/    3038 : 4C 3E 30             JMP .s26c3
    6418/    303B :                      .s26b3:
    6419/    303B : EE 1F 02             INC hero_Yellow
    6420/    303E :                      .s26c3:
    6421/    303E :                      .s26done:
    6422/    303E :                      .if133:
    6423/    303E :                      .if132:
    6424/    303E : 20 25 1F             JSR DrawFrame
    6426/    3041 : A9 FF                LDA #$FF
    6427/    3043 : 85 63                STA $63 ;redraw
    6428/    3045 :                      .if123:
    6429/    3045 : 20 78 12             JSR rand5050
    6430/    3048 : A5 06                LDA ret_val
    6431/    304A : D0 03                BNE .._15996.skip
    6432/    304C : 4C 5D 30             JMP .if134
    6434/    304F : AD 04 02             LDA hero_HP
    6435/    3052 : 38                   SEC
    6436/    3053 : E9 02                SBC #$2
    6437/    3055 : 8D 04 02             STA hero_HP
    6438/    3058 : B0 03                BCS .._15997.skip
    6439/    305A : CE 05 02             DEC hero_HP+$1
    6441/    305D :                      .if134:
    6442/    305D :                      .s22c3:
    6443/    305D :                      .s22done:
    6444/    305D :                      .if115:
    6445/    305D : AD 0B 02             LDA hero_Batt_Max
    6446/    3060 : CD 0A 02             CMP hero_Batt
    6447/    3063 : 90 03                BCC .._16021.skip
    6448/    3065 : 4C 6E 30             JMP .if135
    6450/    3068 : AD 0B 02             LDA hero_Batt_Max
    6451/    306B : 8D 0A 02             STA hero_Batt
    6452/    306E :                      .if135:
    6453/    306E : AD 0A 02             LDA hero_Batt
    6454/    3071 : C5 65                CMP $65 ;original_batt
    6455/    3073 : D0 03                BNE .._16047.skip
    6456/    3075 : 4C 7C 30             JMP .if136
    6458/    3078 : A9 FF                LDA #$FF
    6459/    307A : 85 63                STA $63 ;redraw
    6460/    307C :                      .if136:
    6461/    307C : 20 FC 2B             JSR CheckHP
    6462/    307F : AD 04 02             LDA hero_HP
    6463/    3082 : C5 64                CMP $64 ;original_hp
    6464/    3084 : D0 03                BNE .._16067.skip
    6465/    3086 : 4C 8D 30             JMP .if137
    6467/    3089 : A9 FF                LDA #$FF
    6468/    308B : 85 63                STA $63 ;redraw
    6469/    308D :                      .if137:
    6470/    308D : 20 70 2C             JSR CheckLavaExit
    6471/    3090 : A5 06                LDA ret_val
    6472/    3092 : D0 03                BNE .._16088.skip
    6473/    3094 : 4C 9B 30             JMP .if138
    6475/    3097 : A9 FF                LDA #$FF
    6476/    3099 : 85 63                STA $63 ;redraw
    6477/    309B :                      .if138:
    6478/    309B : A5 63                LDA $63 ;redraw
    6479/    309D : D0 03                BNE .._16107.skip
    6480/    309F : 4C A5 30             JMP .if139
    6482/    30A2 : 20 7D 1B             JSR DrawLegend
    6483/    30A5 :                      .if139:
    6484/    30A5 : 60                   RTS
    6486/    30A6 :                     KeyHandlerGame:
    6487/    30A6 : AD E4 FF             LDA $FFE4
    6488/    30A9 : 85 63                STA $63 ;key
    6489/    30AB : A5 63                LDA $63 ;key
    6490/    30AD : 80 03                BRA .s27c0
    6491/    30AF : 4C E4 30             JMP .s27done
    6492/    30B2 :                      .s27c0:
    6493/    30B2 : C9 6D                CMP #$6D
    6494/    30B4 : F0 03                BEQ .._16145.skip
    6495/    30B6 : 4C BB 30             JMP .s27c1
    6497/    30B9 : 80 06                BRA .s27b1
    6498/    30BB :                      .s27c1:
    6499/    30BB : C9 63                CMP #$63
    6500/    30BD : D0 0A                BNE .s27c2
    6501/    30BF : 80 00                BRA .s27b1
    6502/    30C1 :                      .s27b1:
    6503/    30C1 : A9 01                LDA #$1
    6504/    30C3 : 8D 65 02             STA output_mode
    6505/    30C6 : 4C E4 30             JMP .s27done
    6506/    30C9 :                      .s27c2:
    6507/    30C9 : C9 6B                CMP #$6B
    6508/    30CB : F0 03                BEQ .._16168.skip
    6509/    30CD : 4C D8 30             JMP .s27c3
    6511/    30D0 :                      .s27b2:
    6512/    30D0 : A9 02                LDA #$2
    6513/    30D2 : 8D 65 02             STA output_mode
    6514/    30D5 : 4C E4 30             JMP .s27done
    6515/    30D8 :                      .s27c3:
    6516/    30D8 : C9 72                CMP #$72
    6517/    30DA : F0 03                BEQ .._16191.skip
    6518/    30DC : 4C E4 30             JMP .s27c4
    6520/    30DF :                      .s27b3:
    6521/    30DF : A9 03                LDA #$3
    6522/    30E1 : 8D 65 02             STA output_mode
    6523/    30E4 :                      .s27c4:
    6524/    30E4 :                      .s27done:
    6525/    30E4 : AD 65 02             LDA output_mode
    6526/    30E7 : C9 00                CMP #$0
    6527/    30E9 : D0 03                BNE .._16219.skip
    6528/    30EB : 4C F7 30             JMP .if140
    6530/    30EE : 20 09 22             JSR DrawMenuBorder
    6531/    30F1 : 20 55 2A             JSR DrawMenu
    6532/    30F4 : 4C 8D 34             JMP .if141
    6533/    30F7 :                      .if140:
    6534/    30F7 : A9 00                LDA #$0
    6535/    30F9 : 85 64                STA $64 ;redraw
    6536/    30FB : A9 00                LDA #$0
    6537/    30FD : 85 68                STA $68 ;moved
    6538/    30FF : AD 26 02             LDA hero_activity
    6539/    3102 : F0 03                BEQ .._16250.skip
    6540/    3104 : 4C 7B 34             JMP .if142
    6542/    3107 : A5 63                LDA $63 ;key
    6543/    3109 : 80 03                BRA .s28c0
    6544/    310B : 4C 7B 34             JMP .s28done
    6545/    310E :                      .s28c0:
    6546/    310E : C9 77                CMP #$77
    6547/    3110 : F0 03                BEQ .._16253.skip
    6548/    3112 : 4C BF 31             JMP .s28c1
    6550/    3115 :                      .s28b1:
    6551/    3115 : AD 22 02             LDA hero_target_direction
    6552/    3118 : C9 01                CMP #$1
    6553/    311A : D0 03                BNE .._16262.skip
    6554/    311C : 4C 2B 31             JMP .if143
    6556/    311F : A9 01                LDA #$1
    6557/    3121 : 8D 22 02             STA hero_target_direction
    6558/    3124 : A9 FF                LDA #$FF
    6559/    3126 : 85 64                STA $64 ;redraw
    6560/    3128 : 4C BC 31             JMP .if144
    6561/    312B :                      .if143:
    6562/    312B : AD 01 02             LDA display_Y
    6563/    312E : 18                   CLC
    6564/    312F : 6D 03 02             ADC hero_Y
    6565/    3132 : C9 01                CMP #$1
    6566/    3134 : B0 03                BCS .._16294.skip
    6567/    3136 : 4C BC 31             JMP .if145
    6569/    3139 : 3A                   DEC
    6570/    313A : 85 66                STA $66 ;mY
    6571/    313C : AD 00 02             LDA display_X
    6572/    313F : 18                   CLC
    6573/    3140 : 6D 02 02             ADC hero_X
    6574/    3143 : 85 65                STA $65 ;mX
    6575/    3145 : A9 7E                LDA # (map_data) # $100
    6576/    3147 : 85 2D                STA $2D ;MapXY.map
    6577/    3149 : A9 03                LDA # (map_data)/$100
    6578/    314B : 85 2E                STA $2E ;MapXY.map
    6579/    314D : A5 65                LDA $65 ;mX
    6580/    314F : 85 2F                STA $2F ;MapXY.mX
    6581/    3151 : A5 66                LDA $66 ;mY
    6582/    3153 : 85 30                STA $30 ;MapXY.mY
    6583/    3155 : 20 61 15             JSR MapXY
    6584/    3158 : A5 06                LDA ret_val
    6585/    315A : C9 04                CMP #$4
    6586/    315C : D0 03                BNE .._16356.skip
    6587/    315E : 4C BC 31             JMP .if146
    6589/    3161 : A5 65                LDA $65 ;mX
    6590/    3163 : 85 31                STA $31 ;CheckForMonster.mX
    6591/    3165 : A5 66                LDA $66 ;mY
    6592/    3167 : 85 32                STA $32 ;CheckForMonster.mY
    6593/    3169 : 20 57 16             JSR CheckForMonster
    6594/    316C : A5 06                LDA ret_val
    6595/    316E : 49 FF                EOR #$FF
    6596/    3170 : 85 67                STA $67 ;or_buff
    6597/    3172 : A0 09                LDY #$9
    6598/    3174 : B9 4E 02             LDA skill_list,Y
    6599/    3177 : 05 67                ORA $67 ;or_buff
    6600/    3179 : D0 03                BNE .._16405.skip
    6601/    317B : 4C B2 31             JMP .if147
    6603/    317E : AD 03 02             LDA hero_Y
    6604/    3181 : C9 02                CMP #$2
    6605/    3183 : B0 03                BCS .._16408.skip
    6606/    3185 : 4C 92 31             JMP .if148
    6608/    3188 : CE 03 02             DEC hero_Y
    6609/    318B : A9 FF                LDA #$FF
    6610/    318D : 85 68                STA $68 ;moved
    6611/    318F : 4C B2 31             JMP .if149
    6612/    3192 :                      .if148:
    6613/    3192 : C9 01                CMP #$1
    6614/    3194 : F0 03                BEQ .._16421.skip
    6615/    3196 : 4C B2 31             JMP .if150
    6617/    3199 : AD 01 02             LDA display_Y
    6618/    319C : F0 03                BEQ .._16423.skip
    6619/    319E : 4C AB 31             JMP .if151
    6621/    31A1 : 9C 03 02             STZ hero_Y
    6622/    31A4 : A9 FF                LDA #$FF
    6623/    31A6 : 85 68                STA $68 ;moved
    6624/    31A8 : 4C B2 31             JMP .if152
    6625/    31AB :                      .if151:
    6626/    31AB : CE 01 02             DEC display_Y
    6627/    31AE : A9 FF                LDA #$FF
    6628/    31B0 : 85 68                STA $68 ;moved
    6629/    31B2 :                      .if152:
    6630/    31B2 :                      .if150:
    6631/    31B2 :                      .if149:
    6632/    31B2 :                      .if147:
    6633/    31B2 : A5 68                LDA $68 ;moved
    6634/    31B4 : D0 03                BNE .._16468.skip
    6635/    31B6 : 4C BC 31             JMP .if153
    6637/    31B9 : 20 70 2C             JSR CheckLavaExit
    6638/    31BC :                      .if153:
    6639/    31BC :                      .if146:
    6640/    31BC :                      .if145:
    6641/    31BC :                      .if144:
    6642/    31BC : 4C 7B 34             JMP .s28done
    6643/    31BF :                      .s28c1:
    6644/    31BF : C9 73                CMP #$73
    6645/    31C1 : F0 03                BEQ .._16480.skip
    6646/    31C3 : 4C 73 32             JMP .s28c2
    6648/    31C6 :                      .s28b2:
    6649/    31C6 : AD 22 02             LDA hero_target_direction
    6650/    31C9 : C9 02                CMP #$2
    6651/    31CB : D0 03                BNE .._16489.skip
    6652/    31CD : 4C DC 31             JMP .if154
    6654/    31D0 : A9 02                LDA #$2
    6655/    31D2 : 8D 22 02             STA hero_target_direction
    6656/    31D5 : A9 01                LDA #$1
    6657/    31D7 : 85 64                STA $64 ;redraw
    6658/    31D9 : 4C 70 32             JMP .if155
    6659/    31DC :                      .if154:
    6660/    31DC : AD 01 02             LDA display_Y
    6661/    31DF : 38                   SEC
    6662/    31E0 : 6D 03 02             ADC hero_Y
    6663/    31E3 : C9 14                CMP #$14
    6664/    31E5 : 90 03                BCC .._16521.skip
    6665/    31E7 : 4C 70 32             JMP .if156
    6667/    31EA : 85 66                STA $66 ;mY
    6668/    31EC : AD 00 02             LDA display_X
    6669/    31EF : 18                   CLC
    6670/    31F0 : 6D 02 02             ADC hero_X
    6671/    31F3 : 85 65                STA $65 ;mX
    6672/    31F5 : A9 7E                LDA # (map_data) # $100
    6673/    31F7 : 85 2D                STA $2D ;MapXY.map
    6674/    31F9 : A9 03                LDA # (map_data)/$100
    6675/    31FB : 85 2E                STA $2E ;MapXY.map
    6676/    31FD : A5 65                LDA $65 ;mX
    6677/    31FF : 85 2F                STA $2F ;MapXY.mX
    6678/    3201 : A5 66                LDA $66 ;mY
    6679/    3203 : 85 30                STA $30 ;MapXY.mY
    6680/    3205 : 20 61 15             JSR MapXY
    6681/    3208 : A5 06                LDA ret_val
    6682/    320A : C9 04                CMP #$4
    6683/    320C : D0 03                BNE .._16583.skip
    6684/    320E : 4C 70 32             JMP .if157
    6686/    3211 : A5 65                LDA $65 ;mX
    6687/    3213 : 85 31                STA $31 ;CheckForMonster.mX
    6688/    3215 : A5 66                LDA $66 ;mY
    6689/    3217 : 85 32                STA $32 ;CheckForMonster.mY
    6690/    3219 : 20 57 16             JSR CheckForMonster
    6691/    321C : A5 06                LDA ret_val
    6692/    321E : 49 FF                EOR #$FF
    6693/    3220 : 85 67                STA $67 ;or_buff
    6694/    3222 : A0 09                LDY #$9
    6695/    3224 : B9 4E 02             LDA skill_list,Y
    6696/    3227 : 05 67                ORA $67 ;or_buff
    6697/    3229 : D0 03                BNE .._16632.skip
    6698/    322B : 4C 66 32             JMP .if158
    6700/    322E : AD 03 02             LDA hero_Y
    6701/    3231 : C9 02                CMP #$2
    6702/    3233 : 90 03                BCC .._16635.skip
    6703/    3235 : 4C 42 32             JMP .if159
    6705/    3238 : EE 03 02             INC hero_Y
    6706/    323B : A9 FF                LDA #$FF
    6707/    323D : 85 68                STA $68 ;moved
    6708/    323F : 4C 66 32             JMP .if160
    6709/    3242 :                      .if159:
    6710/    3242 : C9 02                CMP #$2
    6711/    3244 : F0 03                BEQ .._16648.skip
    6712/    3246 : 4C 66 32             JMP .if161
    6714/    3249 : AD 01 02             LDA display_Y
    6715/    324C : C9 10                CMP #$10
    6716/    324E : F0 03                BEQ .._16650.skip
    6717/    3250 : 4C 5F 32             JMP .if162
    6719/    3253 : A9 03                LDA #$3
    6720/    3255 : 8D 03 02             STA hero_Y
    6721/    3258 : A9 FF                LDA #$FF
    6722/    325A : 85 68                STA $68 ;moved
    6723/    325C : 4C 66 32             JMP .if163
    6724/    325F :                      .if162:
    6725/    325F : EE 01 02             INC display_Y
    6726/    3262 : A9 FF                LDA #$FF
    6727/    3264 : 85 68                STA $68 ;moved
    6728/    3266 :                      .if163:
    6729/    3266 :                      .if161:
    6730/    3266 :                      .if160:
    6731/    3266 :                      .if158:
    6732/    3266 : A5 68                LDA $68 ;moved
    6733/    3268 : D0 03                BNE .._16695.skip
    6734/    326A : 4C 70 32             JMP .if164
    6736/    326D : 20 70 2C             JSR CheckLavaExit
    6737/    3270 :                      .if164:
    6738/    3270 :                      .if157:
    6739/    3270 :                      .if156:
    6740/    3270 :                      .if155:
    6741/    3270 : 4C 7B 34             JMP .s28done
    6742/    3273 :                      .s28c2:
    6743/    3273 : C9 61                CMP #$61
    6744/    3275 : F0 03                BEQ .._16707.skip
    6745/    3277 : 4C 37 33             JMP .s28c3
    6747/    327A :                      .s28b3:
    6748/    327A : AD 21 02             LDA hero_facing
    6749/    327D : C9 04                CMP #$4
    6750/    327F : F0 03                BEQ .._16716.skip
    6751/    3281 : 4C 8D 32             JMP .if165
    6753/    3284 : A9 03                LDA #$3
    6754/    3286 : 8D 21 02             STA hero_facing
    6755/    3289 : A9 01                LDA #$1
    6756/    328B : 85 64                STA $64 ;redraw
    6757/    328D :                      .if165:
    6758/    328D : AD 22 02             LDA hero_target_direction
    6759/    3290 : C9 03                CMP #$3
    6760/    3292 : D0 03                BNE .._16747.skip
    6761/    3294 : 4C A3 32             JMP .if166
    6763/    3297 : A9 03                LDA #$3
    6764/    3299 : 8D 22 02             STA hero_target_direction
    6765/    329C : A9 01                LDA #$1
    6766/    329E : 85 64                STA $64 ;redraw
    6767/    32A0 : 4C 34 33             JMP .if167
    6768/    32A3 :                      .if166:
    6769/    32A3 : AD 00 02             LDA display_X
    6770/    32A6 : 18                   CLC
    6771/    32A7 : 6D 02 02             ADC hero_X
    6772/    32AA : C9 01                CMP #$1
    6773/    32AC : B0 03                BCS .._16779.skip
    6774/    32AE : 4C 34 33             JMP .if168
    6776/    32B1 : 3A                   DEC
    6777/    32B2 : 85 65                STA $65 ;mX
    6778/    32B4 : AD 01 02             LDA display_Y
    6779/    32B7 : 18                   CLC
    6780/    32B8 : 6D 03 02             ADC hero_Y
    6781/    32BB : 85 66                STA $66 ;mY
    6782/    32BD : A9 7E                LDA # (map_data) # $100
    6783/    32BF : 85 2D                STA $2D ;MapXY.map
    6784/    32C1 : A9 03                LDA # (map_data)/$100
    6785/    32C3 : 85 2E                STA $2E ;MapXY.map
    6786/    32C5 : A5 65                LDA $65 ;mX
    6787/    32C7 : 85 2F                STA $2F ;MapXY.mX
    6788/    32C9 : A5 66                LDA $66 ;mY
    6789/    32CB : 85 30                STA $30 ;MapXY.mY
    6790/    32CD : 20 61 15             JSR MapXY
    6791/    32D0 : A5 06                LDA ret_val
    6792/    32D2 : C9 04                CMP #$4
    6793/    32D4 : D0 03                BNE .._16841.skip
    6794/    32D6 : 4C 34 33             JMP .if169
    6796/    32D9 : A5 65                LDA $65 ;mX
    6797/    32DB : 85 31                STA $31 ;CheckForMonster.mX
    6798/    32DD : A5 66                LDA $66 ;mY
    6799/    32DF : 85 32                STA $32 ;CheckForMonster.mY
    6800/    32E1 : 20 57 16             JSR CheckForMonster
    6801/    32E4 : A5 06                LDA ret_val
    6802/    32E6 : 49 FF                EOR #$FF
    6803/    32E8 : 85 67                STA $67 ;or_buff
    6804/    32EA : A0 09                LDY #$9
    6805/    32EC : B9 4E 02             LDA skill_list,Y
    6806/    32EF : 05 67                ORA $67 ;or_buff
    6807/    32F1 : D0 03                BNE .._16890.skip
    6808/    32F3 : 4C 2A 33             JMP .if170
    6810/    32F6 : AD 02 02             LDA hero_X
    6811/    32F9 : C9 02                CMP #$2
    6812/    32FB : B0 03                BCS .._16893.skip
    6813/    32FD : 4C 0A 33             JMP .if171
    6815/    3300 : CE 02 02             DEC hero_X
    6816/    3303 : A9 FF                LDA #$FF
    6817/    3305 : 85 68                STA $68 ;moved
    6818/    3307 : 4C 2A 33             JMP .if172
    6819/    330A :                      .if171:
    6820/    330A : C9 01                CMP #$1
    6821/    330C : F0 03                BEQ .._16906.skip
    6822/    330E : 4C 2A 33             JMP .if173
    6824/    3311 : AD 00 02             LDA display_X
    6825/    3314 : F0 03                BEQ .._16909.skip
    6826/    3316 : 4C 23 33             JMP .if174
    6828/    3319 : 9C 02 02             STZ hero_X
    6829/    331C : A9 FF                LDA #$FF
    6830/    331E : 85 68                STA $68 ;moved
    6831/    3320 : 4C 2A 33             JMP .if175
    6832/    3323 :                      .if174:
    6833/    3323 : CE 00 02             DEC display_X
    6834/    3326 : A9 FF                LDA #$FF
    6835/    3328 : 85 68                STA $68 ;moved
    6836/    332A :                      .if175:
    6837/    332A :                      .if173:
    6838/    332A :                      .if172:
    6839/    332A :                      .if170:
    6840/    332A : A5 68                LDA $68 ;moved
    6841/    332C : D0 03                BNE .._16954.skip
    6842/    332E : 4C 34 33             JMP .if176
    6844/    3331 : 20 70 2C             JSR CheckLavaExit
    6845/    3334 :                      .if176:
    6846/    3334 :                      .if169:
    6847/    3334 :                      .if168:
    6848/    3334 :                      .if167:
    6849/    3334 : 4C 7B 34             JMP .s28done
    6850/    3337 :                      .s28c3:
    6851/    3337 : C9 64                CMP #$64
    6852/    3339 : F0 03                BEQ .._16966.skip
    6853/    333B : 4C FE 33             JMP .s28c4
    6855/    333E :                      .s28b4:
    6856/    333E : AD 21 02             LDA hero_facing
    6857/    3341 : C9 03                CMP #$3
    6858/    3343 : F0 03                BEQ .._16975.skip
    6859/    3345 : 4C 51 33             JMP .if177
    6861/    3348 : A9 04                LDA #$4
    6862/    334A : 8D 21 02             STA hero_facing
    6863/    334D : A9 01                LDA #$1
    6864/    334F : 85 64                STA $64 ;redraw
    6865/    3351 :                      .if177:
    6866/    3351 : AD 22 02             LDA hero_target_direction
    6867/    3354 : C9 04                CMP #$4
    6868/    3356 : D0 03                BNE .._17006.skip
    6869/    3358 : 4C 67 33             JMP .if178
    6871/    335B : A9 04                LDA #$4
    6872/    335D : 8D 22 02             STA hero_target_direction
    6873/    3360 : A9 01                LDA #$1
    6874/    3362 : 85 64                STA $64 ;redraw
    6875/    3364 : 4C FB 33             JMP .if179
    6876/    3367 :                      .if178:
    6877/    3367 : AD 00 02             LDA display_X
    6878/    336A : 38                   SEC
    6879/    336B : 6D 02 02             ADC hero_X
    6880/    336E : C9 28                CMP #$28
    6881/    3370 : 90 03                BCC .._17038.skip
    6882/    3372 : 4C FB 33             JMP .if180
    6884/    3375 : 85 65                STA $65 ;mX
    6885/    3377 : AD 01 02             LDA display_Y
    6886/    337A : 18                   CLC
    6887/    337B : 6D 03 02             ADC hero_Y
    6888/    337E : 85 66                STA $66 ;mY
    6889/    3380 : A9 7E                LDA # (map_data) # $100
    6890/    3382 : 85 2D                STA $2D ;MapXY.map
    6891/    3384 : A9 03                LDA # (map_data)/$100
    6892/    3386 : 85 2E                STA $2E ;MapXY.map
    6893/    3388 : A5 65                LDA $65 ;mX
    6894/    338A : 85 2F                STA $2F ;MapXY.mX
    6895/    338C : A5 66                LDA $66 ;mY
    6896/    338E : 85 30                STA $30 ;MapXY.mY
    6897/    3390 : 20 61 15             JSR MapXY
    6898/    3393 : A5 06                LDA ret_val
    6899/    3395 : C9 04                CMP #$4
    6900/    3397 : D0 03                BNE .._17100.skip
    6901/    3399 : 4C FB 33             JMP .if181
    6903/    339C : A5 65                LDA $65 ;mX
    6904/    339E : 85 31                STA $31 ;CheckForMonster.mX
    6905/    33A0 : A5 66                LDA $66 ;mY
    6906/    33A2 : 85 32                STA $32 ;CheckForMonster.mY
    6907/    33A4 : 20 57 16             JSR CheckForMonster
    6908/    33A7 : A5 06                LDA ret_val
    6909/    33A9 : 49 FF                EOR #$FF
    6910/    33AB : 85 67                STA $67 ;or_buff
    6911/    33AD : A0 09                LDY #$9
    6912/    33AF : B9 4E 02             LDA skill_list,Y
    6913/    33B2 : 05 67                ORA $67 ;or_buff
    6914/    33B4 : D0 03                BNE .._17149.skip
    6915/    33B6 : 4C F1 33             JMP .if182
    6917/    33B9 : AD 02 02             LDA hero_X
    6918/    33BC : C9 03                CMP #$3
    6919/    33BE : 90 03                BCC .._17152.skip
    6920/    33C0 : 4C CD 33             JMP .if183
    6922/    33C3 : EE 02 02             INC hero_X
    6923/    33C6 : A9 FF                LDA #$FF
    6924/    33C8 : 85 68                STA $68 ;moved
    6925/    33CA : 4C F1 33             JMP .if184
    6926/    33CD :                      .if183:
    6927/    33CD : C9 03                CMP #$3
    6928/    33CF : F0 03                BEQ .._17165.skip
    6929/    33D1 : 4C F1 33             JMP .if185
    6931/    33D4 : AD 00 02             LDA display_X
    6932/    33D7 : C9 23                CMP #$23
    6933/    33D9 : F0 03                BEQ .._17167.skip
    6934/    33DB : 4C EA 33             JMP .if186
    6936/    33DE : A9 04                LDA #$4
    6937/    33E0 : 8D 02 02             STA hero_X
    6938/    33E3 : A9 FF                LDA #$FF
    6939/    33E5 : 85 68                STA $68 ;moved
    6940/    33E7 : 4C F1 33             JMP .if187
    6941/    33EA :                      .if186:
    6942/    33EA : EE 00 02             INC display_X
    6943/    33ED : A9 FF                LDA #$FF
    6944/    33EF : 85 68                STA $68 ;moved
    6945/    33F1 :                      .if187:
    6946/    33F1 :                      .if185:
    6947/    33F1 :                      .if184:
    6948/    33F1 :                      .if182:
    6949/    33F1 : A5 68                LDA $68 ;moved
    6950/    33F3 : D0 03                BNE .._17212.skip
    6951/    33F5 : 4C FB 33             JMP .if188
    6953/    33F8 : 20 70 2C             JSR CheckLavaExit
    6954/    33FB :                      .if188:
    6955/    33FB :                      .if181:
    6956/    33FB :                      .if180:
    6957/    33FB :                      .if179:
    6958/    33FB : 4C 7B 34             JMP .s28done
    6959/    33FE :                      .s28c4:
    6960/    33FE : C9 20                CMP #$20
    6961/    3400 : F0 03                BEQ .._17224.skip
    6962/    3402 : 4C 7B 34             JMP .s28c5
    6964/    3405 :                      .s28b5:
    6965/    3405 : AD 23 02             LDA hero_target_type
    6966/    3408 : 80 03                BRA .s29c0
    6967/    340A : 4C 7B 34             JMP .s29done
    6968/    340D :                      .s29c0:
    6969/    340D : C9 04                CMP #$4
    6970/    340F : F0 03                BEQ .._17234.skip
    6971/    3411 : 4C 32 34             JMP .s29c1
    6973/    3414 :                      .s29b1:
    6974/    3414 : AD 0F 02             LDA hero_Mine_Speed
    6975/    3417 : 8D 29 02             STA hero_activity_ticks_max
    6976/    341A : AD 10 02             LDA hero_Mine_Speed+$1
    6977/    341D : 8D 2A 02             STA hero_activity_ticks_max+$1
    6978/    3420 : 9C 27 02             STZ hero_activity_ticks
    6979/    3423 : 9C 28 02             STZ hero_activity_ticks+$1
    6980/    3426 : A9 FF                LDA #$FF
    6981/    3428 : 8D 26 02             STA hero_activity
    6982/    342B : A9 FF                LDA #$FF
    6983/    342D : 85 64                STA $64 ;redraw
    6984/    342F : 4C 7B 34             JMP .s29done
    6985/    3432 :                      .s29c1:
    6986/    3432 : C9 01                CMP #$1
    6987/    3434 : F0 03                BEQ .._17304.skip
    6988/    3436 : 4C 57 34             JMP .s29c2
    6990/    3439 :                      .s29b2:
    6991/    3439 : AD 10 02             LDA hero_Drill_Speed
    6992/    343C : 8D 29 02             STA hero_activity_ticks_max
    6993/    343F : AD 11 02             LDA hero_Drill_Speed+$1
    6994/    3442 : 8D 2A 02             STA hero_activity_ticks_max+$1
    6995/    3445 : 9C 27 02             STZ hero_activity_ticks
    6996/    3448 : 9C 28 02             STZ hero_activity_ticks+$1
    6997/    344B : A9 FF                LDA #$FF
    6998/    344D : 8D 26 02             STA hero_activity
    6999/    3450 : A9 FF                LDA #$FF
    7000/    3452 : 85 64                STA $64 ;redraw
    7001/    3454 : 4C 7B 34             JMP .s29done
    7002/    3457 :                      .s29c2:
    7003/    3457 : C9 03                CMP #$3
    7004/    3459 : F0 03                BEQ .._17374.skip
    7005/    345B : 4C 7B 34             JMP .s29c3
    7007/    345E :                      .s29b3:
    7008/    345E : A9 1E                LDA #$1E
    7009/    3460 : 8D 29 02             STA hero_activity_ticks_max
    7010/    3463 : A9 00                LDA #$0
    7011/    3465 : 8D 2A 02             STA hero_activity_ticks_max+$1
    7012/    3468 : A9 1E                LDA #$1E
    7013/    346A : 8D 27 02             STA hero_activity_ticks
    7014/    346D : A9 00                LDA #$0
    7015/    346F : 8D 28 02             STA hero_activity_ticks+$1
    7016/    3472 : A9 FF                LDA #$FF
    7017/    3474 : 8D 26 02             STA hero_activity
    7018/    3477 : A9 FF                LDA #$FF
    7019/    3479 : 85 64                STA $64 ;redraw
    7020/    347B :                      .s29c3:
    7021/    347B :                      .s29done:
    7022/    347B :                      .s28c5:
    7023/    347B :                      .s28done:
    7024/    347B :                      .if142:
    7025/    347B : A5 64                LDA $64 ;redraw
    7026/    347D : 05 68                ORA $68 ;moved
    7027/    347F : D0 03                BNE .._17451.skip
    7028/    3481 : 4C 8D 34             JMP .if189
    7030/    3484 : 20 6D 18             JSR UpdateTarget
    7031/    3487 : 20 25 1F             JSR DrawFrame
    7032/    348A : 20 7D 1B             JSR DrawLegend
    7033/    348D :                      .if189:
    7034/    348D :                      .if141:
    7035/    348D : 60                   RTS
    7037/    348E :                     KeyHandlerMenu:
    7038/    348E : A9 00                LDA #$0
    7039/    3490 : 85 25                STA $25 ;bought
    7040/    3492 : A9 00                LDA #$0
    7041/    3494 : 85 26                STA $26 ;redraw
    7042/    3496 : A9 00                LDA #$0
    7043/    3498 : 85 27                STA $27 ;redraw_skills
    7044/    349A : A9 00                LDA #$0
    7045/    349C : 85 28                STA $28 ;redraw_resources
    7046/    349E : AD E4 FF             LDA $FFE4
    7047/    34A1 : 85 21                STA $21 ;key
    7048/    34A3 : 80 03                BRA .s30c0
    7049/    34A5 : 4C FC 34             JMP .s30done
    7050/    34A8 :                      .s30c0:
    7051/    34A8 : C9 6D                CMP #$6D
    7052/    34AA : F0 03                BEQ .._17546.skip
    7053/    34AC : 4C C0 34             JMP .s30c1
    7055/    34AF :                      .s30b1:
    7056/    34AF : A9 00                LDA #$0
    7057/    34B1 : 8D 65 02             STA output_mode
    7058/    34B4 : 20 25 1F             JSR DrawFrame
    7059/    34B7 : 20 7D 1B             JSR DrawLegend
    7060/    34BA : 4C 9C 39             JMP .khm.done
    7061/    34BD : 4C FC 34             JMP .s30done
    7062/    34C0 :                      .s30c1:
    7063/    34C0 : C9 63                CMP #$63
    7064/    34C2 : F0 03                BEQ .._17577.skip
    7065/    34C4 : 4C D5 34             JMP .s30c2
    7067/    34C7 :                      .s30b2:
    7068/    34C7 : A9 01                LDA #$1
    7069/    34C9 : 8D 65 02             STA output_mode
    7070/    34CC : 20 55 2A             JSR DrawMenu
    7071/    34CF : 4C 9C 39             JMP .khm.done
    7072/    34D2 : 4C FC 34             JMP .s30done
    7073/    34D5 :                      .s30c2:
    7074/    34D5 : C9 6B                CMP #$6B
    7075/    34D7 : F0 03                BEQ .._17606.skip
    7076/    34D9 : 4C EA 34             JMP .s30c3
    7078/    34DC :                      .s30b3:
    7079/    34DC : A9 02                LDA #$2
    7080/    34DE : 8D 65 02             STA output_mode
    7081/    34E1 : 20 55 2A             JSR DrawMenu
    7082/    34E4 : 4C 9C 39             JMP .khm.done
    7083/    34E7 : 4C FC 34             JMP .s30done
    7084/    34EA :                      .s30c3:
    7085/    34EA : C9 72                CMP #$72
    7086/    34EC : F0 03                BEQ .._17635.skip
    7087/    34EE : 4C FC 34             JMP .s30c4
    7089/    34F1 :                      .s30b4:
    7090/    34F1 : A9 03                LDA #$3
    7091/    34F3 : 8D 65 02             STA output_mode
    7092/    34F6 : 20 55 2A             JSR DrawMenu
    7093/    34F9 : 4C 9C 39             JMP .khm.done
    7094/    34FC :                      .s30c4:
    7095/    34FC :                      .s30done:
    7096/    34FC : AD 65 02             LDA output_mode
    7097/    34FF : 80 03                BRA .s31c0
    7098/    3501 : 4C 9C 39             JMP .s31done
    7099/    3504 :                      .s31c0:
    7100/    3504 : C9 01                CMP #$1
    7101/    3506 : F0 03                BEQ .._17670.skip
    7102/    3508 : 4C F5 35             JMP .s31c1
    7104/    350B :                      .s31b1:
    7105/    350B : A5 21                LDA $21 ;key
    7106/    350D : 80 03                BRA .s32c0
    7107/    350F : 4C F2 35             JMP .s32done
    7108/    3512 :                      .s32c0:
    7109/    3512 : C9 77                CMP #$77
    7110/    3514 : F0 03                BEQ .._17680.skip
    7111/    3516 : 4C 2C 35             JMP .s32c1
    7113/    3519 :                      .s32b1:
    7114/    3519 : AD 5E 02             LDA menu_char_y
    7115/    351C : C9 01                CMP #$1
    7116/    351E : B0 03                BCS .._17690.skip
    7117/    3520 : 4C 29 35             JMP .if190
    7119/    3523 : CE 5E 02             DEC menu_char_y
    7120/    3526 : 20 FA 24             JSR DrawMenuInventory
    7121/    3529 :                      .if190:
    7122/    3529 : 4C F2 35             JMP .s32done
    7123/    352C :                      .s32c1:
    7124/    352C : C9 73                CMP #$73
    7125/    352E : F0 03                BEQ .._17696.skip
    7126/    3530 : 4C 46 35             JMP .s32c2
    7128/    3533 :                      .s32b2:
    7129/    3533 : AD 5E 02             LDA menu_char_y
    7130/    3536 : C9 05                CMP #$5
    7131/    3538 : 90 03                BCC .._17706.skip
    7132/    353A : 4C 43 35             JMP .if191
    7134/    353D : EE 5E 02             INC menu_char_y
    7135/    3540 : 20 FA 24             JSR DrawMenuInventory
    7136/    3543 :                      .if191:
    7137/    3543 : 4C F2 35             JMP .s32done
    7138/    3546 :                      .s32c2:
    7139/    3546 : C9 64                CMP #$64
    7140/    3548 : F0 03                BEQ .._17712.skip
    7141/    354A : 4C 76 35             JMP .s32c3
    7143/    354D :                      .s32b3:
    7144/    354D : AD 5D 02             LDA menu_char_x
    7145/    3550 : C9 04                CMP #$4
    7146/    3552 : 90 03                BCC .._17722.skip
    7147/    3554 : 4C 60 35             JMP .if192
    7149/    3557 : EE 5D 02             INC menu_char_x
    7150/    355A : 20 FA 24             JSR DrawMenuInventory
    7151/    355D : 4C 73 35             JMP .if193
    7152/    3560 :                      .if192:
    7153/    3560 : AD 5E 02             LDA menu_char_y
    7154/    3563 : C9 05                CMP #$5
    7155/    3565 : 90 03                BCC .._17729.skip
    7156/    3567 : 4C 73 35             JMP .if194
    7158/    356A : 9C 5D 02             STZ menu_char_x
    7159/    356D : EE 5E 02             INC menu_char_y
    7160/    3570 : 20 FA 24             JSR DrawMenuInventory
    7161/    3573 :                      .if194:
    7162/    3573 :                      .if193:
    7163/    3573 : 4C F2 35             JMP .s32done
    7164/    3576 :                      .s32c3:
    7165/    3576 : C9 61                CMP #$61
    7166/    3578 : F0 03                BEQ .._17737.skip
    7167/    357A : 4C A8 35             JMP .s32c4
    7169/    357D :                      .s32b4:
    7170/    357D : AD 5D 02             LDA menu_char_x
    7171/    3580 : C9 01                CMP #$1
    7172/    3582 : B0 03                BCS .._17747.skip
    7173/    3584 : 4C 90 35             JMP .if195
    7175/    3587 : CE 5D 02             DEC menu_char_x
    7176/    358A : 20 FA 24             JSR DrawMenuInventory
    7177/    358D : 4C A5 35             JMP .if196
    7178/    3590 :                      .if195:
    7179/    3590 : AD 5E 02             LDA menu_char_y
    7180/    3593 : C9 01                CMP #$1
    7181/    3595 : B0 03                BCS .._17754.skip
    7182/    3597 : 4C A5 35             JMP .if197
    7184/    359A : A9 04                LDA #$4
    7185/    359C : 8D 5D 02             STA menu_char_x
    7186/    359F : CE 5E 02             DEC menu_char_y
    7187/    35A2 : 20 FA 24             JSR DrawMenuInventory
    7188/    35A5 :                      .if197:
    7189/    35A5 :                      .if196:
    7190/    35A5 : 4C F2 35             JMP .s32done
    7191/    35A8 :                      .s32c4:
    7192/    35A8 : C9 0D                CMP #$D
    7193/    35AA : F0 03                BEQ .._17780.skip
    7194/    35AC : 4C F2 35             JMP .s32c5
    7196/    35AF :                      .s32b5:
    7197/    35AF : AD 5E 02             LDA menu_char_y
    7198/    35B2 : 0A                   ASL
    7199/    35B3 : 0A                   ASL
    7200/    35B4 : 6D 5E 02             ADC menu_char_y
    7201/    35B7 : 6D 5D 02             ADC menu_char_x
    7202/    35BA : A8                   TAY
    7203/    35BB : B9 30 02             LDA hero_inventory,Y
    7204/    35BE : C9 20                CMP #$20
    7205/    35C0 : D0 03                BNE .._17789.skip
    7206/    35C2 : 4C F2 35             JMP .if198
    7208/    35C5 : 85 22                STA $22 ;temp_item
    7209/    35C7 : 84 23                STY $23 ;temp_index
    7210/    35C9 : 0A                   ASL
    7211/    35CA : A8                   TAY
    7212/    35CB : B9 76 C5             LDA item_stats,Y
    7213/    35CE : 85 2B                STA $2B ;item_ptr
    7214/    35D0 : B9 77 C5             LDA item_stats+$1,Y
    7215/    35D3 : 85 2C                STA $2C ;item_ptr
    7216/    35D5 : A0 00                LDY #$0
    7217/    35D7 : B1 2B                LDA ($2B),Y ;item_ptr
    7218/    35D9 : A8                   TAY
    7219/    35DA : B9 2B 02             LDA hero_equipped,Y
    7220/    35DD : 5A                   PHY
    7221/    35DE : A4 23                LDY $23 ;temp_index
    7222/    35E0 : 99 30 02             STA hero_inventory,Y
    7223/    35E3 : A5 22                LDA $22 ;temp_item
    7224/    35E5 : 7A                   PLY
    7225/    35E6 : 99 2B 02             STA hero_equipped,Y
    7226/    35E9 : 20 8B 11             JSR ColorHero
    7227/    35EC : 20 82 12             JSR CalcStats
    7228/    35EF : 20 55 2A             JSR DrawMenu
    7229/    35F2 :                      .if198:
    7230/    35F2 :                      .s32c5:
    7231/    35F2 :                      .s32done:
    7232/    35F2 : 4C 9C 39             JMP .s31done
    7233/    35F5 :                      .s31c1:
    7234/    35F5 : C9 02                CMP #$2
    7235/    35F7 : F0 03                BEQ .._17804.skip
    7236/    35F9 : 4C A7 36             JMP .s31c2
    7238/    35FC :                      .s31b2:
    7239/    35FC : A5 21                LDA $21 ;key
    7240/    35FE : 80 03                BRA .s33c0
    7241/    3600 : 4C A4 36             JMP .s33done
    7242/    3603 :                      .s33c0:
    7243/    3603 : C9 77                CMP #$77
    7244/    3605 : F0 03                BEQ .._17814.skip
    7245/    3607 : 4C 1B 36             JMP .s33c1
    7247/    360A :                      .s33b1:
    7248/    360A : AD 60 02             LDA menu_skills_y
    7249/    360D : D0 03                BNE .._17824.skip
    7250/    360F : 4C 18 36             JMP .if199
    7252/    3612 : CE 60 02             DEC menu_skills_y
    7253/    3615 : 20 6D 26             JSR DrawSkills
    7254/    3618 :                      .if199:
    7255/    3618 : 4C A4 36             JMP .s33done
    7256/    361B :                      .s33c1:
    7257/    361B : C9 73                CMP #$73
    7258/    361D : F0 03                BEQ .._17830.skip
    7259/    361F : 4C 35 36             JMP .s33c2
    7261/    3622 :                      .s33b2:
    7262/    3622 : AD 60 02             LDA menu_skills_y
    7263/    3625 : C9 02                CMP #$2
    7264/    3627 : 90 03                BCC .._17840.skip
    7265/    3629 : 4C 32 36             JMP .if200
    7267/    362C : EE 60 02             INC menu_skills_y
    7268/    362F : 20 6D 26             JSR DrawSkills
    7269/    3632 :                      .if200:
    7270/    3632 : 4C A4 36             JMP .s33done
    7271/    3635 :                      .s33c2:
    7272/    3635 : C9 61                CMP #$61
    7273/    3637 : F0 03                BEQ .._17846.skip
    7274/    3639 : 4C 4D 36             JMP .s33c3
    7276/    363C :                      .s33b3:
    7277/    363C : AD 5F 02             LDA menu_skills_x
    7278/    363F : D0 03                BNE .._17856.skip
    7279/    3641 : 4C 4A 36             JMP .if201
    7281/    3644 : CE 5F 02             DEC menu_skills_x
    7282/    3647 : 20 6D 26             JSR DrawSkills
    7283/    364A :                      .if201:
    7284/    364A : 4C A4 36             JMP .s33done
    7285/    364D :                      .s33c3:
    7286/    364D : C9 64                CMP #$64
    7287/    364F : F0 03                BEQ .._17862.skip
    7288/    3651 : 4C 67 36             JMP .s33c4
    7290/    3654 :                      .s33b4:
    7291/    3654 : AD 5F 02             LDA menu_skills_x
    7292/    3657 : C9 04                CMP #$4
    7293/    3659 : 90 03                BCC .._17872.skip
    7294/    365B : 4C 64 36             JMP .if202
    7296/    365E : EE 5F 02             INC menu_skills_x
    7297/    3661 : 20 6D 26             JSR DrawSkills
    7298/    3664 :                      .if202:
    7299/    3664 : 4C A4 36             JMP .s33done
    7300/    3667 :                      .s33c4:
    7301/    3667 : C9 0D                CMP #$D
    7302/    3669 : F0 03                BEQ .._17878.skip
    7303/    366B : 4C A4 36             JMP .s33c5
    7305/    366E :                      .s33b5:
    7306/    366E : AD 20 02             LDA hero_Points
    7307/    3671 : D0 03                BNE .._17888.skip
    7308/    3673 : 4C A4 36             JMP .if203
    7310/    3676 : AD 60 02             LDA menu_skills_y
    7311/    3679 : 0A                   ASL
    7312/    367A : 0A                   ASL
    7313/    367B : 18                   CLC
    7314/    367C : 6D 60 02             ADC menu_skills_y
    7315/    367F : 6D 5F 02             ADC menu_skills_x
    7316/    3682 : A8                   TAY
    7317/    3683 : B9 4E 02             LDA skill_list,Y
    7318/    3686 : F0 03                BEQ .._17891.skip
    7319/    3688 : 4C A4 36             JMP .if204
    7321/    368B : AD 5F 02             LDA menu_skills_x
    7322/    368E : F0 05                BEQ .khm.skills
    7323/    3690 : B9 4D 02             LDA skill_list-$1,Y
    7324/    3693 : F0 0F                BEQ .khm.skills_done
    7326/    3695 : CE 20 02             DEC hero_Points
    7327/    3698 : A9 FF                LDA #$FF
    7328/    369A : 99 4E 02             STA skill_list,Y
    7329/    369D : 20 82 12             JSR CalcStats
    7330/    36A0 : A9 FF                LDA #$FF
    7331/    36A2 : 85 26                STA $26 ;redraw
    7333/    36A4 :                      .if204:
    7334/    36A4 :                      .if203:
    7335/    36A4 :                      .s33c5:
    7336/    36A4 :                      .s33done:
    7337/    36A4 : 4C 9C 39             JMP .s31done
    7338/    36A7 :                      .s31c2:
    7339/    36A7 : C9 03                CMP #$3
    7340/    36A9 : F0 03                BEQ .._17915.skip
    7341/    36AB : 4C 9C 39             JMP .s31c3
    7343/    36AE :                      .s31b3:
    7344/    36AE : A5 21                LDA $21 ;key
    7345/    36B0 : 80 03                BRA .s34c0
    7346/    36B2 : 4C 9C 39             JMP .s34done
    7347/    36B5 :                      .s34c0:
    7348/    36B5 : C9 77                CMP #$77
    7349/    36B7 : F0 03                BEQ .._17925.skip
    7350/    36B9 : 4C CD 36             JMP .s34c1
    7352/    36BC :                      .s34b1:
    7353/    36BC : AD 62 02             LDA menu_res_y
    7354/    36BF : D0 03                BNE .._17935.skip
    7355/    36C1 : 4C CA 36             JMP .if205
    7357/    36C4 : CE 62 02             DEC menu_res_y
    7358/    36C7 : 20 3F 28             JSR DrawResources
    7359/    36CA :                      .if205:
    7360/    36CA : 4C 9C 39             JMP .s34done
    7361/    36CD :                      .s34c1:
    7362/    36CD : C9 73                CMP #$73
    7363/    36CF : F0 03                BEQ .._17941.skip
    7364/    36D1 : 4C E7 36             JMP .s34c2
    7366/    36D4 :                      .s34b2:
    7367/    36D4 : AD 62 02             LDA menu_res_y
    7368/    36D7 : C9 04                CMP #$4
    7369/    36D9 : 90 03                BCC .._17951.skip
    7370/    36DB : 4C E4 36             JMP .if206
    7372/    36DE : EE 62 02             INC menu_res_y
    7373/    36E1 : 20 3F 28             JSR DrawResources
    7374/    36E4 :                      .if206:
    7375/    36E4 : 4C 9C 39             JMP .s34done
    7376/    36E7 :                      .s34c2:
    7377/    36E7 : C9 61                CMP #$61
    7378/    36E9 : F0 03                BEQ .._17957.skip
    7379/    36EB : 4C FF 36             JMP .s34c3
    7381/    36EE :                      .s34b3:
    7382/    36EE : AD 61 02             LDA menu_res_x
    7383/    36F1 : D0 03                BNE .._17967.skip
    7384/    36F3 : 4C FC 36             JMP .if207
    7386/    36F6 : CE 61 02             DEC menu_res_x
    7387/    36F9 : 20 3F 28             JSR DrawResources
    7388/    36FC :                      .if207:
    7389/    36FC : 4C 9C 39             JMP .s34done
    7390/    36FF :                      .s34c3:
    7391/    36FF : C9 64                CMP #$64
    7392/    3701 : F0 03                BEQ .._17973.skip
    7393/    3703 : 4C 19 37             JMP .s34c4
    7395/    3706 :                      .s34b4:
    7396/    3706 : AD 61 02             LDA menu_res_x
    7397/    3709 : C9 05                CMP #$5
    7398/    370B : 90 03                BCC .._17983.skip
    7399/    370D : 4C 16 37             JMP .if208
    7401/    3710 : EE 61 02             INC menu_res_x
    7402/    3713 : 20 3F 28             JSR DrawResources
    7403/    3716 :                      .if208:
    7404/    3716 : 4C 9C 39             JMP .s34done
    7405/    3719 :                      .s34c4:
    7406/    3719 : C9 0D                CMP #$D
    7407/    371B : F0 03                BEQ .._17989.skip
    7408/    371D : 4C 9C 39             JMP .s34c5
    7410/    3720 :                      .s34b5:
    7411/    3720 : AD 63 02             LDA menu_res_target
    7412/    3723 : C9 20                CMP #$20
    7413/    3725 : D0 03                BNE .._17998.skip
    7414/    3727 : 4C 8C 38             JMP .if209
    7416/    372A : 64 24                STZ $24 ;discount
    7417/    372C : AD 61 02             LDA menu_res_x
    7418/    372F : C9 04                CMP #$4
    7419/    3731 : 90 03                BCC .._18014.skip
    7420/    3733 : 4C 42 37             JMP .if210
    7422/    3736 : AD 5A 02             LDA skill_list+$C
    7423/    3739 : D0 03                BNE .._18017.skip
    7424/    373B : 4C 42 37             JMP .if211
    7426/    373E : A9 01                LDA #$1
    7427/    3740 : 85 24                STA $24 ;discount
    7428/    3742 :                      .if211:
    7429/    3742 :                      .if210:
    7430/    3742 : AD 63 02             LDA menu_res_target
    7431/    3745 : 0A                   ASL
    7432/    3746 : A8                   TAY
    7433/    3747 : B9 76 C5             LDA item_stats,Y
    7434/    374A : 85 2B                STA $2B ;item_ptr
    7435/    374C : B9 77 C5             LDA item_stats+$1,Y
    7436/    374F : 85 2C                STA $2C ;item_ptr
    7437/    3751 : AD 5C 02             LDA skill_list+$E
    7438/    3754 : D0 03                BNE .._18037.skip
    7439/    3756 : 4C DA 37             JMP .if212
    7441/    3759 : 64 2A                STZ $2A ;res_total
    7442/    375B : AD 1D 02             LDA hero_Red
    7443/    375E : 18                   CLC
    7444/    375F : 6D 1E 02             ADC hero_Blue
    7445/    3762 : 90 02                BCC .._18038.skip
    7446/    3764 : E6 2A                INC $2A ;res_total
    7448/    3766 : 18                   CLC
    7449/    3767 : 6D 1F 02             ADC hero_Yellow
    7450/    376A : 90 02                BCC .._18051.skip
    7451/    376C : E6 2A                INC $2A ;res_total
    7453/    376E : 85 29                STA $29 ;res_total
    7454/    3770 : A5 2A                LDA $2A ;res_total
    7455/    3772 : D0 12                BNE .khm.res_enough
    7456/    3774 : A0 01                LDY #$1
    7457/    3776 : B1 2B                LDA ($2B),Y ;item_ptr
    7458/    3778 : 38                   SEC
    7459/    3779 : E5 24                SBC $24 ;discount
    7460/    377B : 85 23                STA $23 ;temp_index
    7461/    377D : A5 29                LDA $29 ;res_total
    7462/    377F : C5 23                CMP $23 ;temp_index
    7463/    3781 : B0 03                BCS .._18066.skip
    7464/    3783 : 4C D7 37             JMP .if213
    7467/    3786 : AD 58 02             LDA skill_list+$A
    7468/    3789 : F0 0B                BEQ .khm.res_csmith
    7469/    378B : A9 05                LDA #$5
    7470/    378D : 85 2F                STA $2F ;rand8.max
    7471/    378F : 20 3B 12             JSR rand8
    7472/    3792 : A5 06                LDA ret_val
    7473/    3794 : F0 39                BEQ .khm.res_csmith_done
    7475/    3796 : A0 01                LDY #$1
    7476/    3798 : B1 2B                LDA ($2B),Y ;item_ptr
    7477/    379A : 38                   SEC
    7478/    379B : E5 24                SBC $24 ;discount
    7479/    379D : 85 29                STA $29 ;res_total
    7481/    379F : A5 29                LDA $29 ;res_total
    7482/    37A1 : F0 0C                BEQ .khm.res_loop_blue
    7483/    37A3 : AD 1D 02             LDA hero_Red
    7484/    37A6 : F0 07                BEQ .khm.res_loop_blue
    7485/    37A8 : C6 29                DEC $29 ;res_total
    7486/    37AA : CE 1D 02             DEC hero_Red
    7487/    37AD : 80 F0                BRA .khm.res_loop_red
    7489/    37AF : A5 29                LDA $29 ;res_total
    7490/    37B1 : F0 0C                BEQ .khm.res_loop_yellow
    7491/    37B3 : AD 1E 02             LDA hero_Blue
    7492/    37B6 : F0 07                BEQ .khm.res_loop_yellow
    7493/    37B8 : C6 29                DEC $29 ;res_total
    7494/    37BA : CE 1E 02             DEC hero_Blue
    7495/    37BD : 80 F0                BRA .khm.res_loop_blue
    7497/    37BF : A5 29                LDA $29 ;res_total
    7498/    37C1 : F0 0C                BEQ .khm.res_csmith_done
    7499/    37C3 : AD 1F 02             LDA hero_Yellow
    7500/    37C6 : F0 07                BEQ .khm.res_csmith_done
    7501/    37C8 : C6 29                DEC $29 ;res_total
    7502/    37CA : CE 1F 02             DEC hero_Yellow
    7503/    37CD : 80 F0                BRA .khm.res_loop_yellow
    7505/    37CF : A9 FF                LDA #$FF
    7506/    37D1 : 85 25                STA $25 ;bought
    7507/    37D3 : A9 FF                LDA #$FF
    7508/    37D5 : 85 26                STA $26 ;redraw
    7509/    37D7 :                      .if213:
    7510/    37D7 : 4C 8C 38             JMP .if214
    7511/    37DA :                      .if212:
    7512/    37DA : A0 02                LDY #$2
    7513/    37DC : B1 2B                LDA ($2B),Y ;item_ptr
    7514/    37DE : 48                   PHA
    7515/    37DF : A0 01                LDY #$1
    7516/    37E1 : B1 2B                LDA ($2B),Y ;item_ptr
    7517/    37E3 : 18                   CLC
    7518/    37E4 : E5 24                SBC $24 ;discount
    7519/    37E6 : A8                   TAY
    7520/    37E7 : 68                   PLA
    7521/    37E8 : 80 03                BRA .s35c0
    7522/    37EA : 4C 8C 38             JMP .s35done
    7523/    37ED :                      .s35c0:
    7524/    37ED : C9 00                CMP #$0
    7525/    37EF : F0 03                BEQ .._18125.skip
    7526/    37F1 : 4C 23 38             JMP .s35c1
    7528/    37F4 :                      .s35b1:
    7529/    37F4 : 98                   TYA
    7530/    37F5 : CD 1D 02             CMP hero_Red
    7531/    37F8 : 90 03                BCC .._18135.skip
    7532/    37FA : 4C 20 38             JMP .if215
    7534/    37FD : 85 23                STA $23 ;temp_index
    7535/    37FF : AD 58 02             LDA skill_list+$A
    7536/    3802 : F0 0B                BEQ .khm.res_red
    7537/    3804 : A9 05                LDA #$5
    7538/    3806 : 85 2F                STA $2F ;rand8.max
    7539/    3808 : 20 3B 12             JSR rand8
    7540/    380B : A5 06                LDA ret_val
    7541/    380D : F0 09                BEQ .khm.res_red_done
    7543/    380F : AD 1D 02             LDA hero_Red
    7544/    3812 : 18                   CLC
    7545/    3813 : E5 23                SBC $23 ;temp_index
    7546/    3815 : 8D 1D 02             STA hero_Red
    7548/    3818 : A9 FF                LDA #$FF
    7549/    381A : 85 25                STA $25 ;bought
    7550/    381C : A9 FF                LDA #$FF
    7551/    381E : 85 26                STA $26 ;redraw
    7552/    3820 :                      .if215:
    7553/    3820 : 4C 8C 38             JMP .s35done
    7554/    3823 :                      .s35c1:
    7555/    3823 : C9 01                CMP #$1
    7556/    3825 : F0 03                BEQ .._18191.skip
    7557/    3827 : 4C 59 38             JMP .s35c2
    7559/    382A :                      .s35b2:
    7560/    382A : 98                   TYA
    7561/    382B : CD 1E 02             CMP hero_Blue
    7562/    382E : 90 03                BCC .._18201.skip
    7563/    3830 : 4C 56 38             JMP .if216
    7565/    3833 : 85 23                STA $23 ;temp_index
    7566/    3835 : AD 58 02             LDA skill_list+$A
    7567/    3838 : F0 0B                BEQ .khm.res_blue
    7568/    383A : A9 05                LDA #$5
    7569/    383C : 85 2F                STA $2F ;rand8.max
    7570/    383E : 20 3B 12             JSR rand8
    7571/    3841 : A5 06                LDA ret_val
    7572/    3843 : F0 09                BEQ .khm.res_blue_done
    7574/    3845 : AD 1E 02             LDA hero_Blue
    7575/    3848 : 18                   CLC
    7576/    3849 : E5 23                SBC $23 ;temp_index
    7577/    384B : 8D 1E 02             STA hero_Blue
    7579/    384E : A9 FF                LDA #$FF
    7580/    3850 : 85 25                STA $25 ;bought
    7581/    3852 : A9 FF                LDA #$FF
    7582/    3854 : 85 26                STA $26 ;redraw
    7583/    3856 :                      .if216:
    7584/    3856 : 4C 8C 38             JMP .s35done
    7585/    3859 :                      .s35c2:
    7586/    3859 : C9 02                CMP #$2
    7587/    385B : F0 03                BEQ .._18257.skip
    7588/    385D : 4C 8C 38             JMP .s35c3
    7590/    3860 :                      .s35b3:
    7591/    3860 : 98                   TYA
    7592/    3861 : CD 1F 02             CMP hero_Yellow
    7593/    3864 : 90 03                BCC .._18267.skip
    7594/    3866 : 4C 8C 38             JMP .if217
    7596/    3869 : 85 23                STA $23 ;temp_index
    7597/    386B : AD 58 02             LDA skill_list+$A
    7598/    386E : F0 0B                BEQ .khm.res_yellow
    7599/    3870 : A9 05                LDA #$5
    7600/    3872 : 85 2F                STA $2F ;rand8.max
    7601/    3874 : 20 3B 12             JSR rand8
    7602/    3877 : A5 06                LDA ret_val
    7603/    3879 : F0 09                BEQ .khm.res_yellow_done
    7605/    387B : AD 1F 02             LDA hero_Yellow
    7606/    387E : 18                   CLC
    7607/    387F : E5 23                SBC $23 ;temp_index
    7608/    3881 : 8D 1F 02             STA hero_Yellow
    7610/    3884 : A9 FF                LDA #$FF
    7611/    3886 : 85 25                STA $25 ;bought
    7612/    3888 : A9 FF                LDA #$FF
    7613/    388A : 85 26                STA $26 ;redraw
    7614/    388C :                      .if217:
    7615/    388C :                      .s35c3:
    7616/    388C :                      .s35done:
    7617/    388C :                      .if214:
    7618/    388C :                      .if209:
    7619/    388C : A5 25                LDA $25 ;bought
    7620/    388E : D0 03                BNE .._18333.skip
    7621/    3890 : 4C 9C 39             JMP .if218
    7623/    3893 : AD 63 02             LDA menu_res_target
    7624/    3896 : 80 03                BRA .s36c0
    7625/    3898 : 4C 9C 39             JMP .s36done
    7626/    389B :                      .s36c0:
    7627/    389B : C9 19                CMP #$19
    7628/    389D : F0 03                BEQ .._18336.skip
    7629/    389F : 4C B1 38             JMP .s36c1
    7631/    38A2 :                      .s36b1:
    7632/    38A2 : AD 06 02             LDA hero_HP_Max
    7633/    38A5 : 8D 04 02             STA hero_HP
    7634/    38A8 : AD 07 02             LDA hero_HP_Max+$1
    7635/    38AB : 8D 05 02             STA hero_HP+$1
    7636/    38AE : 4C 9C 39             JMP .s36done
    7637/    38B1 :                      .s36c1:
    7638/    38B1 : C9 1A                CMP #$1A
    7639/    38B3 : F0 03                BEQ .._18373.skip
    7640/    38B5 : 4C CD 38             JMP .s36c2
    7642/    38B8 :                      .s36b2:
    7643/    38B8 : EE 09 02             INC hero_HP_Upgrade
    7644/    38BB : 20 82 12             JSR CalcStats
    7645/    38BE : AD 06 02             LDA hero_HP_Max
    7646/    38C1 : 8D 04 02             STA hero_HP
    7647/    38C4 : AD 07 02             LDA hero_HP_Max+$1
    7648/    38C7 : 8D 05 02             STA hero_HP+$1
    7649/    38CA : 4C 9C 39             JMP .s36done
    7650/    38CD :                      .s36c2:
    7651/    38CD : C9 1B                CMP #$1B
    7652/    38CF : F0 03                BEQ .._18412.skip
    7653/    38D1 : 4C DD 38             JMP .s36c3
    7655/    38D4 :                      .s36b3:
    7656/    38D4 : AD 0B 02             LDA hero_Batt_Max
    7657/    38D7 : 8D 0A 02             STA hero_Batt
    7658/    38DA : 4C 9C 39             JMP .s36done
    7659/    38DD :                      .s36c3:
    7660/    38DD : C9 1C                CMP #$1C
    7661/    38DF : F0 03                BEQ .._18449.skip
    7662/    38E1 : 4C F3 38             JMP .s36c4
    7664/    38E4 :                      .s36b4:
    7665/    38E4 : EE 0C 02             INC hero_Batt_Upgrade
    7666/    38E7 : 20 82 12             JSR CalcStats
    7667/    38EA : AD 0B 02             LDA hero_Batt_Max
    7668/    38ED : 8D 0A 02             STA hero_Batt
    7669/    38F0 : 4C 9C 39             JMP .s36done
    7670/    38F3 :                      .s36c4:
    7671/    38F3 : C9 1D                CMP #$1D
    7672/    38F5 : F0 03                BEQ .._18488.skip
    7673/    38F7 : 4C 04 39             JMP .s36c5
    7675/    38FA :                      .s36b5:
    7676/    38FA : A9 0A                LDA #$A
    7677/    38FC : 85 2D                STA $2D ;AddExp.exp
    7678/    38FE : 20 E0 2C             JSR AddExp
    7679/    3901 : 4C 9C 39             JMP .s36done
    7680/    3904 :                      .s36c5:
    7681/    3904 : C9 1E                CMP #$1E
    7682/    3906 : F0 03                BEQ .._18526.skip
    7683/    3908 : 4C 14 39             JMP .s36c6
    7685/    390B :                      .s36b6:
    7686/    390B : EE 0E 02             INC hero_Dmg_Upgrade
    7687/    390E : 20 82 12             JSR CalcStats
    7688/    3911 : 4C 9C 39             JMP .s36done
    7689/    3914 :                      .s36c6:
    7690/    3914 : A0 00                LDY #$0
    7692/    3916 : B9 30 02             LDA hero_inventory,Y
    7693/    3919 : C9 20                CMP #$20
    7694/    391B : F0 03                BEQ .._18539.skip
    7695/    391D : 4C 94 39             JMP .if219
    7697/    3920 : AD 5B 02             LDA skill_list+$D
    7698/    3923 : D0 03                BNE .._18542.skip
    7699/    3925 : 4C 8C 39             JMP .if220
    7701/    3928 : A9 0A                LDA #$A
    7702/    392A : 85 2F                STA $2F ;rand8.max
    7703/    392C : 20 3B 12             JSR rand8
    7704/    392F : A5 06                LDA ret_val
    7705/    3931 : D0 59                BNE .khm.no_upgrade
    7706/    3933 : 5A                   PHY
    7707/    3934 : AD 63 02             LDA menu_res_target
    7708/    3937 : 0A                   ASL
    7709/    3938 : A8                   TAY
    7710/    3939 : B9 76 C5             LDA item_stats,Y
    7711/    393C : 85 2B                STA $2B ;item_ptr
    7712/    393E : B9 77 C5             LDA item_stats+$1,Y
    7713/    3941 : 85 2C                STA $2C ;item_ptr
    7714/    3943 : A0 00                LDY #$0
    7715/    3945 : B1 2B                LDA ($2B),Y ;item_ptr
    7716/    3947 : 80 03                BRA .s37c0
    7717/    3949 : 4C 85 39             JMP .s37done
    7718/    394C :                      .s37c0:
    7719/    394C : C9 00                CMP #$0
    7720/    394E : F0 03                BEQ .._18574.skip
    7721/    3950 : 4C 58 39             JMP .s37c1
    7723/    3953 :                      .s37b1:
    7724/    3953 : A9 04                LDA #$4
    7725/    3955 : 4C 85 39             JMP .s37done
    7726/    3958 :                      .s37c1:
    7727/    3958 : C9 01                CMP #$1
    7728/    395A : F0 03                BEQ .._18583.skip
    7729/    395C : 4C 64 39             JMP .s37c2
    7731/    395F :                      .s37b2:
    7732/    395F : A9 09                LDA #$9
    7733/    3961 : 4C 85 39             JMP .s37done
    7734/    3964 :                      .s37c2:
    7735/    3964 : C9 02                CMP #$2
    7736/    3966 : F0 03                BEQ .._18592.skip
    7737/    3968 : 4C 70 39             JMP .s37c3
    7739/    396B :                      .s37b3:
    7740/    396B : A9 0E                LDA #$E
    7741/    396D : 4C 85 39             JMP .s37done
    7742/    3970 :                      .s37c3:
    7743/    3970 : C9 03                CMP #$3
    7744/    3972 : F0 03                BEQ .._18601.skip
    7745/    3974 : 4C 7C 39             JMP .s37c4
    7747/    3977 :                      .s37b4:
    7748/    3977 : A9 13                LDA #$13
    7749/    3979 : 4C 85 39             JMP .s37done
    7750/    397C :                      .s37c4:
    7751/    397C : C9 04                CMP #$4
    7752/    397E : F0 03                BEQ .._18610.skip
    7753/    3980 : 4C 85 39             JMP .s37c5
    7755/    3983 :                      .s37b5:
    7756/    3983 : A9 18                LDA #$18
    7757/    3985 :                      .s37c5:
    7758/    3985 :                      .s37done:
    7759/    3985 : 7A                   PLY
    7760/    3986 : 99 30 02             STA hero_inventory,Y
    7761/    3989 : 4C 92 39             JMP .if221
    7762/    398C :                      .if220:
    7764/    398C : AD 63 02             LDA menu_res_target
    7765/    398F : 99 30 02             STA hero_inventory,Y
    7766/    3992 :                      .if221:
    7767/    3992 : 80 08                BRA .khm.loop_done
    7768/    3994 :                      .if219:
    7769/    3994 : C8                   INY
    7770/    3995 : C0 1E                CPY #$1E
    7771/    3997 : F0 03                BEQ .._18629.skip
    7772/    3999 : 4C 16 39             JMP .khm.loop
    7775/    399C :                      .s36c7:
    7776/    399C :                      .s36done:
    7777/    399C :                      .if218:
    7778/    399C :                      .s34c5:
    7779/    399C :                      .s34done:
    7780/    399C :                      .s31c3:
    7781/    399C :                      .s31done:
    7783/    399C : A5 26                LDA $26 ;redraw
    7784/    399E : D0 03                BNE .._18649.skip
    7785/    39A0 : 4C A6 39             JMP .if222
    7787/    39A3 : 20 55 2A             JSR DrawMenu
    7788/    39A6 :                      .if222:
    7789/    39A6 : A5 27                LDA $27 ;redraw_skills
    7790/    39A8 : D0 03                BNE .._18656.skip
    7791/    39AA : 4C B0 39             JMP .if223
    7793/    39AD : 20 6D 26             JSR DrawSkills
    7794/    39B0 :                      .if223:
    7795/    39B0 : A5 28                LDA $28 ;redraw_resources
    7796/    39B2 : D0 03                BNE .._18663.skip
    7797/    39B4 : 4C BA 39             JMP .if224
    7799/    39B7 : 20 3F 28             JSR DrawResources
    7800/    39BA :                      .if224:
    7801/    39BA : 60                   RTS
    7803/    39BB :                     InitHero:
    7804/    39BB : 9C 1A 02             STZ hero_Exp
    7805/    39BE : A9 28                LDA #$28
    7806/    39C0 : 8D 1B 02             STA hero_Exp_Max
    7807/    39C3 : 9C 09 02             STZ hero_HP_Upgrade
    7808/    39C6 : 9C 0C 02             STZ hero_Batt_Upgrade
    7809/    39C9 : 9C 0E 02             STZ hero_Dmg_Upgrade
    7810/    39CC : A9 01                LDA #$1
    7811/    39CE : 8D 1C 02             STA hero_Level
    7812/    39D1 : 9C 1D 02             STZ hero_Red
    7813/    39D4 : 9C 1E 02             STZ hero_Blue
    7814/    39D7 : 9C 1F 02             STZ hero_Yellow
    7815/    39DA : 9C 20 02             STZ hero_Points
    7816/    39DD : A9 00                LDA #$0
    7817/    39DF : 8D 26 02             STA hero_activity
    7818/    39E2 : A9 00                LDA #$0
    7819/    39E4 : 8D 2B 02             STA hero_equipped+$0
    7820/    39E7 : A9 05                LDA #$5
    7821/    39E9 : 8D 2C 02             STA hero_equipped+$1
    7822/    39EC : A9 0A                LDA #$A
    7823/    39EE : 8D 2D 02             STA hero_equipped+$2
    7824/    39F1 : A9 0F                LDA #$F
    7825/    39F3 : 8D 2E 02             STA hero_equipped+$3
    7826/    39F6 : A9 14                LDA #$14
    7827/    39F8 : 8D 2F 02             STA hero_equipped+$4
    7828/    39FB : A9 20                LDA #$20
    7829/    39FD : A0 00                LDY #$0
    7831/    39FF : 99 30 02             STA hero_inventory,Y
    7832/    3A02 : C8                   INY
    7833/    3A03 : C0 1E                CPY #$1E
    7834/    3A05 : D0 F8                BNE .ih.iloop
    7835/    3A07 : A0 0F                LDY #$F
    7836/    3A09 : A9 00                LDA #$0
    7838/    3A0B : 99 4E 02             STA skill_list,Y
    7839/    3A0E : 88                   DEY
    7840/    3A0F : D0 FA                BNE .ih.sloop
    7841/    3A11 : 60                   RTS
    7843/    3A12 :                     ResetGame:
    7844/    3A12 : 9C 00 02             STZ display_X
    7845/    3A15 : 9C 01 02             STZ display_Y
    7846/    3A18 : A9 01                LDA #$1
    7847/    3A1A : 8D 02 02             STA hero_X
    7848/    3A1D : A9 01                LDA #$1
    7849/    3A1F : 8D 03 02             STA hero_Y
    7850/    3A22 : A9 00                LDA #$0
    7851/    3A24 : 8D 26 02             STA hero_activity
    7852/    3A27 : AD 06 02             LDA hero_HP_Max
    7853/    3A2A : 8D 04 02             STA hero_HP
    7854/    3A2D : AD 0B 02             LDA hero_Batt_Max
    7855/    3A30 : 8D 0A 02             STA hero_Batt
    7856/    3A33 : A9 04                LDA #$4
    7857/    3A35 : 8D 21 02             STA hero_facing
    7858/    3A38 : A9 04                LDA #$4
    7859/    3A3A : 8D 22 02             STA hero_target_direction
    7860/    3A3D : A9 00                LDA #$0
    7861/    3A3F : 8D 65 02             STA output_mode
    7862/    3A42 : 20 6D 18             JSR UpdateTarget
    7863/    3A45 : 60                   RTS
    7865/    3A46 :                     main:
    7866/    3A46 : 20 FC 0C             JSR Setup
    7867/    3A49 : 20 0E 11             JSR LoadTiles
    7868/    3A4C : 20 85 15             JSR MakeMap
    7869/    3A4F : 20 AE 16             JSR LoadMonsters
    7870/    3A52 : 20 6E 17             JSR LoadCrystals
    7871/    3A55 : 20 BB 39             JSR InitHero
    7872/    3A58 : 20 82 12             JSR CalcStats
    7873/    3A5B : 20 8B 11             JSR ColorHero
    7874/    3A5E : 20 12 3A             JSR ResetGame
    7875/    3A61 : 20 25 1F             JSR DrawFrame
    7876/    3A64 : 20 7D 1B             JSR DrawLegend
    7878/    3A67 : AD E6 FF             LDA $FFE6
    7879/    3A6A : C5 20                CMP $20 ;timer_save
    7880/    3A6C : D0 03                BNE .._18921.skip
    7881/    3A6E : 4C 80 3A             JMP .if225
    7883/    3A71 : 85 20                STA $20 ;timer_save
    7884/    3A73 : AD 65 02             LDA output_mode
    7885/    3A76 : C9 00                CMP #$0
    7886/    3A78 : F0 03                BEQ .._18923.skip
    7887/    3A7A : 4C 80 3A             JMP .if226
    7889/    3A7D : 20 69 2D             JSR TickHandler
    7890/    3A80 :                      .if226:
    7891/    3A80 :                      .if225:
    7892/    3A80 : AD 65 02             LDA output_mode
    7893/    3A83 : C9 00                CMP #$0
    7894/    3A85 : F0 03                BEQ .._18931.skip
    7895/    3A87 : 4C 90 3A             JMP .if227
    7897/    3A8A : 20 A6 30             JSR KeyHandlerGame
    7898/    3A8D : 4C 93 3A             JMP .if228
    7899/    3A90 :                      .if227:
    7900/    3A90 : 20 8E 34             JSR KeyHandlerMenu
    7901/    3A93 :                      .if228:
    7902/    3A93 : 80 D2                BRA .m.loop
    7903/    3A95 : 60                   RTS
