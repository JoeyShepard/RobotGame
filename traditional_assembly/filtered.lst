(1)   40/       0 :                     	fname:
(1)  168/       0 :                     arg1:
(1)  187/       0 :                     arg1:
(1) 1177/       0 :                     	skip:
(1) 1183/       0 :                     	skip:
(1) 1189/       0 :                     	skip:
(1) 1195/       0 :                     	skip:
(1) 1201/       0 :                     	skip:
(1) 1207/       0 :                     	skip:
(1) 1316/       0 :                     	skip:
      33/      10 :                     saveA:
      33/      11 :                     saveX:
(1)    1/    C000 :                     	CharTable:
(1)    3/    C000 : 00 00 00 00 00 00   		FCB 0, 0, 0, 0, 0, 0, 0, 0
(1)    5/    C008 : 04 04 04 04 04 00   		FCB 4, 4, 4, 4, 4, 0, 4, 0
(1)    7/    C010 : 0A 0A 0A 00 00 00   		FCB 10, 10, 10, 0, 0, 0, 0, 0
(1)    9/    C018 : 0A 0A 1F 0A 1F 0A   		FCB 10, 10, 31, 10, 31, 10, 10, 0
(1)   11/    C020 : 04 1E 05 0E 14 0F   		FCB 4, 30, 5, 14, 20, 15, 4, 0
(1)   13/    C028 : 03 13 08 04 02 19   		FCB 3, 19, 8, 4, 2, 25, 24, 0 
(1)   15/    C030 : 06 09 05 02 15 09   		FCB 6, 9, 5, 2, 21, 9, 22, 0 
(1)   17/    C038 : 03 02 01 00 00 00   		FCB 3, 2, 1, 0, 0, 0, 0, 0
(1)   19/    C040 : 04 02 01 01 01 02   		FCB 4, 2, 1, 1, 1, 2, 4, 0
(1)   21/    C048 : 04 08 10 10 10 08   		FCB 4, 8, 16, 16, 16, 8, 4, 0
(1)   23/    C050 : 00 04 15 0E 15 04   		FCB 0, 4, 21, 14, 21, 4, 0, 0
(1)   25/    C058 : 00 04 04 1F 04 04   		FCB 0, 4, 4, 31, 4, 4, 0, 0
(1)   27/    C060 : 00 00 00 00 00 06   		FCB 0, 0, 0, 0, 0, 6, 4, 2
(1)   29/    C068 : 00 00 00 1F 00 00   		FCB 0, 0, 0, 31, 0, 0, 0, 0
(1)   31/    C070 : 00 00 00 00 00 06   		FCB 0, 0, 0, 0, 0, 6, 6, 0
(1)   33/    C078 : 00 10 08 04 02 01   		FCB 0, 16, 8, 4, 2, 1, 0, 0
(1)   35/    C080 : 0E 11 19 15 13 11   		FCB 14, 17, 25, 21, 19, 17, 14, 0
(1)   37/    C088 : 04 06 04 04 04 04   		FCB 4, 6, 4, 4, 4, 4, 14, 0
(1)   39/    C090 : 0E 11 10 08 04 02   		FCB 14, 17, 16, 8, 4, 2, 31, 0
(1)   41/    C098 : 1F 08 04 08 10 11   		FCB 31, 8, 4, 8, 16, 17, 14, 0
(1)   43/    C0A0 : 08 0C 0A 09 1F 08   		FCB 8, 12, 10, 9, 31, 8, 8, 0 
(1)   45/    C0A8 : 1F 01 0F 10 10 11   		FCB 31, 1, 15, 16, 16, 17, 14, 0
(1)   47/    C0B0 : 0C 02 01 0F 11 11   		FCB 12, 2, 1, 15, 17, 17, 14, 0 
(1)   49/    C0B8 : 1F 10 08 04 02 02   		FCB 31, 16, 8, 4, 2, 2, 2, 0
(1)   51/    C0C0 : 0E 11 11 0E 11 11   		FCB 14, 17, 17, 14, 17, 17, 14, 0
(1)   53/    C0C8 : 0E 11 11 1E 10 08   		FCB 14, 17, 17, 30, 16, 8, 6, 0
(1)   55/    C0D0 : 00 06 06 00 06 06   		FCB 0, 6, 6, 0, 6, 6, 0, 0
(1)   57/    C0D8 : 00 06 06 00 06 04   		FCB 0, 6, 6, 0, 6, 4, 2, 0
(1)   59/    C0E0 : 08 04 02 01 02 04   		FCB 8, 4, 2, 1, 2, 4, 8, 0
(1)   61/    C0E8 : 00 00 1F 00 1F 00   		FCB 0, 0, 31, 0, 31, 0, 0, 0
(1)   63/    C0F0 : 02 04 08 10 08 04   		FCB 2, 4, 8, 16, 8, 4, 2, 0
(1)   65/    C0F8 : 0E 11 10 08 04 00   		FCB 14, 17, 16, 8, 4, 0, 4, 0
(1)   67/    C100 : 0E 11 10 16 15 15   		FCB 14, 17, 16, 22, 21, 21, 14, 0
(1)   69/    C108 : 04 0A 11 11 1F 11   		FCB 4, 10, 17, 17, 31, 17, 17, 0
(1)   71/    C110 : 0F 11 11 1F 11 11   		FCB 15, 17, 17, 31, 17, 17, 15, 0
(1)   73/    C118 : 0E 11 01 01 01 11   		FCB 14, 17, 1, 1, 1, 17, 14, 0
(1)   75/    C120 : 07 09 11 11 11 09   		FCB 7, 9, 17, 17, 17, 9, 7, 0
(1)   77/    C128 : 1F 01 01 0F 01 01   		FCB 31, 1, 1, 15, 1, 1, 31, 0
(1)   79/    C130 : 1F 01 01 0F 01 01   		FCB 31, 1, 1, 15, 1, 1, 1, 0
(1)   81/    C138 : 0E 11 01 1D 11 11   		FCB 14, 17, 1, 29, 17, 17, 14, 0
(1)   83/    C140 : 11 11 11 1F 11 11   		FCB 17, 17, 17, 31, 17, 17, 17, 0
(1)   85/    C148 : 0E 04 04 04 04 04   		FCB 14, 4, 4, 4, 4, 4, 14, 0
(1)   87/    C150 : 1C 08 08 08 08 09   		FCB 28, 8, 8, 8, 8, 9, 6, 0
(1)   89/    C158 : 11 09 05 03 05 09   		FCB 17, 9, 5, 3, 5, 9, 17, 0
(1)   91/    C160 : 01 01 01 01 01 01   		FCB 1, 1, 1, 1, 1, 1, 31, 0
(1)   93/    C168 : 11 1B 15 15 11 11   		FCB 17, 27, 21, 21, 17, 17, 17, 0
(1)   95/    C170 : 11 11 13 15 19 11   		FCB 17, 17, 19, 21, 25, 17, 17, 0
(1)   97/    C178 : 0E 11 11 11 11 11   		FCB 14, 17, 17, 17, 17, 17, 14, 0 
(1)   99/    C180 : 0F 11 11 0F 01 01   		FCB 15, 17, 17, 15, 1, 1, 1, 0
(1)  101/    C188 : 0E 11 11 11 15 09   		FCB 14, 17, 17, 17, 21, 9, 22, 0
(1)  103/    C190 : 0F 11 11 0F 05 09   		FCB 15, 17, 17, 15, 5, 9, 17, 0
(1)  105/    C198 : 0E 11 01 0E 10 11   		FCB 14, 17, 1, 14, 16, 17, 14, 0
(1)  107/    C1A0 : 1F 04 04 04 04 04   		FCB 31, 4, 4, 4, 4, 4, 4, 0
(1)  109/    C1A8 : 11 11 11 11 11 11   		FCB 17, 17, 17, 17, 17, 17, 14, 0
(1)  111/    C1B0 : 11 11 11 11 11 0A   		FCB 17, 17, 17, 17, 17, 10, 4, 0
(1)  113/    C1B8 : 11 11 11 15 15 1B   		FCB 17, 17, 17, 21, 21, 27, 17, 0
(1)  115/    C1C0 : 11 11 0A 04 0A 11   		FCB 17, 17, 10, 4, 10, 17, 17, 0
(1)  117/    C1C8 : 11 11 0A 04 04 04   		FCB 17, 17, 10, 4, 4, 4, 4, 0
(1)  119/    C1D0 : 1F 10 08 04 02 01   		FCB 31, 16, 8, 4, 2, 1, 31, 0
(1)  121/    C1D8 : 0E 02 02 02 02 02   		FCB 14, 2, 2, 2, 2, 2, 14, 0
(1)  123/    C1E0 : 00 01 02 04 08 10   		FCB 0, 1, 2, 4, 8, 16, 0, 0
(1)  125/    C1E8 : 0E 08 08 08 08 08   		FCB 14, 8, 8, 8, 8, 8, 14, 0
(1)  127/    C1F0 : 04 0A 11 00 00 00   		FCB 4, 10, 17, 0, 0, 0, 0, 0
(1)  129/    C1F8 : 00 00 00 00 00 00   		FCB 0, 0, 0, 0, 0, 0, 31, 0
(1)  131/    C200 : 01 02 04 00 00 00   		FCB 1, 2, 4, 0, 0, 0, 0, 0
(1)  133/    C208 : 00 00 0E 10 1E 11   		FCB 0, 0, 14, 16, 30, 17, 30, 0
(1)  135/    C210 : 01 01 01 0F 11 11   		FCB 1, 1, 1, 15, 17, 17, 15, 0
(1)  137/    C218 : 00 00 0E 11 01 11   		FCB 0, 0, 14, 17, 1, 17, 14, 0
(1)  139/    C220 : 10 10 10 1E 11 11   		FCB 16, 16, 16, 30, 17, 17, 30, 0
(1)  141/    C228 : 00 00 0E 11 1F 01   		FCB 0, 0, 14, 17, 31, 1, 14, 0
(1)  143/    C230 : 0C 12 02 07 02 02   		FCB 12, 18, 2, 7, 2, 2, 2, 0
(1)  145/    C238 : 00 00 1E 11 1E 10   		FCB 0, 0, 30, 17, 30, 16, 14, 0
(1)  147/    C240 : 01 01 01 0F 11 11   		FCB 1, 1, 1, 15, 17, 17, 17, 0
(1)  149/    C248 : 00 04 00 06 04 04   		FCB 0, 4, 0, 6, 4, 4, 14, 0
(1)  151/    C250 : 08 00 08 08 08 09   		FCB 8, 0, 8, 8, 8, 9, 6, 0
(1)  153/    C258 : 01 01 09 05 03 05   		FCB 1, 1, 9, 5, 3, 5, 9, 0
(1)  155/    C260 : 06 04 04 04 04 04   		FCB 6, 4, 4, 4, 4, 4, 14, 0
(1)  157/    C268 : 00 00 0B 15 15 11   		FCB 0, 0, 11, 21, 21, 17, 17, 0
(1)  159/    C270 : 00 00 0D 13 11 11   		FCB 0, 0, 13, 19, 17, 17, 17, 0
(1)  161/    C278 : 00 00 0E 11 11 11   		FCB 0, 0, 14, 17, 17, 17, 14, 0
(1)  163/    C280 : 00 00 0F 11 1F 01   		FCB 0, 0, 15, 17, 31, 1, 1, 0
(1)  165/    C288 : 00 00 1E 11 1E 10   		FCB 0, 0, 30, 17, 30, 16, 16, 0
(1)  167/    C290 : 00 00 0D 13 01 01   		FCB 0, 0, 13, 19, 1, 1, 1, 0
(1)  169/    C298 : 00 00 0E 01 0E 10   		FCB 0, 0, 14, 1, 14, 16, 15, 0
(1)  171/    C2A0 : 02 02 07 02 02 12   		FCB 2, 2, 7, 2, 2, 18, 12, 0
(1)  173/    C2A8 : 00 00 11 11 11 19   		FCB 0, 0, 17, 17, 17, 25, 22, 0
(1)  175/    C2B0 : 00 00 11 11 11 0A   		FCB 0, 0, 17, 17, 17, 10, 4, 0
(1)  177/    C2B8 : 00 00 11 15 15 15   		FCB 0, 0, 17, 21, 21, 21, 10, 0
(1)  179/    C2C0 : 00 00 11 0A 04 0A   		FCB 0, 0, 17, 10, 4, 10, 17, 0
(1)  181/    C2C8 : 00 00 11 11 1E 10   		FCB 0, 0, 17, 17, 30, 16, 14, 0
(1)  183/    C2D0 : 00 00 1F 08 04 02   		FCB 0, 0, 31, 8, 4, 2, 31, 0
(1)  185/    C2D8 : 08 04 04 02 04 04   		FCB 8, 4, 4, 2, 4, 4, 8, 0
(1)  187/    C2E0 : 04 04 04 00 04 04   		FCB 4, 4, 4, 0, 4, 4, 4, 0
(1)  189/    C2E8 : 02 04 04 08 04 04   		FCB 2, 4, 4, 8, 4, 4, 2, 0
(1)  191/    C2F0 : 08 15 02 00 00 00   		FCB 8, 21, 2, 0, 0, 0, 0, 0
(1)   17/    C2F8 : 48                  		PHA
(1)   18/    C2F9 : A9 5C               		LDA #'\\'
(1)   19/    C2FB : 8D E7 FF            		STA DEBUG
(1)   20/    C2FE : A9 6E               		LDA #'n'
(1)   21/    C300 : 8D E7 FF            		STA DEBUG
(1)   22/    C303 : 68                  		PLA
(1)   23/    C304 : 60                  		RTS
(1)   24/    C305 : 60                          RTS
(1)   29/    C306 : DA                                  PHX
(1)   29/    C307 : CA                                                  DEX
(1)   29/    C308 : CA                                                  DEX
(1)   30/    C309 : A1 00               		LDA (dbg_ptr,X)
(1)   31/    C30B :                     		.loop:
(1)   32/    C30B : F0 0D               			BEQ .done
(1)   33/    C30D : 8D E7 FF            				STA DEBUG
(1)   34/    C310 : F6 00               				INC dbg_ptr,X
(1)   35/    C312 : D0 02               				BNE .no_carry
(1)   36/    C314 : F6 01               					INC dbg_ptr+1,X
(1)   38/    C316 : A1 00               				LDA (dbg_ptr,X)
(1)   39/    C318 : 80 F1               		BRA .loop
(1)   40/    C31A :                     		.done:
(1)   41/    C31A : FA                                  PLX
(1)   41/    C31B : 60                          RTS
(1)  101/    C31C :                     			msg1:
(1)  103/    C31C :                     			msg2:
(1)  105/    C31C :                     		skip1:
(1)  155/    C31C : 42 61 73 69 63 20   		str_Basic_Head:		FCB "Basic Head",0
(1)  156/    C327 : 48 65 61 64 20 4D   		str_Head_MKII:		FCB "Head MKII",0
(1)  157/    C331 : 48 65 61 64 20 4D   		str_Head_MKIII:		FCB "Head MKIII",0
(1)  158/    C33C : 48 65 61 64 20 4D   		str_Head_MKIV:		FCB "Head MKIV",0
(1)  159/    C346 : 4C 69 67 68 74 6E   		str_Lightning: 		FCB "Lightning",0
(1)  160/    C350 : 42 61 73 69 63 20   		str_Basic_Body: 	FCB "Basic Body",0
(1)  161/    C35B : 54 69 6E 20 42 6F   		str_Tin_Body: 		FCB "Tin Body",0
(1)  162/    C364 : 49 72 6F 6E 20 42   		str_Iron_Body: 		FCB "Iron Body",0
(1)  163/    C36E : 53 74 65 65 6C 20   		str_Steel_Body: 	FCB "Steel Body",0
(1)  164/    C379 : 46 6F 72 74 72 65   		str_Fortress: 		FCB "Fortress",0
(1)  165/    C382 : 42 61 73 69 63 20   		str_Basic_Legs: 	FCB "Basic Legs",0
(1)  166/    C38D : 46 61 73 74 20 4C   		str_Fast_Legs: 		FCB "Fast Legs",0
(1)  167/    C397 : 51 75 69 63 6B 20   		str_Quick_Legs: 	FCB "Quick Legs",0
(1)  168/    C3A2 : 41 67 69 6C 65 20   		str_Agile_Legs: 	FCB "Agile Legs",0
(1)  169/    C3AD : 4D 75 73 74 61 6E   		str_Mustang: 		FCB "Mustang",0
(1)  170/    C3B5 : 42 61 73 69 63 20   		str_Basic_Gun: 		FCB "Basic Gun",0
(1)  171/    C3BF : 42 6C 61 73 74 65   		str_Blaster: 		FCB "Blaster",0
(1)  172/    C3C7 : 4C 61 73 65 72 00   		str_Laser: 			FCB "Laser",0
(1)  173/    C3CD : 50 68 61 73 65 72   		str_Phaser: 		FCB "Phaser",0
(1)  174/    C3D4 : 44 65 61 74 68 20   		str_Death_Ray: 		FCB "Death Ray",0
(1)  175/    C3DE : 42 61 73 69 63 20   		str_Basic_Tool: 	FCB "Basic Tool",0
(1)  176/    C3E9 : 52 6F 63 6B 20 50   		str_Rock_Pick: 		FCB "Rock Pick",0
(1)  177/    C3F3 : 52 6F 63 6B 20 44   		str_Rock_Drill: 	FCB "Rock Drill",0
(1)  178/    C3FE : 52 6F 63 6B 20 42   		str_Rock_Borer: 	FCB "Rock Borer",0
(1)  179/    C409 : 4C 61 73 65 72 20   		str_Laser_Bit: 		FCB "Laser Bit",0
(1)  182/    C413 : 1C C3               			FDB str_Basic_Head
(1)  183/    C415 : 27 C3               			FDB str_Head_MKII
(1)  184/    C417 : 31 C3               			FDB str_Head_MKIII
(1)  185/    C419 : 3C C3               			FDB str_Head_MKIV
(1)  186/    C41B : 46 C3               			FDB str_Lightning
(1)  187/    C41D : 50 C3               			FDB str_Basic_Body
(1)  188/    C41F : 5B C3               			FDB str_Tin_Body
(1)  189/    C421 : 64 C3               			FDB str_Iron_Body
(1)  190/    C423 : 6E C3               			FDB str_Steel_Body
(1)  191/    C425 : 79 C3               			FDB str_Fortress
(1)  192/    C427 : 82 C3               			FDB str_Basic_Legs
(1)  193/    C429 : 8D C3               			FDB str_Fast_Legs
(1)  194/    C42B : 97 C3               			FDB str_Quick_Legs
(1)  195/    C42D : A2 C3               			FDB str_Agile_Legs
(1)  196/    C42F : AD C3               			FDB str_Mustang
(1)  197/    C431 : B5 C3               			FDB str_Basic_Gun
(1)  198/    C433 : BF C3               			FDB str_Blaster
(1)  199/    C435 : C7 C3               			FDB str_Laser
(1)  200/    C437 : CD C3               			FDB str_Phaser
(1)  201/    C439 : D4 C3               			FDB str_Death_Ray
(1)  202/    C43B : DE C3               			FDB str_Basic_Tool
(1)  203/    C43D : E9 C3               			FDB str_Rock_Pick
(1)  204/    C43F : F3 C3               			FDB str_Rock_Drill
(1)  205/    C441 : FE C3               			FDB str_Rock_Borer
(1)  206/    C443 : 09 C4               			FDB str_Laser_Bit
(1)  209/    C445 : 00 00 06 00 01 00   		item_Basic_Head:	FCB head,	0,	stat_None,				stat_Basic,	1,	stat_Batt,	2
(1)  210/    C44C : 00 02 01 01 01 00   		item_Head_MKII:		FCB head,	2,	CRYSTAL_BLUE_TYPE,		stat_Green,	1,	stat_Batt,	4
(1)  211/    C453 : 00 05 01 02 02 00   		item_Head_MKIII:	FCB head,	5,	CRYSTAL_BLUE_TYPE,		stat_Blue,	2,	stat_Batt,	5,	stat_Crit,		5
(1)  212/    C45C : 00 08 02 03 03 00   		item_Head_MKIV:		FCB head,	8,	CRYSTAL_YELLOW_TYPE,	stat_Purple,3,	stat_Batt,	8,	stat_Crit,		10,	stat_Drill,			2
(1)  213/    C467 : 00 0F 00 04 03 00   		item_Lightning:		FCB head,	15,	CRYSTAL_RED_TYPE,		stat_Yellow,3,	stat_Batt,	12,	stat_Crit,		20,	stat_Batt_Recharge,	1
(1)  214/    C472 : 01 00 06 00 01 01   		item_Basic_Body:	FCB body,	0,	stat_None,				stat_Basic,	1,	stat_HP,	5
(1)  215/    C479 : 01 02 00 01 01 01   		item_Tin_Body:		FCB body,	2,	CRYSTAL_RED_TYPE,		stat_Green,	1,	stat_HP,	8
(1)  216/    C480 : 01 05 01 02 02 01   		item_Iron_Body:		FCB body,	5,	CRYSTAL_BLUE_TYPE,		stat_Blue,	2,	stat_HP,	10,	stat_Batt,		3
(1)  217/    C489 : 01 08 02 03 03 01   		item_Steel_Body:	FCB body,	8,	CRYSTAL_YELLOW_TYPE,	stat_Purple,3,	stat_HP,	12,	stat_Batt,		5,	stat_Dmg,			2
(1)  218/    C494 : 01 0F 01 04 03 01   		item_Fortress:		FCB body,	15,	CRYSTAL_BLUE_TYPE,		stat_Yellow,3,	stat_HP,	20,	stat_Batt,		10,	stat_HP_Recharge,	1
(1)  219/    C49F : 02 00 06 00 01 01   		item_Basic_Legs:	FCB legs,	0,	stat_None,				stat_Basic,	1,	stat_HP,	3
(1)  220/    C4A6 : 02 02 00 01 01 01   		item_Fast_Legs:		FCB legs,	2,	CRYSTAL_RED_TYPE,		stat_Green,	1,	stat_HP,	5
(1)  221/    C4AD : 02 05 00 02 02 01   		item_Quick_Legs:	FCB legs,	5,	CRYSTAL_RED_TYPE,		stat_Blue,	2,	stat_HP,	6,	stat_Lava,		25
(1)  222/    C4B6 : 02 08 01 03 03 01   		item_Agile_Legs:	FCB legs,	8,	CRYSTAL_BLUE_TYPE,		stat_Purple,3,	stat_HP,	7,	stat_Lava,		50,	stat_Mine,			2
(1)  223/    C4C1 : 02 0F 00 04 03 01   		item_Mustang:		FCB legs,	15,	CRYSTAL_RED_TYPE,		stat_Yellow,3,	stat_HP,	12,	stat_Dmg,		4,	stat_Lava_Heals,	0
(1)  224/    C4CC : 03 00 06 00 01 02   		item_Basic_Gun:		FCB gun,	0,	stat_None,				stat_Basic,	1,	stat_Dmg,	4
(1)  225/    C4D3 : 03 02 02 01 01 02   		item_Blaster:		FCB gun,	2,	CRYSTAL_YELLOW_TYPE,	stat_Green,	1,	stat_Dmg,	6
(1)  226/    C4DA : 03 05 00 02 02 02   		item_Laser:			FCB gun,	5,	CRYSTAL_RED_TYPE,		stat_Blue,	2,	stat_Dmg,	8,	stat_Crit,		10
(1)  227/    C4E3 : 03 08 01 03 03 02   		item_Phaser:		FCB gun,	8,	CRYSTAL_BLUE_TYPE,		stat_Purple,3,	stat_Dmg,	10,	stat_Crit,		15,	stat_Batt,			2
(1)  228/    C4EE : 03 0F 02 04 03 02   		item_Death_Ray:		FCB gun,	15,	CRYSTAL_YELLOW_TYPE,	stat_Yellow,3,	stat_Dmg,	12,	stat_Crit,		30,	stat_Dmg_Cost_50,	0
(1)  229/    C4F9 : 04 00 06 00 01 03   		item_Basic_Tool:	FCB tool,	0,	stat_None,				stat_Basic,	1,	stat_Mine,	1
(1)  230/    C500 : 04 02 02 01 01 03   		item_Rock_Pick:		FCB tool,	2,	CRYSTAL_YELLOW_TYPE,	stat_Green,	1,	stat_Mine,	2
(1)  231/    C507 : 04 05 02 02 02 03   		item_Rock_Drill:	FCB tool,	5,	CRYSTAL_YELLOW_TYPE,	stat_Blue,	2,	stat_Mine,	3,	stat_Drill,		2
(1)  232/    C510 : 04 08 00 03 03 03   		item_Rock_Borer:	FCB tool,	8,	CRYSTAL_RED_TYPE,		stat_Purple,3,	stat_Mine,	5,	stat_Drill,		3,	stat_Batt,			3
(1)  233/    C51B : 04 0F 02 04 03 04   		item_Laser_Bit:		FCB tool,	15,	CRYSTAL_YELLOW_TYPE,	stat_Yellow,3,	stat_Mine1s,0,	stat_Drill1s,	0,	stat_Mine_Cost_50,	3
(1)  235/    C526 : 48 65 61 6C 73 20   		str_Res_HP_Heal:		FCB "Heals HP to*full",0
(1)  236/    C537 : 2B 31 20 48 50 00   		str_Res_HP_Upgrade:		FCB "+1 HP",0
(1)  237/    C53D : 52 65 63 68 61 72   		str_Res_Batt_Heal:		FCB "Recharges*battery to*full",0
(1)  238/    C557 : 2B 31 20 42 61 74   		str_Res_Batt_Upgrade:	FCB "+1 Batt",0
(1)  239/    C55F : 2B 31 30 20 45 78   		str_Res_Exp_Upgrade:	FCB "+10 Exp point",0
(1)  240/    C56D : 2B 31 20 44 6D 67   		str_Res_Dmg_Upgrade: 	FCB "+1 Dmg",0
(1)  243/    C574 : 26 C5               			FDB str_Res_HP_Heal
(1)  244/    C576 : 37 C5               			FDB str_Res_HP_Upgrade
(1)  245/    C578 : 3D C5               			FDB str_Res_Batt_Heal
(1)  246/    C57A : 57 C5               			FDB str_Res_Batt_Upgrade
(1)  247/    C57C : 5F C5               			FDB str_Res_Exp_Upgrade
(1)  248/    C57E : 6D C5               			FDB str_Res_Dmg_Upgrade
(1)  250/    C580 : 0E 01 00 00         		item_Res_HP_Heal:		FCB stat_Res_Only,	1,	CRYSTAL_RED_TYPE,		0
(1)  251/    C584 : 0E 0A 00 01         		item_Res_HP_Upgrade:	FCB stat_Res_Only,	10,	CRYSTAL_RED_TYPE,		1
(1)  252/    C588 : 0E 01 01 02         		item_Res_Batt_Heal:		FCB stat_Res_Only,	1,	CRYSTAL_BLUE_TYPE,		2
(1)  253/    C58C : 0E 0A 01 03         		item_Res_Batt_Upgrade:	FCB stat_Res_Only,	10,	CRYSTAL_BLUE_TYPE,		3
(1)  254/    C590 : 0E 01 02 04         		item_Res_Exp_Upgrade:	FCB stat_Res_Only,	1,	CRYSTAL_YELLOW_TYPE,	4
(1)  255/    C594 : 0E 0A 02 05         		item_Res_Dmg_Upgrade:	FCB stat_Res_Only,	10,	CRYSTAL_YELLOW_TYPE,	5
(1)  259/    C598 : 45 C4               			FDB item_Basic_Head
(1)  260/    C59A : 4C C4               			FDB item_Head_MKII
(1)  261/    C59C : 53 C4               			FDB item_Head_MKIII
(1)  262/    C59E : 5C C4               			FDB item_Head_MKIV
(1)  263/    C5A0 : 67 C4               			FDB item_Lightning
(1)  264/    C5A2 : 72 C4               			FDB item_Basic_Body
(1)  265/    C5A4 : 79 C4               			FDB item_Tin_Body
(1)  266/    C5A6 : 80 C4               			FDB item_Iron_Body
(1)  267/    C5A8 : 89 C4               			FDB item_Steel_Body
(1)  268/    C5AA : 94 C4               			FDB item_Fortress
(1)  269/    C5AC : 9F C4               			FDB item_Basic_Legs
(1)  270/    C5AE : A6 C4               			FDB item_Fast_Legs
(1)  271/    C5B0 : AD C4               			FDB item_Quick_Legs
(1)  272/    C5B2 : B6 C4               			FDB item_Agile_Legs
(1)  273/    C5B4 : C1 C4               			FDB item_Mustang
(1)  274/    C5B6 : CC C4               			FDB item_Basic_Gun
(1)  275/    C5B8 : D3 C4               			FDB item_Blaster
(1)  276/    C5BA : DA C4               			FDB item_Laser
(1)  277/    C5BC : E3 C4               			FDB item_Phaser
(1)  278/    C5BE : EE C4               			FDB item_Death_Ray
(1)  279/    C5C0 : F9 C4               			FDB item_Basic_Tool
(1)  280/    C5C2 : 00 C5               			FDB item_Rock_Pick
(1)  281/    C5C4 : 07 C5               			FDB item_Rock_Drill
(1)  282/    C5C6 : 10 C5               			FDB item_Rock_Borer
(1)  283/    C5C8 : 1B C5               			FDB item_Laser_Bit
(1)  284/    C5CA : 80 C5               			FDB item_Res_HP_Heal
(1)  285/    C5CC : 84 C5               			FDB item_Res_HP_Upgrade
(1)  286/    C5CE : 88 C5               			FDB item_Res_Batt_Heal
(1)  287/    C5D0 : 8C C5               			FDB item_Res_Batt_Upgrade
(1)  288/    C5D2 : 90 C5               			FDB item_Res_Exp_Upgrade
(1)  289/    C5D4 : 94 C5               			FDB item_Res_Dmg_Upgrade
(1)  292/    C5D6 : 2B 24 20 42 61 74   		str_stat_Batt:			FCB "+$ Batt",0
(1)  293/    C5DE : 2B 24 20 48 50 00   		str_stat_HP: 			FCB "+$ HP",0
(1)  294/    C5E4 : 2B 24 20 44 6D 67   		str_stat_Dmg: 			FCB "+$ Dmg",0
(1)  295/    C5EB : 2D 24 73 20 4D 69   		str_stat_Mine: 			FCB "-$s Mine",0
(1)  296/    C5F4 : 31 73 20 4D 69 6E   		str_stat_Mine1s:		FCB "1s Mine",0
(1)  297/    C5FC : 2B 24 25 20 43 72   		str_stat_Crit: 			FCB "+$% Crit",0
(1)  298/    C605 : 2D 24 25 20 4C 61   		str_stat_Lava:			FCB "-$% Lava",0
(1)  299/    C60E : 2D 24 73 20 44 72   		str_stat_Drill:			FCB "-$s Drill",0
(1)  300/    C618 : 31 73 20 44 72 69   		str_stat_Drill1s:		FCB "1s Drill",0
(1)  301/    C621 : 2B 24 2F 73 20 42   		str_stat_Batt_Recharge:	FCB "+$/s Batt",0
(1)  302/    C62B : 2B 24 2F 73 20 48   		str_stat_HP_Recharge: 	FCB "+$/s HP",0
(1)  303/    C633 : 4C 61 76 61 20 48   		str_stat_LavaHeals: 	FCB "Lava Heals",0
(1)  304/    C63E : 2D 35 30 25 20 43   		str_stat_AttackCost50: 	FCB "-50% Cost",0
(1)  305/    C648 : 2D 35 30 25 20 43   		str_stat_MineCost50: 	FCB "-50% Cost",0
(1)  308/    C652 : D6 C5               			FDB str_stat_Batt
(1)  309/    C654 : DE C5               			FDB str_stat_HP
(1)  310/    C656 : E4 C5               			FDB str_stat_Dmg
(1)  311/    C658 : EB C5               			FDB str_stat_Mine
(1)  312/    C65A : F4 C5               			FDB str_stat_Mine1s
(1)  313/    C65C : FC C5               			FDB str_stat_Crit
(1)  314/    C65E : 05 C6               			FDB str_stat_Lava
(1)  315/    C660 : 0E C6               			FDB str_stat_Drill 
(1)  316/    C662 : 18 C6               			FDB str_stat_Drill1s
(1)  317/    C664 : 21 C6               			FDB str_stat_Batt_Recharge
(1)  318/    C666 : 2B C6               			FDB str_stat_HP_Recharge
(1)  319/    C668 : 33 C6               			FDB str_stat_LavaHeals
(1)  320/    C66A : 3E C6               			FDB str_stat_AttackCost50
(1)  321/    C66C : 48 C6               			FDB str_stat_MineCost50
(1)  324/    C66E : 30                  			FCB COLOR_BATT
(1)  325/    C66F : 03                  			FCB COLOR_HP
(1)  326/    C670 : 01                  			FCB COLOR_DMG
(1)  327/    C671 : 17                  			FCB COLOR_MINE
(1)  328/    C672 : 17                  			FCB COLOR_MINE
(1)  329/    C673 : 01                  			FCB COLOR_CRIT
(1)  330/    C674 : 0B                  			FCB COLOR_LAVA
(1)  331/    C675 : 32                  			FCB COLOR_DRILL 
(1)  332/    C676 : 32                  			FCB COLOR_DRILL
(1)  333/    C677 : 30                  			FCB COLOR_BATT
(1)  334/    C678 : 03                  			FCB COLOR_HP
(1)  335/    C679 : 03                  			FCB COLOR_HP
(1)  336/    C67A : 01                  			FCB COLOR_DMG
(1)  337/    C67B : 17                  			FCB COLOR_MINE
(1)  343/    C67C : 0B 02               			FDB hero_Batt_Max			;Batt
(1)  344/    C67E : 08 02               			FDB hero_HP_Max_temp		;HP
(1)  345/    C680 : 0D 02               			FDB hero_Dmg				;Dmg
(1)  346/    C682 : 00 00               			FDB stat_special           	;Mine
(1)  347/    C684 : 00 00               			FDB stat_special       		;Mine1s
(1)  348/    C686 : 13 02               			FDB hero_Crit_Rate        	;Crit
(1)  349/    C688 : 11 02               			FDB hero_Lava_Res         	;Lava
(1)  350/    C68A : 00 00               			FDB stat_special           	;Drill 
(1)  351/    C68C : 00 00               			FDB stat_special           	;Drill1s
(1)  352/    C68E : 12 02               			FDB hero_Batt_Recharge		;Batt_Recharge
(1)  353/    C690 : 14 02               			FDB hero_HP_Recharge		;HP_Recharge
(1)  354/    C692 : 00 00               			FDB stat_special     		;LavaHeals
(1)  355/    C694 : 00 00               			FDB stat_special  			;AttackCost50
(1)  356/    C696 : 00 00               			FDB stat_special			;MineCost50
(1)  359/    C698 : 48 50 3A 20 20 20   		str_hero_stat_HP: 		FCB "HP:   $",0
(1)  360/    C6A0 : 42 61 74 74 3A 20   		str_hero_stat_Batt: 	FCB "Batt: $",0
(1)  361/    C6A8 : 44 6D 67 3A 20 20   		str_hero_stat_Dmg: 		FCB "Dmg:  $",0
(1)  362/    C6B0 : 43 72 69 74 3A 20   		str_hero_stat_Crit: 	FCB "Crit: $%",0
(1)  363/    C6B9 : 4D 69 6E 65 3A 20   		str_hero_stat_Mine: 	FCB "Mine: $s",0
(1)  364/    C6C2 : 44 72 69 6C 6C 3A   		str_hero_stat_Drill:	FCB "Drill:$s",0
(1)  365/    C6CB : 4C 61 76 61 3A 20   		str_hero_stat_Lava: 	FCB "Lava: -$%",0
(1)  368/    C6D5 : 03                  			FCB COLOR_HP
(1)  369/    C6D6 : 30                  			FCB COLOR_BATT
(1)  370/    C6D7 : 01                  			FCB COLOR_DMG
(1)  371/    C6D8 : 01                  			FCB COLOR_CRIT
(1)  372/    C6D9 : 17                  			FCB COLOR_MINE
(1)  373/    C6DA : 32                  			FCB COLOR_DRILL
(1)  374/    C6DB : 0B                  			FCB COLOR_LAVA
(1)  377/    C6DC : 98 C6               			FDB str_hero_stat_HP
(1)  378/    C6DE : A0 C6               			FDB str_hero_stat_Batt
(1)  379/    C6E0 : A8 C6               			FDB str_hero_stat_Dmg
(1)  380/    C6E2 : B0 C6               			FDB str_hero_stat_Crit
(1)  381/    C6E4 : B9 C6               			FDB str_hero_stat_Mine
(1)  382/    C6E6 : C2 C6               			FDB str_hero_stat_Drill
(1)  383/    C6E8 : CB C6               			FDB str_hero_stat_Lava
(1)  386/    C6EA : 00 00               			FDB 0				;&hero_HP_Max, int so can't put here
(1)  387/    C6EC : 0B 02               			FDB hero_Batt_Max
(1)  388/    C6EE : 0D 02               			FDB hero_Dmg
(1)  389/    C6F0 : 13 02               			FDB hero_Crit_Rate
(1)  390/    C6F2 : 0F 02               			FDB hero_Mine_Speed
(1)  391/    C6F4 : 10 02               			FDB hero_Drill_Speed
(1)  392/    C6F6 : 11 02               			FDB hero_Lava_Res
(1)  411/    C6F8 : 42 61 74 74 65 72   		str_Skill0_title: 	FCB	"Battery Saver",0
(1)  412/    C706 : 42 6F 75 6E 74 79   		str_Skill1_title: 	FCB	"Bounty Hunter",0
(1)  413/    C714 : 46 61 73 74 20 44   		str_Skill2_title: 	FCB	"Fast Digger",0
(1)  414/    C720 : 4C 75 63 6B 79 20   		str_Skill3_title: 	FCB	"Lucky Driller",0
(1)  415/    C72E : 4D 61 73 74 65 72   		str_Skill4_title: 	FCB	"Master Miner",0
(1)  416/    C73B : 4C 75 63 6B 79 20   		str_Skill5_title: 	FCB	"Lucky Crit",0
(1)  417/    C746 : 43 72 69 74 20 4C   		str_Skill6_title: 	FCB	"Crit Lord",0
(1)  418/    C750 : 45 78 70 65 72 69   		str_Skill7_title: 	FCB	"Experienced",0
(1)  419/    C75C : 49 6E 73 74 61 6B   		str_Skill8_title: 	FCB	"Instakill",0
(1)  420/    C766 : 47 68 6F 73 74 00   		str_Skill9_title: 	FCB	"Ghost",0
(1)  421/    C76C : 46 72 65 65 20 4C   		str_Skill10_title: 	FCB	"Free Lunch",0
(1)  422/    C777 : 57 69 73 65 20 52   		str_Skill11_title: 	FCB	"Wise Rewards",0
(1)  423/    C784 : 42 69 67 20 44 69   		str_Skill12_title: 	FCB	"Big Discount",0
(1)  424/    C791 : 4F 6E 6C 79 20 74   		str_Skill13_title: 	FCB	"Only the Best",0
(1)  425/    C79F : 43 72 79 73 74 61   		str_Skill14_title: 	FCB	"Crystalsmith",0
(1)  428/    C7AC : F8 C6               			FDB str_Skill0_title
(1)  429/    C7AE : 06 C7               			FDB str_Skill1_title
(1)  430/    C7B0 : 14 C7               			FDB str_Skill2_title
(1)  431/    C7B2 : 20 C7               			FDB str_Skill3_title
(1)  432/    C7B4 : 2E C7               			FDB str_Skill4_title
(1)  433/    C7B6 : 3B C7               			FDB str_Skill5_title
(1)  434/    C7B8 : 46 C7               			FDB str_Skill6_title
(1)  435/    C7BA : 50 C7               			FDB str_Skill7_title
(1)  436/    C7BC : 5C C7               			FDB str_Skill8_title
(1)  437/    C7BE : 66 C7               			FDB str_Skill9_title
(1)  438/    C7C0 : 6C C7               			FDB str_Skill10_title
(1)  439/    C7C2 : 77 C7               			FDB str_Skill11_title
(1)  440/    C7C4 : 84 C7               			FDB str_Skill12_title
(1)  441/    C7C6 : 91 C7               			FDB str_Skill13_title
(1)  442/    C7C8 : 9F C7               			FDB str_Skill14_title
(1)  444/    C7CA : 32 30 25 20 63 68   		str_Skill0_description: 	FCB "20% chance that*mining won't*consume energy",0
(1)  445/    C7F6 : 31 30 25 20 63 68   		str_Skill1_description: 	FCB "10% chance of*crystal when*you kill an*enemy",0
(1)  446/    C823 : 2D 32 20 4D 69 6E   		str_Skill2_description: 	FCB "-2 Mine and*Drill time",0
(1)  447/    C83A : 32 35 25 20 63 68   		str_Skill3_description: 	FCB "25% chance of*crystal when*mining rock",0
(1)  448/    C861 : 4D 69 6E 65 20 64   		str_Skill4_description: 	FCB "Mine double*crystals",0
(1)  449/    C876 : 2B 32 30 25 20 63   		str_Skill5_description: 	FCB "+20% chance of*critical hit",0
(1)  450/    C892 : 43 72 69 74 20 64   		str_Skill6_description: 	FCB "Crit damage*raised from*150% to 200%",0
(1)  451/    C8B7 : 2B 31 30 25 20 62   		str_Skill7_description: 	FCB "+10% bonus to*experience on*kill",0
(1)  452/    C8D8 : 35 25 20 63 68 61   		str_Skill8_description: 	FCB "5% chance to*kill enemy in*one hit",0
(1)  453/    C8FB : 57 61 6C 6B 20 74   		str_Skill9_description: 	FCB "Walk through*enemies",0
(1)  454/    C910 : 32 30 25 20 63 68   		str_Skill10_description: 	FCB "20% chance that*crafting will*cost nothing",0
(1)  455/    C93B : 2B 35 20 72 61 6E   		str_Skill11_description: 	FCB "+5 random*crystal when*leveling up",0
(1)  456/    C95E : 2D 31 20 74 6F 20   		str_Skill12_description: 	FCB "-1 to cost of*items",0
(1)  457/    C972 : 31 30 25 20 63 68   		str_Skill13_description: 	FCB "10% chance*that crafted*items will be*yellow quality",0
(1)  458/    C9A7 : 50 61 79 20 77 69   		str_Skill14_description: 	FCB "Pay with any*crystal",0
(1)  462/    C9BC : CA C7               			FDB str_Skill0_description
(1)  463/    C9BE : F6 C7               			FDB str_Skill1_description
(1)  464/    C9C0 : 23 C8               			FDB str_Skill2_description
(1)  465/    C9C2 : 3A C8               			FDB str_Skill3_description
(1)  466/    C9C4 : 61 C8               			FDB str_Skill4_description
(1)  467/    C9C6 : 76 C8               			FDB str_Skill5_description
(1)  468/    C9C8 : 92 C8               			FDB str_Skill6_description
(1)  469/    C9CA : B7 C8               			FDB str_Skill7_description
(1)  470/    C9CC : D8 C8               			FDB str_Skill8_description
(1)  471/    C9CE : FB C8               			FDB str_Skill9_description
(1)  472/    C9D0 : 10 C9               			FDB str_Skill10_description
(1)  473/    C9D2 : 3B C9               			FDB str_Skill11_description
(1)  474/    C9D4 : 5E C9               			FDB str_Skill12_description
(1)  475/    C9D6 : 72 C9               			FDB str_Skill13_description
(1)  476/    C9D8 : A7 C9               			FDB str_Skill14_description
(1)    5/    C9DA : 00 00 00 00 00 00   	tile_Ground_0:			FCB [182]0
(1)    6/    CA90 : 00 00 00 00 00 00   	tile_Ground_90:			FCB [186]0	;Needs more memory after rotation!
(1)    7/    CB4A : 00 00 00 00 00 00   	tile_Ground_180:		FCB [182]0
(1)    8/    CC00 : 00 00 00 00 00 00   	tile_Ground_270:		FCB [186]0	;Needs more memory after rotation!
(1)    9/    CCBA : 00 00 00 00 00 00   	tile_Rock:				FCB [182]0
(1)   10/    CD70 : 00 00 00 00 00 00   	tile_Lava:				FCB [182]0
(1)   11/    CE26 : 00 00 00 00 00 00   	tile_Crystal_red:		FCB [554]0
(1)   12/    D050 : 00 00 00 00 00 00   	tile_Crystal_yellow:	FCB [554]0
(1)   13/    D27A : 00 00 00 00 00 00   	tile_Crystal_blue:		FCB [554]0
(1)   14/    D4A4 : 00 00 00 00 00 00   	tile_Robot_left:		FCB [514]0
(1)   15/    D6A6 : 00 00 00 00 00 00   	tile_Robot_right:		FCB [514]0
(1)   16/    D8A8 : 00 00 00 00 00 00   	tile_Menu_item_temp:	FCB [178]0
(1)   17/    D95A : 00 00 00 00 00 00   	tile_Skill_temp:		FCB [75]0
(1)   22/    D9A5 : 10 10 10 40 00 10   		FCB 16,16,16,64,0,16,64,0,16,64,0,16,64,0,5,64,6,65,5,64,0,3,64,3,65,4,66,3,65,3,64,0,2,64,1,65,1,66,1,65,6,66,1,65,1,66,1,65,2,64,0,1,64,1,65,2,66,1,65,6,66,1,65,2,66,1,65,1,64,0,1,65,3,66,1,65
(1)   23/    D9F1 : 06 42 01 41 03 42   		FCB 6,66,1,65,3,66,1,65,0,1,65,2,66,2,65,6,66,2,65,2,66,1,65,0,1,64,2,65,1,64,1,65,6,66,1,65,1,64,2,65,1,64,0,4,64,2,65,4,66,2,65,4,64,0,5,64,6,65,5,64,0,16,64,0,16,64,0,16,64,0
(1)   26/    DA37 : 10 10 10 40 00 03   		FCB 16,16,16,64,0,3,64,1,71,3,72,9,64,0,2,64,3,71,3,72,8,64,0,3,64,1,71,2,64,2,72,8,64,0,7,64,2,72,7,64,0,7,64,2,72,7,64,0,2,64,12,73,2,64,0,1,64,2,73,10,74,2,73,1,64,0,1,64,1,73,12,74,1,73,1,64
(1)   27/    DA83 : 00 01 40 01 49 03   		FCB 0,1,64,1,73,3,74,1,63,1,0,3,74,1,63,1,0,2,74,1,73,1,64,0,1,64,1,73,3,74,2,63,3,74,2,63,2,74,1,73,1,64,0,1,64,1,73,12,74,1,73,1,64,0,1,64,1,73,3,74,1,75,8,74,1,73,1,64,0,1,64,1,73,4,74,5,75,3
(1)   28/    DAD1 : 4A 01 49 01 40 00   		FCB 74,1,73,1,64,0,1,64,2,73,10,74,2,73,1,64,0,2,64,12,73,2,64,0
(1)   31/    DAE9 : 10 10 10 40 00 10   		FCB 16,16,16,64,0,16,64,0,16,64,0,16,64,0,16,64,0,3,64,3,67,3,64,3,67,4,64,0,3,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,4,64,0,3,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,4,64,0,3,64,1,67,1,68,1,67,3,64
(1)   32/    DB35 : 01 43 01 44 01 43   		FCB 1,67,1,68,1,67,4,64,0,3,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,4,64,0,3,64,1,67,2,68,1,67,2,64,1,67,2,68,1,67,3,64,0,3,64,1,67,3,68,1,67,1,64,1,67,3,68,1,67,2,64,0,3,64,5,67,1,64,5,67,2,64,0,16
(1)   33/    DB83 : 40 00 10 40 00 10   		FCB 64,0,16,64,0,16,64,0
(1)   36/    DB8B : 10 10 10 40 00 10   		FCB 16,16,16,64,0,16,64,0,16,64,0,9,64,1,69,6,64,0,8,64,3,69,5,64,0,7,64,1,69,2,70,2,69,4,64,0,6,64,1,69,3,70,1,69,5,64,0,6,64,1,69,2,70,3,69,4,64,0,5,64,8,69,3,64,0,4,64,3,69,3,64,4,69,2,64,0,3
(1)   37/    DBD8 : 40 02 46 01 45 05   		FCB 64,2,70,1,69,5,64,3,69,2,64,0,3,64,2,70,7,64,1,69,3,64,0,16,64,0,16,64,0,16,64,0,16,64,0
(1)   40/    DBFB : 10 10 10 40 00 10   		FCB 16,16,16,64,0,16,64,0,16,64,0,9,64,2,76,5,64,0,8,64,2,76,6,64,0,8,64,2,76,2,64,1,76,3,64,0,7,64,6,76,3,64,0,6,64,6,76,4,64,0,5,64,5,76,6,64,0,4,64,5,76,7,64,0,3,64,5,76,8,64,0,3,64,4,76,9,64
(1)   41/    DC48 : 00 04 40 02 4C 0A   		FCB 0,4,64,2,76,10,64,0,16,64,0,16,64,0,16,64,0
(1)   44/    DC59 : 20 20 20 40 00 12   		FCB 32,32,32,64,0,18,64,3,72,1,71,10,64,0,17,64,3,72,3,71,9,64,0,17,64,2,72,2,64,1,71,10,64,0,16,64,2,72,14,64,0,16,64,2,72,14,64,0,11,64,12,73,9,64,0,10,64,2,73,10,74,2,73,8,64,0,10,64,1,73,12
(1)   45/    DCA0 : 4A 01 49 08 40 00   		FCB 74,1,73,8,64,0,10,64,1,73,2,74,1,0,1,63,3,74,1,0,1,63,3,74,1,73,8,64,0,10,64,1,73,2,74,2,63,3,74,2,63,3,74,1,73,8,64,0,10,64,1,73,12,74,1,73,8,64,0,10,64,1,73,8,74,1,75,3,74,1,73,8,64,0,10,64
(1)   46/    DCEC : 01 49 03 4A 05 4B   		FCB 1,73,3,74,5,75,4,74,1,73,8,64,0,6,64,1,69,3,64,2,73,10,74,2,73,8,64,0,5,64,3,69,3,64,12,73,5,64,2,76,2,64,0,4,64,1,69,2,70,2,69,3,64,10,65,5,64,2,76,3,64,0,3,64,1,69,3,70,1,69,1,64,4,65,8,66
(1)   47/    DD38 : 04 41 02 40 02 4C   		FCB 4,65,2,64,2,76,2,64,1,76,0,3,64,1,69,2,70,2,69,1,65,2,66,1,65,10,66,1,65,2,66,1,65,6,76,0,2,64,5,69,1,65,3,66,1,65,10,66,1,65,3,66,1,65,4,76,1,64,0,1,64,3,69,2,64,1,65,3,66,2,65,10,66,2,65,3
(1)   48/    DD84 : 42 01 41 01 4C 03   		FCB 66,1,65,1,76,3,64,0,2,70,1,69,3,64,1,65,2,66,1,65,1,64,1,65,10,66,1,65,1,64,1,65,2,66,1,65,4,64,0,2,70,5,64,2,65,1,69,1,64,2,65,8,66,2,65,1,64,1,76,2,65,5,64,0,12,64,10,65,1,64,3,76,6,64,0,13
(1)   49/    DDD0 : 40 03 43 03 40 03   		FCB 64,3,67,3,64,3,67,1,64,2,76,7,64,0,13,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,10,64,0,13,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,10,64,0,13,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,10,64,0,13,64,1
(1)   50/    DE1A : 43 01 44 01 43 03   		FCB 67,1,68,1,67,3,64,1,67,1,68,1,67,10,64,0,12,64,1,67,2,68,1,67,2,64,1,67,2,68,1,67,10,64,0,11,64,1,67,3,68,1,67,1,64,1,67,3,68,1,67,10,64,0,11,64,5,67,1,64,5,67,10,64,0
(1)   53/    DE5B : 20 20 20 40 00 0C   		FCB 32,32,32,64,0,12,64,1,71,3,72,16,64,0,11,64,3,71,3,72,15,64,0,12,64,1,71,2,64,2,72,15,64,0,16,64,2,72,14,64,0,16,64,2,72,14,64,0,11,64,12,73,9,64,0,10,64,2,73,10,74,2,73,8,64,0,10,64,1,73,12
(1)   54/    DEA2 : 4A 01 49 08 40 00   		FCB 74,1,73,8,64,0,10,64,1,73,3,74,1,63,1,0,3,74,1,63,1,0,2,74,1,73,8,64,0,10,64,1,73,3,74,2,63,3,74,2,63,2,74,1,73,8,64,0,10,64,1,73,12,74,1,73,8,64,0,10,64,1,73,3,74,1,75,8,74,1,73,8,64,0,10,64
(1)   55/    DEEE : 01 49 04 4A 05 4B   		FCB 1,73,4,74,5,75,3,74,1,73,8,64,0,6,64,1,69,3,64,2,73,10,74,2,73,8,64,0,5,64,3,69,3,64,12,73,5,64,2,76,2,64,0,4,64,1,69,2,70,2,69,3,64,10,65,5,64,2,76,3,64,0,3,64,1,69,3,70,1,69,1,64,4,65,8,66
(1)   56/    DF3A : 04 41 02 40 02 4C   		FCB 4,65,2,64,2,76,2,64,1,76,0,3,64,1,69,2,70,2,69,1,65,2,66,1,65,10,66,1,65,2,66,1,65,6,76,0,2,64,5,69,1,65,3,66,1,65,10,66,1,65,3,66,1,65,4,76,1,64,0,1,64,3,69,2,64,1,65,3,66,2,65,10,66,2,65,3
(1)   57/    DF86 : 42 01 41 01 4C 03   		FCB 66,1,65,1,76,3,64,0,2,70,1,69,3,64,1,65,2,66,1,65,1,64,1,65,10,66,1,65,1,64,1,65,2,66,1,65,4,64,0,2,70,5,64,2,65,1,69,1,64,2,65,8,66,2,65,1,64,1,76,2,65,5,64,0,12,64,10,65,1,64,3,76,6,64,0,12
(1)   58/    DFD2 : 40 03 43 03 40 03   		FCB 64,3,67,3,64,3,67,2,64,2,76,7,64,0,12,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,11,64,0,12,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,11,64,0,12,64,1,67,1,68,1,67,3,64,1,67,1,68,1,67,11,64,0,12,64,1
(1)   59/    E01C : 43 01 44 01 43 03   		FCB 67,1,68,1,67,3,64,1,67,1,68,1,67,11,64,0,12,64,1,67,2,68,1,67,2,64,1,67,2,68,1,67,10,64,0,12,64,1,67,3,68,1,67,1,64,1,67,3,68,1,67,9,64,0,12,64,5,67,1,64,5,67,9,64,0
(1)   62/    E05D : 20 20 20 40 00 0B   		FCB 32,32,32,64,0,11,64,1,77,20,64,0,10,64,1,77,1,78,1,77,7,64,1,77,11,64,0,10,64,1,77,2,78,1,77,6,64,1,77,11,64,0,9,64,1,77,4,78,1,77,4,64,2,77,11,64,0,8,64,1,77,6,78,1,77,3,64,1,77,1,79,1,77,10
(1)   63/    E0A7 : 40 00 08 40 01 4D   		FCB 64,0,8,64,1,77,6,78,1,77,2,64,1,77,2,79,1,77,10,64,0,8,64,1,77,6,78,1,77,2,64,1,77,2,79,1,77,10,64,0,8,64,1,77,6,78,1,77,1,64,1,77,3,79,1,77,10,64,0,9,64,1,77,5,78,1,77,1,64,1,77,3,79,1,77,10
(1)   64/    E0F3 : 40 00 09 40 01 4D   		FCB 64,0,9,64,1,77,5,78,2,77,4,79,1,77,3,64,1,77,6,64,0,9,64,1,77,6,78,1,77,5,79,1,77,1,64,1,77,1,78,2,77,4,64,0,3,64,3,77,3,64,1,77,6,78,1,77,5,79,2,77,4,78,1,77,3,64,0,3,64,1,77,2,79,1,77,2,64
(1)   65/    E140 : 01 4D 06 4E 01 4D   		FCB 1,77,6,78,1,77,4,79,2,77,5,78,1,77,3,64,0,4,64,1,77,1,79,2,77,1,64,1,77,6,78,1,77,3,79,1,77,7,78,1,77,3,64,0,4,64,1,77,3,79,1,77,1,64,1,77,5,78,1,77,1,79,2,77,7,78,1,77,4,64,0,5,64,1,77,3,79
(1)   66/    E18D : 02 4D 05 4E 02 4D   		FCB 2,77,5,78,2,77,9,78,1,77,4,64,0,5,64,1,77,4,79,1,77,5,78,1,77,10,78,1,77,4,64,0,6,64,1,77,3,79,1,77,5,78,1,77,9,78,1,77,5,64,0,6,64,1,77,3,79,1,77,6,78,1,77,7,78,1,77,6,64,0,7,64,1,77,2,79,1
(1)   67/    E1DA : 4D 06 4E 01 4D 06   		FCB 77,6,78,1,77,6,78,1,77,7,64,0,7,64,1,77,3,79,1,77,5,78,1,77,5,78,1,77,8,64,0,8,64,1,77,2,79,4,77,2,78,1,77,4,78,1,77,9,64,0,8,64,1,77,2,79,1,77,2,80,1,77,2,78,3,77,1,78,2,77,9,64,0,7,64,4,77
(1)   68/    E227 : 03 50 04 4D 01 50   		FCB 3,80,4,77,1,80,5,77,8,64,0,6,64,1,77,8,80,2,77,6,80,2,77,7,64,0,5,64,1,77,6,80,1,81,8,80,1,81,2,80,2,77,6,64,0,5,64,1,77,1,80,1,82,17,80,1,77,6,64,0,5,64,1,77,10,80,1,82,8,80,1,77,6,64,0,5,64
(1)   69/    E274 : 08 4D 06 50 07 4D   		FCB 8,77,6,80,7,77,6,64,0,12,64,7,77,13,64,0,32,64,0
(1)   72/    E287 : 20 20 20 53 00 0F   		FCB 32,32,32,83,0,15,83,1,84,16,83,0,2,83,1,85,29,83,0,32,83,0,23,83,1,85,8,83,0,32,83,0,5,83,1,84,26,83,0,31,83,1,84,0,11,83,1,85,20,83,0,32,83,0,32,83,0,23,83,1,84,8,83,0,17,83,1,85,14
(1)   73/    E2CC : 53 00 03 53 01 55   		FCB 83,0,3,83,1,85,28,83,0,25,83,1,85,6,83,0,29,83,1,85,2,83,0,32,83,0,10,83,1,84,21,83,0,32,83,0,32,83,0,13,83,1,85,12,83,1,84,5,83,0,19,83,1,84,12,83,0,32,83,0,1,85,31,83,0,4,83,1,84,27,83
(1)   74/    E313 : 00 16 53 01 55 09   		FCB 0,22,83,1,85,9,83,0,12,83,1,84,15,83,1,85,3,83,0,32,83,0,32,83,0,32,83,0,21,83,1,84,10,83,0,3,83,1,85,28,83,0
(1)   79/    E33D : 20 20 20 40 00 20   		FCB 32,32,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,9,64,14,0,9,64,0,9,64,14,0,9,64,0,9,64,2,0,4,3,2,0,4,3,2,0,9,64,0,9,64,2,0,4,3,2,0,4,3,2,0,9,64,0,9,64,14,0,9,64,0,9,64,5,0,4,3,5,0,9,64,0,9,64,4
(1)   80/    E38F : 00 01 03 04 00 01   		FCB 0,1,3,4,0,1,3,4,0,9,64,0,9,64,14,0,9,64,0,6,64,20,0,6,64,0,5,64,2,0,2,3,1,0,12,21,1,0,2,3,2,0,5,64,0,4,64,3,0,3,3,2,0,8,21,2,0,3,3,3,0,4,64,0,3,64,5,0,4,3,2,0,4,21,2,0,4,3,5,0,3,64,0,2,64,5,0
(1)   81/    E3E6 : 01 15 02 00 04 03   		FCB 1,21,2,0,4,3,4,0,4,3,2,0,1,21,5,0,2,64,0,1,64,6,0,3,21,1,0,10,3,1,0,3,21,6,0,1,64,0,1,64,6,0,3,21,1,0,10,3,1,0,3,21,6,0,1,64,0,1,64,4,0,1,64,1,0,1,21,2,0,4,3,4,0,4,3,2,0,1,21,1,0,1,64,4,0,1,64
(1)   82/    E43D : 00 01 40 03 00 02   		FCB 0,1,64,3,0,2,64,2,0,4,3,2,0,4,21,2,0,4,3,2,0,2,64,3,0,1,64,0,1,64,2,0,3,64,1,0,3,3,2,0,8,21,2,0,3,3,1,0,3,64,2,0,1,64,0,6,64,1,0,2,3,1,0,12,21,1,0,2,3,1,0,6,64,0,6,64,20,0,6,64,0,8,64,7,0,2,64
(1)   83/    E494 : 07 00 08 40 00 08   		FCB 7,0,8,64,0,8,64,7,0,2,64,7,0,8,64,0,8,64,7,0,2,64,7,0,8,64,0,8,64,7,0,2,64,7,0,8,64,0,8,64,7,0,2,64,7,0,8,64,0,8,64,7,0,2,64,7,0,8,64,0,8,64,7,0,2,64,7,0,8,64,0
(1)   86/    E4DB : 20 20 20 40 00 20   		FCB 32,32,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,9,64,12,0,11,64,0,9,64,1,0,2,42,1,0,1,21,7,0,11,64,0,2,64,8,0,3,42,6,0,1,42,1,0,11,64,0
(1)   87/    E526 : 02 40 09 00 01 2A   		FCB 2,64,9,0,1,42,6,0,1,42,10,0,3,64,0,2,64,8,0,1,21,6,0,1,42,1,0,1,21,9,0,3,64,0,2,64,8,0,1,21,5,0,2,42,1,0,1,21,5,0,1,42,1,0,1,42,1,0,3,64,0,2,64,8,0,2,21,1,0,4,42,1,0,2,21,6,0,1,42,2,0,3,64
(1)   88/    E579 : 00 02 40 08 00 02   		FCB 0,2,64,8,0,2,21,1,0,4,42,1,0,2,21,2,0,1,42,2,0,1,42,1,0,1,42,1,0,3,64,0,2,64,8,0,3,21,1,0,2,42,1,0,3,21,3,0,1,42,5,0,3,64,0,9,64,1,0,3,21,1,0,2,42,1,0,3,21,3,0,1,42,5,0,3,64,0,9,64,1,0,3,21
(1)   89/    E5CD : 01 00 02 2A 01 00   		FCB 1,0,2,42,1,0,3,21,3,0,1,42,5,0,3,64,0,2,64,8,0,3,21,1,0,2,42,1,0,3,21,3,0,1,42,1,0,1,42,1,0,1,42,1,0,3,64,0,2,64,8,0,2,21,1,0,4,42,1,0,2,21,2,0,1,42,3,0,1,42,2,0,3,64,0,2,64,8,0,2,21,1,0,4
(1)   90/    E621 : 2A 01 00 02 15 05   		FCB 42,1,0,2,21,5,0,1,42,1,0,1,42,1,0,3,64,0,2,64,8,0,1,21,5,0,2,42,1,0,1,21,9,0,3,64,0,2,64,8,0,1,21,6,0,1,42,1,0,1,21,9,0,3,64,0,2,64,9,0,1,42,6,0,1,42,10,0,3,64,0,2,64,8,0,3,42,6,0,1,42,1,0
(1)   91/    E674 : 0B 40 00 09 40 01   		FCB 11,64,0,9,64,1,0,2,42,1,0,1,21,7,0,11,64,0,9,64,12,0,11,64,0
(1)   94/    E68D : 10 10 10 00 00 01   		FCB 16,16,16,0,0,1,0,15,8,0,1,0,1,8,13,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0
(1)   95/    E6E7 : 0B 04 01 00 01 08   		FCB 11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,1,0,11,4,1,0,1,8,0,1,0,1,8,13,0,1,8,0,1,0,15,8,0
(1)   98/    E73D : 20 20 20 40 00 20   		FCB 32,32,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,32,64,0,11,64,4,0
(1)   99/    E785 : 11 40 00 0B 40 01   		FCB 17,64,0,11,64,1,0,2,33,1,0,2,64,3,0,1,64,2,0,9,64,0,7,64,4,0,3,33,4,0,1,33,5,0,8,64,0,6,64,1,0,8,33,2,0,6,33,2,0,7,64,0,5,64,1,0,6,33,1,2,8,33,1,2,2,33,2,0,6,64,0,5,64,1,0,1,33,1,32,17,33,1,0
(1)  100/    E7D8 : 06 40 00 05 40 01   		FCB 6,64,0,5,64,1,0,10,33,1,32,8,33,1,0,6,64,0,5,64,8,0,6,33,7,0,6,64,0,12,64,7,0,13,64,0,32,64,0
(1)  105/    E7FF : 20 20 00 00 00 00   		FCB 32,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,240,15,240,15,240,15,240,12,0,0,48,12,0,0,48,12,0,0,48,12,0,0,48,12,0,0,48,12,0,0,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
(1)  106/    E850 : 00 00 0C 00 00 30   		FCB 0,0,12,0,0,48,12,0,0,48,12,0,0,48,12,0,0,48,12,0,0,48,12,0,0,48,15,240,15,240,15,240,15,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
(1)  109/    E882 : 11 11 00 07 F0 00   		FCB 17,17,0,7,240,0,7,240,0,63,254,0,63,254,0,63,254,0,255,255,128,255,255,128,255,255,128,255,255,128,255,255,128,255,255,128,255,255,128,63,254,0,63,254,0,63,254,0,7,240,0,7,240,0
(1)  112/    E8B8 : 18 18 00 00 FF 00   		FCB 24,24,0,0,255,0,0,255,0,63,255,252,63,255,252,63,255,252,63,255,252,63,255,252,63,255,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
(1)  113/    E8E9 : FF FF 3F FF FC 3F   		FCB 255,255,63,255,252,63,255,252,63,255,252,63,255,252,63,255,252,63,255,252,0,255,0,0,255,0
(1)  116/    E903 : 20 20 00 7F FF 00   		FCB 32,32,0,127,255,0,0,63,255,0,1,31,255,0,3,15,255,0,7,7,255,0,15,3,255,0,31,1,255,0,63,0,255,0,127,0,127,0,255,0,63,1,255,0,31,3,255,0,15,7,255,0,7,15,255,0,3,31,255,0,1,63,255,0,0,127,255
(1)  117/    E946 : FF FE 00 00 FF FC   		FCB 255,254,0,0,255,252,128,0,255,248,192,0,255,240,224,0,255,224,240,0,255,192,248,0,255,128,252,0,255,0,254,0,254,0,255,0,252,0,255,128,248,0,255,192,240,0,255,224,224,0,255,240,192,0,255
(1)  118/    E97D : F8 80 00 FF FC 00   		FCB 248,128,0,255,252,0,0,255,254
(1)  121/    E986 : 10 10 01 7F FE C0   		FCB 16,16,1,127,254,192,3,128,1,131,193,131,193,131,193,159,249,159,249,159,249,159,249,131,193,131,193,131,193,128,1,192,3,127,254
(1)  124/    E9A9 : 10 10 01 7F FE C0   		FCB 16,16,1,127,254,192,3,128,1,131,193,131,193,131,193,159,249,159,249,159,249,159,249,131,193,131,193,131,193,128,1,192,3,127,254
(1)  127/    E9CC : 10 10 01 7F FE C0   		FCB 16,16,1,127,254,192,3,128,1,162,121,162,69,162,69,162,69,190,121,162,65,162,65,162,65,162,65,162,65,128,1,192,3,127,254
(1)  130/    E9EF : 10 10 01 7F FE C0   		FCB 16,16,1,127,254,192,3,128,1,135,193,132,33,132,33,132,33,135,193,132,33,132,33,132,33,132,33,135,193,128,1,192,3,127,254
(1)  133/    EA12 : 10 10 01 7F FE C0   		FCB 16,16,1,127,254,192,3,128,1,186,185,162,165,162,165,162,165,185,57,162,161,162,161,162,161,162,161,186,161,128,1,192,3,127,254
(1)  136/    EA35 : 10 10 01 7F FE C0   		FCB 16,16,1,127,254,192,3,128,1,135,129,132,193,132,97,132,33,132,33,132,33,132,33,132,97,132,193,135,129,128,1,192,3,127,254
(1)  139/    EA58 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,0,3,128,0,1,135,231,225,132,36,33,132,36,33,159,255,249,144,0,9,144,0,137,144,0,137,151,195,233,144,0,137,144,0,137,144,0,9,144,0,9,144,0,9,144,0,9,159,255
(1)  140/    EA93 : F9 80 00 01 80 00   		FCB 249,128,0,1,128,0,1,192,0,3,96,0,6,63,255,252
(1)  143/    EAA3 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,199,192,3,136,32,1,144,16,1,170,168,1,164,72,1,170,168,1,160,8,1,159,240,129,149,81,193,159,243,65,149,82,97,143,226,61,128,6,101,128,60,205,128,39,137,128,19,25
(1)  144/    EADC : 80 09 91 80 0F F1   		FCB 128,9,145,128,15,241,128,8,17,192,15,243,96,0,6,63,255,252
(1)  147/    EAEE : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,0,3,128,126,1,128,66,1,128,66,1,128,66,1,128,66,1,135,255,225,132,198,33,132,49,161,131,140,65,130,99,65,129,24,129,129,198,129,128,177,1,128,141,1,128,98,1
(1)  148/    EB27 : 80 5A 01 80 24 01   		FCB 128,90,1,128,36,1,128,24,1,192,0,3,96,0,6,63,255,252
(1)  151/    EB39 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,193,224,3,143,240,1,159,240,1,158,216,1,191,248,1,191,248,1,183,240,1,191,224,129,158,193,193,135,131,65,128,2,97,128,2,61,128,6,101,128,60,205,128,39,137,128,19
(1)  152/    EB71 : 19 80 09 91 80 0F   		FCB 25,128,9,145,128,15,241,128,8,17,192,15,243,96,0,6,63,255,252
(1)  155/    EB84 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,128,6,193,192,3,131,64,1,130,96,1,130,60,1,134,100,1,188,204,1,167,136,1,147,24,129,137,145,193,143,243,65,136,18,97,143,242,61,128,6,101,128,60,205,128,39,137,128
(1)  156/    EBBB : 13 19 80 09 91 80   		FCB 19,25,128,9,145,128,15,241,128,8,17,192,15,243,96,0,6,63,255,252
(1)  159/    EBCF : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,124,3,128,130,1,129,1,1,130,170,129,130,68,129,130,170,129,130,0,129,129,255,1,129,85,1,129,255,1,129,85,1,128,254,1,128,0,1,158,247,17,130,149,33,158,151,65
(1)  160/    EC08 : 90 90 B9 90 91 29   		FCB 144,144,185,144,145,41,158,242,57,192,0,3,96,0,6,63,255,252
(1)  163/    EC1A : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,0,3,128,0,1,128,63,225,128,16,33,128,8,33,128,20,33,128,62,33,128,65,33,128,240,161,129,15,97,131,130,33,132,100,1,140,24,1,146,16,1,161,32,1,152,192,1,134
(1)  164/    EC54 : 80 01 81 00 01 80   		FCB 128,1,129,0,1,128,0,1,192,0,3,96,0,6,63,255,252
(1)  167/    EC65 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,193,0,131,130,129,65,132,66,33,136,60,17,147,129,201,164,66,37,168,36,21,169,36,149,164,66,37,163,129,197,160,16,5,160,36,5,160,72,5,144,82,9,136,100,17,132,24
(1)  168/    EC9D : 21 82 00 41 81 FF   		FCB 33,130,0,65,129,255,129,128,0,1,192,0,3,96,0,6,63,255,252
(1)  171/    ECB0 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,0,3,128,0,1,128,0,1,128,3,225,179,4,17,136,136,9,128,21,85,190,210,37,128,21,85,136,16,5,177,15,249,134,10,169,128,15,249,128,10,169,128,7,241,128,0,1,128,0
(1)  172/    ECEB : 01 80 00 01 80 00   		FCB 1,128,0,1,128,0,1,192,0,3,96,0,6,63,255,252
(1)  175/    ECFB : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,112,3,188,136,1,129,4,1,129,4,1,189,4,1,128,136,33,142,112,17,137,224,9,136,99,253,136,80,9,136,145,17,128,137,33,189,10,1,129,132,1,129,96,1,162,24,1,146,16
(1)  176/    ED36 : 01 8C 20 01 80 40   		FCB 1,140,32,1,128,64,1,192,128,3,96,0,6,63,255,252
(1)  179/    ED46 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,126,3,129,129,129,130,0,65,132,8,33,140,28,17,146,52,9,145,38,9,160,227,197,160,102,69,163,220,197,162,120,133,161,53,133,160,155,5,144,255,137,144,129,73
(1)  180/    ED7C : 88 FF 31 84 00 21   		FCB 136,255,49,132,0,33,130,0,65,129,129,129,192,126,3,96,0,6,63,255,252
(1)  183/    ED91 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,194,0,3,133,0,1,136,128,1,144,64,1,191,224,1,136,128,1,136,128,1,136,128,129,136,129,193,136,131,65,143,130,97,128,2,61,128,6,101,128,60,205,128,39,137,128,19
(1)  184/    EDC9 : 19 80 09 91 80 0F   		FCB 25,128,9,145,128,15,241,128,8,17,192,15,243,96,0,6,63,255,252
(1)  187/    EDDC : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,0,3,128,64,1,128,192,1,129,64,1,156,64,1,128,64,1,128,64,1,129,240,129,128,1,193,128,3,65,128,2,97,128,2,61,128,6,101,128,60,205,128,39,137,128,19,25,128,9
(1)  188/    EE17 : 91 80 0F F1 80 08   		FCB 145,128,15,241,128,8,17,192,15,243,96,0,6,63,255,252
(1)  191/    EE27 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,8,3,128,20,1,128,34,1,128,65,1,128,255,129,128,34,1,128,34,1,128,34,1,128,62,1,128,0,1,128,126,1,129,195,129,130,129,65,132,129,33,136,129,17,137,129,145,134
(1)  192/    EE61 : 81 61 80 C3 01 80   		FCB 129,97,128,195,1,128,126,1,192,0,3,96,0,6,63,255,252
(1)  195/    EE72 : 18 18 02 3F FF FC   		FCB 24,24,2,63,255,252,96,0,6,192,2,3,132,2,9,130,2,17,129,8,33,128,156,65,128,52,1,176,38,1,140,35,197,128,102,89,131,204,193,130,120,129,129,49,129,128,153,1,130,255,33,132,129,17,136,255,9
(1)  196/    EEAB : 90 00 05 80 82 01   		FCB 144,0,5,128,130,1,128,130,1,193,1,3,96,0,6,63,255,252
(1)  200/    EEBD :                     	tiles:
(1)  202/    EEBD : DA C9               		FDB tile_Ground_0
(1)  203/    EEBF : 90 CA               		FDB tile_Ground_90
(1)  204/    EEC1 : 4A CB               		FDB tile_Ground_180
(1)  205/    EEC3 : 00 CC               		FDB tile_Ground_270
(1)  206/    EEC5 : BA CC               		FDB tile_Rock
(1)  207/    EEC7 : 70 CD               		FDB tile_Lava
(1)  208/    EEC9 : 26 CE               		FDB tile_Crystal_red
(1)  209/    EECB : 50 D0               		FDB tile_Crystal_yellow
(1)  210/    EECD : 7A D2               		FDB tile_Crystal_blue
(1)  211/    EECF : A4 D4               		FDB tile_Robot_left
(1)  212/    EED1 : A6 D6               		FDB tile_Robot_right
(1)  213/    EED3 : A8 D8               		FDB tile_Menu_item_temp
(1)  214/    EED5 : 5A D9               		FDB tile_Skill_temp
(1)  217/    EED7 : 37 DA               		FDB tile_Menu_head 
(1)  218/    EED9 : A5 D9               		FDB tile_Menu_body 
(1)  219/    EEDB : E9 DA               		FDB tile_Menu_legs 
(1)  220/    EEDD : 8B DB               		FDB tile_Menu_gun 
(1)  221/    EEDF : FB DB               		FDB tile_Menu_tool 
(1)  222/    EEE1 : 59 DC               		FDB tile_Robot_left_raw 
(1)  223/    EEE3 : 5B DE               		FDB tile_Robot_right_raw 
(1)  224/    EEE5 : 5D E0               		FDB tile_Crystal_raw 
(1)  225/    EEE7 : 87 E2               		FDB tile_Ground_raw 
(1)  228/    EEE9 : 3D E3               		FDB tile_Monster 
(1)  229/    EEEB : DB E4               		FDB tile_Monster_dead 
(1)  230/    EEED : 8D E6               		FDB tile_Menu_item_slot 
(1)  231/    EEEF : 3D E7               		FDB tile_Crystal_base 
(1)  234/    EEF1 : FF E7               		FDB tile_Hero_target 
(1)  235/    EEF3 : 82 E8               		FDB tile_Menu_item_selector 
(1)  236/    EEF5 : B8 E8               		FDB tile_Menu_skill_selector 
(1)  237/    EEF7 : 03 E9               		FDB tile_Exit 
(1)  238/    EEF9 : 86 E9               		FDB tile_Res_HP_Heal 
(1)  239/    EEFB : CC E9               		FDB tile_Res_HP_Upgrade 
(1)  240/    EEFD : A9 E9               		FDB tile_Res_Batt_Heal 
(1)  241/    EEFF : EF E9               		FDB tile_Res_Batt_Upgrade 
(1)  242/    EF01 : 12 EA               		FDB tile_Res_Exp_Upgrade 
(1)  243/    EF03 : 35 EA               		FDB tile_Res_Dmg_Upgrade 
(1)  244/    EF05 : 58 EA               		FDB tile_Skill0 
(1)  245/    EF07 : A3 EA               		FDB tile_Skill1 
(1)  246/    EF09 : EE EA               		FDB tile_Skill2 
(1)  247/    EF0B : 39 EB               		FDB tile_Skill3 
(1)  248/    EF0D : 84 EB               		FDB tile_Skill4 
(1)  249/    EF0F : CF EB               		FDB tile_Skill5 
(1)  250/    EF11 : 1A EC               		FDB tile_Skill6 
(1)  251/    EF13 : 65 EC               		FDB tile_Skill7 
(1)  252/    EF15 : B0 EC               		FDB tile_Skill8 
(1)  253/    EF17 : FB EC               		FDB tile_Skill9 
(1)  254/    EF19 : 46 ED               		FDB tile_Skill10 
(1)  255/    EF1B : 91 ED               		FDB tile_Skill11 
(1)  256/    EF1D : DC ED               		FDB tile_Skill12 
(1)  257/    EF1F : 27 EE               		FDB tile_Skill13 
(1)  258/    EF21 : 72 EE               		FDB tile_Skill14 
(1)    2/    EF23 : 00 05 49 15 4A 2A   	color_Basic_Head: 		FCB head,5,73,21,74,42,72,42,71,12,75,63
(1)    3/    EF2F : 00 05 49 15 4A 3A   	color_Head_MKII: 		FCB head,5,73,21,74,58,72,58,71,48,75,63
(1)    4/    EF3B : 00 05 49 15 4A 35   	color_Head_MKIII: 		FCB head,5,73,21,74,53,72,53,71,15,75,63
(1)    5/    EF47 : 00 05 49 15 4A 20   	color_Head_MKIV: 		FCB head,5,73,21,74,32,72,32,71,50,75,63
(1)    6/    EF53 : 00 05 49 30 4A 3F   	color_Lightning: 		FCB head,5,73,48,74,63,72,63,71,48,75,3
(1)    7/    EF5F : 01 02 41 15 42 2A   	color_Basic_Body: 		FCB body,2,65,21,66,42
(1)    8/    EF65 : 01 02 41 15 42 2B   	color_Tin_Body: 		FCB body,2,65,21,66,43
(1)    9/    EF6B : 01 02 41 15 42 17   	color_Iron_Body: 		FCB body,2,65,21,66,23
(1)   10/    EF71 : 01 02 41 15 42 02   	color_Steel_Body: 		FCB body,2,65,21,66,2
(1)   11/    EF77 : 01 02 41 03 42 3F   	color_Fortress: 		FCB body,2,65,3,66,63
(1)   12/    EF7D : 02 02 43 15 44 2A   	color_Basic_Legs: 		FCB legs,2,67,21,68,42
(1)   13/    EF83 : 02 02 43 15 44 2E   	color_Fast_Legs: 		FCB legs,2,67,21,68,46
(1)   14/    EF89 : 02 02 43 15 44 1D   	color_Quick_Legs: 		FCB legs,2,67,21,68,29
(1)   15/    EF8F : 02 02 43 15 44 08   	color_Agile_Legs: 		FCB legs,2,67,21,68,8
(1)   16/    EF95 : 02 02 43 0C 44 3F   	color_Mustang: 			FCB legs,2,67,12,68,63
(1)   17/    EF9B : 03 02 45 15 46 2A   	color_Basic_Gun: 		FCB gun,2,69,21,70,42
(1)   18/    EFA1 : 03 02 45 15 46 3B   	color_Blaster: 			FCB gun,2,69,21,70,59
(1)   19/    EFA7 : 03 02 45 15 46 37   	color_Laser: 			FCB gun,2,69,21,70,55
(1)   20/    EFAD : 03 02 45 15 46 22   	color_Phaser: 			FCB gun,2,69,21,70,34
(1)   21/    EFB3 : 03 02 45 32 46 3F   	color_Death_Ray: 		FCB gun,2,69,50,70,63
(1)   22/    EFB9 : 04 01 4C 2A         	color_Basic_Tool: 		FCB tool,1,76,42
(1)   23/    EFBD : 04 01 4C 2F         	color_Rock_Pick: 		FCB tool,1,76,47
(1)   24/    EFC1 : 04 01 4C 1F         	color_Rock_Drill: 		FCB tool,1,76,31
(1)   25/    EFC5 : 04 01 4C 0A         	color_Rock_Borer: 		FCB tool,1,76,10
(1)   26/    EFC9 : 04 01 4C 0F         	color_Laser_Bit: 		FCB tool,1,76,15
(1)   27/    EFCD : 05 03 53 3B 54 20   	color_Ground_0: 		FCB ground,3,83,59,84,32,85,2
(1)   28/    EFD5 : 05 03 53 3B 54 02   	color_Ground_90: 		FCB ground,3,83,59,84,2,85,8
(1)   29/    EFDD : 05 03 53 3B 54 08   	color_Ground_180: 		FCB ground,3,83,59,84,8,85,10
(1)   30/    EFE5 : 05 03 53 3B 54 0A   	color_Ground_270: 		FCB ground,3,83,59,84,10,85,32
(1)   31/    EFED : 05 03 53 21 54 32   	color_Rock:				FCB ground,3,83,33,84,50,85,32
(1)   32/    EFF5 : 05 03 53 0B 54 02   	color_Lava: 			FCB ground,3,83,11,84,2,85,15
(1)   33/    EFFD : 06 05 50 21 52 20   	color_Crystal_red: 		FCB crystal,5,80,33,82,32,81,2,78,23,79,43
(1)   34/    F009 : 06 05 50 21 52 20   	color_Crystal_yellow:	FCB crystal,5,80,33,82,32,81,2,78,31,79,47
(1)   35/    F015 : 06 05 50 21 52 20   	color_Crystal_blue:		FCB crystal,5,80,33,82,32,81,2,78,53,79,58
(1)   39/    F021 : 23 EF               		FDB color_Basic_Head
(1)   40/    F023 : 2F EF               		FDB color_Head_MKII
(1)   41/    F025 : 3B EF               		FDB color_Head_MKIII
(1)   42/    F027 : 47 EF               		FDB color_Head_MKIV
(1)   43/    F029 : 53 EF               		FDB color_Lightning
(1)   44/    F02B : 5F EF               		FDB color_Basic_Body
(1)   45/    F02D : 65 EF               		FDB color_Tin_Body
(1)   46/    F02F : 6B EF               		FDB color_Iron_Body
(1)   47/    F031 : 71 EF               		FDB color_Steel_Body
(1)   48/    F033 : 77 EF               		FDB color_Fortress
(1)   49/    F035 : 7D EF               		FDB color_Basic_Legs
(1)   50/    F037 : 83 EF               		FDB color_Fast_Legs
(1)   51/    F039 : 89 EF               		FDB color_Quick_Legs
(1)   52/    F03B : 8F EF               		FDB color_Agile_Legs
(1)   53/    F03D : 95 EF               		FDB color_Mustang
(1)   54/    F03F : 9B EF               		FDB color_Basic_Gun
(1)   55/    F041 : A1 EF               		FDB color_Blaster
(1)   56/    F043 : A7 EF               		FDB color_Laser
(1)   57/    F045 : AD EF               		FDB color_Phaser
(1)   58/    F047 : B3 EF               		FDB color_Death_Ray
(1)   59/    F049 : B9 EF               		FDB color_Basic_Tool
(1)   60/    F04B : BD EF               		FDB color_Rock_Pick
(1)   61/    F04D : C1 EF               		FDB color_Rock_Drill
(1)   62/    F04F : C5 EF               		FDB color_Rock_Borer
(1)   63/    F051 : C9 EF               		FDB color_Laser_Bit
(1)   66/    F053 : CD EF               		FDB color_Ground_0
(1)   67/    F055 : D5 EF               		FDB color_Ground_90
(1)   68/    F057 : DD EF               		FDB color_Ground_180
(1)   69/    F059 : E5 EF               		FDB color_Ground_270
(1)   70/    F05B : ED EF               		FDB color_Rock
(1)   71/    F05D : F5 EF               		FDB color_Lava
(1)   72/    F05F : FD EF               		FDB color_Crystal_red
(1)   73/    F061 : 09 F0               		FDB color_Crystal_yellow
(1)   74/    F063 : 15 F0               		FDB color_Crystal_blue
(1)   78/    F065 : 2A                  		FCB COLOR_GRAY_2
(1)   79/    F066 : 0C                  		FCB COLOR_GREEN
(1)   80/    F067 : 30                  		FCB COLOR_BLUE
(1)   81/    F068 : 32                  		FCB COLOR_PURPLE
(1)   82/    F069 : 0F                  		FCB COLOR_YELLOW
(1)   85/    F06A : 17                  		FCB COLOR_CRYSTAL_RED1
(1)   86/    F06B : 35                  		FCB COLOR_CRYSTAL_BLUE1
(1)   87/    F06C : 1F                  		FCB COLOR_CRYSTAL_YELLOW1
      61/     CDE :                             EnableGfxRAM:
      62/     CDE : A9 04                       LDA #BANK_GFX_RAM1
      62/     CE0 : 8D E1 FF                    STA RAM_BANK2
      62/     CE3 : 85 01                       STA RB2_copy
      63/     CE5 : A9 05                       LDA #BANK_GFX_RAM2
      63/     CE7 : 8D E2 FF                    STA RAM_BANK3
      63/     CEA : 85 02                       STA RB3_copy
      64/     CEC : 60                          RTS
      66/     CED :                             EnableBankROM:
      67/     CED : A9 01                       LDA #BANK_GEN_RAM2
      67/     CEF : 8D E1 FF                    STA RAM_BANK2
      67/     CF2 : 85 01                       STA RB2_copy
      68/     CF4 : A9 02                       LDA #BANK_GEN_RAM3
      68/     CF6 : 8D E2 FF                    STA RAM_BANK3
      68/     CF9 : 85 02                       STA RB3_copy
      69/     CFB : 60                          RTS
      71/     CFC :                             Setup:
      73/     CFC : A2 00               		LDX #0
      76/     CFE : A9 00                       LDA #BANK_GEN_RAM1
      76/     D00 : 8D E0 FF                    STA RAM_BANK1
      76/     D03 : 85 00                       STA RB1_copy
      79/     D05 : 20 DE 0C                    JSR EnableGfxRAM
      82/     D08 : A9 20                                               LDA #$20#256
      82/     D0A : 85 14                                               STA rand_val
      82/     D0C : A9 00                                               LDA #$20>>8
      82/     D0E : 85 15                                               STA rand_val+1
      83/     D10 : 60                          RTS
      93/     D11 :                             clrscr:
      95/     D11 :                     color:
      98/     D11 :                     rows:
      99/     D11 : DA                                  PHX
      99/     D12 : CA                                                  DEX
      99/     D13 : CA                                                  DEX
      99/     D14 : 86 11                                       STX saveX
      99/     D16 : A2 02                                       LDX #zpcounter
      99/     D18 : B5 03                                               LDA ZP_locals-1,X
      99/     D1A : 48                                                  PHA
      99/     D1B : CA                                                  DEX
      99/     D1C : D0 FA                                       BNE ZP_push
      99/     D1E : A6 11                                       LDX saveX
     101/     D20 : A9 80                                               LDA #128#256
     101/     D22 : 95 01                                               STA rows,X
     102/     D24 : A9 00                                               LDA #SCREEN_ADDRESS#256
     102/     D26 : 85 04                                               STA gfx_ptr
     102/     D28 : A9 40                                               LDA #SCREEN_ADDRESS>>8
     102/     D2A : 85 05                                               STA gfx_ptr+1
     103/     D2C : B5 00               		LDA color,X
     104/     D2E : A0 00               		LDY #0
     107/     D30 : 91 04               				STA (gfx_ptr),Y
     108/     D32 : 88                  				DEY
     109/     D33 : D0 FB               			BNE .loop_inner
     110/     D35 : E6 05               			INC gfx_ptr+1
     111/     D37 : D6 01               			DEC rows,X
     112/     D39 : D0 F5               		BNE .loop_outer
     113/     D3B : 86 11                                       STX saveX
     113/     D3D : A2 00                                       LDX #0
     113/     D3F : 68                                                  PLA
     113/     D40 : 95 04                                               STA ZP_locals,X
     113/     D42 : E8                                                  INX
     113/     D43 : E0 02                                               CPX #zpcounter
     113/     D45 : D0 F8                                       BNE ZP_pull
     113/     D47 : A6 11                                       LDX saveX
     113/     D49 : FA                                  PLX
     113/     D4A : 60                          RTS
     117/     D4B :                             CalcXY:
     119/     D4B :                     posx:
     119/     D4B :                     posy:
     120/     D4B : DA                                  PHX
     120/     D4C : CA                                                  DEX
     120/     D4D : CA                                                  DEX
     121/     D4E : B5 00                                       LDA posx,X
     121/     D50 : 85 12                                       STA ret_val
     122/     D52 : A9 40               		LDA #SCREEN_ADDRESS>>8
     123/     D54 : 18                  		CLC
     124/     D55 : 75 01               		ADC posy,X
     125/     D57 : 85 13               		STA ret_val+1
     126/     D59 : FA                                  PLX
     126/     D5A : 60                          RTS
     128/     D5B :                             TileAddress:
     131/     D5B : DA                                  PHX
     131/     D5C : CA                                                  DEX
     133/     D5D : B5 00               		LDA tile_id,X
     134/     D5F : 0A                  		ASL
     135/     D60 : 69 BD               		ADC #tiles#256
     136/     D62 : 85 12               		STA ret_val
     137/     D64 : A9 00               		LDA #0
     138/     D66 : 69 EE               		ADC #tiles>>8
     139/     D68 : 85 13               		STA ret_val+1
     140/     D6A : B2 12               		LDA (ret_val)
     141/     D6C : 48                  		PHA
     142/     D6D : E6 12                               INC ret_val
     142/     D6F : D0 02                               BNE no_carry2
     142/     D71 : E6 13                                       INC ret_val+1
     143/     D73 : B2 12               		LDA (ret_val)
     144/     D75 : 85 13               		STA ret_val+1
     145/     D77 : 68                  		PLA
     146/     D78 : 85 12               		STA ret_val
     148/     D7A : FA                                  PLX
     148/     D7B : 60                          RTS
     150/     D7C :                             CopyTile:
     158/     D7C : DA                                  PHX
     158/     D7D : CA                                                  DEX
     158/     D7E : CA                                                  DEX
     158/     D7F : 86 11                                       STX saveX
     158/     D81 : A2 05                                       LDX #zpcounter
     158/     D83 : B5 03                                               LDA ZP_locals-1,X
     158/     D85 : 48                                                  PHA
     158/     D86 : CA                                                  DEX
     158/     D87 : D0 FA                                       BNE ZP_push
     158/     D89 : A6 11                                       LDX saveX
     159/     D8B : B5 00                                       LDA dest_id,X
     159/     D8D : 95 FF                                       STA call_offset,X
     159/     D8F : 20 5B 0D                    JSR TileAddress
     160/     D92 : A5 12                                       LDA ret_val
     160/     D94 : 85 04                                       STA dest_ptr
     160/     D96 : A5 13                                       LDA ret_val+1
     160/     D98 : 85 05                                       STA dest_ptr+1
     161/     D9A : B5 01                                       LDA source_id,X
     161/     D9C : 95 FF                                       STA call_offset,X
     161/     D9E : 20 5B 0D                    JSR TileAddress
     162/     DA1 : A5 12                                       LDA ret_val
     162/     DA3 : 85 06                                       STA source_ptr
     162/     DA5 : A5 13                                       LDA ret_val+1
     162/     DA7 : 85 07                                       STA source_ptr+1
     163/     DA9 : A0 00               		LDY #0
     164/     DAB : B1 06               		LDA (source_ptr),Y				;width
     165/     DAD : 91 04               		STA (dest_ptr),Y
     166/     DAF : C8                  		INY
     167/     DB0 : B1 06               		LDA (source_ptr),Y				;row_count
     168/     DB2 : 91 04               		STA (dest_ptr),Y
     169/     DB4 : 85 08               		STA row_count					;save row count
     170/     DB6 : C8                  		INY
     172/     DB7 : B1 06               			LDA (source_ptr),Y
     173/     DB9 : 91 04               			STA (dest_ptr),Y
     174/     DBB : D0 03                       BNE skip
     174/     DBD : 4C CB 0D                            JMP if{temp}
     174/     DC0 :                             skip:
     176/     DC0 : C8                  				INY 
     177/     DC1 : B1 06               				LDA (source_ptr),Y
     178/     DC3 : 91 04               				STA (dest_ptr),Y
     179/     DC5 : C8                  				INY
     180/     DC6 : 80 EF               				BRA ct.loop				;could fall through and one BRA after endif but slower
     181/     DC8 : 4C F1 0D                    JMP if{temp2}
     183/     DCB : C6 08               				DEC row_count
     184/     DCD : F0 22               				BEQ ct.done
     185/     DCF : C8                  				INY
     186/     DD0 : C0 C8               				CPY #200				;check for Y overflow only once per row
     187/     DD2 : 90 E3               				BCC ct.loop
     188/     DD4 : 98                  					TYA
     189/     DD5 : 38                  					SEC
     190/     DD6 : E9 C8               					SBC #200
     191/     DD8 : A8                  					TAY
     192/     DD9 : A9 C8                               LDA #200#256
     192/     DDB : 18                          CLC
     192/     DDC : 65 06                               ADC source_ptr
     192/     DDE : 85 06                               STA source_ptr
     192/     DE0 : 90 02                               BCC .no_carry
     192/     DE2 : E6 07                                       INC source_ptr+1
     193/     DE4 : A9 C8                               LDA #200#256
     193/     DE6 : 18                          CLC
     193/     DE7 : 65 04                               ADC dest_ptr
     193/     DE9 : 85 04                               STA dest_ptr
     193/     DEB : 90 02                               BCC .no_carry
     193/     DED : E6 05                                       INC dest_ptr+1
     194/     DEF : 80 C6               				BRA ct.loop
     197/     DF1 : 86 11                                       STX saveX
     197/     DF3 : A2 00                                       LDX #0
     197/     DF5 : 68                                                  PLA
     197/     DF6 : 95 04                                               STA ZP_locals,X
     197/     DF8 : E8                                                  INX
     197/     DF9 : E0 05                                               CPX #zpcounter
     197/     DFB : D0 F8                                       BNE ZP_pull
     197/     DFD : A6 11                                       LDX saveX
     197/     DFF : FA                                  PLX
     197/     E00 : 60                          RTS
     199/     E01 :                             DrawTile:
     201/     E01 :                     tile:
     201/     E01 :                     xpos:
     201/     E01 :                     ypos:
     205/     E01 : DA                                  PHX
     205/     E02 : CA                                                  DEX
     205/     E03 : CA                                                  DEX
     205/     E04 : CA                                                  DEX
     205/     E05 : 86 11                                       STX saveX
     205/     E07 : A2 08                                       LDX #zpcounter
     205/     E09 : B5 03                                               LDA ZP_locals-1,X
     205/     E0B : 48                                                  PHA
     205/     E0C : CA                                                  DEX
     205/     E0D : D0 FA                                       BNE ZP_push
     205/     E0F : A6 11                                       LDX saveX
     207/     E11 : B5 01                                       LDA xpos,X
     207/     E13 : 95 FE                                       STA call_offset,X
     207/     E15 : B5 02                                       LDA ypos,X
     207/     E17 : 95 FF                                       STA call_offset,X
     207/     E19 : 20 4B 0D                    JSR CalcXY
     208/     E1C : A5 12                                       LDA ret_val
     208/     E1E : 85 08                                       STA gfx_ptr
     208/     E20 : A5 13                                       LDA ret_val+1
     208/     E22 : 85 09                                       STA gfx_ptr+1
     209/     E24 : A9 BD                                               LDA #tiles#256
     209/     E26 : 85 0A                                               STA tile_ptr
     209/     E28 : A9 EE                                               LDA #tiles>>8
     209/     E2A : 85 0B                                               STA tile_ptr+1
     210/     E2C : B5 00                                       LDA tile,X
     210/     E2E : 95 FF                                       STA call_offset,X
     210/     E30 : 20 5B 0D                    JSR TileAddress
     211/     E33 : A5 12                                       LDA ret_val
     211/     E35 : 85 0A                                       STA tile_ptr
     211/     E37 : A5 13                                       LDA ret_val+1
     211/     E39 : 85 0B                                       STA tile_ptr+1
     212/     E3B : B2 0A               		LDA (tile_ptr)						;get tile width
     213/     E3D : 85 04               		STA	t_width
     214/     E3F : A0 01               		LDY #1								;get row count
     215/     E41 : B1 0A               		LDA (tile_ptr),Y
     216/     E43 : 85 05               		STA	row_count
     217/     E45 : C8                  		INY
     223/     E46 : B1 0A               			LDA (tile_ptr),Y				;get count of count,color pair
     224/     E48 : 85 06               			STA t_count					
     225/     E4A : C8                  			INY								;advance tile_ptr
     226/     E4B : F0 03                       BEQ skip
     226/     E4D : 4C 52 0E                            JMP if{temp}
     226/     E50 :                             skip:
     227/     E50 : E6 0B               				INC tile_ptr+1
     229/     E52 : C9 00               			CMP #0							;count of 0 means new line
     230/     E54 : F0 03                       BEQ skip
     230/     E56 : 4C 70 0E                            JMP if{temp}
     230/     E59 :                             skip:
     231/     E59 : C6 05               				DEC row_count				;decrease row_count
     232/     E5B : F0 4B               				BEQ dt.return
     233/     E5D : A9 00               				LDA #0						;increase gfx_ptr by 256-width
     234/     E5F : 38                  				SEC
     235/     E60 : E5 04               				SBC t_width
     236/     E62 : 18                          CLC
     236/     E63 : 65 08                               ADC gfx_ptr
     236/     E65 : 85 08                               STA gfx_ptr
     236/     E67 : 90 02                               BCC .no_carry
     236/     E69 : E6 09                                       INC gfx_ptr+1
     237/     E6B : 80 D9               				BRA dt.loop
     238/     E6D : 4C A6 0E                    JMP if{temp2}
     239/     E70 : B1 0A               				LDA (tile_ptr),Y			;count not 0. get color of count,color pair
     240/     E72 : 85 07               				STA t_color
     241/     E74 : C8                  				INY							;advance tile_ptr
     242/     E75 : F0 03                       BEQ skip
     242/     E77 : 4C 7C 0E                            JMP if{temp}
     242/     E7A :                             skip:
     243/     E7A : E6 0B               					INC tile_ptr+1
     245/     E7C : C9 40               				CMP #COLOR_TRANSPARENT		
     246/     E7E : F0 03                       BEQ skip
     246/     E80 : 4C 93 0E                            JMP if{temp}
     246/     E83 :                             skip:
     247/     E83 : A5 06                               LDA t_count
     247/     E85 : 18                          CLC
     247/     E86 : 65 08                               ADC gfx_ptr
     247/     E88 : 85 08                               STA gfx_ptr
     247/     E8A : 90 02                               BCC .no_carry
     247/     E8C : E6 09                                       INC gfx_ptr+1
     248/     E8E : 80 B6               					BRA dt.loop
     249/     E90 : 4C A6 0E                    JMP if{temp2}
     251/     E93 : 5A                  					PHY						;save index into tile_ptr
     252/     E94 : A4 06               					LDY t_count
     253/     E96 : 88                  					DEY
     254/     E97 : A5 07               					LDA t_color
     256/     E99 : 91 08               						STA (gfx_ptr),Y
     257/     E9B : 88                  						DEY
     258/     E9C : 10 FB               					BPL color.for
     259/     E9E : A5 06               					LDA t_count				;advance gfx_ptr by number of pixels drawn
     260/     EA0 : 18                  					CLC
     261/     EA1 : 65 08               					ADC gfx_ptr
     262/     EA3 : 85 08               					STA gfx_ptr
     265/     EA5 : 7A                  					PLY						;restore index into tile_ptr
     268/     EA6 : 80 9E               		BRA dt.loop
     270/     EA8 : 86 11                                       STX saveX
     270/     EAA : A2 00                                       LDX #0
     270/     EAC : 68                                                  PLA
     270/     EAD : 95 04                                               STA ZP_locals,X
     270/     EAF : E8                                                  INX
     270/     EB0 : E0 08                                               CPX #zpcounter
     270/     EB2 : D0 F8                                       BNE ZP_pull
     270/     EB4 : A6 11                                       LDX saveX
     270/     EB6 : FA                                  PLX
     270/     EB7 : 60                          RTS
     272/     EB8 :                             DrawTile1bpp:
     274/     EB8 :                     tile:
     274/     EB8 :                     xpos:
     274/     EB8 :                     ypos:
     274/     EB8 :                     color1:
     274/     EB8 :                     color2:
     280/     EB8 :                     t0:
     280/     EB8 :                     t1:
     280/     EB8 :                     t2:
     280/     EB8 :                     t3:
     281/     EB8 : DA                                  PHX
     281/     EB9 : 8A                                          TXA                             ;2
     281/     EBA : 38                                          SEC                             ;2
     281/     EBB : E9 0B                                       SBC #xcounter   ;2
     281/     EBD : AA                                          TAX                             ;2
     281/     EBE : 86 11                                       STX saveX
     281/     EC0 : A2 0B                                       LDX #zpcounter
     281/     EC2 : B5 03                                               LDA ZP_locals-1,X
     281/     EC4 : 48                                                  PHA
     281/     EC5 : CA                                                  DEX
     281/     EC6 : D0 FA                                       BNE ZP_push
     281/     EC8 : A6 11                                       LDX saveX
     283/     ECA : 64 0C                                               STZ byte_count
     284/     ECC : 64 0D                                               STZ bit_count
     286/     ECE : B5 01                                       LDA xpos,X
     286/     ED0 : 95 FE                                       STA call_offset,X
     286/     ED2 : B5 02                                       LDA ypos,X
     286/     ED4 : 95 FF                                       STA call_offset,X
     286/     ED6 : 20 4B 0D                    JSR CalcXY
     287/     ED9 : A5 12                                       LDA ret_val
     287/     EDB : 85 04                                       STA gfx_ptr
     287/     EDD : A5 13                                       LDA ret_val+1
     287/     EDF : 85 05                                       STA gfx_ptr+1
     288/     EE1 : A9 BD                                               LDA #tiles#256
     288/     EE3 : 85 06                                               STA tile_ptr
     288/     EE5 : A9 EE                                               LDA #tiles>>8
     288/     EE7 : 85 07                                               STA tile_ptr+1
     289/     EE9 : B5 00                                       LDA tile,X
     289/     EEB : 95 FF                                       STA call_offset,X
     289/     EED : 20 5B 0D                    JSR TileAddress
     290/     EF0 : A5 12                                       LDA ret_val
     290/     EF2 : 85 06                                       STA tile_ptr
     290/     EF4 : A5 13                                       LDA ret_val+1
     290/     EF6 : 85 07                                       STA tile_ptr+1
     292/     EF8 : B2 06               		LDA (tile_ptr)
     293/     EFA : 85 08               		STA	t_width
     294/     EFC : A0 01               		LDY #1
     295/     EFE : B1 06               		LDA (tile_ptr),Y
     296/     F00 : 85 09               		STA t_height
     297/     F02 : 85 0B               		STA	row_count
     298/     F04 : C8                  		INY
     299/     F05 : B1 06               		LDA (tile_ptr),Y
     300/     F07 : 85 0A               		STA	edge_style
     301/     F09 : C8                  		INY
     304/     F0A : A5 0C               			LDA byte_count
     305/     F0C : F0 03                       BEQ skip
     305/     F0E : 4C 92 0F                            JMP if{temp}
     305/     F11 :                             skip:
     306/     F11 : B1 06               				LDA (tile_ptr),Y
     307/     F13 : 85 0E               				STA t_pixel
     308/     F15 : C8                  				INY
     310/     F16 : A5 0D               				LDA bit_count
     311/     F18 : F0 03                       BEQ skip
     311/     F1A : 4C 92 0F                            JMP if{temp}
     311/     F1D :                             skip:
     312/     F1D : A5 0A               					LDA edge_style
     313/     F1F : F0 03                       BEQ skip
     313/     F21 : 4C 2B 0F                            JMP if{temp}
     313/     F24 :                             skip:
     314/     F24 : A9 00                                               LDA #false#256
     314/     F26 : 95 06                                               STA trans_row,X
     315/     F28 : 4C 92 0F                    JMP if{temp2}
     316/     F2B : A5 0B               						LDA row_count
     317/     F2D : C9 01               						CMP #1
     318/     F2F : F0 04               						BEQ dt1.row1
     319/     F31 : C5 09               						CMP t_height
     320/     F33 : D0 29               						BNE dt1.row1_done
     322/     F35 : 74 07                                               STZ t0,X
     323/     F37 : A5 08               							LDA t_width
     324/     F39 : 3A                  							DEC
     325/     F3A : 95 08               							STA t1,X
     326/     F3C : A5 0A               							LDA edge_style
     327/     F3E : C9 02               							CMP #2
     328/     F40 : F0 03                       BEQ skip
     328/     F42 : 4C 52 0F                            JMP if{temp}
     328/     F45 :                             skip:
     329/     F45 : A9 01                                               LDA #1#256
     329/     F47 : 95 09                                               STA t2,X
     330/     F49 : A5 08               								LDA t_width
     331/     F4B : 3A                  								DEC
     332/     F4C : 3A                  								DEC
     333/     F4D : 95 0A               								STA t3,X
     334/     F4F : 4C 58 0F                    JMP if{temp2}
     335/     F52 : A9 FF               								LDA #$FF
     336/     F54 : 95 09               								STA t2,X
     337/     F56 : 95 0A               								STA t3,X
     339/     F58 : A9 FF                                               LDA #true#256
     339/     F5A : 95 06                                               STA trans_row,X
     340/     F5C : 80 34               							BRA dt1.rows_done	
     342/     F5E : A5 0B               						LDA row_count
     343/     F60 : C9 02               						CMP #2
     344/     F62 : F0 09               						BEQ dt1.row2a
     345/     F64 : A5 09               						LDA t_height
     346/     F66 : 3A                  						DEC
     347/     F67 : C5 0B               						CMP row_count
     348/     F69 : F0 02               						BEQ dt1.row2a
     349/     F6B : 80 21               						BRA dt1.row_else
     351/     F6D : A5 0A               						LDA edge_style
     352/     F6F : C9 02               						CMP #2
     353/     F71 : F0 03                       BEQ skip
     353/     F73 : 4C 8A 0F                            JMP if{temp}
     353/     F76 :                             skip:
     354/     F76 : 74 07                                               STZ t0,X
     355/     F78 : A5 08               							LDA t_width
     356/     F7A : 3A                  							DEC
     357/     F7B : 95 08               							STA t1,X
     358/     F7D : A9 FF               							LDA #$FF
     359/     F7F : 95 09               							STA t2,X
     360/     F81 : 95 0A               							STA t3,X
     361/     F83 : A9 FF                                               LDA #true#256
     361/     F85 : 95 06                                               STA trans_row,X
     362/     F87 : 4C 8C 0F                    JMP if{temp2}
     363/     F8A : 80 02               							BRA dt1.row_else
     365/     F8C : 80 04               						BRA dt1.rows_done
     367/     F8E : A9 00                                               LDA #false#256
     367/     F90 : 95 06                                               STA trans_row,X
     373/     F92 : A9 00                                               LDA #false#256
     373/     F94 : 95 05                                               STA skip_pixel,X
     374/     F96 : B5 06               			LDA trans_row,X
     375/     F98 : D0 03                       BNE skip
     375/     F9A : 4C C7 0F                            JMP if{temp}
     375/     F9D :                             skip:
     376/     F9D : A5 0D                                       LDA bit_count
     376/     F9F : 80 03                       BRA s{ts}c{tc}
     377/     FA1 : 4C C7 0F                    JMP s{ts}done
     377/     FA4 : D5 07                               CMP t0,X
     377/     FA6 : F0 03                       BEQ skip
     377/     FA8 : 4C AD 0F                            JMP s{ts}c{tc}
     377/     FAB :                             skip:
     377/     FAB : 80 16                               BRA s{ts}b{tb}
     377/     FAD : D5 08                                       CMP t1,X
     377/     FAF : D0 04                               BNE s{ts}c{tc}
     377/     FB1 : 80 10                               BRA s{ts}b{tb}
     377/     FB3 : 80 0E                               BRA s{ts}b{tb}
     377/     FB5 : D5 09                                       CMP t2,X
     377/     FB7 : D0 04                               BNE s{ts}c{tc}
     377/     FB9 : 80 08                               BRA s{ts}b{tb}
     377/     FBB : 80 06                               BRA s{ts}b{tb}
     377/     FBD : D5 0A                                       CMP t3,X
     377/     FBF : D0 06                               BNE s{ts}c{tc}
     377/     FC1 : 80 00                               BRA s{ts}b{tb}
     378/     FC3 : A9 FF                                               LDA #true#256
     378/     FC5 : 95 05                                               STA skip_pixel,X
     383/     FC7 : B5 05               			LDA skip_pixel,X
     384/     FC9 : F0 03                       BEQ skip
     384/     FCB : 4C E5 0F                            JMP if{temp}
     384/     FCE :                             skip:
     385/     FCE : A5 0E               				LDA t_pixel
     386/     FD0 : 30 03                       BMI skip
     386/     FD2 : 4C DA 0F                            JMP if{temp}
     386/     FD5 :                             skip:
     387/     FD5 : B5 03               					LDA color1,X
     388/     FD7 : 4C DC 0F                    JMP if{temp2}
     389/     FDA : B5 04               					LDA color2,X
     392/     FDC : C9 40               				CMP #COLOR_TRANSPARENT
     393/     FDE : D0 03                       BNE skip
     393/     FE0 : 4C E5 0F                            JMP if{temp}
     393/     FE3 :                             skip:
     394/     FE3 : 92 04               					STA (gfx_ptr)
     398/     FE5 : E6 04                               INC gfx_ptr
     398/     FE7 : D0 02                               BNE no_carry2
     398/     FE9 : E6 05                                       INC gfx_ptr+1
     399/     FEB : 06 0E               			ASL t_pixel
     401/     FED : E6 0D               			INC bit_count
     402/     FEF : A5 0D               			LDA bit_count
     403/     FF1 : C5 08               			CMP t_width
     404/     FF3 : F0 03                       BEQ skip
     404/     FF5 : 4C 0F 10                            JMP if{temp}
     404/     FF8 :                             skip:
     405/     FF8 : 64 0D                                               STZ bit_count
     406/     FFA : 64 0C                                               STZ byte_count
     407/     FFC : C6 0B               				DEC row_count
     408/     FFE : A9 00               				LDA #0
     409/    1000 : 38                  				SEC
     410/    1001 : E5 08               				SBC t_width
     411/    1003 : 18                          CLC
     411/    1004 : 65 04                               ADC gfx_ptr
     411/    1006 : 85 04                               STA gfx_ptr
     411/    1008 : 90 02                               BCC .no_carry
     411/    100A : E6 05                                       INC gfx_ptr+1
     412/    100C : 4C 1F 10                    JMP if{temp2}
     413/    100F : A5 0C               				LDA byte_count
     414/    1011 : C9 07               				CMP #7
     415/    1013 : F0 03                       BEQ skip
     415/    1015 : 4C 1D 10                            JMP if{temp}
     415/    1018 :                             skip:
     416/    1018 : 64 0C                                               STZ byte_count
     417/    101A : 4C 1F 10                    JMP if{temp2}
     418/    101D : E6 0C               					INC byte_count
     422/    101F : A5 0B               			LDA row_count
     423/    1021 : F0 03                       BEQ skip
     423/    1023 : 4C 0A 0F                            JMP dt1.loop
     423/    1026 :                             skip:
     424/    1026 : 86 11                                       STX saveX
     424/    1028 : A2 00                                       LDX #0
     424/    102A : 68                                                  PLA
     424/    102B : 95 04                                               STA ZP_locals,X
     424/    102D : E8                                                  INX
     424/    102E : E0 0B                                               CPX #zpcounter
     424/    1030 : D0 F8                                       BNE ZP_pull
     424/    1032 : A6 11                                       LDX saveX
     424/    1034 : FA                                  PLX
     424/    1035 : 60                          RTS
     426/    1036 :                             RotateTile90:
     428/    1036 :                     dest:
     428/    1036 :                     src:
     434/    1036 : DA                                  PHX
     434/    1037 : CA                                                  DEX
     434/    1038 : CA                                                  DEX
     434/    1039 : 86 11                                       STX saveX
     434/    103B : A2 09                                       LDX #zpcounter
     434/    103D : B5 03                                               LDA ZP_locals-1,X
     434/    103F : 48                                                  PHA
     434/    1040 : CA                                                  DEX
     434/    1041 : D0 FA                                       BNE ZP_push
     434/    1043 : A6 11                                       LDX saveX
     437/    1045 : B5 01                                       LDA src,X
     437/    1047 : 95 FD                                       STA call_offset,X
     437/    1049 : 74 FE                                               STZ call_offset,X
     437/    104B : 74 FF                                               STZ call_offset,X
     437/    104D : 20 01 0E                    JSR DrawTile
     438/    1050 : B5 00                                       LDA dest,X
     438/    1052 : 95 FF                                       STA call_offset,X
     438/    1054 : 20 5B 0D                    JSR TileAddress
     439/    1057 : A5 12                                       LDA ret_val
     439/    1059 : 85 06                                       STA dest_ptr
     439/    105B : A5 13                                       LDA ret_val+1
     439/    105D : 85 07                                       STA dest_ptr+1
     440/    105F : B5 01                                       LDA src,X
     440/    1061 : 95 FF                                       STA call_offset,X
     440/    1063 : 20 5B 0D                    JSR TileAddress
     441/    1066 : A5 12                                       LDA ret_val
     441/    1068 : 85 04                                       STA gfx_ptr
     441/    106A : A5 13                                       LDA ret_val+1
     441/    106C : 85 05                                       STA gfx_ptr+1
     442/    106E : A0 01               		LDY #1
     443/    1070 : B1 04               		LDA (gfx_ptr),Y
     444/    1072 : 85 09               		STA row_count
     445/    1074 : 91 06               		STA (dest_ptr),Y
     446/    1076 : 88                  		DEY								;reverse order to save LDA
     447/    1077 : B1 04               		LDA (gfx_ptr),Y
     448/    1079 : 85 08               		STA t_width
     449/    107B : 91 06               		STA (dest_ptr),Y
     450/    107D : A0 02               		LDY #2							;point to color pairs of destination
     451/    107F : 64 04               		STZ gfx_ptr						;set X coord to 0
     453/    1081 : A5 08               			LDA t_width					;point to (0,width) pixel, ie bottom left pixel
     454/    1083 : 18                  			CLC
     455/    1084 : 69 3F               			ADC #SCREEN_ADDRESS>>8-1
     456/    1086 : 85 05               			STA gfx_ptr+1
     457/    1088 : B2 04                                       LDA (gfx_ptr)
     457/    108A : 85 0B                                       STA new_color
     458/    108C : A9 01                                               LDA #1#256
     458/    108E : 85 0C                                               STA new_count
     459/    1090 : C6 05               			DEC gfx_ptr+1
     460/    1092 : A5 08               			LDA t_width
     461/    1094 : 3A                  			DEC
     462/    1095 : 85 0A               			STA counter
     464/    1097 : B2 04               				LDA (gfx_ptr)
     465/    1099 : C5 0B               				CMP new_color
     466/    109B : F0 03                       BEQ skip
     466/    109D : 4C A5 10                            JMP if{temp}
     466/    10A0 :                             skip:
     468/    10A0 : E6 0C               					INC new_count
     469/    10A2 : 4C B7 10                    JMP if{temp2}
     471/    10A5 : 48                  					PHA
     472/    10A6 : A5 0C               					LDA new_count
     473/    10A8 : 91 06               					STA (dest_ptr),Y
     474/    10AA : C8                  					INY
     475/    10AB : A5 0B               					LDA new_color
     476/    10AD : 91 06               					STA (dest_ptr),Y
     477/    10AF : C8                  					INY
     478/    10B0 : 68                  					PLA
     479/    10B1 : 85 0B               					STA new_color
     480/    10B3 : A9 01               					LDA #1
     481/    10B5 : 85 0C               					STA new_count
     483/    10B7 : C6 05               				DEC gfx_ptr+1
     484/    10B9 : C6 0A               				DEC counter
     485/    10BB : D0 DA               				BNE rt.loop_inner
     486/    10BD : A5 0C               			LDA new_count				;write pair followed by 0 for end of row
     487/    10BF : 91 06               			STA (dest_ptr),Y
     488/    10C1 : C8                  			INY
     489/    10C2 : A5 0B               			LDA new_color
     490/    10C4 : 91 06               			STA (dest_ptr),Y
     491/    10C6 : C8                  			INY
     492/    10C7 : A9 00               			LDA #0
     493/    10C9 : 91 06               			STA (dest_ptr),Y
     494/    10CB : C8                  			INY
     495/    10CC : E6 04               			INC gfx_ptr					;next column
     496/    10CE : C0 C8               			CPY #200
     497/    10D0 : B0 03                       BCS skip
     497/    10D2 : 4C E5 10                            JMP if{temp}
     497/    10D5 :                             skip:
     498/    10D5 : 98                  				TYA
     499/    10D6 : 38                  				SEC
     500/    10D7 : E9 C8               				SBC #200
     501/    10D9 : A8                  				TAY
     502/    10DA : A9 C8                               LDA #200#256
     502/    10DC : 18                          CLC
     502/    10DD : 65 06                               ADC dest_ptr
     502/    10DF : 85 06                               STA dest_ptr
     502/    10E1 : 90 02                               BCC .no_carry
     502/    10E3 : E6 07                                       INC dest_ptr+1
     504/    10E5 : C6 09               			DEC row_count
     505/    10E7 : D0 98               			BNE rt.loop_outer
     506/    10E9 : 86 11                                       STX saveX
     506/    10EB : A2 00                                       LDX #0
     506/    10ED : 68                                                  PLA
     506/    10EE : 95 04                                               STA ZP_locals,X
     506/    10F0 : E8                                                  INX
     506/    10F1 : E0 09                                               CPX #zpcounter
     506/    10F3 : D0 F8                                       BNE ZP_pull
     506/    10F5 : A6 11                                       LDX saveX
     506/    10F7 : FA                                  PLX
     506/    10F8 : 60                          RTS
     508/    10F9 :                             ColorTile:
     510/    10F9 :                     tile:
     514/    10F9 : DA                                  PHX
     514/    10FA : CA                                                  DEX
     514/    10FB : CA                                                  DEX
     514/    10FC : 86 11                                       STX saveX
     514/    10FE : A2 07                                       LDX #zpcounter
     514/    1100 : B5 03                                               LDA ZP_locals-1,X
     514/    1102 : 48                                                  PHA
     514/    1103 : CA                                                  DEX
     514/    1104 : D0 FA                                       BNE ZP_push
     514/    1106 : A6 11                                       LDX saveX
     517/    1108 : B5 00                                       LDA tile,X
     517/    110A : 95 FF                                       STA call_offset,X
     517/    110C : 20 5B 0D                    JSR TileAddress
     518/    110F : A5 12                                       LDA ret_val
     518/    1111 : 85 04                                       STA tile_ptr
     518/    1113 : A5 13                                       LDA ret_val+1
     518/    1115 : 85 05                                       STA tile_ptr+1
     521/    1117 : B5 00                                       LDA tile,X
     521/    1119 : 80 03                       BRA s{ts}c{tc}
     522/    111B : 4C 48 11                    JMP s{ts}done
     522/    111E : C9 09                               CMP #Robot_left
     522/    1120 : F0 03                       BEQ skip
     522/    1122 : 4C 27 11                            JMP s{ts}c{tc}
     522/    1125 :                             skip:
     522/    1125 : 80 0E                               BRA s{ts}b{tb}
     522/    1127 : C9 0A                                       CMP #Robot_right
     522/    1129 : D0 04                               BNE s{ts}c{tc}
     522/    112B : 80 08                               BRA s{ts}b{tb}
     522/    112D : 80 06                               BRA s{ts}b{tb}
     522/    112F : C9 0B                                       CMP #Menu_item_temp
     522/    1131 : D0 0D                               BNE s{ts}c{tc}
     522/    1133 : 80 00                               BRA s{ts}b{tb}
     523/    1135 : A9 21                                               LDA #item_colors#256
     523/    1137 : 85 06                                               STA color_table
     523/    1139 : A9 F0                                               LDA #item_colors>>8
     523/    113B : 85 07                                               STA color_table+1
     524/    113D : 4C 48 11                    JMP s{ts}done
     525/    1140 : A9 53                                               LDA #tile_colors#256
     525/    1142 : 85 06                                               STA color_table
     525/    1144 : A9 F0                                               LDA #tile_colors>>8
     525/    1146 : 85 07                                               STA color_table+1
     531/    1148 : B5 01               		LDA color_index,X
     532/    114A : 0A                  		ASL
     533/    114B : 18                          CLC
     533/    114C : 65 06                               ADC color_table
     533/    114E : 85 06                               STA color_table
     533/    1150 : 90 02                               BCC .no_carry
     533/    1152 : E6 07                                       INC color_table+1
     534/    1154 : B2 06               		LDA (color_table)
     535/    1156 : 48                  		PHA
     536/    1157 : A0 01               		LDY #1
     537/    1159 : B1 06               		LDA (color_table),Y
     538/    115B : 85 07               		STA color_table+1
     539/    115D : 68                  		PLA 
     540/    115E : 85 06               		STA color_table
     543/    1160 : B1 04               		LDA (tile_ptr),Y
     544/    1162 : 85 08               		STA row_count
     545/    1164 : B1 06               		LDA (color_table),Y
     546/    1166 : 0A                  		ASL
     547/    1167 : 69 02               		ADC #2
     548/    1169 : 85 0A               		STA c_size
     549/    116B : C8                  		INY ;point to pixel data of tile_ptr
     552/    116C : B1 04               			LDA (tile_ptr),Y			
     553/    116E : F0 03                       BEQ skip
     553/    1170 : 4C 92 11                            JMP if{temp}
     553/    1173 :                             skip:
     555/    1173 : C8                  				INY
     556/    1174 : C0 C8               				CPY #200
     557/    1176 : B0 03                       BCS skip
     557/    1178 : 4C 8B 11                            JMP if{temp}
     557/    117B :                             skip:
     558/    117B : 98                  					TYA
     559/    117C : 38                  					SEC
     560/    117D : E9 C8               					SBC #200
     561/    117F : A8                  					TAY
     562/    1180 : A9 C8                               LDA #200#256
     562/    1182 : 18                          CLC
     562/    1183 : 65 04                               ADC tile_ptr
     562/    1185 : 85 04                               STA tile_ptr
     562/    1187 : 90 02                               BCC .no_carry
     562/    1189 : E6 05                                       INC tile_ptr+1
     564/    118B : C6 08               				DEC row_count
     565/    118D : D0 DD               				BNE color.loop1
     566/    118F : 4C C1 11                    JMP if{temp2}
     568/    1192 : C8                  				INY
     569/    1193 : B1 04               				LDA (tile_ptr),Y
     570/    1195 : 85 09               				STA t_color
     571/    1197 : C9 41               				CMP #COLOR_TRANSPARENT+1
     572/    1199 : B0 03                       BCS skip
     572/    119B : 4C BE 11                            JMP if{temp}
     572/    119E :                             skip:
     574/    119E : 5A                  					PHY			;save index into tile_ptr
     575/    119F : A0 02               					LDY #2		;skip past item type and count of pairs
     578/    11A1 : A5 09               						LDA t_color
     579/    11A3 : D1 06               						CMP (color_table),Y
     580/    11A5 : F0 03                       BEQ skip
     580/    11A7 : 4C B6 11                            JMP if{temp}
     580/    11AA :                             skip:
     582/    11AA : C8                  							INY
     583/    11AB : B1 06               							LDA (color_table),Y
     584/    11AD : 7A                  							PLY
     585/    11AE : 91 04               							STA (tile_ptr),Y
     586/    11B0 : C8                  							INY
     587/    11B1 : 80 B9               							BRA color.loop1
     588/    11B3 : 4C BE 11                    JMP if{temp2}
     589/    11B6 : C8                  							INY
     590/    11B7 : C8                  							INY
     591/    11B8 : 98                  							TYA
     592/    11B9 : C5 0A               							CMP c_size
     593/    11BB : D0 E4               							BNE color.loop2
     595/    11BD : 7A                  							PLY
     598/    11BE : C8                  				INY
     599/    11BF : 80 AB               				BRA color.loop1
     601/    11C1 : 86 11                                       STX saveX
     601/    11C3 : A2 00                                       LDX #0
     601/    11C5 : 68                                                  PLA
     601/    11C6 : 95 04                                               STA ZP_locals,X
     601/    11C8 : E8                                                  INX
     601/    11C9 : E0 07                                               CPX #zpcounter
     601/    11CB : D0 F8                                       BNE ZP_pull
     601/    11CD : A6 11                                       LDX saveX
     601/    11CF : FA                                  PLX
     601/    11D0 : 60                          RTS
     603/    11D1 : 00 01 02 03 04 05   	tiles_to_color:	FCB Ground_0, Ground_90, Ground_180, Ground_270, Rock, Lava 
     604/    11D7 : 06 08 07            					FCB Crystal_red, Crystal_blue, Crystal_yellow
     606/    11DA :                             LoadTiles:
     609/    11DA : DA                                  PHX
     609/    11DB : CA                                                  DEX
     611/    11DC : A9 00                                               LDA #Ground_0#256
     611/    11DE : 95 FE                                               STA call_offset,X
     611/    11E0 : A9 15                                               LDA #Ground_raw#256
     611/    11E2 : 95 FF                                               STA call_offset,X
     611/    11E4 : 20 7C 0D                    JSR CopyTile
     612/    11E7 : A9 01                                               LDA #Ground_90#256
     612/    11E9 : 95 FE                                               STA call_offset,X
     612/    11EB : A9 00                                               LDA #Ground_0#256
     612/    11ED : 95 FF                                               STA call_offset,X
     612/    11EF : 20 36 10                    JSR RotateTile90
     613/    11F2 : A9 02                                               LDA #Ground_180#256
     613/    11F4 : 95 FE                                               STA call_offset,X
     613/    11F6 : A9 01                                               LDA #Ground_90#256
     613/    11F8 : 95 FF                                               STA call_offset,X
     613/    11FA : 20 36 10                    JSR RotateTile90
     614/    11FD : A9 03                                               LDA #Ground_270#256
     614/    11FF : 95 FE                                               STA call_offset,X
     614/    1201 : A9 02                                               LDA #Ground_180#256
     614/    1203 : 95 FF                                               STA call_offset,X
     614/    1205 : 20 36 10                    JSR RotateTile90
     615/    1208 : A9 04                                               LDA #Rock#256
     615/    120A : 95 FE                                               STA call_offset,X
     615/    120C : A9 15                                               LDA #Ground_raw#256
     615/    120E : 95 FF                                               STA call_offset,X
     615/    1210 : 20 7C 0D                    JSR CopyTile
     616/    1213 : A9 05                                               LDA #Lava#256
     616/    1215 : 95 FE                                               STA call_offset,X
     616/    1217 : A9 15                                               LDA #Ground_raw#256
     616/    1219 : 95 FF                                               STA call_offset,X
     616/    121B : 20 7C 0D                    JSR CopyTile
     617/    121E : A9 06                                               LDA #Crystal_red#256
     617/    1220 : 95 FE                                               STA call_offset,X
     617/    1222 : A9 14                                               LDA #Crystal_raw#256
     617/    1224 : 95 FF                                               STA call_offset,X
     617/    1226 : 20 7C 0D                    JSR CopyTile
     618/    1229 : A9 08                                               LDA #Crystal_blue#256
     618/    122B : 95 FE                                               STA call_offset,X
     618/    122D : A9 14                                               LDA #Crystal_raw#256
     618/    122F : 95 FF                                               STA call_offset,X
     618/    1231 : 20 7C 0D                    JSR CopyTile
     619/    1234 : A9 07                                               LDA #Crystal_yellow#256
     619/    1236 : 95 FE                                               STA call_offset,X
     619/    1238 : A9 14                                               LDA #Crystal_raw#256
     619/    123A : 95 FF                                               STA call_offset,X
     619/    123C : 20 7C 0D                    JSR CopyTile
     621/    123F : A0 00               		LDY #0
     623/    1241 : B9 D1 11            			LDA tiles_to_color,Y
     624/    1244 : 95 00               			STA color_tile,X
     625/    1246 : 5A                  			PHY
     626/    1247 : B5 00                                       LDA color_tile,X
     626/    1249 : 95 FE                                       STA call_offset,X
     626/    124B : B5 00                                       LDA color_tile,X
     626/    124D : 95 FF                                       STA call_offset,X
     626/    124F : 20 F9 10                    JSR ColorTile
     627/    1252 : 7A                  			PLY
     628/    1253 : C8                  			INY
     629/    1254 : C0 09               			CPY #9	;9 tile IDs to color
     630/    1256 : D0 E9               			BNE lt.loop
     632/    1258 : FA                                  PLX
     632/    1259 : 60                          RTS
     634/    125A :                             ColorHero:
     635/    125A : A9 09                                               LDA #Robot_left#256
     635/    125C : 95 FE                                               STA call_offset,X
     635/    125E : A9 12                                               LDA #Robot_left_raw#256
     635/    1260 : 95 FF                                               STA call_offset,X
     635/    1262 : 20 7C 0D                    JSR CopyTile
     636/    1265 : A9 09                                               LDA #Robot_left#256
     636/    1267 : 95 FE                                               STA call_offset,X
     636/    1269 : AD 2B 02                                    LDA hero_equipped+head
     636/    126C : 95 FF                                       STA call_offset,X
     636/    126E : 20 F9 10                    JSR ColorTile
     637/    1271 : A9 09                                               LDA #Robot_left#256
     637/    1273 : 95 FE                                               STA call_offset,X
     637/    1275 : AD 2C 02                                    LDA hero_equipped+body
     637/    1278 : 95 FF                                       STA call_offset,X
     637/    127A : 20 F9 10                    JSR ColorTile
     638/    127D : A9 09                                               LDA #Robot_left#256
     638/    127F : 95 FE                                               STA call_offset,X
     638/    1281 : AD 2D 02                                    LDA hero_equipped+legs
     638/    1284 : 95 FF                                       STA call_offset,X
     638/    1286 : 20 F9 10                    JSR ColorTile
     639/    1289 : A9 09                                               LDA #Robot_left#256
     639/    128B : 95 FE                                               STA call_offset,X
     639/    128D : AD 2E 02                                    LDA hero_equipped+gun
     639/    1290 : 95 FF                                       STA call_offset,X
     639/    1292 : 20 F9 10                    JSR ColorTile
     640/    1295 : A9 09                                               LDA #Robot_left#256
     640/    1297 : 95 FE                                               STA call_offset,X
     640/    1299 : AD 2F 02                                    LDA hero_equipped+tool
     640/    129C : 95 FF                                       STA call_offset,X
     640/    129E : 20 F9 10                    JSR ColorTile
     642/    12A1 : A9 0A                                               LDA #Robot_right#256
     642/    12A3 : 95 FE                                               STA call_offset,X
     642/    12A5 : A9 13                                               LDA #Robot_right_raw#256
     642/    12A7 : 95 FF                                               STA call_offset,X
     642/    12A9 : 20 7C 0D                    JSR CopyTile
     643/    12AC : A9 0A                                               LDA #Robot_right#256
     643/    12AE : 95 FE                                               STA call_offset,X
     643/    12B0 : AD 2B 02                                    LDA hero_equipped+head
     643/    12B3 : 95 FF                                       STA call_offset,X
     643/    12B5 : 20 F9 10                    JSR ColorTile
     644/    12B8 : A9 0A                                               LDA #Robot_right#256
     644/    12BA : 95 FE                                               STA call_offset,X
     644/    12BC : AD 2C 02                                    LDA hero_equipped+body
     644/    12BF : 95 FF                                       STA call_offset,X
     644/    12C1 : 20 F9 10                    JSR ColorTile
     645/    12C4 : A9 0A                                               LDA #Robot_right#256
     645/    12C6 : 95 FE                                               STA call_offset,X
     645/    12C8 : AD 2D 02                                    LDA hero_equipped+legs
     645/    12CB : 95 FF                                       STA call_offset,X
     645/    12CD : 20 F9 10                    JSR ColorTile
     646/    12D0 : A9 0A                                               LDA #Robot_right#256
     646/    12D2 : 95 FE                                               STA call_offset,X
     646/    12D4 : AD 2E 02                                    LDA hero_equipped+gun
     646/    12D7 : 95 FF                                       STA call_offset,X
     646/    12D9 : 20 F9 10                    JSR ColorTile
     647/    12DC : A9 0A                                               LDA #Robot_right#256
     647/    12DE : 95 FE                                               STA call_offset,X
     647/    12E0 : AD 2F 02                                    LDA hero_equipped+tool
     647/    12E3 : 95 FF                                       STA call_offset,X
     647/    12E5 : 20 F9 10                    JSR ColorTile
     648/    12E8 : 60                          RTS
     653/    12E9 :                             rand:
     655/    12E9 : A5 15               		LDA rand_val+1
     656/    12EB : 18                  		CLC
     657/    12EC : 6A                  		ROR
     658/    12ED : A5 14               		LDA rand_val
     659/    12EF : 6A                  		ROR
     660/    12F0 : 45 15               		EOR rand_val+1
     661/    12F2 : 85 15               		STA rand_val+1
     662/    12F4 : A9 00               		LDA #0
     663/    12F6 : 6A                  		ROR
     664/    12F7 : 45 14               		EOR rand_val
     665/    12F9 : 85 14               		STA rand_val
     667/    12FB : A5 15               		LDA rand_val+1
     668/    12FD : 18                  		CLC
     669/    12FE : 6A                  		ROR
     670/    12FF : 45 14               		EOR rand_val
     671/    1301 : 85 14               		STA rand_val
     676/    1303 : A5 14               		LDA rand_val
     677/    1305 : 45 15               		EOR rand_val+1
     678/    1307 : 85 15               		STA rand_val+1
     682/    1309 : 60                          RTS
     684/    130A :                             rand8:
     686/    130A :                     max:
     688/    130A :                     divisor:
     689/    130A : DA                                  PHX
     689/    130B : CA                                                  DEX
     689/    130C : CA                                                  DEX
     689/    130D : CA                                                  DEX
     691/    130E : 20 E9 12                    JSR rand
     692/    1311 : A5 14                                       LDA rand_val
     692/    1313 : 85 12                                       STA ret_val
     692/    1315 : A5 15                                       LDA rand_val+1
     692/    1317 : 85 13                                       STA ret_val+1
     693/    1319 : B5 00               		LDA max,X
     694/    131B : 95 02               		STA divisor+1,X
     695/    131D : 74 01               		STZ divisor,X
     698/    131F : A5 12                                       LDA ret_val
     698/    1321 : 38                                          SEC
     698/    1322 : F5 01                                       SBC divisor,X
     698/    1324 : 85 12                                       STA ret_val
     698/    1326 : A5 13                                       LDA ret_val+1
     698/    1328 : F5 02                                       SBC divisor+1,X
     698/    132A : 85 13                                       STA ret_val+1
     699/    132C : B0 F1               			BCS r8.loop
     701/    132E : B5 01                                       LDA divisor,X
     701/    1330 : 18                                          CLC
     701/    1331 : 65 12                                       ADC ret_val
     701/    1333 : 85 12                                       STA ret_val
     701/    1335 : B5 02                                       LDA divisor+1,X
     701/    1337 : 65 13                                       ADC ret_val+1
     701/    1339 : 85 13                                       STA ret_val+1
     703/    133B : 18                  			CLC
     704/    133C : 76 02                               ROR divisor+1,X
     704/    133E : 76 01                               ROR divisor,X
     706/    1340 : A5 13               			LDA ret_val+1
     707/    1342 : D0 DB               			BNE r8.loop
     709/    1344 : A5 12               			LDA ret_val
     710/    1346 : D5 00               			CMP max,X
     711/    1348 : B0 D5               			BCS r8.loop
     713/    134A : FA                                  PLX
     713/    134B : 60                          RTS
     715/    134C :                             rand5050:
     716/    134C : 20 E9 12                    JSR rand
     717/    134F : A5 14               		LDA rand_val
     718/    1351 : 29 01               		AND #1
     719/    1353 : 85 12               		STA ret_val
     720/    1355 : 60                          RTS
     722/    1356 :                             CalcStats:
     724/    1356 :                     Mine1s:
     724/    1356 :                     Drill1s:
     727/    1356 : DA                                  PHX
     727/    1357 : 8A                                          TXA                             ;2
     727/    1358 : 38                                          SEC                             ;2
     727/    1359 : E9 07                                       SBC #xcounter   ;2
     727/    135B : AA                                          TAX                             ;2
     727/    135C : 86 11                                       STX saveX
     727/    135E : A2 04                                       LDX #zpcounter
     727/    1360 : B5 03                                               LDA ZP_locals-1,X
     727/    1362 : 48                                                  PHA
     727/    1363 : CA                                                  DEX
     727/    1364 : D0 FA                                       BNE ZP_push
     727/    1366 : A6 11                                       LDX saveX
     730/    1368 : AD 09 02            		LDA hero_HP_Upgrade
     731/    136B : 18                  		CLC
     732/    136C : 69 02               		ADC #2
     733/    136E : 8D 08 02            		STA hero_HP_Max_temp
     735/    1371 : AD 0C 02            		LDA hero_Batt_Upgrade
     736/    1374 : 18                  		CLC
     737/    1375 : 69 03               		ADC #3
     738/    1377 : 8D 0B 02            		STA hero_Batt_Max
     740/    137A : AD 0E 02                                    LDA hero_Dmg_Upgrade
     740/    137D : 8D 0D 02                                    STA hero_Dmg
     741/    1380 : A9 08                                               LDA #8#256
     741/    1382 : 8D 0F 02                                            STA hero_Mine_Speed
     742/    1385 : A9 0C                                               LDA #12#256
     742/    1387 : 8D 10 02                                            STA hero_Drill_Speed
     743/    138A : A9 01                                               LDA #1#256
     743/    138C : 8D 12 02                                            STA hero_Batt_Recharge
     744/    138F : A9 05                                               LDA #5#256
     744/    1391 : 8D 13 02                                            STA hero_Crit_Rate
     745/    1394 : 9C 14 02                                            STZ hero_HP_Recharge
     746/    1397 : 9C 11 02                                            STZ hero_Lava_Res
     747/    139A : A9 04                                               LDA #4#256
     747/    139C : 8D 15 02                                            STA hero_Lava_Dmg
     747/    139F : A9 00                                               LDA #4>>8
     747/    13A1 : 8D 16 02                                            STA hero_Lava_Dmg+1
     748/    13A4 : A9 04                                               LDA #4#256
     748/    13A6 : 8D 17 02                                            STA hero_Dmg_Cost
     749/    13A9 : A9 02                                               LDA #2#256
     749/    13AB : 8D 18 02                                            STA hero_Mine_Cost
     750/    13AE : A9 02                                               LDA #2#256
     750/    13B0 : 8D 19 02                                            STA hero_Drill_Cost
     751/    13B3 : A9 00                                               LDA #false#256
     751/    13B5 : 95 00                                               STA Mine1s,X
     752/    13B7 : A9 00                                               LDA #false#256
     752/    13B9 : 95 01                                               STA Drill1s,X
     754/    13BB : 74 02                                               STZ item_counter,X
     756/    13BD : B4 02               			LDY item_counter,X
     757/    13BF : B9 2B 02            			LDA hero_equipped,Y
     758/    13C2 : 0A                  			ASL
     759/    13C3 : A8                  			TAY
     760/    13C4 : B9 98 C5            			LDA item_stats,Y
     761/    13C7 : 85 04               			STA item_ptr
     762/    13C9 : B9 99 C5            			LDA item_stats+1,Y
     763/    13CC : 85 05               			STA item_ptr+1
     764/    13CE : A0 04               			LDY #stat_count
     765/    13D0 : B1 04               			LDA (item_ptr),Y
     766/    13D2 : 95 04               			STA stat_max,X
     767/    13D4 : 74 03               			STZ stat_counter,X
     769/    13D6 : B5 03               				LDA stat_counter,X
     770/    13D8 : 0A                  				ASL
     771/    13D9 : 69 05               				ADC #stat_begin
     772/    13DB : A8                  				TAY
     773/    13DC : B1 04               				LDA (item_ptr),Y
     774/    13DE : 5A                  				PHY
     775/    13DF : 95 05               				STA stat_ID,X
     776/    13E1 : 0A                  				ASL
     777/    13E2 : A8                  				TAY
     778/    13E3 : B9 7C C6            				LDA stat_pointers,Y
     779/    13E6 : 85 06               				STA stat_ptr
     780/    13E8 : B9 7D C6            				LDA stat_pointers+1,Y
     781/    13EB : 85 07               				STA stat_ptr+1
     782/    13ED : 7A                  				PLY
     783/    13EE : C8                  				INY
     784/    13EF : B1 04               				LDA (item_ptr),Y
     785/    13F1 : 95 06               				STA stat_val,X
     787/    13F3 : A5 06               				LDA stat_ptr
     788/    13F5 : 05 07               				ORA stat_ptr+1
     789/    13F7 : F0 03                       BEQ skip
     789/    13F9 : 4C 77 14                            JMP if{temp}
     789/    13FC :                             skip:
     790/    13FC : B5 05               					LDA stat_ID,X
     791/    13FE : 80 03                       BRA s{ts}c{tc}
     792/    1400 : 4C 74 14                    JMP s{ts}done
     792/    1403 : C9 03                               CMP #stat_Mine
     792/    1405 : F0 03                       BEQ skip
     792/    1407 : 4C 16 14                            JMP s{ts}c{tc}
     792/    140A :                             skip:
     793/    140A : AD 0F 02            							LDA hero_Mine_Speed
     794/    140D : 38                  							SEC
     795/    140E : F5 06               							SBC stat_val,X
     796/    1410 : 8D 0F 02            							STA hero_Mine_Speed
     797/    1413 : 4C 74 14                    JMP s{ts}done
     797/    1416 : C9 04                               CMP #stat_Mine1s
     797/    1418 : F0 03                       BEQ skip
     797/    141A : 4C 24 14                            JMP s{ts}c{tc}
     797/    141D :                             skip:
     798/    141D : A9 FF                                               LDA #true#256
     798/    141F : 95 00                                               STA Mine1s,X
     799/    1421 : 4C 74 14                    JMP s{ts}done
     799/    1424 : C9 07                               CMP #stat_Drill
     799/    1426 : F0 03                       BEQ skip
     799/    1428 : 4C 37 14                            JMP s{ts}c{tc}
     799/    142B :                             skip:
     800/    142B : AD 10 02            							LDA hero_Drill_Speed
     801/    142E : 38                  							SEC
     802/    142F : F5 06               							SBC stat_val,X
     803/    1431 : 8D 10 02            							STA hero_Drill_Speed
     804/    1434 : 4C 74 14                    JMP s{ts}done
     804/    1437 : C9 08                               CMP #stat_Drill1s
     804/    1439 : F0 03                       BEQ skip
     804/    143B : 4C 45 14                            JMP s{ts}c{tc}
     804/    143E :                             skip:
     805/    143E : A9 FF                                               LDA #true#256
     805/    1440 : 95 01                                               STA Drill1s,X
     806/    1442 : 4C 74 14                    JMP s{ts}done
     806/    1445 : C9 0B                               CMP #stat_Lava_Heals
     806/    1447 : F0 03                       BEQ skip
     806/    1449 : 4C 59 14                            JMP s{ts}c{tc}
     806/    144C :                             skip:
     807/    144C : A9 FF                                               LDA #$FFFF#256
     807/    144E : 8D 15 02                                            STA hero_Lava_Dmg
     807/    1451 : A9 FF                                               LDA #$FFFF>>8
     807/    1453 : 8D 16 02                                            STA hero_Lava_Dmg+1
     808/    1456 : 4C 74 14                    JMP s{ts}done
     808/    1459 : C9 0C                               CMP #stat_Dmg_Cost_50
     808/    145B : F0 03                       BEQ skip
     808/    145D : 4C 68 14                            JMP s{ts}c{tc}
     808/    1460 :                             skip:
     809/    1460 : A9 02                                               LDA #2#256
     809/    1462 : 8D 17 02                                            STA hero_Dmg_Cost
     810/    1465 : 4C 74 14                    JMP s{ts}done
     810/    1468 : C9 0D                               CMP #stat_Mine_Cost_50
     810/    146A : F0 03                       BEQ skip
     810/    146C : 4C 74 14                            JMP s{ts}c{tc}
     810/    146F :                             skip:
     811/    146F : A9 01                                               LDA #1#256
     811/    1471 : 8D 18 02                                            STA hero_Mine_Cost
     813/    1474 : 4C 7E 14                    JMP if{temp2}
     814/    1477 : B5 06               					LDA stat_val,X
     815/    1479 : 18                  					CLC
     816/    147A : 72 06               					ADC (stat_ptr)
     817/    147C : 92 06               					STA (stat_ptr)
     820/    147E : F6 03               				INC stat_counter,X
     821/    1480 : B5 03               				LDA stat_counter,X
     822/    1482 : D5 04               				CMP stat_max,X
     823/    1484 : F0 03                       BEQ skip
     823/    1486 : 4C D6 13                            JMP cs.stats
     823/    1489 :                             skip:
     824/    1489 : F6 02               			INC item_counter,X
     825/    148B : B5 02               			LDA item_counter,X
     826/    148D : C9 05               			CMP #SLOT_COUNT
     827/    148F : F0 03                       BEQ skip
     827/    1491 : 4C BD 13                            JMP cs.loop
     827/    1494 :                             skip:
     829/    1494 : AD 50 02            			LDA skill_list+Fast_Digger
     830/    1497 : D0 03                       BNE skip
     830/    1499 : 4C A8 14                            JMP if{temp}
     830/    149C :                             skip:
     831/    149C : CE 0F 02            				DEC hero_Mine_Speed
     832/    149F : CE 0F 02            				DEC hero_Mine_Speed
     833/    14A2 : CE 10 02            				DEC hero_Drill_Speed
     834/    14A5 : CE 10 02            				DEC hero_Drill_Speed
     837/    14A8 : B5 00               		LDA Mine1s,X
     838/    14AA : D0 03                       BNE skip
     838/    14AC : 4C B4 14                            JMP if{temp}
     838/    14AF :                             skip:
     839/    14AF : A9 01                                               LDA #1#256
     839/    14B1 : 8D 0F 02                                            STA hero_Mine_Speed
     842/    14B4 : B5 01               		LDA Drill1s,X
     843/    14B6 : D0 03                       BNE skip
     843/    14B8 : 4C C0 14                            JMP if{temp}
     843/    14BB :                             skip:
     844/    14BB : A9 01                                               LDA #1#256
     844/    14BD : 8D 10 02                                            STA hero_Drill_Speed
     847/    14C0 : AD 53 02            		LDA skill_list+Lucky_Crit
     848/    14C3 : D0 03                       BNE skip
     848/    14C5 : 4C D1 14                            JMP if{temp}
     848/    14C8 :                             skip:
     849/    14C8 : AD 13 02            			LDA hero_Crit_Rate
     850/    14CB : 18                  			CLC
     851/    14CC : 69 14               			ADC #20
     852/    14CE : 8D 13 02            			STA hero_Crit_Rate
     855/    14D1 : AD 15 02            		LDA hero_Lava_Dmg
     856/    14D4 : 2D 16 02            		AND hero_Lava_Dmg+1
     857/    14D7 : C9 FF               		CMP #$FF
     858/    14D9 : D0 03                       BNE skip
     858/    14DB : 4C 0B 15                            JMP if{temp}
     858/    14DE :                             skip:
     859/    14DE : AD 11 02                                    LDA hero_Lava_Res
     859/    14E1 : 80 03                       BRA s{ts}c{tc}
     860/    14E3 : 4C 0B 15                    JMP s{ts}done
     860/    14E6 : C9 19                               CMP #25
     860/    14E8 : F0 03                       BEQ skip
     860/    14EA : 4C FA 14                            JMP s{ts}c{tc}
     860/    14ED :                             skip:
     861/    14ED : A9 03                                               LDA #3#256
     861/    14EF : 8D 15 02                                            STA hero_Lava_Dmg
     861/    14F2 : A9 00                                               LDA #3>>8
     861/    14F4 : 8D 16 02                                            STA hero_Lava_Dmg+1
     862/    14F7 : 4C 0B 15                    JMP s{ts}done
     862/    14FA : C9 32                               CMP #50
     862/    14FC : F0 03                       BEQ skip
     862/    14FE : 4C 0B 15                            JMP s{ts}c{tc}
     862/    1501 :                             skip:
     863/    1501 : A9 02                                               LDA #2#256
     863/    1503 : 8D 15 02                                            STA hero_Lava_Dmg
     863/    1506 : A9 00                                               LDA #2>>8
     863/    1508 : 8D 16 02                                            STA hero_Lava_Dmg+1
     867/    150B : AD 08 02                                    LDA hero_HP_Max_temp
     867/    150E : 8D 06 02                                    STA hero_HP_Max
     869/    1511 : AD 06 02            		LDA hero_HP_Max
     870/    1514 : CD 04 02            		CMP hero_HP
     871/    1517 : 90 03                       BCC skip
     871/    1519 : 4C 28 15                            JMP if{temp}
     871/    151C :                             skip:
     872/    151C : AD 06 02                                    LDA hero_HP_Max
     872/    151F : 8D 04 02                                    STA hero_HP
     872/    1522 : AD 07 02                                    LDA hero_HP_Max+1
     872/    1525 : 8D 05 02                                    STA hero_HP+1
     875/    1528 : AD 0B 02            		LDA hero_Batt_Max
     876/    152B : CD 0A 02            		CMP hero_Batt
     877/    152E : 90 03                       BCC skip
     877/    1530 : 4C 39 15                            JMP if{temp}
     877/    1533 :                             skip:
     878/    1533 : AD 0B 02                                    LDA hero_Batt_Max
     878/    1536 : 8D 0A 02                                    STA hero_Batt
     881/    1539 : 86 11                                       STX saveX
     881/    153B : A2 00                                       LDX #0
     881/    153D : 68                                                  PLA
     881/    153E : 95 04                                               STA ZP_locals,X
     881/    1540 : E8                                                  INX
     881/    1541 : E0 04                                               CPX #zpcounter
     881/    1543 : D0 F8                                       BNE ZP_pull
     881/    1545 : A6 11                                       LDX saveX
     881/    1547 : FA                                  PLX
     881/    1548 : 60                          RTS
     885/    1549 :                             MazeHorizStripe:
     887/    1549 :                     value:
     892/    1549 :                     counter:
     893/    1549 : DA                                  PHX
     893/    154A : 8A                                          TXA                             ;2
     893/    154B : 38                                          SEC                             ;2
     893/    154C : E9 09                                       SBC #xcounter   ;2
     893/    154E : AA                                          TAX                             ;2
     893/    154F : 86 11                                       STX saveX
     893/    1551 : A2 02                                       LDX #zpcounter
     893/    1553 : B5 03                                               LDA ZP_locals-1,X
     893/    1555 : 48                                                  PHA
     893/    1556 : CA                                                  DEX
     893/    1557 : D0 FA                                       BNE ZP_push
     893/    1559 : A6 11                                       LDX saveX
     895/    155B : A9 28                                               LDA #MAP_WIDTH#256
     895/    155D : 95 FD                                               STA call_offset,X
     895/    155F : 20 0A 13                    JSR rand8
     896/    1562 : A5 12                                       LDA ret_val
     896/    1564 : 95 01                                       STA stripe_X,X
     897/    1566 : A9 14                                               LDA #MAP_HEIGHT#256
     897/    1568 : 95 FD                                               STA call_offset,X
     897/    156A : 20 0A 13                    JSR rand8
     898/    156D : A5 12                                       LDA ret_val
     898/    156F : 95 02                                       STA stripe_Y,X
     900/    1571 : A9 04                                               LDA #MAP_LAVA_SIZE-1#256
     900/    1573 : 95 FD                                               STA call_offset,X
     900/    1575 : 20 0A 13                    JSR rand8
     901/    1578 : A5 12               		LDA ret_val
     902/    157A : 18                  		CLC
     903/    157B : 69 01               		ADC #1
     904/    157D : 95 03               		STA stripe_width,X
     906/    157F : A9 04                                               LDA #MAP_LAVA_SIZE-1#256
     906/    1581 : 95 FD                                               STA call_offset,X
     906/    1583 : 20 0A 13                    JSR rand8
     907/    1586 : A5 12               		LDA ret_val
     908/    1588 : 18                  		CLC
     909/    1589 : 69 01               		ADC #1
     910/    158B : 95 04               		STA stripe_height,X
     912/    158D : 20 4C 13                    JSR rand5050
     913/    1590 : A5 12                                       LDA ret_val
     913/    1592 : 95 05                                       STA stripe_dx,X
     914/    1594 : 20 4C 13                    JSR rand5050
     915/    1597 : A5 12                                       LDA ret_val
     915/    1599 : 95 06                                       STA stripe_dy,X
     918/    159B : A9 7E               		LDA #map_data#256
     919/    159D : 18                  		CLC
     920/    159E : 75 01               		ADC stripe_X,X
     921/    15A0 : 85 04               		STA map_ptr
     922/    15A2 : A9 03               		LDA #map_data>>8
     923/    15A4 : 69 00               		ADC #0
     924/    15A6 : 85 05               		STA map_ptr+1
     926/    15A8 : B4 02               		LDY stripe_Y,X
     927/    15AA : D0 03                       BNE skip
     927/    15AC : 4C BD 15                            JMP if{temp}
     927/    15AF :                             skip:
     929/    15AF : A9 28                               LDA #MAP_WIDTH#256
     929/    15B1 : 18                          CLC
     929/    15B2 : 65 04                               ADC map_ptr
     929/    15B4 : 85 04                               STA map_ptr
     929/    15B6 : 90 02                               BCC .no_carry
     929/    15B8 : E6 05                                       INC map_ptr+1
     930/    15BA : 88                  				DEY
     931/    15BB : D0 F2               				BNE mhs.mult
     935/    15BD : B4 03               			LDY stripe_width,X
     937/    15BF : B5 01               				LDA stripe_X,X
     938/    15C1 : C9 28               				CMP #MAP_WIDTH
     939/    15C3 : B0 58               				BCS mhs.done
     940/    15C5 : B5 02               				LDA stripe_Y,X
     941/    15C7 : C9 14               				CMP #MAP_HEIGHT
     942/    15C9 : B0 52               				BCS mhs.done
     943/    15CB : B5 00               					LDA value,X
     944/    15CD : 92 04               					STA (map_ptr)
     945/    15CF : B5 05               				LDA stripe_dx,X
     946/    15D1 : D0 03                       BNE skip
     946/    15D3 : 4C E8 15                            JMP if{temp}
     946/    15D6 :                             skip:
     947/    15D6 : D6 01               					DEC stripe_X,X
     948/    15D8 : 30 43               					BMI mhs.done
     949/    15DA : A5 04                               LDA map_ptr
     949/    15DC : 38                                  SEC
     949/    15DD : E9 01                               SBC #1
     949/    15DF : 85 04                               STA map_ptr
     949/    15E1 : B0 02                               BCS no_carry2
     949/    15E3 : C6 05                                       DEC map_ptr+1
     950/    15E5 : 4C F0 15                    JMP if{temp2}
     951/    15E8 : F6 01               					INC stripe_X,X
     952/    15EA : E6 04                               INC map_ptr
     952/    15EC : D0 02                               BNE no_carry2
     952/    15EE : E6 05                                       INC map_ptr+1
     954/    15F0 : 88                  				DEY
     955/    15F1 : D0 CC               				BNE mhs.width
     956/    15F3 : B5 06               			LDA stripe_dy,X
     957/    15F5 : D0 03                       BNE skip
     957/    15F7 : 4C 0C 16                            JMP if{temp}
     957/    15FA :                             skip:
     958/    15FA : D6 02               				DEC stripe_Y,X
     959/    15FC : 30 1F               				BMI mhs.done
     960/    15FE : A5 04                               LDA map_ptr
     960/    1600 : 38                          SEC
     960/    1601 : E9 28                               SBC #MAP_WIDTH
     960/    1603 : 85 04                               STA map_ptr
     960/    1605 : B0 02                               BCS .no_carry
     960/    1607 : C6 05                                       DEC map_ptr+1
     961/    1609 : 4C 19 16                    JMP if{temp2}
     962/    160C : F6 02               				INC stripe_Y,X
     963/    160E : A9 28                               LDA #MAP_WIDTH#256
     963/    1610 : 18                          CLC
     963/    1611 : 65 04                               ADC map_ptr
     963/    1613 : 85 04                               STA map_ptr
     963/    1615 : 90 02                               BCC .no_carry
     963/    1617 : E6 05                                       INC map_ptr+1
     965/    1619 : D6 04               			DEC stripe_height,X
     966/    161B : D0 A0               			BNE mhs.height
     968/    161D : 86 11                                       STX saveX
     968/    161F : A2 00                                       LDX #0
     968/    1621 : 68                                                  PLA
     968/    1622 : 95 04                                               STA ZP_locals,X
     968/    1624 : E8                                                  INX
     968/    1625 : E0 02                                               CPX #zpcounter
     968/    1627 : D0 F8                                       BNE ZP_pull
     968/    1629 : A6 11                                       LDX saveX
     968/    162B : FA                                  PLX
     968/    162C : 60                          RTS
     970/    162D :                             FillMap:
     973/    162D :                     value:
     976/    162D :                     counter:
     977/    162D : DA                                  PHX
     977/    162E : CA                                                  DEX
     977/    162F : CA                                                  DEX
     977/    1630 : CA                                                  DEX
     977/    1631 : CA                                                  DEX
     977/    1632 : 86 11                                       STX saveX
     977/    1634 : A2 02                                       LDX #zpcounter
     977/    1636 : B5 03                                               LDA ZP_locals-1,X
     977/    1638 : 48                                                  PHA
     977/    1639 : CA                                                  DEX
     977/    163A : D0 FA                                       BNE ZP_push
     977/    163C : A6 11                                       LDX saveX
     979/    163E : B5 00                                       LDA ptr_in,X
     979/    1640 : 85 04                                       STA map_ptr
     979/    1642 : B5 01                                       LDA ptr_in+1,X
     979/    1644 : 85 05                                       STA map_ptr+1
     980/    1646 : A9 04                                               LDA #MAP_HEIGHT/5#256
     980/    1648 : 95 03                                               STA counter,X
     982/    164A : B5 02               			LDA value,X
     983/    164C : A0 C8               			LDY #MAP_WIDTH*5
     985/    164E : 88                  				DEY
     986/    164F : 91 04               				STA (map_ptr),Y
     987/    1651 : D0 FB               				BNE fm.loop
     988/    1653 : A9 C8                               LDA #200#256
     988/    1655 : 18                          CLC
     988/    1656 : 65 04                               ADC map_ptr
     988/    1658 : 85 04                               STA map_ptr
     988/    165A : 90 02                               BCC .no_carry
     988/    165C : E6 05                                       INC map_ptr+1
     989/    165E : D6 03               			DEC counter,X
     990/    1660 : D0 E8               			BNE fm.loop_outer
     992/    1662 : 86 11                                       STX saveX
     992/    1664 : A2 00                                       LDX #0
     992/    1666 : 68                                                  PLA
     992/    1667 : 95 04                                               STA ZP_locals,X
     992/    1669 : E8                                                  INX
     992/    166A : E0 02                                               CPX #zpcounter
     992/    166C : D0 F8                                       BNE ZP_pull
     992/    166E : A6 11                                       LDX saveX
     992/    1670 : FA                                  PLX
     992/    1671 : 60                          RTS
     994/    1672 :                             OffsetXY:
     996/    1672 :                     map:
     997/    1672 :                     mX:
     997/    1672 :                     mY:
     998/    1672 : DA                                  PHX
     998/    1673 : CA                                                  DEX
     998/    1674 : CA                                                  DEX
     998/    1675 : CA                                                  DEX
     998/    1676 : CA                                                  DEX
    1000/    1677 : B5 00                                       LDA map,X
    1000/    1679 : 85 12                                       STA ret_val
    1000/    167B : B5 01                                       LDA map+1,X
    1000/    167D : 85 13                                       STA ret_val+1
    1001/    167F : B4 03               		LDY mY,X
    1003/    1681 : D0 03                       BNE skip
    1003/    1683 : 4C 94 16                            JMP if{temp}
    1003/    1686 :                             skip:
    1004/    1686 : A9 28                               LDA #MAP_WIDTH#256
    1004/    1688 : 18                          CLC
    1004/    1689 : 65 12                               ADC ret_val
    1004/    168B : 85 12                               STA ret_val
    1004/    168D : 90 02                               BCC .no_carry
    1004/    168F : E6 13                                       INC ret_val+1
    1005/    1691 : 88                  				DEY
    1006/    1692 : 80 ED               				BRA oxy.mult
    1008/    1694 : B5 02                               LDA mX,X
    1008/    1696 : 18                          CLC
    1008/    1697 : 65 12                               ADC ret_val
    1008/    1699 : 85 12                               STA ret_val
    1008/    169B : 90 02                               BCC .no_carry
    1008/    169D : E6 13                                       INC ret_val+1
    1009/    169F : FA                                  PLX
    1009/    16A0 : 60                          RTS
    1011/    16A1 :                             MapXY:
    1013/    16A1 :                     map:
    1014/    16A1 :                     mX:
    1014/    16A1 :                     mY:
    1015/    16A1 : DA                                  PHX
    1015/    16A2 : CA                                                  DEX
    1015/    16A3 : CA                                                  DEX
    1015/    16A4 : CA                                                  DEX
    1015/    16A5 : CA                                                  DEX
    1017/    16A6 : B5 00                                       LDA map,X
    1017/    16A8 : 85 12                                       STA ret_val
    1017/    16AA : B5 01                                       LDA map+1,X
    1017/    16AC : 85 13                                       STA ret_val+1
    1018/    16AE : B4 03               		LDY mY,X
    1020/    16B0 : D0 03                       BNE skip
    1020/    16B2 : 4C C3 16                            JMP if{temp}
    1020/    16B5 :                             skip:
    1021/    16B5 : A9 28                               LDA #MAP_WIDTH#256
    1021/    16B7 : 18                          CLC
    1021/    16B8 : 65 12                               ADC ret_val
    1021/    16BA : 85 12                               STA ret_val
    1021/    16BC : 90 02                               BCC .no_carry
    1021/    16BE : E6 13                                       INC ret_val+1
    1022/    16C0 : 88                  				DEY
    1023/    16C1 : 80 ED               				BRA mxy.mult
    1025/    16C3 : B4 02               		LDY mX,X
    1026/    16C5 : B1 12               		LDA (ret_val),Y
    1027/    16C7 : 85 12               		STA ret_val
    1028/    16C9 : FA                                  PLX
    1028/    16CA : 60                          RTS
    1030/    16CB :                             MakeMap:
    1033/    16CB :                     counter:
    1034/    16CB : DA                                  PHX
    1034/    16CC : CA                                                  DEX
    1034/    16CD : 86 11                                       STX saveX
    1034/    16CF : A2 02                                       LDX #zpcounter
    1034/    16D1 : B5 03                                               LDA ZP_locals-1,X
    1034/    16D3 : 48                                                  PHA
    1034/    16D4 : CA                                                  DEX
    1034/    16D5 : D0 FA                                       BNE ZP_push
    1034/    16D7 : A6 11                                       LDX saveX
    1037/    16D9 : A9 7E                                               LDA #map_data#256
    1037/    16DB : 95 FC                                               STA call_offset,X
    1037/    16DD : A9 03                                               LDA #map_data>>8
    1037/    16DF : 95 FD                                               STA call_offset+1,X
    1037/    16E1 : A9 00                                               LDA #MAP_BLANK#256
    1037/    16E3 : 95 FE                                               STA call_offset,X
    1037/    16E5 : 20 2D 16                    JSR FillMap
    1040/    16E8 : A0 14               		LDY #MAP_LAVA_COUNT
    1042/    16EA : 5A                  			PHY
    1043/    16EB : A9 05                                               LDA #MAP_LAVA#256
    1043/    16ED : 95 F7                                               STA call_offset,X
    1043/    16EF : 20 49 15                    JSR MazeHorizStripe
    1044/    16F2 : 7A                  			PLY
    1045/    16F3 : 88                  			DEY
    1046/    16F4 : D0 F4               			BNE mm.lava_loop
    1049/    16F6 : A0 3C               		LDY #MAP_WALL_COUNT
    1051/    16F8 : 5A                  			PHY
    1052/    16F9 : A9 04                                               LDA #MAP_ROCK#256
    1052/    16FB : 95 F7                                               STA call_offset,X
    1052/    16FD : 20 49 15                    JSR MazeHorizStripe
    1053/    1700 : 7A                  			PLY
    1054/    1701 : 88                  			DEY
    1055/    1702 : D0 F4               			BNE mm.rock_loop
    1058/    1704 : A9 7E                                               LDA #map_data#256
    1058/    1706 : 85 04                                               STA map_ptr
    1058/    1708 : A9 03                                               LDA #map_data>>8
    1058/    170A : 85 05                                               STA map_ptr+1
    1059/    170C : A9 04                                               LDA #MAP_HEIGHT/5#256
    1059/    170E : 95 00                                               STA counter,X
    1060/    1710 : A0 00               		LDY #0
    1062/    1712 : B1 04               			LDA (map_ptr),Y
    1063/    1714 : C9 00               			CMP #MAP_BLANK
    1064/    1716 : F0 03                       BEQ skip
    1064/    1718 : 4C 51 17                            JMP if{temp}
    1064/    171B :                             skip:
    1065/    171B : A9 04                                               LDA #4#256
    1065/    171D : 95 FD                                               STA call_offset,X
    1065/    171F : 20 0A 13                    JSR rand8
    1066/    1722 : A5 12               				LDA ret_val
    1067/    1724 : 80 03                       BRA s{ts}c{tc}
    1068/    1726 : 4C 4F 17                    JMP s{ts}done
    1068/    1729 : C9 01                               CMP #1
    1068/    172B : F0 03                       BEQ skip
    1068/    172D : 4C 35 17                            JMP s{ts}c{tc}
    1068/    1730 :                             skip:
    1069/    1730 : A9 01               						LDA #MAP_BLANK_90
    1070/    1732 : 4C 4F 17                    JMP s{ts}done
    1070/    1735 : C9 02                               CMP #2
    1070/    1737 : F0 03                       BEQ skip
    1070/    1739 : 4C 41 17                            JMP s{ts}c{tc}
    1070/    173C :                             skip:
    1071/    173C : A9 02               						LDA #MAP_BLANK_180
    1072/    173E : 4C 4F 17                    JMP s{ts}done
    1072/    1741 : C9 03                               CMP #3
    1072/    1743 : F0 03                       BEQ skip
    1072/    1745 : 4C 4D 17                            JMP s{ts}c{tc}
    1072/    1748 :                             skip:
    1073/    1748 : A9 03               						LDA #MAP_BLANK_270
    1074/    174A : 4C 4F 17                    JMP s{ts}done
    1075/    174D : A9 00               						LDA #MAP_BLANK
    1077/    174F : 91 04               				STA (map_ptr),Y
    1079/    1751 : C8                  			INY
    1080/    1752 : C0 C8               			CPY #MAP_WIDTH*5
    1081/    1754 : D0 BC               			BNE mm.blank_loop
    1082/    1756 : A0 00               		LDY #0
    1083/    1758 : A9 C8                               LDA #MAP_WIDTH*5#256
    1083/    175A : 18                          CLC
    1083/    175B : 65 04                               ADC map_ptr
    1083/    175D : 85 04                               STA map_ptr
    1083/    175F : 90 02                               BCC .no_carry
    1083/    1761 : E6 05                                       INC map_ptr+1
    1084/    1763 : D6 00               		DEC counter,X
    1085/    1765 : D0 AB               		BNE mm.blank_loop
    1088/    1767 : A9 7E                                               LDA #map_data#256
    1088/    1769 : 95 FC                                               STA call_offset,X
    1088/    176B : A9 03                                               LDA #map_data>>8
    1088/    176D : 95 FD                                               STA call_offset+1,X
    1088/    176F : A9 01                                               LDA #HERO_START_X#256
    1088/    1771 : 95 FE                                               STA call_offset,X
    1088/    1773 : A9 01                                               LDA #HERO_START_Y#256
    1088/    1775 : 95 FF                                               STA call_offset,X
    1088/    1777 : 20 72 16                    JSR OffsetXY
    1089/    177A : A9 00                                               LDA #MAP_BLANK#256
    1089/    177C : 92 12                                               STA (ret_val)
    1092/    177E : A9 0A                                               LDA #MAP_HEIGHT/2#256
    1092/    1780 : 95 FD                                               STA call_offset,X
    1092/    1782 : 20 0A 13                    JSR rand8
    1093/    1785 : A5 12               		LDA ret_val
    1094/    1787 : 18                  		CLC 
    1095/    1788 : 69 0A               		ADC #MAP_HEIGHT/2
    1096/    178A : 95 00               		STA counter,X
    1097/    178C : A9 14                                               LDA #MAP_WIDTH/2#256
    1097/    178E : 95 FD                                               STA call_offset,X
    1097/    1790 : 20 0A 13                    JSR rand8
    1098/    1793 : A5 12               		LDA ret_val
    1099/    1795 : 18                  		CLC
    1100/    1796 : 69 14               		ADC #MAP_WIDTH/2
    1101/    1798 : 85 12               		STA ret_val
    1102/    179A : A9 7E                                               LDA #map_data#256
    1102/    179C : 95 FC                                               STA call_offset,X
    1102/    179E : A9 03                                               LDA #map_data>>8
    1102/    17A0 : 95 FD                                               STA call_offset+1,X
    1102/    17A2 : A5 12                                       LDA ret_val
    1102/    17A4 : 95 FE                                       STA call_offset,X
    1102/    17A6 : B5 00                                       LDA counter,X
    1102/    17A8 : 95 FF                                       STA call_offset,X
    1102/    17AA : 20 72 16                    JSR OffsetXY
    1103/    17AD : A9 06                                               LDA #MAP_EXIT#256
    1103/    17AF : 92 12                                               STA (ret_val)
    1104/    17B1 : 86 11                                       STX saveX
    1104/    17B3 : A2 00                                       LDX #0
    1104/    17B5 : 68                                                  PLA
    1104/    17B6 : 95 04                                               STA ZP_locals,X
    1104/    17B8 : E8                                                  INX
    1104/    17B9 : E0 02                                               CPX #zpcounter
    1104/    17BB : D0 F8                                       BNE ZP_pull
    1104/    17BD : A6 11                                       LDX saveX
    1104/    17BF : FA                                  PLX
    1104/    17C0 : 60                          RTS
    1106/    17C1 :                             CheckForMonster:
    1108/    17C1 :                     mX:
    1108/    17C1 :                     mY:
    1109/    17C1 : DA                                  PHX
    1109/    17C2 : CA                                                  DEX
    1109/    17C3 : CA                                                  DEX
    1111/    17C4 : A9 9E                                               LDA #monster_map#256
    1111/    17C6 : 95 FC                                               STA call_offset,X
    1111/    17C8 : A9 06                                               LDA #monster_map>>8
    1111/    17CA : 95 FD                                               STA call_offset+1,X
    1111/    17CC : B5 00                                       LDA mX,X
    1111/    17CE : 95 FE                                       STA call_offset,X
    1111/    17D0 : B5 01                                       LDA mY,X
    1111/    17D2 : 95 FF                                       STA call_offset,X
    1111/    17D4 : 20 A1 16                    JSR MapXY
    1112/    17D7 : A5 12               		LDA ret_val
    1113/    17D9 : 64 12               		STZ ret_val
    1114/    17DB : 95 00               		STA mX,X			;reuse variable
    1115/    17DD : C9 FF               		CMP #NO_MONSTER
    1117/    17DF : D0 03                       BNE skip
    1117/    17E1 : 4C F0 17                            JMP if{temp}
    1117/    17E4 :                             skip:
    1118/    17E4 : 0A                  			ASL
    1119/    17E5 : 18                  			CLC
    1120/    17E6 : 75 00               			ADC mX,X
    1121/    17E8 : 69 02               			ADC #MONSTER_ALIVE
    1122/    17EA : A8                  			TAY
    1123/    17EB : B9 66 02            			LDA monster_list,Y
    1124/    17EE : 85 12               			STA ret_val
    1126/    17F0 : FA                                  PLX
    1126/    17F1 : 60                          RTS
    1128/    17F2 :                             CheckForCrystal:
    1130/    17F2 :                     mX:
    1130/    17F2 :                     mY:
    1131/    17F2 : DA                                  PHX
    1131/    17F3 : CA                                                  DEX
    1131/    17F4 : CA                                                  DEX
    1133/    17F5 : A9 BE                                               LDA #crystal_map#256
    1133/    17F7 : 95 FC                                               STA call_offset,X
    1133/    17F9 : A9 09                                               LDA #crystal_map>>8
    1133/    17FB : 95 FD                                               STA call_offset+1,X
    1133/    17FD : B5 00                                       LDA mX,X
    1133/    17FF : 95 FE                                       STA call_offset,X
    1133/    1801 : B5 01                                       LDA mY,X
    1133/    1803 : 95 FF                                       STA call_offset,X
    1133/    1805 : 20 A1 16                    JSR MapXY
    1134/    1808 : A5 12               		LDA ret_val
    1135/    180A : 64 12               		STZ ret_val
    1136/    180C : C9 FF               		CMP #NO_CRYSTAL
    1137/    180E : D0 03                       BNE skip
    1137/    1810 : 4C 1E 18                            JMP if{temp}
    1137/    1813 :                             skip:
    1138/    1813 : 0A                  			ASL
    1139/    1814 : 0A                  			ASL
    1140/    1815 : 18                  			CLC
    1141/    1816 : 69 02               			ADC #CRYSTAL_ACTIVE
    1142/    1818 : A8                  			TAY
    1143/    1819 : B9 DE 02            			LDA crystal_list,Y
    1144/    181C : 85 12               			STA ret_val
    1146/    181E : FA                                  PLX
    1146/    181F : 60                          RTS
    1148/    1820 :                             LoadMonsters:
    1150/    1820 :                     mX:
    1150/    1820 :                     mY:
    1150/    1820 :                     counter:
    1151/    1820 : DA                                  PHX
    1151/    1821 : CA                                                  DEX
    1151/    1822 : CA                                                  DEX
    1151/    1823 : CA                                                  DEX
    1152/    1824 : A9 9E                                               LDA #monster_map#256
    1152/    1826 : 95 FC                                               STA call_offset,X
    1152/    1828 : A9 06                                               LDA #monster_map>>8
    1152/    182A : 95 FD                                               STA call_offset+1,X
    1152/    182C : A9 FF                                               LDA #NO_MONSTER#256
    1152/    182E : 95 FE                                               STA call_offset,X
    1152/    1830 : 20 2D 16                    JSR FillMap
    1153/    1833 : 74 02                                               STZ counter,X
    1155/    1835 : A9 28                                               LDA #MAP_WIDTH#256
    1155/    1837 : 95 FD                                               STA call_offset,X
    1155/    1839 : 20 0A 13                    JSR rand8
    1156/    183C : A5 12                                       LDA ret_val
    1156/    183E : 95 00                                       STA mX,X
    1157/    1840 : A9 14                                               LDA #MAP_HEIGHT#256
    1157/    1842 : 95 FD                                               STA call_offset,X
    1157/    1844 : 20 0A 13                    JSR rand8
    1158/    1847 : A5 12                                       LDA ret_val
    1158/    1849 : 95 01                                       STA mY,X
    1162/    184B : C9 01               			CMP #HERO_START_Y
    1163/    184D : F0 03                       BEQ skip
    1163/    184F : 4C 5D 18                            JMP if{temp}
    1163/    1852 :                             skip:
    1164/    1852 : B5 00               				LDA mX,X
    1165/    1854 : C9 01               				CMP #HERO_START_X
    1166/    1856 : F0 03                       BEQ skip
    1166/    1858 : 4C 5D 18                            JMP if{temp}
    1166/    185B :                             skip:
    1167/    185B : 80 D8               					BRA lm.loop
    1171/    185D : B5 00                                       LDA mX,X
    1171/    185F : 95 FE                                       STA call_offset,X
    1171/    1861 : B5 01                                       LDA mY,X
    1171/    1863 : 95 FF                                       STA call_offset,X
    1171/    1865 : 20 C1 17                    JSR CheckForMonster
    1172/    1868 : A5 12               			LDA ret_val
    1173/    186A : F0 03                       BEQ skip
    1173/    186C : 4C E0 18                            JMP if{temp}
    1173/    186F :                             skip:
    1174/    186F : A9 7E                                               LDA #map_data#256
    1174/    1871 : 95 FC                                               STA call_offset,X
    1174/    1873 : A9 03                                               LDA #map_data>>8
    1174/    1875 : 95 FD                                               STA call_offset+1,X
    1174/    1877 : B5 00                                       LDA mX,X
    1174/    1879 : 95 FE                                       STA call_offset,X
    1174/    187B : B5 01                                       LDA mY,X
    1174/    187D : 95 FF                                       STA call_offset,X
    1174/    187F : 20 A1 16                    JSR MapXY
    1175/    1882 : A5 12               				LDA ret_val
    1176/    1884 : 80 03                       BRA s{ts}c{tc}
    1177/    1886 : 4C E0 18                    JMP s{ts}done
    1177/    1889 : C9 00                               CMP #MAP_BLANK
    1177/    188B : F0 03                       BEQ skip
    1177/    188D : 4C 92 18                            JMP s{ts}c{tc}
    1177/    1890 :                             skip:
    1177/    1890 : 80 16                               BRA s{ts}b{tb}
    1177/    1892 : C9 01                                       CMP #MAP_BLANK_90
    1177/    1894 : D0 04                               BNE s{ts}c{tc}
    1177/    1896 : 80 10                               BRA s{ts}b{tb}
    1177/    1898 : 80 0E                               BRA s{ts}b{tb}
    1177/    189A : C9 02                                       CMP #MAP_BLANK_180
    1177/    189C : D0 04                               BNE s{ts}c{tc}
    1177/    189E : 80 08                               BRA s{ts}b{tb}
    1177/    18A0 : 80 06                               BRA s{ts}b{tb}
    1177/    18A2 : C9 03                                       CMP #MAP_BLANK_270
    1177/    18A4 : D0 3A                               BNE s{ts}c{tc}
    1177/    18A6 : 80 00                               BRA s{ts}b{tb}
    1178/    18A8 : A9 9E                                               LDA #monster_map#256
    1178/    18AA : 95 FC                                               STA call_offset,X
    1178/    18AC : A9 06                                               LDA #monster_map>>8
    1178/    18AE : 95 FD                                               STA call_offset+1,X
    1178/    18B0 : B5 00                                       LDA mX,X
    1178/    18B2 : 95 FE                                       STA call_offset,X
    1178/    18B4 : B5 01                                       LDA mY,X
    1178/    18B6 : 95 FF                                       STA call_offset,X
    1178/    18B8 : 20 72 16                    JSR OffsetXY
    1179/    18BB : B5 02               						LDA counter,X
    1180/    18BD : 92 12               						STA (ret_val)
    1181/    18BF : 0A                  						ASL
    1182/    18C0 : 75 02               						ADC counter,X
    1183/    18C2 : A8                  						TAY
    1184/    18C3 : B5 00               						LDA mX,X
    1185/    18C5 : 99 66 02            						STA monster_list,Y
    1186/    18C8 : C8                  						INY 
    1187/    18C9 : B5 01               						LDA mY,X
    1188/    18CB : 99 66 02            						STA monster_list,Y
    1189/    18CE : C8                  						INY 
    1190/    18CF : A9 FF               						LDA #true
    1191/    18D1 : 99 66 02            						STA monster_list,Y
    1192/    18D4 : B5 02               						LDA counter,X
    1193/    18D6 : 1A                  						INC
    1194/    18D7 : C9 28               						CMP #MONSTER_COUNT
    1195/    18D9 : F0 08               						BEQ lm.done
    1196/    18DB : 95 02               						STA counter,X
    1197/    18DD : 4C 35 18            						JMP lm.loop
    1200/    18E0 : 4C 35 18            			JMP lm.loop
    1203/    18E3 : FA                                  PLX
    1203/    18E4 : 60                          RTS
    1205/    18E5 :                             LoadCrystals:
    1207/    18E5 :                     mX:
    1207/    18E5 :                     mY:
    1207/    18E5 :                     counter:
    1208/    18E5 : DA                                  PHX
    1208/    18E6 : CA                                                  DEX
    1208/    18E7 : CA                                                  DEX
    1208/    18E8 : CA                                                  DEX
    1209/    18E9 : A9 BE                                               LDA #crystal_map#256
    1209/    18EB : 95 FC                                               STA call_offset,X
    1209/    18ED : A9 09                                               LDA #crystal_map>>8
    1209/    18EF : 95 FD                                               STA call_offset+1,X
    1209/    18F1 : A9 FF                                               LDA #NO_CRYSTAL#256
    1209/    18F3 : 95 FE                                               STA call_offset,X
    1209/    18F5 : 20 2D 16                    JSR FillMap
    1211/    18F8 : 74 02                                               STZ counter,X
    1213/    18FA : A9 28                                               LDA #MAP_WIDTH#256
    1213/    18FC : 95 FD                                               STA call_offset,X
    1213/    18FE : 20 0A 13                    JSR rand8
    1214/    1901 : A5 12                                       LDA ret_val
    1214/    1903 : 95 00                                       STA mX,X
    1215/    1905 : A9 14                                               LDA #MAP_HEIGHT#256
    1215/    1907 : 95 FD                                               STA call_offset,X
    1215/    1909 : 20 0A 13                    JSR rand8
    1216/    190C : A5 12                                       LDA ret_val
    1216/    190E : 95 01                                       STA mY,X
    1220/    1910 : C9 01               			CMP #HERO_START_Y
    1221/    1912 : F0 03                       BEQ skip
    1221/    1914 : 4C 22 19                            JMP if{temp}
    1221/    1917 :                             skip:
    1222/    1917 : B5 00               				LDA mX,X
    1223/    1919 : C9 01               				CMP #HERO_START_X
    1224/    191B : F0 03                       BEQ skip
    1224/    191D : 4C 22 19                            JMP if{temp}
    1224/    1920 :                             skip:
    1225/    1920 : 80 D8               					BRA lc.loop
    1229/    1922 : B5 00                                       LDA mX,X
    1229/    1924 : 95 FE                                       STA call_offset,X
    1229/    1926 : B5 01                                       LDA mY,X
    1229/    1928 : 95 FF                                       STA call_offset,X
    1229/    192A : 20 C1 17                    JSR CheckForMonster
    1230/    192D : A5 12               			LDA ret_val
    1231/    192F : F0 03                       BEQ skip
    1231/    1931 : 4C E9 19                            JMP if{temp}
    1231/    1934 :                             skip:
    1232/    1934 : B5 00                                       LDA mX,X
    1232/    1936 : 95 FE                                       STA call_offset,X
    1232/    1938 : B5 01                                       LDA mY,X
    1232/    193A : 95 FF                                       STA call_offset,X
    1232/    193C : 20 F2 17                    JSR CheckForCrystal
    1233/    193F : A5 12               				LDA ret_val
    1234/    1941 : F0 03                       BEQ skip
    1234/    1943 : 4C E9 19                            JMP if{temp}
    1234/    1946 :                             skip:
    1235/    1946 : A9 7E                                               LDA #map_data#256
    1235/    1948 : 95 FC                                               STA call_offset,X
    1235/    194A : A9 03                                               LDA #map_data>>8
    1235/    194C : 95 FD                                               STA call_offset+1,X
    1235/    194E : B5 00                                       LDA mX,X
    1235/    1950 : 95 FE                                       STA call_offset,X
    1235/    1952 : B5 01                                       LDA mY,X
    1235/    1954 : 95 FF                                       STA call_offset,X
    1235/    1956 : 20 A1 16                    JSR MapXY
    1236/    1959 : A5 12               					LDA ret_val
    1237/    195B : 80 03                       BRA s{ts}c{tc}
    1238/    195D : 4C E9 19                    JMP s{ts}done
    1238/    1960 : C9 00                               CMP #MAP_BLANK
    1238/    1962 : F0 03                       BEQ skip
    1238/    1964 : 4C 69 19                            JMP s{ts}c{tc}
    1238/    1967 :                             skip:
    1238/    1967 : 80 16                               BRA s{ts}b{tb}
    1238/    1969 : C9 01                                       CMP #MAP_BLANK_90
    1238/    196B : D0 04                               BNE s{ts}c{tc}
    1238/    196D : 80 10                               BRA s{ts}b{tb}
    1238/    196F : 80 0E                               BRA s{ts}b{tb}
    1238/    1971 : C9 02                                       CMP #MAP_BLANK_180
    1238/    1973 : D0 04                               BNE s{ts}c{tc}
    1238/    1975 : 80 08                               BRA s{ts}b{tb}
    1238/    1977 : 80 06                               BRA s{ts}b{tb}
    1238/    1979 : C9 03                                       CMP #MAP_BLANK_270
    1238/    197B : D0 6C                               BNE s{ts}c{tc}
    1238/    197D : 80 00                               BRA s{ts}b{tb}
    1239/    197F : A9 BE                                               LDA #crystal_map#256
    1239/    1981 : 95 FC                                               STA call_offset,X
    1239/    1983 : A9 09                                               LDA #crystal_map>>8
    1239/    1985 : 95 FD                                               STA call_offset+1,X
    1239/    1987 : B5 00                                       LDA mX,X
    1239/    1989 : 95 FE                                       STA call_offset,X
    1239/    198B : B5 01                                       LDA mY,X
    1239/    198D : 95 FF                                       STA call_offset,X
    1239/    198F : 20 72 16                    JSR OffsetXY
    1240/    1992 : B5 02               							LDA counter,X
    1241/    1994 : 92 12               							STA (ret_val)
    1242/    1996 : 0A                  							ASL
    1243/    1997 : 0A                  							ASL
    1244/    1998 : A8                  							TAY
    1246/    1999 : B5 00               							LDA mX,X
    1247/    199B : 99 DE 02            							STA crystal_list,Y
    1248/    199E : C8                  							INY 
    1250/    199F : B5 01               							LDA mY,X
    1251/    19A1 : 99 DE 02            							STA crystal_list,Y
    1252/    19A4 : C8                  							INY 
    1254/    19A5 : A9 FF               							LDA #true
    1255/    19A7 : 99 DE 02            							STA crystal_list,Y
    1256/    19AA : C8                  							INY
    1258/    19AB : A9 03                                               LDA #3#256
    1258/    19AD : 95 FD                                               STA call_offset,X
    1258/    19AF : 20 0A 13                    JSR rand8
    1259/    19B2 : A5 12                                       LDA ret_val
    1259/    19B4 : 80 03                       BRA s{ts}c{tc}
    1260/    19B6 : 4C DA 19                    JMP s{ts}done
    1260/    19B9 : C9 00                               CMP #0
    1260/    19BB : F0 03                       BEQ skip
    1260/    19BD : 4C C5 19                            JMP s{ts}c{tc}
    1260/    19C0 :                             skip:
    1261/    19C0 : A9 00               									LDA #CRYSTAL_RED_TYPE
    1262/    19C2 : 4C DA 19                    JMP s{ts}done
    1262/    19C5 : C9 01                               CMP #1
    1262/    19C7 : F0 03                       BEQ skip
    1262/    19C9 : 4C D1 19                            JMP s{ts}c{tc}
    1262/    19CC :                             skip:
    1263/    19CC : A9 01               									LDA #CRYSTAL_BLUE_TYPE
    1264/    19CE : 4C DA 19                    JMP s{ts}done
    1264/    19D1 : C9 02                               CMP #2
    1264/    19D3 : F0 03                       BEQ skip
    1264/    19D5 : 4C DA 19                            JMP s{ts}c{tc}
    1264/    19D8 :                             skip:
    1265/    19D8 : A9 02               									LDA #CRYSTAL_YELLOW_TYPE
    1267/    19DA : 99 DE 02            							STA crystal_list,Y
    1268/    19DD : B5 02               							LDA counter,X
    1269/    19DF : 1A                  							INC
    1270/    19E0 : C9 28               							CMP #CRYSTAL_COUNT
    1271/    19E2 : F0 08               							BEQ lc.done
    1272/    19E4 : 95 02               							STA counter,X
    1273/    19E6 : 4C FA 18                    JMP lc.loop
    1277/    19E9 : 4C FA 18            			JMP lc.loop
    1280/    19EC : FA                                  PLX
    1280/    19ED : 60                          RTS
    1282/    19EE :                             UpdateTarget:
    1284/    19EE :                     tX:
    1284/    19EE :                     tY:
    1285/    19EE : DA                                  PHX
    1285/    19EF : CA                                                  DEX
    1285/    19F0 : CA                                                  DEX
    1286/    19F1 : AD 00 02            		LDA display_X
    1287/    19F4 : 18                  		CLC
    1288/    19F5 : 6D 02 02            		ADC hero_X
    1289/    19F8 : 95 00               		STA tX,X
    1290/    19FA : AD 01 02            		LDA display_Y
    1291/    19FD : 18                  		CLC
    1292/    19FE : 6D 03 02            		ADC hero_Y
    1293/    1A01 : 95 01               		STA tY,X
    1294/    1A03 : A9 00                                               LDA #target_none#256
    1294/    1A05 : 8D 23 02                                            STA hero_target_type
    1295/    1A08 : AD 22 02                                    LDA hero_target_direction
    1295/    1A0B : 80 03                       BRA s{ts}c{tc}
    1296/    1A0D : 4C 61 1A                    JMP s{ts}done
    1296/    1A10 : C9 01                               CMP #DIRECTION_UP
    1296/    1A12 : F0 03                       BEQ skip
    1296/    1A14 : 4C 24 1A                            JMP s{ts}c{tc}
    1296/    1A17 :                             skip:
    1297/    1A17 : AD 03 02            				LDA hero_Y
    1298/    1A1A : D0 03                       BNE skip
    1298/    1A1C : 4C 04 1B                            JMP ut.done
    1298/    1A1F :                             skip:
    1299/    1A1F : D6 01               				DEC tY,X
    1300/    1A21 : 4C 61 1A                    JMP s{ts}done
    1300/    1A24 : C9 02                               CMP #DIRECTION_DOWN
    1300/    1A26 : F0 03                       BEQ skip
    1300/    1A28 : 4C 3A 1A                            JMP s{ts}c{tc}
    1300/    1A2B :                             skip:
    1301/    1A2B : AD 03 02            				LDA hero_Y
    1302/    1A2E : C9 03               				CMP #FRAME_HEIGHT-1
    1303/    1A30 : D0 03                       BNE skip
    1303/    1A32 : 4C 04 1B                            JMP ut.done
    1303/    1A35 :                             skip:
    1304/    1A35 : F6 01               				INC tY,X
    1305/    1A37 : 4C 61 1A                    JMP s{ts}done
    1305/    1A3A : C9 03                               CMP #DIRECTION_LEFT
    1305/    1A3C : F0 03                       BEQ skip
    1305/    1A3E : 4C 4E 1A                            JMP s{ts}c{tc}
    1305/    1A41 :                             skip:
    1306/    1A41 : AD 02 02            				LDA hero_X
    1307/    1A44 : D0 03                       BNE skip
    1307/    1A46 : 4C 04 1B                            JMP ut.done
    1307/    1A49 :                             skip:
    1308/    1A49 : D6 00               				DEC tX,X
    1309/    1A4B : 4C 61 1A                    JMP s{ts}done
    1309/    1A4E : C9 04                               CMP #DIRECTION_RIGHT
    1309/    1A50 : F0 03                       BEQ skip
    1309/    1A52 : 4C 61 1A                            JMP s{ts}c{tc}
    1309/    1A55 :                             skip:
    1310/    1A55 : AD 02 02            				LDA hero_X
    1311/    1A58 : C9 04               				CMP #FRAME_WIDTH-1
    1312/    1A5A : D0 03                       BNE skip
    1312/    1A5C : 4C 04 1B                            JMP ut.done
    1312/    1A5F :                             skip:
    1313/    1A5F : F6 00               				INC tX,X
    1315/    1A61 : B5 00                                       LDA tX,X
    1315/    1A63 : 8D 24 02                                    STA hero_target_index
    1316/    1A66 : B5 01                                       LDA tY,X
    1316/    1A68 : 8D 25 02                                    STA hero_target_index2
    1317/    1A6B : A9 7E                                               LDA #map_data#256
    1317/    1A6D : 95 FC                                               STA call_offset,X
    1317/    1A6F : A9 03                                               LDA #map_data>>8
    1317/    1A71 : 95 FD                                               STA call_offset+1,X
    1317/    1A73 : B5 00                                       LDA tX,X
    1317/    1A75 : 95 FE                                       STA call_offset,X
    1317/    1A77 : B5 01                                       LDA tY,X
    1317/    1A79 : 95 FF                                       STA call_offset,X
    1317/    1A7B : 20 A1 16                    JSR MapXY
    1318/    1A7E : A5 12                                       LDA ret_val
    1318/    1A80 : 80 03                       BRA s{ts}c{tc}
    1319/    1A82 : 4C 04 1B                    JMP s{ts}done
    1319/    1A85 : C9 04                               CMP #MAP_ROCK
    1319/    1A87 : F0 03                       BEQ skip
    1319/    1A89 : 4C 94 1A                            JMP s{ts}c{tc}
    1319/    1A8C :                             skip:
    1320/    1A8C : A9 01                                               LDA #target_rock#256
    1320/    1A8E : 8D 23 02                                            STA hero_target_type
    1321/    1A91 : 4C 04 1B                    JMP s{ts}done
    1321/    1A94 : C9 06                               CMP #MAP_EXIT
    1321/    1A96 : F0 03                       BEQ skip
    1321/    1A98 : 4C A3 1A                            JMP s{ts}c{tc}
    1321/    1A9B :                             skip:
    1322/    1A9B : A9 02                                               LDA #target_exit#256
    1322/    1A9D : 8D 23 02                                            STA hero_target_type
    1323/    1AA0 : 4C 04 1B                    JMP s{ts}done
    1324/    1AA3 : B5 00                                       LDA tX,X
    1324/    1AA5 : 95 FE                                       STA call_offset,X
    1324/    1AA7 : B5 01                                       LDA tY,X
    1324/    1AA9 : 95 FF                                       STA call_offset,X
    1324/    1AAB : 20 C1 17                    JSR CheckForMonster
    1325/    1AAE : A5 12               				LDA ret_val
    1326/    1AB0 : D0 03                       BNE skip
    1326/    1AB2 : 4C D5 1A                            JMP if{temp}
    1326/    1AB5 :                             skip:
    1327/    1AB5 : A9 03                                               LDA #target_monster#256
    1327/    1AB7 : 8D 23 02                                            STA hero_target_type
    1328/    1ABA : A9 9E                                               LDA #monster_map#256
    1328/    1ABC : 95 FC                                               STA call_offset,X
    1328/    1ABE : A9 06                                               LDA #monster_map>>8
    1328/    1AC0 : 95 FD                                               STA call_offset+1,X
    1328/    1AC2 : B5 00                                       LDA tX,X
    1328/    1AC4 : 95 FE                                       STA call_offset,X
    1328/    1AC6 : B5 01                                       LDA tY,X
    1328/    1AC8 : 95 FF                                       STA call_offset,X
    1328/    1ACA : 20 A1 16                    JSR MapXY
    1329/    1ACD : A5 12                                       LDA ret_val
    1329/    1ACF : 8D 24 02                                    STA hero_target_index
    1330/    1AD2 : 4C 04 1B                    JMP if{temp2}
    1331/    1AD5 : B5 00                                       LDA tX,X
    1331/    1AD7 : 95 FE                                       STA call_offset,X
    1331/    1AD9 : B5 01                                       LDA tY,X
    1331/    1ADB : 95 FF                                       STA call_offset,X
    1331/    1ADD : 20 F2 17                    JSR CheckForCrystal
    1332/    1AE0 : A5 12               					LDA ret_val
    1333/    1AE2 : D0 03                       BNE skip
    1333/    1AE4 : 4C 04 1B                            JMP if{temp}
    1333/    1AE7 :                             skip:
    1334/    1AE7 : A9 04                                               LDA #target_crystal#256
    1334/    1AE9 : 8D 23 02                                            STA hero_target_type
    1335/    1AEC : A9 BE                                               LDA #crystal_map#256
    1335/    1AEE : 95 FC                                               STA call_offset,X
    1335/    1AF0 : A9 09                                               LDA #crystal_map>>8
    1335/    1AF2 : 95 FD                                               STA call_offset+1,X
    1335/    1AF4 : B5 00                                       LDA tX,X
    1335/    1AF6 : 95 FE                                       STA call_offset,X
    1335/    1AF8 : B5 01                                       LDA tY,X
    1335/    1AFA : 95 FF                                       STA call_offset,X
    1335/    1AFC : 20 A1 16                    JSR MapXY
    1336/    1AFF : A5 12                                       LDA ret_val
    1336/    1B01 : 8D 24 02                                    STA hero_target_index
    1341/    1B04 : FA                                  PLX
    1341/    1B05 : 60                          RTS
    1345/    1B06 :                             DrawRect:
    1347/    1B06 :                     xpos:
    1347/    1B06 :                     ypos:
    1347/    1B06 :                     width:
    1347/    1B06 :                     height:
    1347/    1B06 :                     color:
    1351/    1B06 : DA                                  PHX
    1351/    1B07 : 8A                                          TXA                             ;2
    1351/    1B08 : 38                                          SEC                             ;2
    1351/    1B09 : E9 05                                       SBC #xcounter   ;2
    1351/    1B0B : AA                                          TAX                             ;2
    1351/    1B0C : 86 11                                       STX saveX
    1351/    1B0E : A2 03                                       LDX #zpcounter
    1351/    1B10 : B5 03                                               LDA ZP_locals-1,X
    1351/    1B12 : 48                                                  PHA
    1351/    1B13 : CA                                                  DEX
    1351/    1B14 : D0 FA                                       BNE ZP_push
    1351/    1B16 : A6 11                                       LDX saveX
    1352/    1B18 : B5 02               		LDA width,X
    1353/    1B1A : F0 29               		BEQ dr.done
    1354/    1B1C : 74 FE                                               STZ call_offset,X
    1354/    1B1E : B5 01                                       LDA ypos,X
    1354/    1B20 : 95 FF                                       STA call_offset,X
    1354/    1B22 : 20 4B 0D                    JSR CalcXY
    1355/    1B25 : A5 12                                       LDA ret_val
    1355/    1B27 : 85 04                                       STA gfx_ptr
    1355/    1B29 : A5 13                                       LDA ret_val+1
    1355/    1B2B : 85 05                                       STA gfx_ptr+1
    1356/    1B2D : B5 00               		LDA xpos,X
    1357/    1B2F : 18                  		CLC
    1358/    1B30 : 75 02               		ADC width,X
    1359/    1B32 : 85 06               		STA x_end
    1361/    1B34 : B4 00               			LDY xpos,X
    1362/    1B36 : B5 04               			LDA color,X
    1364/    1B38 : 91 04               				STA (gfx_ptr),Y
    1365/    1B3A : C8                  				INY
    1366/    1B3B : C4 06               				CPY x_end
    1367/    1B3D : D0 F9               				BNE dr.loop
    1368/    1B3F : E6 05               			INC gfx_ptr+1
    1369/    1B41 : D6 03               			DEC height,X
    1370/    1B43 : D0 EF               			BNE dr.loop_outer
    1372/    1B45 : 86 11                                       STX saveX
    1372/    1B47 : A2 00                                       LDX #0
    1372/    1B49 : 68                                                  PLA
    1372/    1B4A : 95 04                                               STA ZP_locals,X
    1372/    1B4C : E8                                                  INX
    1372/    1B4D : E0 03                                               CPX #zpcounter
    1372/    1B4F : D0 F8                                       BNE ZP_pull
    1372/    1B51 : A6 11                                       LDX saveX
    1372/    1B53 : FA                                  PLX
    1372/    1B54 : 60                          RTS
    1374/    1B55 :                             DrawText:
    1377/    1B55 :                     arg1:
    1377/    1B55 :                     arg2:
    1377/    1B55 :                     ypos:
    1380/    1B55 :                     digit:
    1380/    1B55 :                     subtractor:
    1380/    1B55 :                     character:
    1381/    1B55 : DA                                  PHX
    1381/    1B56 : 8A                                          TXA                             ;2
    1381/    1B57 : 38                                          SEC                             ;2
    1381/    1B58 : E9 0C                                       SBC #xcounter   ;2
    1381/    1B5A : AA                                          TAX                             ;2
    1381/    1B5B : 86 11                                       STX saveX
    1381/    1B5D : A2 04                                       LDX #zpcounter
    1381/    1B5F : B5 03                                               LDA ZP_locals-1,X
    1381/    1B61 : 48                                                  PHA
    1381/    1B62 : CA                                                  DEX
    1381/    1B63 : D0 FA                                       BNE ZP_push
    1381/    1B65 : A6 11                                       LDX saveX
    1383/    1B67 : AD 64 02                                    LDA draw_X
    1383/    1B6A : 95 0B                                       STA original_X,X
    1384/    1B6C : AD 64 02                                    LDA draw_X
    1384/    1B6F : 95 FE                                       STA call_offset,X
    1384/    1B71 : B5 04                                       LDA ypos,X
    1384/    1B73 : 95 FF                                       STA call_offset,X
    1384/    1B75 : 20 4B 0D                    JSR CalcXY
    1385/    1B78 : A5 12                                       LDA ret_val
    1385/    1B7A : 85 04                                       STA gfx_ptr
    1385/    1B7C : A5 13                                       LDA ret_val+1
    1385/    1B7E : 85 05                                       STA gfx_ptr+1
    1386/    1B80 : 74 07                                               STZ digit_count,X
    1388/    1B82 : B5 07               			LDA digit_count,X
    1389/    1B84 : D0 03                       BNE skip
    1389/    1B86 : 4C D6 1B                            JMP if{temp}
    1389/    1B89 :                             skip:
    1391/    1B89 : B5 07               				LDA digit_count,X
    1392/    1B8B : 80 03                       BRA s{ts}c{tc}
    1393/    1B8D : 4C B1 1B                    JMP s{ts}done
    1393/    1B90 : C9 01                               CMP #1
    1393/    1B92 : F0 03                       BEQ skip
    1393/    1B94 : 4C 9C 1B                            JMP s{ts}c{tc}
    1393/    1B97 :                             skip:
    1394/    1B97 : A9 01               						LDA #1
    1395/    1B99 : 4C B1 1B                    JMP s{ts}done
    1395/    1B9C : C9 02                               CMP #2
    1395/    1B9E : F0 03                       BEQ skip
    1395/    1BA0 : 4C A8 1B                            JMP s{ts}c{tc}
    1395/    1BA3 :                             skip:
    1396/    1BA3 : A9 0A               						LDA #10
    1397/    1BA5 : 4C B1 1B                    JMP s{ts}done
    1397/    1BA8 : C9 03                               CMP #3
    1397/    1BAA : F0 03                       BEQ skip
    1397/    1BAC : 4C B1 1B                            JMP s{ts}c{tc}
    1397/    1BAF :                             skip:
    1398/    1BAF : A9 64               						LDA #100
    1400/    1BB1 : D6 07               				DEC digit_count,X
    1401/    1BB3 : 95 09               				STA subtractor,X
    1402/    1BB5 : A9 30                                               LDA #'0'#256
    1402/    1BB7 : 95 0A                                               STA character,X
    1404/    1BB9 : B5 08               					LDA digit,X
    1405/    1BBB : 38                  					SEC
    1406/    1BBC : F5 09               					SBC subtractor,X
    1407/    1BBE : B0 03                       BCS skip
    1407/    1BC0 : 4C CC 1B                            JMP if{temp}
    1407/    1BC3 :                             skip:
    1408/    1BC3 : 95 08               						STA digit,X
    1409/    1BC5 : F6 0A               						INC character,X
    1410/    1BC7 : 80 F0               						BRA dtxt.digit
    1411/    1BC9 : 4C D1 1B                    JMP if{temp2}
    1413/    1BCC : 18                  						CLC
    1414/    1BCD : 75 09               						ADC subtractor,X
    1415/    1BCF : 95 08               						STA digit,X
    1417/    1BD1 : B5 0A               				LDA character,X
    1418/    1BD3 : 4C 24 1C                    JMP if{temp2}
    1420/    1BD6 : A1 00               				LDA (str_ptr,X)
    1421/    1BD8 : D0 03                       BNE skip
    1421/    1BDA : 4C 7B 1C                            JMP dtxt.done
    1421/    1BDD :                             skip:
    1422/    1BDD : F6 00                               INC str_ptr,X
    1422/    1BDF : D0 02                               BNE no_carry1
    1422/    1BE1 : F6 01                                       INC str_ptr+1,X
    1423/    1BE3 : C9 24               				CMP #'$'
    1424/    1BE5 : F0 03                       BEQ skip
    1424/    1BE7 : 4C 0A 1C                            JMP if{temp}
    1424/    1BEA :                             skip:
    1425/    1BEA : A9 01                                               LDA #1#256
    1425/    1BEC : 95 07                                               STA digit_count,X
    1426/    1BEE : B5 02                                       LDA arg1,X
    1426/    1BF0 : 95 08                                       STA digit,X
    1427/    1BF2 : 48                  					PHA
    1428/    1BF3 : B5 03                                       LDA arg2,X
    1428/    1BF5 : 95 02                                       STA arg1,X
    1429/    1BF7 : 68                  					PLA
    1430/    1BF8 : C9 0A               					CMP #10
    1431/    1BFA : 90 86               					BCC dtxt.loop
    1432/    1BFC : F6 07               					INC digit_count,X
    1433/    1BFE : C9 64               					CMP #100
    1434/    1C00 : 90 80               					BCC dtxt.loop
    1435/    1C02 : F6 07               					INC digit_count,X
    1436/    1C04 : 4C 82 1B                    JMP dtxt.loop
    1437/    1C07 : 4C 24 1C                    JMP if{temp2}
    1438/    1C0A : C9 2A               					CMP #'*'
    1439/    1C0C : F0 03                       BEQ skip
    1439/    1C0E : 4C 24 1C                            JMP if{temp}
    1439/    1C11 :                             skip:
    1440/    1C11 : B5 0B                                       LDA original_X,X
    1440/    1C13 : 85 04                                       STA gfx_ptr
    1441/    1C15 : A9 00                                       LDA #TEXT_SPACING_Y*SCREEN_WIDTH#256
    1441/    1C17 : 18                                          CLC
    1441/    1C18 : 65 04                                       ADC gfx_ptr
    1441/    1C1A : 85 04                                       STA gfx_ptr
    1441/    1C1C : A9 0A                                       LDA #TEXT_SPACING_Y*SCREEN_WIDTH>>8
    1441/    1C1E : 65 05                                       ADC gfx_ptr+1
    1441/    1C20 : 85 05                                       STA gfx_ptr+1
    1442/    1C22 : 80 B2               						BRA dtxt.next
    1448/    1C24 : 38                  			SEC
    1449/    1C25 : E9 20               			SBC #32	;32 is first printable character
    1450/    1C27 : 64 07               			STZ char_ptr+1
    1451/    1C29 : 0A                  			ASL
    1452/    1C2A : 26 07               			ROL char_ptr+1
    1453/    1C2C : 2A                  			ROL
    1454/    1C2D : 26 07               			ROL char_ptr+1
    1455/    1C2F : 2A                  			ROL
    1456/    1C30 : 26 07               			ROL char_ptr+1
    1459/    1C32 : 69 00               			ADC #CharTable#256
    1460/    1C34 : 85 06               			STA char_ptr
    1461/    1C36 : A5 07               			LDA char_ptr+1
    1462/    1C38 : 69 C0               			ADC #CharTable>>8
    1463/    1C3A : 85 07               			STA char_ptr+1
    1466/    1C3C : A0 00               			LDY #0
    1468/    1C3E : B1 06               				LDA (char_ptr),Y
    1469/    1C40 : 5A                  				PHY
    1470/    1C41 : A0 06               				LDY #6
    1471/    1C43 : 18                  				CLC
    1473/    1C44 : 6A                  					ROR
    1474/    1C45 : 48                  					PHA
    1475/    1C46 : 90 03                       BCC skip
    1475/    1C48 : 4C 50 1C                            JMP if{temp}
    1475/    1C4B :                             skip:
    1476/    1C4B : B5 06               						LDA bg_color,X
    1477/    1C4D : 4C 53 1C                    JMP if{temp2}
    1478/    1C50 : 18                  						CLC
    1479/    1C51 : B5 05               						LDA fg_color,X
    1481/    1C53 : 92 04               					STA (gfx_ptr)
    1482/    1C55 : E6 04               					INC gfx_ptr
    1483/    1C57 : 68                  					PLA
    1484/    1C58 : 88                  					DEY
    1485/    1C59 : D0 E9               					BNE dtxt.pixel
    1486/    1C5B : A5 04               				LDA gfx_ptr
    1487/    1C5D : 38                  				SEC
    1488/    1C5E : E9 06               				SBC #6
    1489/    1C60 : 85 04               				STA gfx_ptr
    1490/    1C62 : E6 05               				INC gfx_ptr+1
    1491/    1C64 : 7A                  				PLY
    1492/    1C65 : C8                  				INY
    1493/    1C66 : C0 08               				CPY #8
    1494/    1C68 : D0 D4               				BNE dtxt.row
    1495/    1C6A : A5 04               			LDA gfx_ptr
    1496/    1C6C : 18                  			CLC
    1497/    1C6D : 69 06               			ADC #6
    1498/    1C6F : 85 04               			STA gfx_ptr
    1499/    1C71 : A5 05               			LDA gfx_ptr+1
    1500/    1C73 : 38                  			SEC
    1501/    1C74 : E9 08               			SBC #8
    1502/    1C76 : 85 05               			STA gfx_ptr+1
    1503/    1C78 : 4C 82 1B            			JMP dtxt.loop
    1505/    1C7B : 86 11                                       STX saveX
    1505/    1C7D : A2 00                                       LDX #0
    1505/    1C7F : 68                                                  PLA
    1505/    1C80 : 95 04                                               STA ZP_locals,X
    1505/    1C82 : E8                                                  INX
    1505/    1C83 : E0 04                                               CPX #zpcounter
    1505/    1C85 : D0 F8                                       BNE ZP_pull
    1505/    1C87 : A6 11                                       LDX saveX
    1505/    1C89 : FA                                  PLX
    1505/    1C8A : 60                          RTS
    1507/    1C8B :                             DrawBar:
    1509/    1C8B :                     xpos:
    1509/    1C8B :                     ypos:
    1509/    1C8B :                     stat1:
    1509/    1C8B :                     stat2:
    1512/    1C8B : DA                                  PHX
    1512/    1C8C : 8A                                          TXA                             ;2
    1512/    1C8D : 38                                          SEC                             ;2
    1512/    1C8E : E9 06                                       SBC #xcounter   ;2
    1512/    1C90 : AA                                          TAX                             ;2
    1512/    1C91 : 86 11                                       STX saveX
    1512/    1C93 : A2 06                                       LDX #zpcounter
    1512/    1C95 : B5 03                                               LDA ZP_locals-1,X
    1512/    1C97 : 48                                                  PHA
    1512/    1C98 : CA                                                  DEX
    1512/    1C99 : D0 FA                                       BNE ZP_push
    1512/    1C9B : A6 11                                       LDX saveX
    1515/    1C9D : B5 02                                       LDA stat1,X
    1515/    1C9F : 85 04                                       STA bar_width
    1517/    1CA1 : 18                  		CLC
    1518/    1CA2 : 26 04                               ROL bar_width
    1518/    1CA4 : 26 05                               ROL bar_width+1
    1519/    1CA6 : 26 04                               ROL bar_width
    1519/    1CA8 : 26 05                               ROL bar_width+1
    1520/    1CAA : 26 04                               ROL bar_width
    1520/    1CAC : 26 05                               ROL bar_width+1
    1521/    1CAE : 26 04                               ROL bar_width
    1521/    1CB0 : 26 05                               ROL bar_width+1
    1522/    1CB2 : A5 04                                       LDA bar_width
    1522/    1CB4 : 85 06                                       STA mult_buff
    1522/    1CB6 : A5 05                                       LDA bar_width+1
    1522/    1CB8 : 85 07                                       STA mult_buff+1
    1523/    1CBA : 26 04                               ROL bar_width
    1523/    1CBC : 26 05                               ROL bar_width+1
    1524/    1CBE : 26 04                               ROL bar_width
    1524/    1CC0 : 26 05                               ROL bar_width+1
    1525/    1CC2 : A5 04                                       LDA bar_width
    1525/    1CC4 : 18                                          CLC
    1525/    1CC5 : 65 06                                       ADC mult_buff
    1525/    1CC7 : 85 06                                       STA mult_buff
    1525/    1CC9 : A5 05                                       LDA bar_width+1
    1525/    1CCB : 65 07                                       ADC mult_buff+1
    1525/    1CCD : 85 07                                       STA mult_buff+1
    1527/    1CCF : 64 04                                               STZ bar_width
    1527/    1CD1 : 64 05                                               STZ bar_width+1
    1528/    1CD3 : B5 03               		LDA stat2,X
    1529/    1CD5 : 85 09               		STA div_buff+1				;divisor
    1530/    1CD7 : 64 08               		STZ div_buff
    1531/    1CD9 : A9 00                                               LDA #$100#256
    1531/    1CDB : 85 12                                               STA ret_val
    1531/    1CDD : A9 01                                               LDA #$100>>8
    1531/    1CDF : 85 13                                               STA ret_val+1
    1533/    1CE1 : A5 06                                       LDA mult_buff
    1533/    1CE3 : 38                                          SEC
    1533/    1CE4 : E5 08                                       SBC div_buff
    1533/    1CE6 : 85 06                                       STA mult_buff
    1533/    1CE8 : A5 07                                       LDA mult_buff+1
    1533/    1CEA : E5 09                                       SBC div_buff+1
    1533/    1CEC : 85 07                                       STA mult_buff+1
    1534/    1CEE : B0 03                       BCS skip
    1534/    1CF0 : 4C 02 1D                            JMP if{temp}
    1534/    1CF3 :                             skip:
    1536/    1CF3 : A5 12                                       LDA ret_val
    1536/    1CF5 : 18                                          CLC
    1536/    1CF6 : 65 04                                       ADC bar_width
    1536/    1CF8 : 85 04                                       STA bar_width
    1536/    1CFA : A5 13                                       LDA ret_val+1
    1536/    1CFC : 65 05                                       ADC bar_width+1
    1536/    1CFE : 85 05                                       STA bar_width+1
    1537/    1D00 : 80 DF               				BRA dbar.div1
    1539/    1D02 : A5 08                                       LDA div_buff
    1539/    1D04 : 18                                          CLC
    1539/    1D05 : 65 06                                       ADC mult_buff
    1539/    1D07 : 85 06                                       STA mult_buff
    1539/    1D09 : A5 09                                       LDA div_buff+1
    1539/    1D0B : 65 07                                       ADC mult_buff+1
    1539/    1D0D : 85 07                                       STA mult_buff+1
    1540/    1D0F : 18                  			CLC
    1541/    1D10 : 66 09                               ROR div_buff+1
    1541/    1D12 : 66 08                               ROR div_buff
    1542/    1D14 : 18                  			CLC
    1543/    1D15 : 66 13                               ROR ret_val+1
    1543/    1D17 : 66 12                               ROR ret_val
    1544/    1D19 : A5 12               			LDA ret_val
    1545/    1D1B : 05 13               			ORA ret_val+1
    1546/    1D1D : D0 C2               			BNE dbar.div1
    1550/    1D1F : B5 00                                       LDA xpos,X
    1550/    1D21 : 95 FB                                       STA call_offset,X
    1550/    1D23 : B5 01                                       LDA ypos,X
    1550/    1D25 : 95 FC                                       STA call_offset,X
    1550/    1D27 : A5 04                                       LDA bar_width
    1550/    1D29 : 95 FD                                       STA call_offset,X
    1550/    1D2B : A9 06                                               LDA #BAR_HEIGHT#256
    1550/    1D2D : 95 FE                                               STA call_offset,X
    1550/    1D2F : B5 04                                       LDA fg_color,X
    1550/    1D31 : 95 FF                                       STA call_offset,X
    1550/    1D33 : 20 06 1B                    JSR DrawRect
    1551/    1D36 : B5 00               		LDA xpos,X
    1552/    1D38 : 18                  		CLC
    1553/    1D39 : 65 04               		ADC bar_width
    1554/    1D3B : 95 00               		STA xpos,X
    1555/    1D3D : A9 50               		LDA #BAR_WIDTH
    1556/    1D3F : 38                  		SEC
    1557/    1D40 : E5 04               		SBC bar_width
    1558/    1D42 : 85 04               		STA bar_width
    1559/    1D44 : B5 00                                       LDA xpos,X
    1559/    1D46 : 95 FB                                       STA call_offset,X
    1559/    1D48 : B5 01                                       LDA ypos,X
    1559/    1D4A : 95 FC                                       STA call_offset,X
    1559/    1D4C : A5 04                                       LDA bar_width
    1559/    1D4E : 95 FD                                       STA call_offset,X
    1559/    1D50 : A9 06                                               LDA #BAR_HEIGHT#256
    1559/    1D52 : 95 FE                                               STA call_offset,X
    1559/    1D54 : B5 05                                       LDA bg_color,X
    1559/    1D56 : 95 FF                                       STA call_offset,X
    1559/    1D58 : 20 06 1B                    JSR DrawRect
    1561/    1D5B : 86 11                                       STX saveX
    1561/    1D5D : A2 00                                       LDX #0
    1561/    1D5F : 68                                                  PLA
    1561/    1D60 : 95 04                                               STA ZP_locals,X
    1561/    1D62 : E8                                                  INX
    1561/    1D63 : E0 06                                               CPX #zpcounter
    1561/    1D65 : D0 F8                                       BNE ZP_pull
    1561/    1D67 : A6 11                                       LDX saveX
    1561/    1D69 : FA                                  PLX
    1561/    1D6A : 60                          RTS
    1563/    1D6B :                             DrawLegend:
    1566/    1D6B :                     height:
    1568/    1D6B : DA                                  PHX
    1568/    1D6C : CA                                                  DEX
    1568/    1D6D : CA                                                  DEX
    1568/    1D6E : CA                                                  DEX
    1568/    1D6F : 86 11                                       STX saveX
    1568/    1D71 : A2 06                                       LDX #zpcounter
    1568/    1D73 : B5 03                                               LDA ZP_locals-1,X
    1568/    1D75 : 48                                                  PHA
    1568/    1D76 : CA                                                  DEX
    1568/    1D77 : D0 FA                                       BNE ZP_push
    1568/    1D79 : A6 11                                       LDX saveX
    1571/    1D7B : A9 A0                                               LDA #LEGEND_LEFT#256
    1571/    1D7D : 95 FB                                               STA call_offset,X
    1571/    1D7F : A9 00                                               LDA #LEGEND_TOP#256
    1571/    1D81 : 95 FC                                               STA call_offset,X
    1571/    1D83 : A9 60                                               LDA #LEGEND_WIDTH#256
    1571/    1D85 : 95 FD                                               STA call_offset,X
    1571/    1D87 : A9 80                                               LDA #LEGEND_HEIGHT#256
    1571/    1D89 : 95 FE                                               STA call_offset,X
    1571/    1D8B : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1571/    1D8D : 95 FF                                               STA call_offset,X
    1571/    1D8F : 20 06 1B                    JSR DrawRect
    1574/    1D92 : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1574/    1D94 : 8D 64 02                                            STA draw_X
    1575/    1D97 : 80 07                                                       BRA str_skip
    1575/    1D99 : 48 50 3A 24 2F 24                                           FCB "HP:$/$",0
    1575/    1DA0 : A9 99                                               LDA #str_addr#256
    1575/    1DA2 : 95 F4                                               STA call_offset,X
    1575/    1DA4 : A9 1D                                               LDA #str_addr>>8
    1575/    1DA6 : 95 F5                                               STA call_offset+1,X
    1575/    1DA8 : AD 04 02                                    LDA hero_HP
    1575/    1DAB : 95 F6                                       STA call_offset,X
    1575/    1DAD : AD 06 02                                    LDA hero_HP_Max
    1575/    1DB0 : 95 F7                                       STA call_offset,X
    1575/    1DB2 : A9 04                                               LDA #LEGEND_HP_TOP#256
    1575/    1DB4 : 95 F8                                               STA call_offset,X
    1575/    1DB6 : A9 3F                                               LDA #COLOR_WHITE#256
    1575/    1DB8 : 95 F9                                               STA call_offset,X
    1575/    1DBA : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1575/    1DBC : 95 FA                                               STA call_offset,X
    1575/    1DBE : 20 55 1B                    JSR DrawText
    1576/    1DC1 : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1576/    1DC3 : 95 FA                                               STA call_offset,X
    1576/    1DC5 : A9 0D                                               LDA #LEGEND_HP_BAR_TOP#256
    1576/    1DC7 : 95 FB                                               STA call_offset,X
    1576/    1DC9 : AD 04 02                                    LDA hero_HP
    1576/    1DCC : 95 FC                                       STA call_offset,X
    1576/    1DCE : AD 06 02                                    LDA hero_HP_Max
    1576/    1DD1 : 95 FD                                       STA call_offset,X
    1576/    1DD3 : A9 03                                               LDA #COLOR_RED#256
    1576/    1DD5 : 95 FE                                               STA call_offset,X
    1576/    1DD7 : A9 02                                               LDA #COLOR_DARK_RED#256
    1576/    1DD9 : 95 FF                                               STA call_offset,X
    1576/    1DDB : 20 8B 1C                    JSR DrawBar
    1578/    1DDE : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1578/    1DE0 : 8D 64 02                                            STA draw_X
    1579/    1DE3 : 80 09                                                       BRA str_skip
    1579/    1DE5 : 42 61 74 74 3A 24                                           FCB "Batt:$/$",0
    1579/    1DEE : A9 E5                                               LDA #str_addr#256
    1579/    1DF0 : 95 F4                                               STA call_offset,X
    1579/    1DF2 : A9 1D                                               LDA #str_addr>>8
    1579/    1DF4 : 95 F5                                               STA call_offset+1,X
    1579/    1DF6 : AD 0A 02                                    LDA hero_Batt
    1579/    1DF9 : 95 F6                                       STA call_offset,X
    1579/    1DFB : AD 0B 02                                    LDA hero_Batt_Max
    1579/    1DFE : 95 F7                                       STA call_offset,X
    1579/    1E00 : A9 18                                               LDA #LEGEND_BATT_TOP#256
    1579/    1E02 : 95 F8                                               STA call_offset,X
    1579/    1E04 : A9 3F                                               LDA #COLOR_WHITE#256
    1579/    1E06 : 95 F9                                               STA call_offset,X
    1579/    1E08 : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1579/    1E0A : 95 FA                                               STA call_offset,X
    1579/    1E0C : 20 55 1B                    JSR DrawText
    1580/    1E0F : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1580/    1E11 : 95 FA                                               STA call_offset,X
    1580/    1E13 : A9 21                                               LDA #LEGEND_BATT_BAR_TOP#256
    1580/    1E15 : 95 FB                                               STA call_offset,X
    1580/    1E17 : AD 0A 02                                    LDA hero_Batt
    1580/    1E1A : 95 FC                                       STA call_offset,X
    1580/    1E1C : AD 0B 02                                    LDA hero_Batt_Max
    1580/    1E1F : 95 FD                                       STA call_offset,X
    1580/    1E21 : A9 30                                               LDA #COLOR_BLUE#256
    1580/    1E23 : 95 FE                                               STA call_offset,X
    1580/    1E25 : A9 20                                               LDA #COLOR_DARK_BLUE#256
    1580/    1E27 : 95 FF                                               STA call_offset,X
    1580/    1E29 : 20 8B 1C                    JSR DrawBar
    1582/    1E2C : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1582/    1E2E : 8D 64 02                                            STA draw_X
    1583/    1E31 : 80 08                                                       BRA str_skip
    1583/    1E33 : 45 78 70 3A 24 2F                                           FCB "Exp:$/$",0
    1583/    1E3B : A9 33                                               LDA #str_addr#256
    1583/    1E3D : 95 F4                                               STA call_offset,X
    1583/    1E3F : A9 1E                                               LDA #str_addr>>8
    1583/    1E41 : 95 F5                                               STA call_offset+1,X
    1583/    1E43 : AD 1A 02                                    LDA hero_Exp
    1583/    1E46 : 95 F6                                       STA call_offset,X
    1583/    1E48 : AD 1B 02                                    LDA hero_Exp_Max
    1583/    1E4B : 95 F7                                       STA call_offset,X
    1583/    1E4D : A9 2C                                               LDA #LEGEND_EXP_TOP#256
    1583/    1E4F : 95 F8                                               STA call_offset,X
    1583/    1E51 : A9 3F                                               LDA #COLOR_WHITE#256
    1583/    1E53 : 95 F9                                               STA call_offset,X
    1583/    1E55 : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1583/    1E57 : 95 FA                                               STA call_offset,X
    1583/    1E59 : 20 55 1B                    JSR DrawText
    1584/    1E5C : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1584/    1E5E : 95 FA                                               STA call_offset,X
    1584/    1E60 : A9 35                                               LDA #LEGEND_EXP_BAR_TOP#256
    1584/    1E62 : 95 FB                                               STA call_offset,X
    1584/    1E64 : AD 1A 02                                    LDA hero_Exp
    1584/    1E67 : 95 FC                                       STA call_offset,X
    1584/    1E69 : AD 1B 02                                    LDA hero_Exp_Max
    1584/    1E6C : 95 FD                                       STA call_offset,X
    1584/    1E6E : A9 0C                                               LDA #COLOR_GREEN#256
    1584/    1E70 : 95 FE                                               STA call_offset,X
    1584/    1E72 : A9 08                                               LDA #COLOR_DARK_GREEN#256
    1584/    1E74 : 95 FF                                               STA call_offset,X
    1584/    1E76 : 20 8B 1C                    JSR DrawBar
    1587/    1E79 : AD 23 02                                    LDA hero_target_type
    1587/    1E7C : 80 03                       BRA s{ts}c{tc}
    1588/    1E7E : 4C C0 1F                    JMP s{ts}done
    1588/    1E81 : C9 01                               CMP #target_rock
    1588/    1E83 : F0 03                       BEQ skip
    1588/    1E85 : 4C B2 1E                            JMP s{ts}c{tc}
    1588/    1E88 :                             skip:
    1589/    1E88 : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1589/    1E8A : 8D 64 02                                            STA draw_X
    1590/    1E8D : 80 05                                                       BRA str_skip
    1590/    1E8F : 52 6F 63 6B 00                                              FCB "Rock",0
    1590/    1E94 : A9 8F                                               LDA #str_addr#256
    1590/    1E96 : 95 F4                                               STA call_offset,X
    1590/    1E98 : A9 1E                                               LDA #str_addr>>8
    1590/    1E9A : 95 F5                                               STA call_offset+1,X
    1590/    1E9C : 74 F6                                               STZ call_offset,X
    1590/    1E9E : 74 F7                                               STZ call_offset,X
    1590/    1EA0 : A9 40                                               LDA #LEGEND_TARGET_TOP#256
    1590/    1EA2 : 95 F8                                               STA call_offset,X
    1590/    1EA4 : A9 21                                               LDA #COLOR_ROCK#256
    1590/    1EA6 : 95 F9                                               STA call_offset,X
    1590/    1EA8 : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1590/    1EAA : 95 FA                                               STA call_offset,X
    1590/    1EAC : 20 55 1B                    JSR DrawText
    1591/    1EAF : 4C C0 1F                    JMP s{ts}done
    1591/    1EB2 : C9 02                               CMP #target_exit
    1591/    1EB4 : F0 03                       BEQ skip
    1591/    1EB6 : 4C E3 1E                            JMP s{ts}c{tc}
    1591/    1EB9 :                             skip:
    1592/    1EB9 : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1592/    1EBB : 8D 64 02                                            STA draw_X
    1593/    1EBE : 80 05                                                       BRA str_skip
    1593/    1EC0 : 45 78 69 74 00                                              FCB "Exit",0
    1593/    1EC5 : A9 C0                                               LDA #str_addr#256
    1593/    1EC7 : 95 F4                                               STA call_offset,X
    1593/    1EC9 : A9 1E                                               LDA #str_addr>>8
    1593/    1ECB : 95 F5                                               STA call_offset+1,X
    1593/    1ECD : 74 F6                                               STZ call_offset,X
    1593/    1ECF : 74 F7                                               STZ call_offset,X
    1593/    1ED1 : A9 40                                               LDA #LEGEND_TARGET_TOP#256
    1593/    1ED3 : 95 F8                                               STA call_offset,X
    1593/    1ED5 : A9 35                                               LDA #COLOR_EXIT#256
    1593/    1ED7 : 95 F9                                               STA call_offset,X
    1593/    1ED9 : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1593/    1EDB : 95 FA                                               STA call_offset,X
    1593/    1EDD : 20 55 1B                    JSR DrawText
    1594/    1EE0 : 4C C0 1F                    JMP s{ts}done
    1594/    1EE3 : C9 03                               CMP #target_monster
    1594/    1EE5 : F0 03                       BEQ skip
    1594/    1EE7 : 4C 1A 1F                            JMP s{ts}c{tc}
    1594/    1EEA :                             skip:
    1595/    1EEA : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1595/    1EEC : 8D 64 02                                            STA draw_X
    1596/    1EEF : 80 0B                                                       BRA str_skip
    1596/    1EF1 : 45 76 69 6C 20 72                                           FCB "Evil robot",0
    1596/    1EFC : A9 F1                                               LDA #str_addr#256
    1596/    1EFE : 95 F4                                               STA call_offset,X
    1596/    1F00 : A9 1E                                               LDA #str_addr>>8
    1596/    1F02 : 95 F5                                               STA call_offset+1,X
    1596/    1F04 : 74 F6                                               STZ call_offset,X
    1596/    1F06 : 74 F7                                               STZ call_offset,X
    1596/    1F08 : A9 40                                               LDA #LEGEND_TARGET_TOP#256
    1596/    1F0A : 95 F8                                               STA call_offset,X
    1596/    1F0C : A9 01                                               LDA #COLOR_MONSTER#256
    1596/    1F0E : 95 F9                                               STA call_offset,X
    1596/    1F10 : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1596/    1F12 : 95 FA                                               STA call_offset,X
    1596/    1F14 : 20 55 1B                    JSR DrawText
    1597/    1F17 : 4C C0 1F                    JMP s{ts}done
    1597/    1F1A : C9 04                               CMP #target_crystal
    1597/    1F1C : F0 03                       BEQ skip
    1597/    1F1E : 4C C0 1F                            JMP s{ts}c{tc}
    1597/    1F21 :                             skip:
    1598/    1F21 : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1598/    1F23 : 8D 64 02                                            STA draw_X
    1599/    1F26 : AD 24 02            				LDA hero_target_index
    1600/    1F29 : 0A                  				ASL
    1601/    1F2A : 0A                  				ASL
    1602/    1F2B : 69 03               				ADC #CRYSTAL_COLOR
    1603/    1F2D : A8                  				TAY
    1604/    1F2E : B9 DE 02            				LDA crystal_list,Y
    1605/    1F31 : 80 03                       BRA s{ts}c{tc}
    1606/    1F33 : 4C C0 1F                    JMP s{ts}done
    1606/    1F36 : C9 00                               CMP #CRYSTAL_RED_TYPE
    1606/    1F38 : F0 03                       BEQ skip
    1606/    1F3A : 4C 65 1F                            JMP s{ts}c{tc}
    1606/    1F3D :                             skip:
    1607/    1F3D : 80 08                                                       BRA str_skip
    1607/    1F3F : 43 72 79 73 74 61                                           FCB "Crystal",0
    1607/    1F47 : A9 3F                                               LDA #str_addr#256
    1607/    1F49 : 95 F4                                               STA call_offset,X
    1607/    1F4B : A9 1F                                               LDA #str_addr>>8
    1607/    1F4D : 95 F5                                               STA call_offset+1,X
    1607/    1F4F : 74 F6                                               STZ call_offset,X
    1607/    1F51 : 74 F7                                               STZ call_offset,X
    1607/    1F53 : A9 40                                               LDA #LEGEND_TARGET_TOP#256
    1607/    1F55 : 95 F8                                               STA call_offset,X
    1607/    1F57 : A9 17                                               LDA #COLOR_CRYSTAL_RED1#256
    1607/    1F59 : 95 F9                                               STA call_offset,X
    1607/    1F5B : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1607/    1F5D : 95 FA                                               STA call_offset,X
    1607/    1F5F : 20 55 1B                    JSR DrawText
    1608/    1F62 : 4C C0 1F                    JMP s{ts}done
    1608/    1F65 : C9 01                               CMP #CRYSTAL_BLUE_TYPE
    1608/    1F67 : F0 03                       BEQ skip
    1608/    1F69 : 4C 94 1F                            JMP s{ts}c{tc}
    1608/    1F6C :                             skip:
    1609/    1F6C : 80 08                                                       BRA str_skip
    1609/    1F6E : 43 72 79 73 74 61                                           FCB "Crystal",0
    1609/    1F76 : A9 6E                                               LDA #str_addr#256
    1609/    1F78 : 95 F4                                               STA call_offset,X
    1609/    1F7A : A9 1F                                               LDA #str_addr>>8
    1609/    1F7C : 95 F5                                               STA call_offset+1,X
    1609/    1F7E : 74 F6                                               STZ call_offset,X
    1609/    1F80 : 74 F7                                               STZ call_offset,X
    1609/    1F82 : A9 40                                               LDA #LEGEND_TARGET_TOP#256
    1609/    1F84 : 95 F8                                               STA call_offset,X
    1609/    1F86 : A9 35                                               LDA #COLOR_CRYSTAL_BLUE1#256
    1609/    1F88 : 95 F9                                               STA call_offset,X
    1609/    1F8A : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1609/    1F8C : 95 FA                                               STA call_offset,X
    1609/    1F8E : 20 55 1B                    JSR DrawText
    1610/    1F91 : 4C C0 1F                    JMP s{ts}done
    1610/    1F94 : C9 02                               CMP #CRYSTAL_YELLOW_TYPE
    1610/    1F96 : F0 03                       BEQ skip
    1610/    1F98 : 4C C0 1F                            JMP s{ts}c{tc}
    1610/    1F9B :                             skip:
    1611/    1F9B : 80 08                                                       BRA str_skip
    1611/    1F9D : 43 72 79 73 74 61                                           FCB "Crystal",0
    1611/    1FA5 : A9 9D                                               LDA #str_addr#256
    1611/    1FA7 : 95 F4                                               STA call_offset,X
    1611/    1FA9 : A9 1F                                               LDA #str_addr>>8
    1611/    1FAB : 95 F5                                               STA call_offset+1,X
    1611/    1FAD : 74 F6                                               STZ call_offset,X
    1611/    1FAF : 74 F7                                               STZ call_offset,X
    1611/    1FB1 : A9 40                                               LDA #LEGEND_TARGET_TOP#256
    1611/    1FB3 : 95 F8                                               STA call_offset,X
    1611/    1FB5 : A9 1F                                               LDA #COLOR_CRYSTAL_YELLOW1#256
    1611/    1FB7 : 95 F9                                               STA call_offset,X
    1611/    1FB9 : A9 15                                               LDA #COLOR_LEGEND_BG#256
    1611/    1FBB : 95 FA                                               STA call_offset,X
    1611/    1FBD : 20 55 1B                    JSR DrawText
    1616/    1FC0 : AD 26 02            		LDA hero_activity
    1617/    1FC3 : D0 03                       BNE skip
    1617/    1FC5 : 4C E5 1F                            JMP if{temp}
    1617/    1FC8 :                             skip:
    1618/    1FC8 : A9 A8                                               LDA #LEGEND_LEFT+LEGEND_STATS_LEFT#256
    1618/    1FCA : 95 FA                                               STA call_offset,X
    1618/    1FCC : A9 49                                               LDA #LEGEND_TARGET_BAR_TOP#256
    1618/    1FCE : 95 FB                                               STA call_offset,X
    1618/    1FD0 : AD 27 02                                    LDA hero_activity_ticks
    1618/    1FD3 : 95 FC                                       STA call_offset,X
    1618/    1FD5 : AD 29 02                                    LDA hero_activity_ticks_max
    1618/    1FD8 : 95 FD                                       STA call_offset,X
    1618/    1FDA : A9 32                                               LDA #COLOR_PURPLE#256
    1618/    1FDC : 95 FE                                               STA call_offset,X
    1618/    1FDE : A9 21                                               LDA #COLOR_DARK_PURPLE#256
    1618/    1FE0 : 95 FF                                               STA call_offset,X
    1618/    1FE2 : 20 8B 1C                    JSR DrawBar
    1622/    1FE5 : A9 7E                                               LDA #map_data#256
    1622/    1FE7 : 85 06                                               STA map_ptr
    1622/    1FE9 : A9 03                                               LDA #map_data>>8
    1622/    1FEB : 85 07                                               STA map_ptr+1
    1623/    1FED : A9 A8                                               LDA #(LEGEND_LEFT+LEGEND_MAZE_LEFT)#256
    1623/    1FEF : 95 FE                                               STA call_offset,X
    1623/    1FF1 : A9 54                                               LDA #LEGEND_MAZE_TOP#256
    1623/    1FF3 : 95 FF                                               STA call_offset,X
    1623/    1FF5 : 20 4B 0D                    JSR CalcXY
    1624/    1FF8 : A5 12                                       LDA ret_val
    1624/    1FFA : 85 04                                       STA gfx_ptr
    1624/    1FFC : A5 13                                       LDA ret_val+1
    1624/    1FFE : 85 05                                       STA gfx_ptr+1
    1625/    2000 : A9 14                                               LDA #MAP_HEIGHT#256
    1625/    2002 : 95 00                                               STA height,X
    1626/    2004 : 64 08                                               STZ mX
    1627/    2006 : 64 09                                               STZ mY
    1629/    2008 : A0 00               			LDY #0	;X pos into map
    1631/    200A : A9 00                                               LDA #false#256
    1631/    200C : 95 01                                               STA if_monster,X
    1632/    200E : A9 00                                               LDA #false#256
    1632/    2010 : 95 02                                               STA if_crystal,X
    1633/    2012 : 5A                  				PHY
    1634/    2013 : A5 08                                       LDA mX
    1634/    2015 : 95 FE                                       STA call_offset,X
    1634/    2017 : A5 09                                       LDA mY
    1634/    2019 : 95 FF                                       STA call_offset,X
    1634/    201B : 20 C1 17                    JSR CheckForMonster
    1635/    201E : A5 12                                       LDA ret_val
    1635/    2020 : 95 01                                       STA if_monster,X
    1636/    2022 : A5 08                                       LDA mX
    1636/    2024 : 95 FE                                       STA call_offset,X
    1636/    2026 : A5 09                                       LDA mY
    1636/    2028 : 95 FF                                       STA call_offset,X
    1636/    202A : 20 F2 17                    JSR CheckForCrystal
    1637/    202D : A5 12                                       LDA ret_val
    1637/    202F : 95 02                                       STA if_crystal,X
    1638/    2031 : 7A                  				PLY
    1640/    2032 : A5 08               				LDA mX
    1641/    2034 : 1A                  				INC
    1642/    2035 : C9 28               				CMP #MAP_WIDTH
    1643/    2037 : D0 03                       BNE skip
    1643/    2039 : 4C 41 20                            JMP if{temp}
    1643/    203C :                             skip:
    1644/    203C : 85 08               					STA mX
    1645/    203E : 4C 45 20                    JMP if{temp2}
    1646/    2041 : 64 08               					STZ mX
    1647/    2043 : E6 09               					INC mY
    1650/    2045 : B5 01               				LDA if_monster,X
    1651/    2047 : D0 03                       BNE skip
    1651/    2049 : 4C 50 20                            JMP if{temp}
    1651/    204C :                             skip:
    1652/    204C : A9 03               					LDA #COLOR_RED
    1653/    204E : 80 5C               					BRA dl.pixel
    1656/    2050 : B5 02               				LDA if_crystal,X
    1657/    2052 : D0 03                       BNE skip
    1657/    2054 : 4C 5B 20                            JMP if{temp}
    1657/    2057 :                             skip:
    1658/    2057 : A9 0F               					LDA #COLOR_YELLOW
    1659/    2059 : 80 51               					BRA dl.pixel
    1663/    205B : B1 06               				LDA (map_ptr),Y
    1664/    205D : 80 03                       BRA s{ts}c{tc}
    1665/    205F : 4C AC 20                    JMP s{ts}done
    1665/    2062 : C9 00                               CMP #MAP_BLANK
    1665/    2064 : F0 03                       BEQ skip
    1665/    2066 : 4C 6B 20                            JMP s{ts}c{tc}
    1665/    2069 :                             skip:
    1665/    2069 : 80 16                               BRA s{ts}b{tb}
    1665/    206B : C9 01                                       CMP #MAP_BLANK_90
    1665/    206D : D0 04                               BNE s{ts}c{tc}
    1665/    206F : 80 10                               BRA s{ts}b{tb}
    1665/    2071 : 80 0E                               BRA s{ts}b{tb}
    1665/    2073 : C9 02                                       CMP #MAP_BLANK_180
    1665/    2075 : D0 04                               BNE s{ts}c{tc}
    1665/    2077 : 80 08                               BRA s{ts}b{tb}
    1665/    2079 : 80 06                               BRA s{ts}b{tb}
    1665/    207B : C9 03                                       CMP #MAP_BLANK_270
    1665/    207D : D0 07                               BNE s{ts}c{tc}
    1665/    207F : 80 00                               BRA s{ts}b{tb}
    1666/    2081 : A9 3B               						LDA #COLOR_DIRT
    1667/    2083 : 4C AC 20                    JMP s{ts}done
    1667/    2086 : C9 04                               CMP #MAP_ROCK
    1667/    2088 : F0 03                       BEQ skip
    1667/    208A : 4C 92 20                            JMP s{ts}c{tc}
    1667/    208D :                             skip:
    1668/    208D : A9 21               						LDA #COLOR_ROCK
    1669/    208F : 4C AC 20                    JMP s{ts}done
    1669/    2092 : C9 05                               CMP #MAP_LAVA
    1669/    2094 : F0 03                       BEQ skip
    1669/    2096 : 4C 9E 20                            JMP s{ts}c{tc}
    1669/    2099 :                             skip:
    1670/    2099 : A9 0B               						LDA #COLOR_LAVA
    1671/    209B : 4C AC 20                    JMP s{ts}done
    1671/    209E : C9 06                               CMP #MAP_EXIT
    1671/    20A0 : F0 03                       BEQ skip
    1671/    20A2 : 4C AA 20                            JMP s{ts}c{tc}
    1671/    20A5 :                             skip:
    1672/    20A5 : A9 35               						LDA #COLOR_EXIT
    1673/    20A7 : 4C AC 20                    JMP s{ts}done
    1674/    20AA : A9 3F               						LDA #COLOR_WHITE
    1679/    20AC : 5A                  				PHY
    1680/    20AD : 48                  				PHA
    1681/    20AE : 98                  				TYA
    1682/    20AF : 0A                  				ASL
    1683/    20B0 : A8                  				TAY
    1684/    20B1 : 68                  				PLA
    1685/    20B2 : 91 04               				STA (gfx_ptr),Y
    1686/    20B4 : C8                  				INY
    1687/    20B5 : 91 04               				STA (gfx_ptr),Y
    1688/    20B7 : E6 05               				INC gfx_ptr+1
    1689/    20B9 : 91 04               				STA (gfx_ptr),Y
    1690/    20BB : 88                  				DEY
    1691/    20BC : 91 04               				STA (gfx_ptr),Y
    1692/    20BE : C6 05               				DEC gfx_ptr+1
    1693/    20C0 : 7A                  				PLY
    1694/    20C1 : C8                  				INY
    1695/    20C2 : C0 28               				CPY #MAP_WIDTH
    1696/    20C4 : F0 03                       BEQ skip
    1696/    20C6 : 4C 0A 20                            JMP dl.loop
    1696/    20C9 :                             skip:
    1697/    20C9 : A9 A8               			LDA #LEGEND_LEFT+LEGEND_MAZE_LEFT
    1698/    20CB : 85 04               			STA gfx_ptr
    1699/    20CD : E6 05               			INC gfx_ptr+1
    1700/    20CF : E6 05               			INC gfx_ptr+1
    1701/    20D1 : A9 28                               LDA #MAP_WIDTH#256
    1701/    20D3 : 18                          CLC
    1701/    20D4 : 65 06                               ADC map_ptr
    1701/    20D6 : 85 06                               STA map_ptr
    1701/    20D8 : 90 02                               BCC .no_carry
    1701/    20DA : E6 07                                       INC map_ptr+1
    1702/    20DC : D6 00               			DEC height,X
    1703/    20DE : F0 03                       BEQ skip
    1703/    20E0 : 4C 08 20                            JMP dl.loop_outer
    1703/    20E3 :                             skip:
    1707/    20E3 : AD 00 02            		LDA display_X
    1708/    20E6 : 0A                  		ASL
    1709/    20E7 : 69 A8               		ADC #LEGEND_LEFT+LEGEND_MAZE_LEFT
    1710/    20E9 : 85 04               		STA gfx_ptr
    1711/    20EB : 85 06               		STA map_ptr			;reuse as second gfx_ptr
    1712/    20ED : AD 01 02            		LDA display_Y
    1713/    20F0 : 0A                  		ASL
    1714/    20F1 : 69 94               		ADC #LEGEND_MAZE_TOP+(SCREEN_ADDRESS>>8)
    1715/    20F3 : 85 05               		STA gfx_ptr+1
    1716/    20F5 : 69 07               		ADC #FRAME_HEIGHT*2-1
    1717/    20F7 : 85 07               		STA map_ptr+1
    1720/    20F9 : A0 00               		LDY #0
    1721/    20FB : A9 0C               		LDA #COLOR_GREEN
    1723/    20FD : 91 04               			STA (gfx_ptr),Y
    1724/    20FF : 91 06               			STA (map_ptr),Y
    1725/    2101 : C8                  			INY
    1726/    2102 : C0 0A               			CPY #FRAME_WIDTH*2
    1727/    2104 : D0 F7               			BNE dl.hline
    1730/    2106 : A5 04               		LDA gfx_ptr
    1731/    2108 : 18                  		CLC
    1732/    2109 : 69 09               		ADC #FRAME_WIDTH*2-1
    1733/    210B : 85 06               		STA map_ptr
    1734/    210D : E6 05               		INC gfx_ptr+1
    1735/    210F : A5 05                                       LDA gfx_ptr+1
    1735/    2111 : 85 07                                       STA map_ptr+1
    1736/    2113 : A0 06               		LDY #(FRAME_HEIGHT-1)*2
    1737/    2115 : A9 0C               		LDA #COLOR_GREEN
    1739/    2117 : 92 04               			STA (gfx_ptr)
    1740/    2119 : 92 06               			STA (map_ptr)
    1741/    211B : E6 05               			INC gfx_ptr+1
    1742/    211D : E6 07               			INC map_ptr+1
    1743/    211F : 88                  			DEY
    1744/    2120 : D0 F5               			BNE dh.vline
    1746/    2122 : 86 11                                       STX saveX
    1746/    2124 : A2 00                                       LDX #0
    1746/    2126 : 68                                                  PLA
    1746/    2127 : 95 04                                               STA ZP_locals,X
    1746/    2129 : E8                                                  INX
    1746/    212A : E0 06                                               CPX #zpcounter
    1746/    212C : D0 F8                                       BNE ZP_pull
    1746/    212E : A6 11                                       LDX saveX
    1746/    2130 : FA                                  PLX
    1746/    2131 : 60                          RTS
    1748/    2132 :                             DrawFrame:
    1750/    2132 :                     tile:
    1750/    2132 :                     i:
    1750/    2132 :                     j:
    1752/    2132 : DA                                  PHX
    1752/    2133 : 8A                                          TXA                             ;2
    1752/    2134 : 38                                          SEC                             ;2
    1752/    2135 : E9 09                                       SBC #xcounter   ;2
    1752/    2137 : AA                                          TAX                             ;2
    1754/    2138 : A9 7E                                               LDA #map_data#256
    1754/    213A : 95 FC                                               STA call_offset,X
    1754/    213C : A9 03                                               LDA #map_data>>8
    1754/    213E : 95 FD                                               STA call_offset+1,X
    1754/    2140 : AD 00 02                                    LDA display_X
    1754/    2143 : 95 FE                                       STA call_offset,X
    1754/    2145 : AD 01 02                                    LDA display_Y
    1754/    2148 : 95 FF                                       STA call_offset,X
    1754/    214A : 20 72 16                    JSR OffsetXY
    1755/    214D : A5 12                                       LDA ret_val
    1755/    214F : 95 03                                       STA map_ptr,X
    1755/    2151 : A5 13                                       LDA ret_val+1
    1755/    2153 : 95 04                                       STA map_ptr+1,X
    1756/    2155 : A9 9E                                               LDA #monster_map#256
    1756/    2157 : 95 FC                                               STA call_offset,X
    1756/    2159 : A9 06                                               LDA #monster_map>>8
    1756/    215B : 95 FD                                               STA call_offset+1,X
    1756/    215D : AD 00 02                                    LDA display_X
    1756/    2160 : 95 FE                                       STA call_offset,X
    1756/    2162 : AD 01 02                                    LDA display_Y
    1756/    2165 : 95 FF                                       STA call_offset,X
    1756/    2167 : 20 72 16                    JSR OffsetXY
    1757/    216A : A5 12                                       LDA ret_val
    1757/    216C : 95 05                                       STA monster_ptr,X
    1757/    216E : A5 13                                       LDA ret_val+1
    1757/    2170 : 95 06                                       STA monster_ptr+1,X
    1758/    2172 : A9 BE                                               LDA #crystal_map#256
    1758/    2174 : 95 FC                                               STA call_offset,X
    1758/    2176 : A9 09                                               LDA #crystal_map>>8
    1758/    2178 : 95 FD                                               STA call_offset+1,X
    1758/    217A : AD 00 02                                    LDA display_X
    1758/    217D : 95 FE                                       STA call_offset,X
    1758/    217F : AD 01 02                                    LDA display_Y
    1758/    2182 : 95 FF                                       STA call_offset,X
    1758/    2184 : 20 72 16                    JSR OffsetXY
    1759/    2187 : A5 12                                       LDA ret_val
    1759/    2189 : 95 07                                       STA crystal_ptr,X
    1759/    218B : A5 13                                       LDA ret_val+1
    1759/    218D : 95 08                                       STA crystal_ptr+1,X
    1761/    218F : 74 01               		STZ i,X
    1762/    2191 : 74 02               		STZ j,X
    1766/    2193 : A1 03               				LDA (map_ptr,X)
    1767/    2195 : 80 03                       BRA s{ts}c{tc}
    1768/    2197 : 4C F9 21                    JMP s{ts}done
    1768/    219A : C9 00                               CMP #MAP_BLANK
    1768/    219C : F0 03                       BEQ skip
    1768/    219E : 4C A8 21                            JMP s{ts}c{tc}
    1768/    21A1 :                             skip:
    1769/    21A1 : A9 00                                               LDA #Ground_0#256
    1769/    21A3 : 95 00                                               STA tile,X
    1770/    21A5 : 4C F9 21                    JMP s{ts}done
    1770/    21A8 : C9 01                               CMP #MAP_BLANK_90
    1770/    21AA : F0 03                       BEQ skip
    1770/    21AC : 4C B6 21                            JMP s{ts}c{tc}
    1770/    21AF :                             skip:
    1771/    21AF : A9 01                                               LDA #Ground_90#256
    1771/    21B1 : 95 00                                               STA tile,X
    1772/    21B3 : 4C F9 21                    JMP s{ts}done
    1772/    21B6 : C9 02                               CMP #MAP_BLANK_180
    1772/    21B8 : F0 03                       BEQ skip
    1772/    21BA : 4C C4 21                            JMP s{ts}c{tc}
    1772/    21BD :                             skip:
    1773/    21BD : A9 02                                               LDA #Ground_180#256
    1773/    21BF : 95 00                                               STA tile,X
    1774/    21C1 : 4C F9 21                    JMP s{ts}done
    1774/    21C4 : C9 03                               CMP #MAP_BLANK_270
    1774/    21C6 : F0 03                       BEQ skip
    1774/    21C8 : 4C D2 21                            JMP s{ts}c{tc}
    1774/    21CB :                             skip:
    1775/    21CB : A9 03                                               LDA #Ground_270#256
    1775/    21CD : 95 00                                               STA tile,X
    1776/    21CF : 4C F9 21                    JMP s{ts}done
    1776/    21D2 : C9 04                               CMP #MAP_ROCK
    1776/    21D4 : F0 03                       BEQ skip
    1776/    21D6 : 4C E0 21                            JMP s{ts}c{tc}
    1776/    21D9 :                             skip:
    1777/    21D9 : A9 04                                               LDA #Rock#256
    1777/    21DB : 95 00                                               STA tile,X
    1778/    21DD : 4C F9 21                    JMP s{ts}done
    1778/    21E0 : C9 05                               CMP #MAP_LAVA
    1778/    21E2 : F0 03                       BEQ skip
    1778/    21E4 : 4C EE 21                            JMP s{ts}c{tc}
    1778/    21E7 :                             skip:
    1779/    21E7 : A9 05                                               LDA #Lava#256
    1779/    21E9 : 95 00                                               STA tile,X
    1780/    21EB : 4C F9 21                    JMP s{ts}done
    1780/    21EE : C9 06                               CMP #MAP_EXIT
    1780/    21F0 : F0 03                       BEQ skip
    1780/    21F2 : 4C F9 21                            JMP s{ts}c{tc}
    1780/    21F5 :                             skip:
    1781/    21F5 : A9 1D                                               LDA #ExitID#256
    1781/    21F7 : 95 00                                               STA tile,X
    1783/    21F9 : C9 1D               				CMP #ExitID
    1784/    21FB : F0 03                       BEQ skip
    1784/    21FD : 4C 1A 22                            JMP if{temp}
    1784/    2200 :                             skip:
    1785/    2200 : A9 1D                                               LDA #ExitID#256
    1785/    2202 : 95 F5                                               STA call_offset,X
    1785/    2204 : B5 01                                       LDA i,X
    1785/    2206 : 95 F6                                       STA call_offset,X
    1785/    2208 : B5 02                                       LDA j,X
    1785/    220A : 95 F7                                       STA call_offset,X
    1785/    220C : A9 00                                               LDA #COLOR_BLACK#256
    1785/    220E : 95 F8                                               STA call_offset,X
    1785/    2210 : A9 30                                               LDA #COLOR_BLUE#256
    1785/    2212 : 95 F9                                               STA call_offset,X
    1785/    2214 : 20 B8 0E                    JSR DrawTile1bpp
    1786/    2217 : 4C 29 22                    JMP if{temp2}
    1787/    221A : B5 00                                       LDA tile,X
    1787/    221C : 95 FD                                       STA call_offset,X
    1787/    221E : B5 01                                       LDA i,X
    1787/    2220 : 95 FE                                       STA call_offset,X
    1787/    2222 : B5 02                                       LDA j,X
    1787/    2224 : 95 FF                                       STA call_offset,X
    1787/    2226 : 20 01 0E                    JSR DrawTile
    1789/    2229 : F6 03                               INC map_ptr,X
    1789/    222B : D0 02                               BNE no_carry1
    1789/    222D : F6 04                                       INC map_ptr+1,X
    1792/    222F : A1 05               				LDA (monster_ptr,X)
    1793/    2231 : C9 FF               				CMP #NO_MONSTER
    1794/    2233 : D0 03                       BNE skip
    1794/    2235 : 4C 67 22                            JMP if{temp}
    1794/    2238 :                             skip:
    1795/    2238 : 0A                  					ASL
    1796/    2239 : 61 05               					ADC (monster_ptr,X)
    1797/    223B : 69 02               					ADC #MONSTER_ALIVE
    1798/    223D : A8                  					TAY
    1799/    223E : B9 66 02            					LDA monster_list,Y
    1800/    2241 : D0 03                       BNE skip
    1800/    2243 : 4C 58 22                            JMP if{temp}
    1800/    2246 :                             skip:
    1801/    2246 : A9 16                                               LDA #Monster#256
    1801/    2248 : 95 FD                                               STA call_offset,X
    1801/    224A : B5 01                                       LDA i,X
    1801/    224C : 95 FE                                       STA call_offset,X
    1801/    224E : B5 02                                       LDA j,X
    1801/    2250 : 95 FF                                       STA call_offset,X
    1801/    2252 : 20 01 0E                    JSR DrawTile
    1802/    2255 : 4C 67 22                    JMP if{temp2}
    1803/    2258 : A9 17                                               LDA #Monster_dead#256
    1803/    225A : 95 FD                                               STA call_offset,X
    1803/    225C : B5 01                                       LDA i,X
    1803/    225E : 95 FE                                       STA call_offset,X
    1803/    2260 : B5 02                                       LDA j,X
    1803/    2262 : 95 FF                                       STA call_offset,X
    1803/    2264 : 20 01 0E                    JSR DrawTile
    1806/    2267 : F6 05                               INC monster_ptr,X
    1806/    2269 : D0 02                               BNE no_carry1
    1806/    226B : F6 06                                       INC monster_ptr+1,X
    1809/    226D : A1 07               				LDA (crystal_ptr,X)
    1810/    226F : C9 FF               				CMP #NO_CRYSTAL
    1811/    2271 : D0 03                       BNE skip
    1811/    2273 : 4C EC 22                            JMP if{temp}
    1811/    2276 :                             skip:
    1812/    2276 : 0A                  					ASL
    1813/    2277 : 0A                  					ASL
    1814/    2278 : 48                  					PHA
    1815/    2279 : 69 02               					ADC #CRYSTAL_ACTIVE
    1816/    227B : A8                  					TAY 
    1817/    227C : B9 DE 02            					LDA crystal_list,Y
    1818/    227F : D0 03                       BNE skip
    1818/    2281 : 4C DC 22                            JMP if{temp}
    1818/    2284 :                             skip:
    1819/    2284 : 68                  						PLA
    1820/    2285 : 18                  						CLC
    1821/    2286 : 69 03               						ADC #CRYSTAL_COLOR
    1822/    2288 : A8                  						TAY
    1823/    2289 : B9 DE 02            						LDA crystal_list,Y
    1824/    228C : 80 03                       BRA s{ts}c{tc}
    1825/    228E : 4C D9 22                    JMP s{ts}done
    1825/    2291 : C9 00                               CMP #CRYSTAL_RED_TYPE
    1825/    2293 : F0 03                       BEQ skip
    1825/    2295 : 4C AA 22                            JMP s{ts}c{tc}
    1825/    2298 :                             skip:
    1826/    2298 : A9 06                                               LDA #Crystal_red#256
    1826/    229A : 95 FD                                               STA call_offset,X
    1826/    229C : B5 01                                       LDA i,X
    1826/    229E : 95 FE                                       STA call_offset,X
    1826/    22A0 : B5 02                                       LDA j,X
    1826/    22A2 : 95 FF                                       STA call_offset,X
    1826/    22A4 : 20 01 0E                    JSR DrawTile
    1827/    22A7 : 4C D9 22                    JMP s{ts}done
    1827/    22AA : C9 01                               CMP #CRYSTAL_BLUE_TYPE
    1827/    22AC : F0 03                       BEQ skip
    1827/    22AE : 4C C3 22                            JMP s{ts}c{tc}
    1827/    22B1 :                             skip:
    1828/    22B1 : A9 08                                               LDA #Crystal_blue#256
    1828/    22B3 : 95 FD                                               STA call_offset,X
    1828/    22B5 : B5 01                                       LDA i,X
    1828/    22B7 : 95 FE                                       STA call_offset,X
    1828/    22B9 : B5 02                                       LDA j,X
    1828/    22BB : 95 FF                                       STA call_offset,X
    1828/    22BD : 20 01 0E                    JSR DrawTile
    1829/    22C0 : 4C D9 22                    JMP s{ts}done
    1829/    22C3 : C9 02                               CMP #CRYSTAL_YELLOW_TYPE
    1829/    22C5 : F0 03                       BEQ skip
    1829/    22C7 : 4C D9 22                            JMP s{ts}c{tc}
    1829/    22CA :                             skip:
    1830/    22CA : A9 07                                               LDA #Crystal_yellow#256
    1830/    22CC : 95 FD                                               STA call_offset,X
    1830/    22CE : B5 01                                       LDA i,X
    1830/    22D0 : 95 FE                                       STA call_offset,X
    1830/    22D2 : B5 02                                       LDA j,X
    1830/    22D4 : 95 FF                                       STA call_offset,X
    1830/    22D6 : 20 01 0E                    JSR DrawTile
    1832/    22D9 : 4C EC 22                    JMP if{temp2}
    1833/    22DC : 68                  						PLA
    1834/    22DD : A9 19                                               LDA #Crystal_base#256
    1834/    22DF : 95 FD                                               STA call_offset,X
    1834/    22E1 : B5 01                                       LDA i,X
    1834/    22E3 : 95 FE                                       STA call_offset,X
    1834/    22E5 : B5 02                                       LDA j,X
    1834/    22E7 : 95 FF                                       STA call_offset,X
    1834/    22E9 : 20 01 0E                    JSR DrawTile
    1837/    22EC : F6 07                               INC crystal_ptr,X
    1837/    22EE : D0 02                               BNE no_carry1
    1837/    22F0 : F6 08                                       INC crystal_ptr+1,X
    1839/    22F2 : B5 01               				LDA i,X
    1840/    22F4 : 18                  				CLC
    1841/    22F5 : 69 20               				ADC #32
    1842/    22F7 : 95 01               				STA i,X
    1843/    22F9 : C9 A0               				CMP #32*FRAME_WIDTH
    1844/    22FB : F0 03                       BEQ skip
    1844/    22FD : 4C 93 21                            JMP df.loop_x
    1844/    2300 :                             skip:
    1845/    2300 : A9 23                               LDA #MAP_WIDTH-FRAME_WIDTH#256
    1845/    2302 : 18                          CLC
    1845/    2303 : 75 03                               ADC map_ptr,X
    1845/    2305 : 95 03                               STA map_ptr,X
    1845/    2307 : 90 02                               BCC .no_carry
    1845/    2309 : F6 04                                       INC map_ptr+1,X
    1846/    230B : A9 23                               LDA #MAP_WIDTH-FRAME_WIDTH#256
    1846/    230D : 18                          CLC
    1846/    230E : 75 05                               ADC monster_ptr,X
    1846/    2310 : 95 05                               STA monster_ptr,X
    1846/    2312 : 90 02                               BCC .no_carry
    1846/    2314 : F6 06                                       INC monster_ptr+1,X
    1847/    2316 : A9 23                               LDA #MAP_WIDTH-FRAME_WIDTH#256
    1847/    2318 : 18                          CLC
    1847/    2319 : 75 07                               ADC crystal_ptr,X
    1847/    231B : 95 07                               STA crystal_ptr,X
    1847/    231D : 90 02                               BCC .no_carry
    1847/    231F : F6 08                                       INC crystal_ptr+1,X
    1848/    2321 : 74 01               			STZ i,X
    1849/    2323 : B5 02               			LDA j,X
    1850/    2325 : 18                  			CLC
    1851/    2326 : 69 20               			ADC #32
    1852/    2328 : 95 02               			STA j,X
    1853/    232A : C9 80               			CMP #32*FRAME_HEIGHT
    1855/    232C : D0 03                       BNE skip
    1855/    232E : 4C 34 23                            JMP if{temp}
    1855/    2331 :                             skip:
    1856/    2331 : 4C 93 21            			JMP df.loop_y
    1860/    2334 : AD 02 02            		LDA hero_X
    1861/    2337 : 0A                  		ASL
    1862/    2338 : 0A                  		ASL
    1863/    2339 : 0A                  		ASL
    1864/    233A : 0A                  		ASL
    1865/    233B : 0A                  		ASL
    1866/    233C : 95 01               		STA i,X
    1867/    233E : AD 03 02            		LDA hero_Y
    1868/    2341 : 0A                  		ASL
    1869/    2342 : 0A                  		ASL
    1870/    2343 : 0A                  		ASL
    1871/    2344 : 0A                  		ASL
    1872/    2345 : 0A                  		ASL
    1873/    2346 : 95 02               		STA j,X
    1874/    2348 : AD 21 02            		LDA hero_facing
    1875/    234B : C9 03               		CMP #DIRECTION_LEFT
    1876/    234D : F0 03                       BEQ skip
    1876/    234F : 4C 64 23                            JMP if{temp}
    1876/    2352 :                             skip:
    1877/    2352 : A9 09                                               LDA #Robot_left#256
    1877/    2354 : 95 FD                                               STA call_offset,X
    1877/    2356 : B5 01                                       LDA i,X
    1877/    2358 : 95 FE                                       STA call_offset,X
    1877/    235A : B5 02                                       LDA j,X
    1877/    235C : 95 FF                                       STA call_offset,X
    1877/    235E : 20 01 0E                    JSR DrawTile
    1878/    2361 : 4C 73 23                    JMP if{temp2}
    1879/    2364 : A9 0A                                               LDA #Robot_right#256
    1879/    2366 : 95 FD                                               STA call_offset,X
    1879/    2368 : B5 01                                       LDA i,X
    1879/    236A : 95 FE                                       STA call_offset,X
    1879/    236C : B5 02                                       LDA j,X
    1879/    236E : 95 FF                                       STA call_offset,X
    1879/    2370 : 20 01 0E                    JSR DrawTile
    1883/    2373 : AD 22 02                                    LDA hero_target_direction
    1883/    2376 : 80 03                       BRA s{ts}c{tc}
    1884/    2378 : 4C C8 23                    JMP s{ts}done
    1884/    237B : C9 01                               CMP #DIRECTION_UP
    1884/    237D : F0 03                       BEQ skip
    1884/    237F : 4C 8E 23                            JMP s{ts}c{tc}
    1884/    2382 :                             skip:
    1885/    2382 : B5 02               				LDA j,X
    1886/    2384 : F0 59               				BEQ df.no_draw
    1887/    2386 : 38                  				SEC
    1888/    2387 : E9 20               				SBC #32
    1889/    2389 : 95 02               				STA j,X
    1890/    238B : 4C C8 23                    JMP s{ts}done
    1890/    238E : C9 02                               CMP #DIRECTION_DOWN
    1890/    2390 : F0 03                       BEQ skip
    1890/    2392 : 4C A3 23                            JMP s{ts}c{tc}
    1890/    2395 :                             skip:
    1891/    2395 : B5 02               				LDA j,X
    1892/    2397 : C9 60               				CMP #32*(FRAME_HEIGHT-1)
    1893/    2399 : F0 44               				BEQ df.no_draw
    1894/    239B : 18                  				CLC
    1895/    239C : 69 20               				ADC #32
    1896/    239E : 95 02               				STA j,X
    1897/    23A0 : 4C C8 23                    JMP s{ts}done
    1897/    23A3 : C9 03                               CMP #DIRECTION_LEFT
    1897/    23A5 : F0 03                       BEQ skip
    1897/    23A7 : 4C B6 23                            JMP s{ts}c{tc}
    1897/    23AA :                             skip:
    1898/    23AA : B5 01               				LDA i,X
    1899/    23AC : F0 31               				BEQ df.no_draw
    1900/    23AE : 38                  				SEC
    1901/    23AF : E9 20               				SBC #32
    1902/    23B1 : 95 01               				STA i,X
    1903/    23B3 : 4C C8 23                    JMP s{ts}done
    1903/    23B6 : C9 04                               CMP #DIRECTION_RIGHT
    1903/    23B8 : F0 03                       BEQ skip
    1903/    23BA : 4C C8 23                            JMP s{ts}c{tc}
    1903/    23BD :                             skip:
    1904/    23BD : B5 01               				LDA i,X
    1905/    23BF : C9 80               				CMP #32*(FRAME_WIDTH-1)
    1906/    23C1 : F0 1C               				BEQ df.no_draw
    1907/    23C3 : 18                  				CLC
    1908/    23C4 : 69 20               				ADC #32
    1909/    23C6 : 95 01               				STA i,X
    1912/    23C8 : A9 1A                                               LDA #Hero_target#256
    1912/    23CA : 95 F5                                               STA call_offset,X
    1912/    23CC : B5 01                                       LDA i,X
    1912/    23CE : 95 F6                                       STA call_offset,X
    1912/    23D0 : B5 02                                       LDA j,X
    1912/    23D2 : 95 F7                                       STA call_offset,X
    1912/    23D4 : A9 0C                                               LDA #COLOR_GREEN#256
    1912/    23D6 : 95 F8                                               STA call_offset,X
    1912/    23D8 : A9 40                                               LDA #COLOR_TRANSPARENT#256
    1912/    23DA : 95 F9                                               STA call_offset,X
    1912/    23DC : 20 B8 0E                    JSR DrawTile1bpp
    1914/    23DF : FA                                  PLX
    1914/    23E0 : 60                          RTS
    1918/    23E1 :                             DrawBorder:
    1920/    23E1 :                     xpos:
    1920/    23E1 :                     ypos:
    1920/    23E1 :                     width:
    1920/    23E1 :                     height:
    1920/    23E1 :                     color:
    1923/    23E1 : DA                                  PHX
    1923/    23E2 : 8A                                          TXA                             ;2
    1923/    23E3 : 38                                          SEC                             ;2
    1923/    23E4 : E9 05                                       SBC #xcounter   ;2
    1923/    23E6 : AA                                          TAX                             ;2
    1923/    23E7 : 86 11                                       STX saveX
    1923/    23E9 : A2 04                                       LDX #zpcounter
    1923/    23EB : B5 03                                               LDA ZP_locals-1,X
    1923/    23ED : 48                                                  PHA
    1923/    23EE : CA                                                  DEX
    1923/    23EF : D0 FA                                       BNE ZP_push
    1923/    23F1 : A6 11                                       LDX saveX
    1924/    23F3 : D6 02               		DEC width,X
    1925/    23F5 : D6 03               		DEC height,X
    1926/    23F7 : B5 00               		LDA xpos,X
    1927/    23F9 : 85 04               		STA gfx_ptr1
    1928/    23FB : 85 06               		STA gfx_ptr2
    1929/    23FD : B5 01               		LDA ypos,X
    1930/    23FF : 18                  		CLC
    1931/    2400 : 69 40               		ADC #SCREEN_ADDRESS>>8
    1932/    2402 : 85 05               		STA gfx_ptr1+1
    1933/    2404 : 75 03               		ADC height,X
    1934/    2406 : 85 07               		STA gfx_ptr2+1
    1935/    2408 : B4 02               		LDY width,X
    1936/    240A : B5 04               		LDA color,X
    1938/    240C : 91 04               			STA (gfx_ptr1),Y
    1939/    240E : 91 06               			STA (gfx_ptr2),Y
    1940/    2410 : 88                  			DEY
    1941/    2411 : D0 F9               			BNE db.hline
    1942/    2413 : A5 04               		LDA gfx_ptr1 
    1943/    2415 : 18                  		CLC
    1944/    2416 : 75 02               		ADC width,X
    1945/    2418 : 85 06               		STA gfx_ptr2
    1946/    241A : A5 05               		LDA gfx_ptr1+1
    1947/    241C : 85 07               		STA gfx_ptr2+1
    1948/    241E : B4 03               		LDY height,X
    1949/    2420 : C8                  		INY
    1950/    2421 : B5 04               		LDA color,X
    1952/    2423 : 92 04               			STA (gfx_ptr1)
    1953/    2425 : 92 06               			STA (gfx_ptr2)
    1954/    2427 : E6 05               			INC gfx_ptr1+1
    1955/    2429 : E6 07               			INC gfx_ptr2+1
    1956/    242B : 88                  			DEY
    1957/    242C : D0 F5               			BNE db.vline
    1959/    242E : 86 11                                       STX saveX
    1959/    2430 : A2 00                                       LDX #0
    1959/    2432 : 68                                                  PLA
    1959/    2433 : 95 04                                               STA ZP_locals,X
    1959/    2435 : E8                                                  INX
    1959/    2436 : E0 04                                               CPX #zpcounter
    1959/    2438 : D0 F8                                       BNE ZP_pull
    1959/    243A : A6 11                                       LDX saveX
    1959/    243C : FA                                  PLX
    1959/    243D : 60                          RTS
    1961/    243E :                             DrawMenuBorder:
    1963/    243E :                     counter:
    1963/    243E :                     width:
    1963/    243E :                     height:
    1964/    243E : DA                                  PHX
    1964/    243F : CA                                                  DEX
    1964/    2440 : CA                                                  DEX
    1964/    2441 : CA                                                  DEX
    1965/    2442 : A9 01                                               LDA #1#256
    1965/    2444 : 95 FB                                               STA call_offset,X
    1965/    2446 : A9 01                                               LDA #1#256
    1965/    2448 : 95 FC                                               STA call_offset,X
    1965/    244A : A9 FE                                               LDA #SCREEN_WIDTH-2#256
    1965/    244C : 95 FD                                               STA call_offset,X
    1965/    244E : A9 10                                               LDA #MENU_BORDER_SIZE+TEXT_LINE_HEIGHT#256
    1965/    2450 : 95 FE                                               STA call_offset,X
    1965/    2452 : A9 2A                                               LDA #COLOR_MENU_BORDER#256
    1965/    2454 : 95 FF                                               STA call_offset,X
    1965/    2456 : 20 06 1B                    JSR DrawRect
    1966/    2459 : A9 01                                               LDA #1#256
    1966/    245B : 95 FB                                               STA call_offset,X
    1966/    245D : A9 78                                               LDA #SCREEN_HEIGHT-MENU_BORDER_SIZE#256
    1966/    245F : 95 FC                                               STA call_offset,X
    1966/    2461 : A9 FE                                               LDA #SCREEN_WIDTH-2#256
    1966/    2463 : 95 FD                                               STA call_offset,X
    1966/    2465 : A9 07                                               LDA #MENU_BORDER_SIZE-1#256
    1966/    2467 : 95 FE                                               STA call_offset,X
    1966/    2469 : A9 2A                                               LDA #COLOR_MENU_BORDER#256
    1966/    246B : 95 FF                                               STA call_offset,X
    1966/    246D : 20 06 1B                    JSR DrawRect
    1968/    2470 : A9 01                                               LDA #1#256
    1968/    2472 : 95 FB                                               STA call_offset,X
    1968/    2474 : A9 11                                               LDA #MENU_BORDER_SIZE+TEXT_LINE_HEIGHT+1#256
    1968/    2476 : 95 FC                                               STA call_offset,X
    1968/    2478 : A9 07                                               LDA #MENU_BORDER_SIZE-1#256
    1968/    247A : 95 FD                                               STA call_offset,X
    1968/    247C : A9 67                                               LDA #$67#256
    1968/    247E : 95 FE                                               STA call_offset,X
    1968/    2480 : A9 2A                                               LDA #COLOR_MENU_BORDER#256
    1968/    2482 : 95 FF                                               STA call_offset,X
    1968/    2484 : 20 06 1B                    JSR DrawRect
    1970/    2487 : A9 F8                                               LDA #SCREEN_WIDTH-MENU_BORDER_SIZE#256
    1970/    2489 : 95 FB                                               STA call_offset,X
    1970/    248B : A9 11                                               LDA #MENU_BORDER_SIZE+TEXT_LINE_HEIGHT+1#256
    1970/    248D : 95 FC                                               STA call_offset,X
    1970/    248F : A9 07                                               LDA #MENU_BORDER_SIZE-1#256
    1970/    2491 : 95 FD                                               STA call_offset,X
    1970/    2493 : A9 67                                               LDA #103#256
    1970/    2495 : 95 FE                                               STA call_offset,X
    1970/    2497 : A9 2A                                               LDA #COLOR_MENU_BORDER#256
    1970/    2499 : 95 FF                                               STA call_offset,X
    1970/    249B : 20 06 1B                    JSR DrawRect
    1971/    249E : 74 FB                                               STZ call_offset,X
    1971/    24A0 : 74 FC                                               STZ call_offset,X
    1971/    24A2 : A9 00                                               LDA #SCREEN_WIDTH#256
    1971/    24A4 : 95 FD                                               STA call_offset,X
    1971/    24A6 : A9 80                                               LDA #SCREEN_HEIGHT#256
    1971/    24A8 : 95 FE                                               STA call_offset,X
    1971/    24AA : A9 00                                               LDA #COLOR_BLACK#256
    1971/    24AC : 95 FF                                               STA call_offset,X
    1971/    24AE : 20 E1 23                    JSR DrawBorder
    1972/    24B1 : A9 08                                               LDA #MENU_BORDER_SIZE#256
    1972/    24B3 : 95 FB                                               STA call_offset,X
    1972/    24B5 : A9 08                                               LDA #MENU_BORDER_SIZE#256
    1972/    24B7 : 95 FC                                               STA call_offset,X
    1972/    24B9 : A9 F0                                               LDA #SCREEN_WIDTH-MENU_BORDER_SIZE*2#256
    1972/    24BB : 95 FD                                               STA call_offset,X
    1972/    24BD : A9 70                                               LDA #SCREEN_HEIGHT-MENU_BORDER_SIZE*2#256
    1972/    24BF : 95 FE                                               STA call_offset,X
    1972/    24C1 : A9 00                                               LDA #COLOR_BLACK#256
    1972/    24C3 : 95 FF                                               STA call_offset,X
    1972/    24C5 : 20 E1 23                    JSR DrawBorder
    1974/    24C8 : A9 01                                               LDA #1#256
    1974/    24CA : 95 00                                               STA counter,X
    1976/    24CC : A9 00               			LDA #SCREEN_WIDTH#256
    1977/    24CE : 18                  			CLC
    1978/    24CF : F5 00               			SBC counter,X
    1979/    24D1 : 95 01               			STA width,X
    1980/    24D3 : A9 80               			LDA #SCREEN_HEIGHT
    1981/    24D5 : 18                  			CLC
    1982/    24D6 : F5 00               			SBC counter,X
    1983/    24D8 : 95 02               			STA height,X
    1984/    24DA : B5 00                                       LDA counter,X
    1984/    24DC : 95 FE                                       STA call_offset,X
    1984/    24DE : B5 00                                       LDA counter,X
    1984/    24E0 : 95 FF                                       STA call_offset,X
    1984/    24E2 : 20 4B 0D                    JSR CalcXY
    1985/    24E5 : A9 00                                               LDA #COLOR_BLACK#256
    1985/    24E7 : 92 12                                               STA (ret_val)
    1986/    24E9 : B5 01                                       LDA width,X
    1986/    24EB : 95 FE                                       STA call_offset,X
    1986/    24ED : B5 00                                       LDA counter,X
    1986/    24EF : 95 FF                                       STA call_offset,X
    1986/    24F1 : 20 4B 0D                    JSR CalcXY
    1987/    24F4 : A9 00                                               LDA #COLOR_BLACK#256
    1987/    24F6 : 92 12                                               STA (ret_val)
    1988/    24F8 : B5 01                                       LDA width,X
    1988/    24FA : 95 FE                                       STA call_offset,X
    1988/    24FC : B5 02                                       LDA height,X
    1988/    24FE : 95 FF                                       STA call_offset,X
    1988/    2500 : 20 4B 0D                    JSR CalcXY
    1989/    2503 : A9 00                                               LDA #COLOR_BLACK#256
    1989/    2505 : 92 12                                               STA (ret_val)
    1990/    2507 : B5 00                                       LDA counter,X
    1990/    2509 : 95 FE                                       STA call_offset,X
    1990/    250B : B5 02                                       LDA height,X
    1990/    250D : 95 FF                                       STA call_offset,X
    1990/    250F : 20 4B 0D                    JSR CalcXY
    1991/    2512 : A9 00                                               LDA #COLOR_BLACK#256
    1991/    2514 : 92 12                                               STA (ret_val)
    1992/    2516 : B5 00               			LDA counter,X
    1993/    2518 : 1A                  			INC
    1994/    2519 : C9 08               			CMP #MENU_BORDER_SIZE
    1995/    251B : 95 00               			STA counter,X
    1996/    251D : D0 AD               			BNE dmb.loop
    1997/    251F : A9 09                                               LDA #MENU_CHAR_LEFT#256
    1997/    2521 : 8D 64 02                                            STA draw_X
    1998/    2524 : 80 0C                                                       BRA str_skip
    1998/    2526 : 5B 43 5D 68 61 72                                           FCB "[C]haracter",0
    1998/    2532 : A9 26                                               LDA #str_addr#256
    1998/    2534 : 95 F4                                               STA call_offset,X
    1998/    2536 : A9 25                                               LDA #str_addr>>8
    1998/    2538 : 95 F5                                               STA call_offset+1,X
    1998/    253A : 74 F6                                               STZ call_offset,X
    1998/    253C : 74 F7                                               STZ call_offset,X
    1998/    253E : A9 09                                               LDA #MENU_TITLE_TOP#256
    1998/    2540 : 95 F8                                               STA call_offset,X
    1998/    2542 : A9 3F                                               LDA #COLOR_WHITE#256
    1998/    2544 : 95 F9                                               STA call_offset,X
    1998/    2546 : A9 08                                               LDA #COLOR_MENU_CHAR#256
    1998/    2548 : 95 FA                                               STA call_offset,X
    1998/    254A : 20 55 1B                    JSR DrawText
    1999/    254D : A9 4C                                               LDA #MENU_SKILL_LEFT#256
    1999/    254F : 8D 64 02                                            STA draw_X
    2000/    2552 : 80 09                                                       BRA str_skip
    2000/    2554 : 53 5B 6B 5D 69 6C                                           FCB "S[k]ills",0
    2000/    255D : A9 54                                               LDA #str_addr#256
    2000/    255F : 95 F4                                               STA call_offset,X
    2000/    2561 : A9 25                                               LDA #str_addr>>8
    2000/    2563 : 95 F5                                               STA call_offset+1,X
    2000/    2565 : 74 F6                                               STZ call_offset,X
    2000/    2567 : 74 F7                                               STZ call_offset,X
    2000/    2569 : A9 09                                               LDA #MENU_TITLE_TOP#256
    2000/    256B : 95 F8                                               STA call_offset,X
    2000/    256D : A9 3F                                               LDA #COLOR_WHITE#256
    2000/    256F : 95 F9                                               STA call_offset,X
    2000/    2571 : A9 20                                               LDA #COLOR_MENU_SKILLS#256
    2000/    2573 : 95 FA                                               STA call_offset,X
    2000/    2575 : 20 55 1B                    JSR DrawText
    2001/    2578 : A9 7C                                               LDA #MENU_RES_LEFT#256
    2001/    257A : 8D 64 02                                            STA draw_X
    2002/    257D : 80 0C                                                       BRA str_skip
    2002/    257F : 5B 52 5D 65 73 6F                                           FCB "[R]esources",0
    2002/    258B : A9 7F                                               LDA #str_addr#256
    2002/    258D : 95 F4                                               STA call_offset,X
    2002/    258F : A9 25                                               LDA #str_addr>>8
    2002/    2591 : 95 F5                                               STA call_offset+1,X
    2002/    2593 : 74 F6                                               STZ call_offset,X
    2002/    2595 : 74 F7                                               STZ call_offset,X
    2002/    2597 : A9 09                                               LDA #MENU_TITLE_TOP#256
    2002/    2599 : 95 F8                                               STA call_offset,X
    2002/    259B : A9 3F                                               LDA #COLOR_WHITE#256
    2002/    259D : 95 F9                                               STA call_offset,X
    2002/    259F : A9 02                                               LDA #COLOR_MENU_RESOURCES#256
    2002/    25A1 : 95 FA                                               STA call_offset,X
    2002/    25A3 : 20 55 1B                    JSR DrawText
    2003/    25A6 : A9 4B                                               LDA #MENU_SKILL_LEFT-1#256
    2003/    25A8 : 95 FB                                               STA call_offset,X
    2003/    25AA : A9 09                                               LDA #MENU_TITLE_TOP#256
    2003/    25AC : 95 FC                                               STA call_offset,X
    2003/    25AE : A9 01                                               LDA #1#256
    2003/    25B0 : 95 FD                                               STA call_offset,X
    2003/    25B2 : A9 08                                               LDA #TEXT_LINE_HEIGHT#256
    2003/    25B4 : 95 FE                                               STA call_offset,X
    2003/    25B6 : A9 20                                               LDA #COLOR_MENU_SKILLS#256
    2003/    25B8 : 95 FF                                               STA call_offset,X
    2003/    25BA : 20 06 1B                    JSR DrawRect
    2004/    25BD : FA                                  PLX
    2004/    25BE : 60                          RTS
    2006/    25BF : 0D 0E 0F 10 11      	tile_src:	FCB Menu_head,Menu_body,Menu_legs,Menu_gun,Menu_tool
    2007/    25C4 :                             DrawItem:
    2009/    25C4 :                     tile:
    2009/    25C4 :                     xpos:
    2009/    25C4 :                     ypos:
    2012/    25C4 : DA                                  PHX
    2012/    25C5 : CA                                                  DEX
    2012/    25C6 : CA                                                  DEX
    2012/    25C7 : CA                                                  DEX
    2012/    25C8 : 86 11                                       STX saveX
    2012/    25CA : A2 02                                       LDX #zpcounter
    2012/    25CC : B5 03                                               LDA ZP_locals-1,X
    2012/    25CE : 48                                                  PHA
    2012/    25CF : CA                                                  DEX
    2012/    25D0 : D0 FA                                       BNE ZP_push
    2012/    25D2 : A6 11                                       LDX saveX
    2013/    25D4 : B5 00               		LDA tile,X
    2014/    25D6 : 0A                  		ASL
    2015/    25D7 : A8                  		TAY
    2016/    25D8 : B9 98 C5            		LDA item_stats,Y
    2017/    25DB : 85 04               		STA temp_ptr
    2018/    25DD : B9 99 C5            		LDA item_stats+1,Y
    2019/    25E0 : 85 05               		STA temp_ptr+1
    2020/    25E2 : A0 00               		LDY #type
    2021/    25E4 : B1 04               		LDA (temp_ptr),Y
    2022/    25E6 : A8                  		TAY
    2023/    25E7 : B9 BF 25            		LDA tile_src,Y
    2024/    25EA : 85 04               		STA temp_ptr
    2025/    25EC : A9 0B                                               LDA #Menu_item_temp#256
    2025/    25EE : 95 FE                                               STA call_offset,X
    2025/    25F0 : A5 04                                       LDA temp_ptr
    2025/    25F2 : 95 FF                                       STA call_offset,X
    2025/    25F4 : 20 7C 0D                    JSR CopyTile
    2026/    25F7 : A9 0B                                               LDA #Menu_item_temp#256
    2026/    25F9 : 95 FE                                               STA call_offset,X
    2026/    25FB : B5 00                                       LDA tile,X
    2026/    25FD : 95 FF                                       STA call_offset,X
    2026/    25FF : 20 F9 10                    JSR ColorTile
    2027/    2602 : A9 0B                                               LDA #Menu_item_temp#256
    2027/    2604 : 95 FD                                               STA call_offset,X
    2027/    2606 : B5 01                                       LDA xpos,X
    2027/    2608 : 95 FE                                       STA call_offset,X
    2027/    260A : B5 02                                       LDA ypos,X
    2027/    260C : 95 FF                                       STA call_offset,X
    2027/    260E : 20 01 0E                    JSR DrawTile
    2028/    2611 : 86 11                                       STX saveX
    2028/    2613 : A2 00                                       LDX #0
    2028/    2615 : 68                                                  PLA
    2028/    2616 : 95 04                                               STA ZP_locals,X
    2028/    2618 : E8                                                  INX
    2028/    2619 : E0 02                                               CPX #zpcounter
    2028/    261B : D0 F8                                       BNE ZP_pull
    2028/    261D : A6 11                                       LDX saveX
    2028/    261F : FA                                  PLX
    2028/    2620 : 60                          RTS
    2030/    2621 :                             DrawItemStats:
    2032/    2621 :                     item:
    2032/    2621 :                     xpos:
    2032/    2621 :                     ypos:
    2034/    2621 :                     count:
    2034/    2621 :                     counter:
    2035/    2621 :                     title:
    2037/    2621 : DA                                  PHX
    2037/    2622 : 8A                                          TXA                             ;2
    2037/    2623 : 38                                          SEC                             ;2
    2037/    2624 : E9 0B                                       SBC #xcounter   ;2
    2037/    2626 : AA                                          TAX                             ;2
    2037/    2627 : 86 11                                       STX saveX
    2037/    2629 : A2 04                                       LDX #zpcounter
    2037/    262B : B5 03                                               LDA ZP_locals-1,X
    2037/    262D : 48                                                  PHA
    2037/    262E : CA                                                  DEX
    2037/    262F : D0 FA                                       BNE ZP_push
    2037/    2631 : A6 11                                       LDX saveX
    2039/    2633 : B5 00               		LDA item,X
    2040/    2635 : 0A                  		ASL
    2041/    2636 : A8                  		TAY
    2042/    2637 : B9 98 C5            		LDA item_stats,Y
    2043/    263A : 85 04               		STA stat_ptr
    2044/    263C : B9 99 C5            		LDA item_stats+1,Y
    2045/    263F : 85 05               		STA stat_ptr+1
    2046/    2641 : A0 00               		LDY #type
    2047/    2643 : B1 04               		LDA (stat_ptr),Y
    2048/    2645 : C9 0E               		CMP #stat_Res_Only
    2049/    2647 : F0 03                       BEQ skip
    2049/    2649 : 4C 85 26                            JMP if{temp}
    2049/    264C :                             skip:
    2051/    264C : A0 03               			LDY #description
    2052/    264E : B1 04               			LDA (stat_ptr),Y
    2053/    2650 : 0A                  			ASL
    2054/    2651 : A8                  			TAY
    2055/    2652 : B9 74 C5            			LDA res_descriptions,Y
    2056/    2655 : 85 04               			STA stat_ptr
    2057/    2657 : B9 75 C5            			LDA res_descriptions+1,Y
    2058/    265A : 85 05               			STA stat_ptr+1
    2061/    265C : B5 01               			LDA xpos,X
    2062/    265E : 1A                  			INC
    2063/    265F : 1A                  			INC
    2064/    2660 : 8D 64 02            			STA draw_X
    2065/    2663 : F6 02               			INC ypos,X
    2066/    2665 : F6 02               			INC ypos,X
    2069/    2667 : A5 04                                       LDA stat_ptr
    2069/    2669 : 95 F4                                       STA call_offset,X
    2069/    266B : A5 05                                       LDA stat_ptr+1
    2069/    266D : 95 F5                                       STA call_offset+1,X
    2069/    266F : 74 F6                                               STZ call_offset,X
    2069/    2671 : 74 F7                                               STZ call_offset,X
    2069/    2673 : B5 02                                       LDA ypos,X
    2069/    2675 : 95 F8                                       STA call_offset,X
    2069/    2677 : A9 3F                                               LDA #COLOR_WHITE#256
    2069/    2679 : 95 F9                                               STA call_offset,X
    2069/    267B : B5 03                                       LDA bg_color,X
    2069/    267D : 95 FA                                       STA call_offset,X
    2069/    267F : 20 55 1B                    JSR DrawText
    2070/    2682 : 4C 64 27                    JMP if{temp2}
    2071/    2685 : B5 00                                       LDA item,X
    2071/    2687 : 95 FD                                       STA call_offset,X
    2071/    2689 : B5 01                                       LDA xpos,X
    2071/    268B : 95 FE                                       STA call_offset,X
    2071/    268D : B5 02                                       LDA ypos,X
    2071/    268F : 95 FF                                       STA call_offset,X
    2071/    2691 : 20 C4 25                    JSR DrawItem
    2073/    2694 : B5 00               			LDA item,X
    2074/    2696 : 0A                  			ASL
    2075/    2697 : A8                  			TAY
    2076/    2698 : B9 13 C4            			LDA item_titles,Y
    2077/    269B : 95 09               			STA title,X
    2078/    269D : B9 14 C4            			LDA item_titles+1,Y
    2079/    26A0 : 95 0A               			STA title+1,X
    2082/    26A2 : B5 01               			LDA xpos,X
    2083/    26A4 : 18                  			CLC
    2084/    26A5 : 69 12               			ADC #MENU_CHAR_BOX_TITLE_OFFSET_X
    2085/    26A7 : 8D 64 02            			STA draw_X
    2088/    26AA : B5 02               			LDA ypos,X
    2089/    26AC : 18                  			CLC
    2090/    26AD : 69 04               			ADC #MENU_CHAR_BOX_TITLE_OFFSET_Y
    2091/    26AF : 95 04               			STA stat_y,X
    2094/    26B1 : B5 00               			LDA item,X
    2095/    26B3 : 0A                  			ASL
    2096/    26B4 : A8                  			TAY
    2097/    26B5 : B9 98 C5            			LDA item_stats,Y
    2098/    26B8 : 85 04               			STA stat_ptr
    2099/    26BA : B9 99 C5            			LDA item_stats+1,Y
    2100/    26BD : 85 05               			STA stat_ptr+1
    2101/    26BF : A0 03               			LDY #quality
    2102/    26C1 : B1 04               			LDA (stat_ptr),Y
    2103/    26C3 : A8                  			TAY
    2104/    26C4 : B9 65 F0            			LDA title_colors,Y
    2105/    26C7 : 95 07               			STA temp_color,X
    2107/    26C9 : B5 09                                       LDA title,X
    2107/    26CB : 95 F4                                       STA call_offset,X
    2107/    26CD : B5 0A                                       LDA title+1,X
    2107/    26CF : 95 F5                                       STA call_offset+1,X
    2107/    26D1 : 74 F6                                               STZ call_offset,X
    2107/    26D3 : 74 F7                                               STZ call_offset,X
    2107/    26D5 : B5 04                                       LDA stat_y,X
    2107/    26D7 : 95 F8                                       STA call_offset,X
    2107/    26D9 : A9 00                                               LDA #COLOR_BLACK#256
    2107/    26DB : 95 F9                                               STA call_offset,X
    2107/    26DD : B5 07                                       LDA temp_color,X
    2107/    26DF : 95 FA                                       STA call_offset,X
    2107/    26E1 : 20 55 1B                    JSR DrawText
    2110/    26E4 : B5 02               			LDA ypos,X
    2111/    26E6 : 18                  			CLC
    2112/    26E7 : 69 0F               			ADC #MENU_CHAR_BOX_STAT_OFFSET_Y
    2113/    26E9 : 95 04               			STA stat_y,X
    2116/    26EB : B5 00               			LDA item,X
    2117/    26ED : 0A                  			ASL
    2118/    26EE : A8                  			TAY
    2119/    26EF : B9 98 C5            			LDA item_stats,Y
    2120/    26F2 : 85 06               			STA item_ptr
    2121/    26F4 : B9 99 C5            			LDA item_stats+1,Y
    2122/    26F7 : 85 07               			STA item_ptr+1
    2123/    26F9 : A0 04               			LDY #stat_count
    2124/    26FB : B1 06               			LDA (item_ptr),Y
    2125/    26FD : 95 05               			STA count,X
    2126/    26FF : 74 06               			STZ counter,X
    2130/    2701 : B5 06               				LDA counter,X
    2131/    2703 : 0A                  				ASL
    2132/    2704 : 69 05               				ADC #stat_begin
    2133/    2706 : A8                  				TAY
    2134/    2707 : B1 06               				LDA (item_ptr),Y
    2136/    2709 : A8                  				TAY
    2139/    270A : B9 6E C6            				LDA stat_description_colors,Y
    2140/    270D : 95 07               				STA temp_color,X
    2143/    270F : 98                  				TYA
    2144/    2710 : 0A                  				ASL
    2145/    2711 : A8                  				TAY
    2146/    2712 : B9 52 C6            				LDA stat_descriptions,Y
    2147/    2715 : 95 09               				STA title,X
    2148/    2717 : B9 53 C6            				LDA stat_descriptions+1,Y
    2149/    271A : 95 0A               				STA title+1,X
    2152/    271C : B5 06               				LDA counter,X
    2153/    271E : 0A                  				ASL
    2154/    271F : 69 06               				ADC #stat_begin+1
    2155/    2721 : A8                  				TAY
    2156/    2722 : B1 06               				LDA (item_ptr),Y
    2157/    2724 : 95 08               				STA temp_stat,X
    2160/    2726 : B5 01               				LDA xpos,X
    2161/    2728 : 18                  				CLC
    2162/    2729 : 69 12               				ADC #MENU_CHAR_BOX_STAT_OFFSET_X
    2165/    272B : B5 07               				LDA temp_color,X
    2166/    272D : D5 03               				CMP bg_color,X
    2167/    272F : F0 03                       BEQ skip
    2167/    2731 : 4C 38 27                            JMP if{temp}
    2167/    2734 :                             skip:
    2168/    2734 : A9 03                                               LDA #COLOR_RED#256
    2168/    2736 : 95 07                                               STA temp_color,X
    2171/    2738 : B5 09                                       LDA title,X
    2171/    273A : 95 F4                                       STA call_offset,X
    2171/    273C : B5 0A                                       LDA title+1,X
    2171/    273E : 95 F5                                       STA call_offset+1,X
    2171/    2740 : B5 08                                       LDA temp_stat,X
    2171/    2742 : 95 F6                                       STA call_offset,X
    2171/    2744 : 74 F7                                               STZ call_offset,X
    2171/    2746 : B5 04                                       LDA stat_y,X
    2171/    2748 : 95 F8                                       STA call_offset,X
    2171/    274A : B5 07                                       LDA temp_color,X
    2171/    274C : 95 F9                                       STA call_offset,X
    2171/    274E : B5 03                                       LDA bg_color,X
    2171/    2750 : 95 FA                                       STA call_offset,X
    2171/    2752 : 20 55 1B                    JSR DrawText
    2173/    2755 : B5 04               				LDA stat_y,X
    2174/    2757 : 18                  				CLC
    2175/    2758 : 69 0A               				ADC #10
    2176/    275A : 95 04               				STA stat_y,X
    2177/    275C : F6 06               			INC counter,X
    2178/    275E : B5 06               			LDA counter,X
    2179/    2760 : D5 05               			CMP count,X
    2180/    2762 : D0 9D               			BNE dis.stats
    2182/    2764 : 86 11                                       STX saveX
    2182/    2766 : A2 00                                       LDX #0
    2182/    2768 : 68                                                  PLA
    2182/    2769 : 95 04                                               STA ZP_locals,X
    2182/    276B : E8                                                  INX
    2182/    276C : E0 04                                               CPX #zpcounter
    2182/    276E : D0 F8                                       BNE ZP_pull
    2182/    2770 : A6 11                                       LDX saveX
    2182/    2772 : FA                                  PLX
    2182/    2773 : 60                          RTS
    2184/    2774 :                             DrawMenuInventory:
    2186/    2774 :                     i:
    2186/    2774 :                     j:
    2186/    2774 :                     ypos:
    2186/    2774 :                     xpos:
    2186/    2774 :                     index:
    2188/    2774 : DA                                  PHX
    2188/    2775 : 8A                                          TXA                             ;2
    2188/    2776 : 38                                          SEC                             ;2
    2188/    2777 : E9 06                                       SBC #xcounter   ;2
    2188/    2779 : AA                                          TAX                             ;2
    2188/    277A : 86 11                                       STX saveX
    2188/    277C : A2 02                                       LDX #zpcounter
    2188/    277E : B5 03                                               LDA ZP_locals-1,X
    2188/    2780 : 48                                                  PHA
    2188/    2781 : CA                                                  DEX
    2188/    2782 : D0 FA                                       BNE ZP_push
    2188/    2784 : A6 11                                       LDX saveX
    2190/    2786 : A9 50                                               LDA #MENU_CHAR_BOX_LEFT#256
    2190/    2788 : 95 FB                                               STA call_offset,X
    2190/    278A : A9 16                                               LDA #MENU_CHAR_BOX1_TOP#256
    2190/    278C : 95 FC                                               STA call_offset,X
    2190/    278E : A9 50                                               LDA #MENU_CHAR_BOX_WIDTH#256
    2190/    2790 : 95 FD                                               STA call_offset,X
    2190/    2792 : A9 2D                                               LDA #MENU_CHAR_BOX_HEIGHT#256
    2190/    2794 : 95 FE                                               STA call_offset,X
    2190/    2796 : A9 04                                               LDA #MENU_CHAR_BOX_COLOR#256
    2190/    2798 : 95 FF                                               STA call_offset,X
    2190/    279A : 20 06 1B                    JSR DrawRect
    2191/    279D : A9 50                                               LDA #MENU_CHAR_BOX_LEFT#256
    2191/    279F : 95 FB                                               STA call_offset,X
    2191/    27A1 : A9 46                                               LDA #MENU_CHAR_BOX2_TOP#256
    2191/    27A3 : 95 FC                                               STA call_offset,X
    2191/    27A5 : A9 50                                               LDA #MENU_CHAR_BOX_WIDTH#256
    2191/    27A7 : 95 FD                                               STA call_offset,X
    2191/    27A9 : A9 2D                                               LDA #MENU_CHAR_BOX_HEIGHT#256
    2191/    27AB : 95 FE                                               STA call_offset,X
    2191/    27AD : A9 04                                               LDA #MENU_CHAR_BOX_COLOR#256
    2191/    27AF : 95 FF                                               STA call_offset,X
    2191/    27B1 : 20 06 1B                    JSR DrawRect
    2193/    27B4 : 74 04               		STZ index,X
    2194/    27B6 : 74 00                                               STZ i,X
    2196/    27B8 : 74 01                                               STZ j,X
    2198/    27BA : B5 01               				LDA j,X
    2199/    27BC : 0A                  				ASL
    2200/    27BD : 0A                  				ASL
    2201/    27BE : 0A                  				ASL
    2202/    27BF : 0A                  				ASL
    2203/    27C0 : 69 A4               				ADC #MENU_CHAR_GRID_LEFT
    2204/    27C2 : 95 03               				STA xpos,X
    2205/    27C4 : B5 00               				LDA i,X
    2206/    27C6 : 0A                  				ASL
    2207/    27C7 : 0A                  				ASL
    2208/    27C8 : 0A                  				ASL
    2209/    27C9 : 0A                  				ASL
    2210/    27CA : 69 14               				ADC #MENU_CHAR_GRID_TOP
    2211/    27CC : 95 02               				STA ypos,X
    2212/    27CE : A9 18                                               LDA #Menu_item_slot#256
    2212/    27D0 : 95 FD                                               STA call_offset,X
    2212/    27D2 : B5 03                                       LDA xpos,X
    2212/    27D4 : 95 FE                                       STA call_offset,X
    2212/    27D6 : B5 02                                       LDA ypos,X
    2212/    27D8 : 95 FF                                       STA call_offset,X
    2212/    27DA : 20 01 0E                    JSR DrawTile
    2213/    27DD : B4 04               				LDY index,X
    2214/    27DF : B9 30 02            				LDA hero_inventory,Y
    2215/    27E2 : C9 20               				CMP #item_none
    2216/    27E4 : D0 03                       BNE skip
    2216/    27E6 : 4C 77 28                            JMP if{temp}
    2216/    27E9 :                             skip:
    2217/    27E9 : 0A                  					ASL
    2218/    27EA : A8                  					TAY
    2219/    27EB : B9 98 C5            					LDA item_stats,Y
    2220/    27EE : 85 04               					STA item_ptr
    2221/    27F0 : B9 99 C5            					LDA item_stats+1,Y
    2222/    27F3 : 85 05               					STA item_ptr+1
    2223/    27F5 : A0 00               					LDY #type
    2224/    27F7 : B1 04               					LDA (item_ptr),Y
    2225/    27F9 : C9 0E               					CMP #stat_Res_Only
    2226/    27FB : D0 03                       BNE skip
    2226/    27FD : 4C 77 28                            JMP if{temp}
    2226/    2800 :                             skip:
    2227/    2800 : 95 05               						STA item_type,X
    2228/    2802 : B4 04               						LDY index,X
    2229/    2804 : B9 30 02            						LDA hero_inventory,Y
    2230/    2807 : 85 04               						STA item_ptr
    2231/    2809 : A5 04                                       LDA item_ptr
    2231/    280B : 95 FD                                       STA call_offset,X
    2231/    280D : B5 03                                       LDA xpos,X
    2231/    280F : 95 FE                                       STA call_offset,X
    2231/    2811 : B5 02                                       LDA ypos,X
    2231/    2813 : 95 FF                                       STA call_offset,X
    2231/    2815 : 20 C4 25                    JSR DrawItem
    2232/    2818 : AD 5D 02            						LDA menu_char_x
    2233/    281B : D5 01               						CMP j,X
    2234/    281D : F0 03                       BEQ skip
    2234/    281F : 4C 77 28                            JMP if{temp}
    2234/    2822 :                             skip:
    2235/    2822 : AD 5E 02            							LDA menu_char_y
    2236/    2825 : D5 00               							CMP i,X
    2237/    2827 : F0 03                       BEQ skip
    2237/    2829 : 4C 77 28                            JMP if{temp}
    2237/    282C :                             skip:
    2238/    282C : B4 05               								LDY item_type,X
    2239/    282E : B9 2B 02            								LDA hero_equipped,Y
    2240/    2831 : 85 04               								STA item_ptr
    2241/    2833 : A5 04                                       LDA item_ptr
    2241/    2835 : 95 F5                                       STA call_offset,X
    2241/    2837 : A9 50                                               LDA #MENU_CHAR_BOX_LEFT#256
    2241/    2839 : 95 F6                                               STA call_offset,X
    2241/    283B : A9 16                                               LDA #MENU_CHAR_BOX1_TOP#256
    2241/    283D : 95 F7                                               STA call_offset,X
    2241/    283F : A9 04                                               LDA #MENU_CHAR_BOX_COLOR#256
    2241/    2841 : 95 F8                                               STA call_offset,X
    2241/    2843 : 20 21 26                    JSR DrawItemStats
    2242/    2846 : B4 04               								LDY index,X
    2243/    2848 : B9 30 02            								LDA hero_inventory,Y
    2244/    284B : 85 04               								STA item_ptr
    2245/    284D : A5 04                                       LDA item_ptr
    2245/    284F : 95 F5                                       STA call_offset,X
    2245/    2851 : A9 50                                               LDA #MENU_CHAR_BOX_LEFT#256
    2245/    2853 : 95 F6                                               STA call_offset,X
    2245/    2855 : A9 46                                               LDA #MENU_CHAR_BOX2_TOP#256
    2245/    2857 : 95 F7                                               STA call_offset,X
    2245/    2859 : A9 04                                               LDA #MENU_CHAR_BOX_COLOR#256
    2245/    285B : 95 F8                                               STA call_offset,X
    2245/    285D : 20 21 26                    JSR DrawItemStats
    2246/    2860 : A9 1B                                               LDA #Menu_item_selector#256
    2246/    2862 : 95 F5                                               STA call_offset,X
    2246/    2864 : A9 50                                               LDA #MENU_CHAR_BOX_LEFT#256
    2246/    2866 : 95 F6                                               STA call_offset,X
    2246/    2868 : A9 46                                               LDA #MENU_CHAR_BOX2_TOP#256
    2246/    286A : 95 F7                                               STA call_offset,X
    2246/    286C : A9 40                                               LDA #COLOR_TRANSPARENT#256
    2246/    286E : 95 F8                                               STA call_offset,X
    2246/    2870 : A9 0C                                               LDA #COLOR_GREEN#256
    2246/    2872 : 95 F9                                               STA call_offset,X
    2246/    2874 : 20 B8 0E                    JSR DrawTile1bpp
    2251/    2877 : F6 04               				INC index,X
    2252/    2879 : F6 01               				INC j,X
    2253/    287B : B5 01               				LDA j,X
    2254/    287D : C9 05               				CMP #MENU_CHAR_BOX_X_COUNT
    2255/    287F : F0 03                       BEQ skip
    2255/    2881 : 4C BA 27                            JMP dmi.loopx
    2255/    2884 :                             skip:
    2256/    2884 : F6 00               			INC i,X
    2257/    2886 : B5 00               			LDA i,X
    2258/    2888 : C9 06               			CMP #MENU_CHAR_BOX_Y_COUNT
    2259/    288A : F0 03                       BEQ skip
    2259/    288C : 4C B8 27                            JMP dmi.loopy
    2259/    288F :                             skip:
    2260/    288F : A9 A4                                               LDA #MENU_CHAR_GRID_LEFT#256
    2260/    2891 : 95 FB                                               STA call_offset,X
    2260/    2893 : A9 74                                               LDA #MENU_CHAR_GRID_LINE_TOP#256
    2260/    2895 : 95 FC                                               STA call_offset,X
    2260/    2897 : A9 50                                               LDA #MENU_CHAR_GRID_LINE_WIDTH#256
    2260/    2899 : 95 FD                                               STA call_offset,X
    2260/    289B : A9 01                                               LDA #1#256
    2260/    289D : 95 FE                                               STA call_offset,X
    2260/    289F : A9 00                                               LDA #COLOR_BLACK#256
    2260/    28A1 : 95 FF                                               STA call_offset,X
    2260/    28A3 : 20 06 1B                    JSR DrawRect
    2261/    28A6 : A9 F4                                               LDA #MENU_CHAR_GRID_LINE_LEFT#256
    2261/    28A8 : 95 FB                                               STA call_offset,X
    2261/    28AA : A9 14                                               LDA #MENU_CHAR_GRID_TOP#256
    2261/    28AC : 95 FC                                               STA call_offset,X
    2261/    28AE : A9 01                                               LDA #1#256
    2261/    28B0 : 95 FD                                               STA call_offset,X
    2261/    28B2 : A9 61                                               LDA #MENU_CHAR_GRID_LINE_HEIGHT#256
    2261/    28B4 : 95 FE                                               STA call_offset,X
    2261/    28B6 : A9 00                                               LDA #COLOR_BLACK#256
    2261/    28B8 : 95 FF                                               STA call_offset,X
    2261/    28BA : 20 06 1B                    JSR DrawRect
    2262/    28BD : AD 5D 02            		LDA menu_char_x
    2263/    28C0 : 0A                  		ASL
    2264/    28C1 : 0A                  		ASL
    2265/    28C2 : 0A                  		ASL
    2266/    28C3 : 0A                  		ASL
    2267/    28C4 : 18                  		CLC
    2268/    28C5 : 69 A4               		ADC #MENU_CHAR_GRID_LEFT
    2269/    28C7 : 95 03               		STA xpos,X
    2270/    28C9 : AD 5E 02            		LDA menu_char_y
    2271/    28CC : 0A                  		ASL
    2272/    28CD : 0A                  		ASL
    2273/    28CE : 0A                  		ASL
    2274/    28CF : 0A                  		ASL
    2275/    28D0 : 18                  		CLC
    2276/    28D1 : 69 14               		ADC #MENU_CHAR_GRID_TOP
    2277/    28D3 : 95 02               		STA ypos,X
    2279/    28D5 : A9 1B                                               LDA #Menu_item_selector#256
    2279/    28D7 : 95 F5                                               STA call_offset,X
    2279/    28D9 : B5 03                                       LDA xpos,X
    2279/    28DB : 95 F6                                       STA call_offset,X
    2279/    28DD : B5 02                                       LDA ypos,X
    2279/    28DF : 95 F7                                       STA call_offset,X
    2279/    28E1 : A9 40                                               LDA #COLOR_TRANSPARENT#256
    2279/    28E3 : 95 F8                                               STA call_offset,X
    2279/    28E5 : A9 0C                                               LDA #COLOR_GREEN#256
    2279/    28E7 : 95 F9                                               STA call_offset,X
    2279/    28E9 : 20 B8 0E                    JSR DrawTile1bpp
    2280/    28EC : 86 11                                       STX saveX
    2280/    28EE : A2 00                                       LDX #0
    2280/    28F0 : 68                                                  PLA
    2280/    28F1 : 95 04                                               STA ZP_locals,X
    2280/    28F3 : E8                                                  INX
    2280/    28F4 : E0 02                                               CPX #zpcounter
    2280/    28F6 : D0 F8                                       BNE ZP_pull
    2280/    28F8 : A6 11                                       LDX saveX
    2280/    28FA : FA                                  PLX
    2280/    28FB : 60                          RTS
    2282/    28FC : 1D 3B 59            	ds.tops: 	FCB MENU_SKILL_BOX1_TOP,MENU_SKILL_BOX2_TOP,MENU_SKILL_BOX3_TOP
    2283/    28FF : 2E 3A 2B            	ds.colors:	FCB MENU_SKILL_BOX1_COLOR,MENU_SKILL_BOX2_COLOR,MENU_SKILL_BOX3_COLOR
    2284/    2902 : 04 10 01            	ds.color1:	FCB 4,16,1
    2285/    2905 : 08 35 17            	ds.color2:	FCB 8,53,23
    2286/    2908 :                             DrawSkills:
    2288/    2908 :                     row:
    2288/    2908 :                     column:
    2288/    2908 :                     index:
    2288/    2908 :                     left:
    2288/    2908 :                     top:
    2288/    2908 :                     color:
    2288/    2908 :                     color2:
    2291/    2908 : DA                                  PHX
    2291/    2909 : 8A                                          TXA                             ;2
    2291/    290A : 38                                          SEC                             ;2
    2291/    290B : E9 09                                       SBC #xcounter   ;2
    2291/    290D : AA                                          TAX                             ;2
    2291/    290E : 86 11                                       STX saveX
    2291/    2910 : A2 02                                       LDX #zpcounter
    2291/    2912 : B5 03                                               LDA ZP_locals-1,X
    2291/    2914 : 48                                                  PHA
    2291/    2915 : CA                                                  DEX
    2291/    2916 : D0 FA                                       BNE ZP_push
    2291/    2918 : A6 11                                       LDX saveX
    2293/    291A : A9 98                                               LDA #MENU_SKILL_DBOX_LEFT#256
    2293/    291C : 95 FB                                               STA call_offset,X
    2293/    291E : A9 1D                                               LDA #MENU_SKILL_DBOX_TOP#256
    2293/    2920 : 95 FC                                               STA call_offset,X
    2293/    2922 : A9 5C                                               LDA #MENU_SKILL_DBOX_WIDTH#256
    2293/    2924 : 95 FD                                               STA call_offset,X
    2293/    2926 : A9 57                                               LDA #MENU_SKILL_DBOX_HEIGHT#256
    2293/    2928 : 95 FE                                               STA call_offset,X
    2293/    292A : A9 10                                               LDA #MENU_SKILL_DBOX_COLOR#256
    2293/    292C : 95 FF                                               STA call_offset,X
    2293/    292E : 20 06 1B                    JSR DrawRect
    2295/    2931 : A9 24                                               LDA #Skill0#256
    2295/    2933 : 95 02                                               STA index,X
    2296/    2935 : 74 00                                               STZ row,X
    2298/    2937 : B4 00               			LDY row,X
    2299/    2939 : B9 FC 28            			LDA ds.tops,Y
    2300/    293C : 95 04               			STA top,X
    2301/    293E : B9 FF 28            			LDA ds.colors,Y
    2302/    2941 : 95 05               			STA color,X
    2303/    2943 : A9 09                                               LDA #MENU_SKILL_BOX_LEFT#256
    2303/    2945 : 95 FB                                               STA call_offset,X
    2303/    2947 : B5 04                                       LDA top,X
    2303/    2949 : 95 FC                                       STA call_offset,X
    2303/    294B : A9 8C                                               LDA #MENU_SKILL_BOX_WIDTH#256
    2303/    294D : 95 FD                                               STA call_offset,X
    2303/    294F : A9 1E                                               LDA #MENU_SKILL_BOX_HEIGHT#256
    2303/    2951 : 95 FE                                               STA call_offset,X
    2303/    2953 : B5 05                                       LDA color,X
    2303/    2955 : 95 FF                                       STA call_offset,X
    2303/    2957 : 20 06 1B                    JSR DrawRect
    2304/    295A : 74 01                                               STZ column,X
    2308/    295C : B5 01               				LDA column,X
    2309/    295E : 0A                  				ASL 	;*2
    2310/    295F : 0A                  				ASL 	;*4
    2311/    2960 : 95 07               				STA mult_buff,X
    2312/    2962 : 0A                  				ASL 	;*8
    2313/    2963 : 0A                  				ASL 	;*16
    2314/    2964 : 0A                  				ASL 	;*32
    2315/    2965 : 38                  				SEC
    2316/    2966 : F5 07               				SBC mult_buff,X
    2317/    2968 : 18                  				CLC
    2318/    2969 : 69 0B               				ADC #MENU_SKILL_SKILL_LEFT
    2319/    296B : 95 03               				STA left,X
    2323/    296D : B5 00               				LDA row,X
    2324/    296F : 0A                  				ASL 	;*2
    2325/    2970 : 95 07               				STA mult_buff,X
    2326/    2972 : 0A                  				ASL		;*4
    2327/    2973 : 0A                  				ASL		;*8
    2328/    2974 : 0A                  				ASL		;*16
    2329/    2975 : 0A                  				ASL		;*32
    2330/    2976 : 38                  				SEC
    2331/    2977 : F5 07               				SBC mult_buff,X
    2332/    2979 : 18                  				CLC
    2333/    297A : 69 20               				ADC #MENU_SKILL_SKILL_TOP
    2334/    297C : 95 04               				STA top,X
    2336/    297E : B5 02               				LDA index,X
    2337/    2980 : 38                  				SEC
    2338/    2981 : E9 24               				SBC #Skill0
    2339/    2983 : A8                  				TAY
    2340/    2984 : B9 4E 02            				LDA skill_list,Y
    2341/    2987 : D0 03                       BNE skip
    2341/    2989 : 4C B2 29                            JMP if{temp}
    2341/    298C :                             skip:
    2342/    298C : B4 00               					LDY row,X
    2343/    298E : B9 02 29            					LDA ds.color1,Y
    2344/    2991 : 95 05               					STA color,X
    2345/    2993 : B9 05 29            					LDA ds.color2,Y
    2346/    2996 : 95 06               					STA color2,X
    2347/    2998 : B5 02                                       LDA index,X
    2347/    299A : 95 F5                                       STA call_offset,X
    2347/    299C : B5 03                                       LDA left,X
    2347/    299E : 95 F6                                       STA call_offset,X
    2347/    29A0 : B5 04                                       LDA top,X
    2347/    29A2 : 95 F7                                       STA call_offset,X
    2347/    29A4 : B5 05                                       LDA color,X
    2347/    29A6 : 95 F8                                       STA call_offset,X
    2347/    29A8 : B5 06                                       LDA color2,X
    2347/    29AA : 95 F9                                       STA call_offset,X
    2347/    29AC : 20 B8 0E                    JSR DrawTile1bpp
    2348/    29AF : 4C C9 29                    JMP if{temp2}
    2349/    29B2 : B5 02                                       LDA index,X
    2349/    29B4 : 95 F5                                       STA call_offset,X
    2349/    29B6 : B5 03                                       LDA left,X
    2349/    29B8 : 95 F6                                       STA call_offset,X
    2349/    29BA : B5 04                                       LDA top,X
    2349/    29BC : 95 F7                                       STA call_offset,X
    2349/    29BE : A9 15                                               LDA #COLOR_GRAY_1#256
    2349/    29C0 : 95 F8                                               STA call_offset,X
    2349/    29C2 : A9 2A                                               LDA #COLOR_GRAY_2#256
    2349/    29C4 : 95 F9                                               STA call_offset,X
    2349/    29C6 : 20 B8 0E                    JSR DrawTile1bpp
    2353/    29C9 : AD 5F 02            				LDA menu_skills_x
    2354/    29CC : D5 01               				CMP column,X
    2355/    29CE : F0 03                       BEQ skip
    2355/    29D0 : 4C C7 2A                            JMP if{temp}
    2355/    29D3 :                             skip:
    2356/    29D3 : AD 60 02            					LDA menu_skills_y
    2357/    29D6 : D5 00               					CMP row,X
    2358/    29D8 : F0 03                       BEQ skip
    2358/    29DA : 4C C7 2A                            JMP if{temp}
    2358/    29DD :                             skip:
    2359/    29DD : A9 1C                                               LDA #Menu_skill_selector#256
    2359/    29DF : 95 F5                                               STA call_offset,X
    2359/    29E1 : B5 03                                       LDA left,X
    2359/    29E3 : 95 F6                                       STA call_offset,X
    2359/    29E5 : B5 04                                       LDA top,X
    2359/    29E7 : 95 F7                                       STA call_offset,X
    2359/    29E9 : A9 40                                               LDA #COLOR_TRANSPARENT#256
    2359/    29EB : 95 F8                                               STA call_offset,X
    2359/    29ED : A9 0C                                               LDA #COLOR_GREEN#256
    2359/    29EF : 95 F9                                               STA call_offset,X
    2359/    29F1 : 20 B8 0E                    JSR DrawTile1bpp
    2362/    29F4 : AD 60 02            						LDA menu_skills_y
    2363/    29F7 : 0A                  						ASL
    2364/    29F8 : 0A                  						ASL
    2365/    29F9 : 18                  						CLC
    2366/    29FA : 6D 60 02            						ADC menu_skills_y
    2367/    29FD : 6D 5F 02            						ADC menu_skills_x
    2368/    2A00 : 0A                  						ASL
    2369/    2A01 : 95 08               						STA index_buff,X			;save index for skill description
    2370/    2A03 : A8                  						TAY
    2371/    2A04 : B9 AC C7            						LDA skill_titles,Y
    2372/    2A07 : 85 04               						STA str_ptr
    2373/    2A09 : B9 AD C7            						LDA skill_titles+1,Y
    2374/    2A0C : 85 05               						STA str_ptr+1
    2375/    2A0E : A0 00               						LDY #0
    2377/    2A10 : B1 04               							LDA (str_ptr),Y
    2378/    2A12 : F0 03               							BEQ ds.title_done
    2379/    2A14 : C8                  							INY
    2380/    2A15 : D0 F9               							BNE ds.title
    2383/    2A17 : 98                  						TYA
    2384/    2A18 : 0A                  						ASL
    2385/    2A19 : 95 07               						STA mult_buff,X
    2386/    2A1B : 0A                  						ASL
    2387/    2A1C : 18                  						CLC
    2388/    2A1D : 75 07               						ADC mult_buff,X
    2389/    2A1F : 95 07               						STA mult_buff,X
    2390/    2A21 : A9 5C               						LDA #MENU_SKILL_DBOX_WIDTH
    2391/    2A23 : 38                  						SEC
    2392/    2A24 : F5 07               						SBC mult_buff,X
    2393/    2A26 : 4A                  						LSR
    2394/    2A27 : 18                  						CLC
    2395/    2A28 : 69 98               						ADC #MENU_SKILL_DBOX_LEFT
    2396/    2A2A : 8D 64 02            						STA draw_X
    2397/    2A2D : AC 60 02            						LDY menu_skills_y
    2398/    2A30 : B9 05 29            						LDA ds.color2,Y
    2399/    2A33 : 95 05               						STA color,X
    2400/    2A35 : A5 04                                       LDA str_ptr
    2400/    2A37 : 95 F4                                       STA call_offset,X
    2400/    2A39 : A5 05                                       LDA str_ptr+1
    2400/    2A3B : 95 F5                                       STA call_offset+1,X
    2400/    2A3D : 74 F6                                               STZ call_offset,X
    2400/    2A3F : 74 F7                                               STZ call_offset,X
    2400/    2A41 : A9 1F                                               LDA #MENU_SKILL_DBOX_TITLE_TOP#256
    2400/    2A43 : 95 F8                                               STA call_offset,X
    2400/    2A45 : A9 3F                                               LDA #COLOR_WHITE#256
    2400/    2A47 : 95 F9                                               STA call_offset,X
    2400/    2A49 : B5 05                                       LDA color,X
    2400/    2A4B : 95 FA                                       STA call_offset,X
    2400/    2A4D : 20 55 1B                    JSR DrawText
    2403/    2A50 : B4 08               						LDY index_buff,X
    2404/    2A52 : B9 BC C9            						LDA skill_descriptions,Y
    2405/    2A55 : 85 04               						STA str_ptr
    2406/    2A57 : B9 BD C9            						LDA skill_descriptions+1,Y
    2407/    2A5A : 85 05               						STA str_ptr+1
    2408/    2A5C : A9 9A                                               LDA #MENU_SKILL_DBOX_TEXT_LEFT#256
    2408/    2A5E : 8D 64 02                                            STA draw_X
    2409/    2A61 : A5 04                                       LDA str_ptr
    2409/    2A63 : 95 F4                                       STA call_offset,X
    2409/    2A65 : A5 05                                       LDA str_ptr+1
    2409/    2A67 : 95 F5                                       STA call_offset+1,X
    2409/    2A69 : 74 F6                                               STZ call_offset,X
    2409/    2A6B : 74 F7                                               STZ call_offset,X
    2409/    2A6D : A9 2B                                               LDA #MENU_SKILL_DBOX_TEXT_TOP#256
    2409/    2A6F : 95 F8                                               STA call_offset,X
    2409/    2A71 : A9 3F                                               LDA #COLOR_WHITE#256
    2409/    2A73 : 95 F9                                               STA call_offset,X
    2409/    2A75 : A9 10                                               LDA #MENU_SKILL_DBOX_COLOR#256
    2409/    2A77 : 95 FA                                               STA call_offset,X
    2409/    2A79 : 20 55 1B                    JSR DrawText
    2412/    2A7C : B5 08               						LDA index_buff,X
    2413/    2A7E : 4A                  						LSR
    2414/    2A7F : A8                  						TAY
    2415/    2A80 : B9 4E 02            						LDA skill_list,Y
    2416/    2A83 : F0 03                       BEQ skip
    2416/    2A85 : 4C C7 2A                            JMP if{temp}
    2416/    2A88 :                             skip:
    2417/    2A88 : AD 5F 02            							LDA menu_skills_x
    2418/    2A8B : F0 09               							BEQ ds.upgrade
    2419/    2A8D : 88                  							DEY
    2420/    2A8E : B9 4E 02            							LDA skill_list,Y
    2421/    2A91 : D0 03                       BNE skip
    2421/    2A93 : 4C C7 2A                            JMP if{temp}
    2421/    2A96 :                             skip:
    2423/    2A96 : A9 9A                                               LDA #MENU_SKILL_UPGRADE_LEFT#256
    2423/    2A98 : 8D 64 02                                            STA draw_X
    2424/    2A9B : 80 0F                                                       BRA str_skip
    2424/    2A9D : 5B 45 6E 74 65 72                                           FCB "[Enter]Upgrade",0
    2424/    2AAC : A9 9D                                               LDA #str_addr#256
    2424/    2AAE : 95 F4                                               STA call_offset,X
    2424/    2AB0 : A9 2A                                               LDA #str_addr>>8
    2424/    2AB2 : 95 F5                                               STA call_offset+1,X
    2424/    2AB4 : 74 F6                                               STZ call_offset,X
    2424/    2AB6 : 74 F7                                               STZ call_offset,X
    2424/    2AB8 : A9 6A                                               LDA #MENU_SKILL_UPGRADE_TOP#256
    2424/    2ABA : 95 F8                                               STA call_offset,X
    2424/    2ABC : A9 0F                                               LDA #COLOR_YELLOW#256
    2424/    2ABE : 95 F9                                               STA call_offset,X
    2424/    2AC0 : A9 10                                               LDA #MENU_SKILL_DBOX_COLOR#256
    2424/    2AC2 : 95 FA                                               STA call_offset,X
    2424/    2AC4 : 20 55 1B                    JSR DrawText
    2430/    2AC7 : F6 02               				INC index,X
    2431/    2AC9 : F6 01               				INC column,X
    2432/    2ACB : B5 01               				LDA column,X
    2433/    2ACD : C9 05               				CMP #5
    2434/    2ACF : F0 03                       BEQ skip
    2434/    2AD1 : 4C 5C 29                            JMP ds.columns
    2434/    2AD4 :                             skip:
    2435/    2AD4 : F6 00               			INC row,X
    2436/    2AD6 : B5 00               			LDA row,X
    2437/    2AD8 : C9 03               			CMP #3
    2438/    2ADA : F0 03                       BEQ skip
    2438/    2ADC : 4C 37 29                            JMP ds.rows
    2438/    2ADF :                             skip:
    2439/    2ADF : 86 11                                       STX saveX
    2439/    2AE1 : A2 00                                       LDX #0
    2439/    2AE3 : 68                                                  PLA
    2439/    2AE4 : 95 04                                               STA ZP_locals,X
    2439/    2AE6 : E8                                                  INX
    2439/    2AE7 : E0 02                                               CPX #zpcounter
    2439/    2AE9 : D0 F8                                       BNE ZP_pull
    2439/    2AEB : A6 11                                       LDX saveX
    2439/    2AED : FA                                  PLX
    2439/    2AEE : 60                          RTS
    2446/    2AEF :                     	loop:
    2451/    2AEF :                     	done:
    2454/    2AEF : 08 35 32 0A 2A 2A   	dres.colors: 	FCB 8,53,50,10,42,42
    2455/    2AF5 : 1E 20 22 1F 21 23   	dres.items:		FCB Res_HP_Heal, Res_Batt_Heal, Res_Exp_Upgrade, Res_HP_Upgrade, Res_Batt_Upgrade, Res_Dmg_Upgrade
    2456/    2AFB :                             DrawResources:
    2458/    2AFB :                     row:
    2458/    2AFB :                     column:
    2459/    2AFB :                     left:
    2459/    2AFB :                     top:
    2459/    2AFB :                     color:
    2459/    2AFB :                     color2:
    2459/    2AFB :                     item:
    2462/    2AFB : DA                                  PHX
    2462/    2AFC : 8A                                          TXA                             ;2
    2462/    2AFD : 38                                          SEC                             ;2
    2462/    2AFE : E9 0B                                       SBC #xcounter   ;2
    2462/    2B00 : AA                                          TAX                             ;2
    2462/    2B01 : 86 11                                       STX saveX
    2462/    2B03 : A2 02                                       LDX #zpcounter
    2462/    2B05 : B5 03                                               LDA ZP_locals-1,X
    2462/    2B07 : 48                                                  PHA
    2462/    2B08 : CA                                                  DEX
    2462/    2B09 : D0 FA                                       BNE ZP_push
    2462/    2B0B : A6 11                                       LDX saveX
    2463/    2B0D : A9 20               		LDA #item_none
    2464/    2B0F : 8D 63 02            		STA menu_res_target
    2465/    2B12 : 95 03               		STA draw_item,X
    2466/    2B14 : A9 98                                               LDA #MENU_RES_BOX_LEFT#256
    2466/    2B16 : 95 FB                                               STA call_offset,X
    2466/    2B18 : A9 1D                                               LDA #MENU_RES_BOX_TOP#256
    2466/    2B1A : 95 FC                                               STA call_offset,X
    2466/    2B1C : A9 5C                                               LDA #MENU_RES_BOX_WIDTH#256
    2466/    2B1E : 95 FD                                               STA call_offset,X
    2466/    2B20 : A9 57                                               LDA #MENU_RES_BOX_HEIGHT#256
    2466/    2B22 : 95 FE                                               STA call_offset,X
    2466/    2B24 : A9 01                                               LDA #MENU_RES_BOX_COLOR#256
    2466/    2B26 : 95 FF                                               STA call_offset,X
    2466/    2B28 : 20 06 1B                    JSR DrawRect
    2467/    2B2B : 74 00                                               STZ row,X
    2469/    2B2D : B5 00               			LDA row,X
    2470/    2B2F : 1A                  			INC
    2471/    2B30 : 95 02               			STA tile_index,X
    2474/    2B32 : A9 00                       LDA #0
    2474/    2B34 : 18                          CLC
    2474/    2B35 : B4 00                       LDY row,X
    2474/    2B37 :                             loop:
    2474/    2B37 : F0 05                               BEQ done
    2474/    2B39 : 69 17                               ADC #MENU_RES_BLOCK_WIDTH
    2474/    2B3B : 88                                  DEY
    2474/    2B3C : D0 F9                               BNE loop
    2474/    2B3E :                             done:
    2475/    2B3E : 69 0B               			ADC #MENU_RES_BLOCK_LEFT
    2476/    2B40 : 95 04               			STA left,X
    2479/    2B42 : B4 00               			LDY row,X
    2480/    2B44 : B9 EF 2A            			LDA dres.colors,Y
    2481/    2B47 : 95 06               			STA color,X
    2483/    2B49 : B5 04                                       LDA left,X
    2483/    2B4B : 95 FB                                       STA call_offset,X
    2483/    2B4D : A9 13                                               LDA #MENU_RES_BLOCK_TOP#256
    2483/    2B4F : 95 FC                                               STA call_offset,X
    2483/    2B51 : A9 17                                               LDA #MENU_RES_BLOCK_WIDTH#256
    2483/    2B53 : 95 FD                                               STA call_offset,X
    2483/    2B55 : A9 61                                               LDA #2+MENU_RES_BLOCK_HEIGHT*5#256
    2483/    2B57 : 95 FE                                               STA call_offset,X
    2483/    2B59 : B5 06                                       LDA color,X
    2483/    2B5B : 95 FF                                       STA call_offset,X
    2483/    2B5D : 20 06 1B                    JSR DrawRect
    2485/    2B60 : 74 01                                               STZ column,X
    2487/    2B62 : B5 00               				LDA row,X
    2488/    2B64 : C9 04               				CMP #4
    2489/    2B66 : 90 03                       BCC skip
    2489/    2B68 : 4C A8 2B                            JMP if{temp}
    2489/    2B6B :                             skip:
    2491/    2B6B : A9 00                       LDA #0
    2491/    2B6D : 18                          CLC
    2491/    2B6E : B4 00                       LDY row,X
    2491/    2B70 :                             loop:
    2491/    2B70 : F0 05                               BEQ done
    2491/    2B72 : 69 17                               ADC #MENU_RES_BLOCK_WIDTH
    2491/    2B74 : 88                                  DEY
    2491/    2B75 : D0 F9                               BNE loop
    2491/    2B77 :                             done:
    2492/    2B77 : 69 0E               					ADC #MENU_RES_ITEM_LEFT
    2493/    2B79 : 95 04               					STA left,X
    2496/    2B7B : A9 00                       LDA #0
    2496/    2B7D : 18                          CLC
    2496/    2B7E : B4 01                       LDY column,X
    2496/    2B80 :                             loop:
    2496/    2B80 : F0 05                               BEQ done
    2496/    2B82 : 69 13                               ADC #MENU_RES_BLOCK_HEIGHT
    2496/    2B84 : 88                                  DEY
    2496/    2B85 : D0 F9                               BNE loop
    2496/    2B87 :                             done:
    2497/    2B87 : 69 15               					ADC #MENU_RES_ITEM_TOP
    2498/    2B89 : 95 05               					STA top,X
    2500/    2B8B : B5 02                                       LDA tile_index,X
    2500/    2B8D : 95 FD                                       STA call_offset,X
    2500/    2B8F : B5 04                                       LDA left,X
    2500/    2B91 : 95 FE                                       STA call_offset,X
    2500/    2B93 : B5 05                                       LDA top,X
    2500/    2B95 : 95 FF                                       STA call_offset,X
    2500/    2B97 : 20 C4 25                    JSR DrawItem
    2502/    2B9A : B5 02                                       LDA tile_index,X
    2502/    2B9C : 95 03                                       STA draw_item,X
    2503/    2B9E : B5 02               					LDA tile_index,X
    2504/    2BA0 : 18                  					CLC
    2505/    2BA1 : 69 05               					ADC #5
    2506/    2BA3 : 95 02               					STA tile_index,X
    2507/    2BA5 : 4C 5E 2C                    JMP if{temp2}
    2508/    2BA8 : B5 01               					LDA column,X
    2509/    2BAA : C9 03               					CMP #3
    2510/    2BAC : 90 03                       BCC skip
    2510/    2BAE : 4C 5A 2C                            JMP if{temp}
    2510/    2BB1 :                             skip:
    2512/    2BB1 : B5 00               						LDA row,X
    2513/    2BB3 : 38                  						SEC
    2514/    2BB4 : E9 04               						SBC #4
    2515/    2BB6 : 95 0A               						STA mult_buff,X
    2516/    2BB8 : 0A                  						ASL
    2517/    2BB9 : 75 0A               						ADC mult_buff,X
    2518/    2BBB : 75 01               						ADC column,X
    2519/    2BBD : A8                  						TAY
    2520/    2BBE : B9 F5 2A            						LDA dres.items,Y
    2521/    2BC1 : 95 08               						STA item,X
    2524/    2BC3 : A9 00                       LDA #0
    2524/    2BC5 : 18                          CLC
    2524/    2BC6 : B4 00                       LDY row,X
    2524/    2BC8 :                             loop:
    2524/    2BC8 : F0 05                               BEQ done
    2524/    2BCA : 69 17                               ADC #MENU_RES_BLOCK_WIDTH
    2524/    2BCC : 88                                  DEY
    2524/    2BCD : D0 F9                               BNE loop
    2524/    2BCF :                             done:
    2525/    2BCF : 69 0E               						ADC #MENU_RES_ITEM_LEFT
    2526/    2BD1 : 95 04               						STA left,X
    2529/    2BD3 : A9 00                       LDA #0
    2529/    2BD5 : 18                          CLC
    2529/    2BD6 : B4 01                       LDY column,X
    2529/    2BD8 :                             loop:
    2529/    2BD8 : F0 05                               BEQ done
    2529/    2BDA : 69 13                               ADC #MENU_RES_BLOCK_HEIGHT
    2529/    2BDC : 88                                  DEY
    2529/    2BDD : D0 F9                               BNE loop
    2529/    2BDF :                             done:
    2530/    2BDF : 69 15               						ADC #MENU_RES_ITEM_TOP
    2531/    2BE1 : 95 05               						STA top,X
    2534/    2BE3 : B5 08               						LDA item,X
    2535/    2BE5 : 80 03                       BRA s{ts}c{tc}
    2536/    2BE7 : 4C 35 2C                    JMP s{ts}done
    2536/    2BEA : C9 1E                               CMP #Res_HP_Heal
    2536/    2BEC : F0 03                       BEQ skip
    2536/    2BEE : 4C F3 2B                            JMP s{ts}c{tc}
    2536/    2BF1 :                             skip:
    2536/    2BF1 : 80 06                               BRA s{ts}b{tb}
    2536/    2BF3 : C9 1F                                       CMP #Res_HP_Upgrade
    2536/    2BF5 : D0 0D                               BNE s{ts}c{tc}
    2536/    2BF7 : 80 00                               BRA s{ts}b{tb}
    2537/    2BF9 : A9 01                                               LDA #MENU_RES_HP_COLOR1#256
    2537/    2BFB : 95 06                                               STA color,X
    2538/    2BFD : A9 17                                               LDA #MENU_RES_HP_COLOR2#256
    2538/    2BFF : 95 07                                               STA color2,X
    2539/    2C01 : 4C 35 2C                    JMP s{ts}done
    2539/    2C04 : C9 20                               CMP #Res_Batt_Heal
    2539/    2C06 : F0 03                       BEQ skip
    2539/    2C08 : 4C 0D 2C                            JMP s{ts}c{tc}
    2539/    2C0B :                             skip:
    2539/    2C0B : 80 06                               BRA s{ts}b{tb}
    2539/    2C0D : C9 21                                       CMP #Res_Batt_Upgrade
    2539/    2C0F : D0 0D                               BNE s{ts}c{tc}
    2539/    2C11 : 80 00                               BRA s{ts}b{tb}
    2540/    2C13 : A9 10                                               LDA #MENU_RES_BATT_COLOR1#256
    2540/    2C15 : 95 06                                               STA color,X
    2541/    2C17 : A9 35                                               LDA #MENU_RES_BATT_COLOR2#256
    2541/    2C19 : 95 07                                               STA color2,X
    2542/    2C1B : 4C 35 2C                    JMP s{ts}done
    2542/    2C1E : C9 22                               CMP #Res_Exp_Upgrade
    2542/    2C20 : F0 03                       BEQ skip
    2542/    2C22 : 4C 27 2C                            JMP s{ts}c{tc}
    2542/    2C25 :                             skip:
    2542/    2C25 : 80 06                               BRA s{ts}b{tb}
    2542/    2C27 : C9 23                                       CMP #Res_Dmg_Upgrade
    2542/    2C29 : D0 0A                               BNE s{ts}c{tc}
    2542/    2C2B : 80 00                               BRA s{ts}b{tb}
    2543/    2C2D : A9 05                                               LDA #MENU_RES_EXP_COLOR1#256
    2543/    2C2F : 95 06                                               STA color,X
    2544/    2C31 : A9 1F                                               LDA #MENU_RES_EXP_COLOR2#256
    2544/    2C33 : 95 07                                               STA color2,X
    2547/    2C35 : B5 08                                       LDA item,X
    2547/    2C37 : 95 F5                                       STA call_offset,X
    2547/    2C39 : B5 04                                       LDA left,X
    2547/    2C3B : 95 F6                                       STA call_offset,X
    2547/    2C3D : B5 05                                       LDA top,X
    2547/    2C3F : 95 F7                                       STA call_offset,X
    2547/    2C41 : B5 06                                       LDA color,X
    2547/    2C43 : 95 F8                                       STA call_offset,X
    2547/    2C45 : B5 07                                       LDA color2,X
    2547/    2C47 : 95 F9                                       STA call_offset,X
    2547/    2C49 : 20 B8 0E                    JSR DrawTile1bpp
    2549/    2C4C : B5 01               						LDA column,X
    2550/    2C4E : 0A                  						ASL
    2551/    2C4F : 18                  						CLC
    2552/    2C50 : 75 00               						ADC row,X
    2557/    2C52 : 18                  						CLC
    2558/    2C53 : 69 15               						ADC #21				;Skip past items to Res_only section
    2559/    2C55 : 95 03               						STA draw_item,X
    2560/    2C57 : 4C 5E 2C                    JMP if{temp2}
    2561/    2C5A : A9 20                                               LDA #item_none#256
    2561/    2C5C : 95 03                                               STA draw_item,X
    2565/    2C5E : B5 00               				LDA row,X
    2566/    2C60 : CD 61 02            				CMP menu_res_x
    2567/    2C63 : F0 03                       BEQ skip
    2567/    2C65 : 4C BA 2C                            JMP if{temp}
    2567/    2C68 :                             skip:
    2568/    2C68 : B5 01               					LDA column,X
    2569/    2C6A : CD 62 02            					CMP menu_res_y
    2570/    2C6D : F0 03                       BEQ skip
    2570/    2C6F : 4C BA 2C                            JMP if{temp}
    2570/    2C72 :                             skip:
    2577/    2C72 : A9 00                       LDA #0
    2577/    2C74 : 18                          CLC
    2577/    2C75 : B4 01                       LDY column,X
    2577/    2C77 :                             loop:
    2577/    2C77 : F0 05                               BEQ done
    2577/    2C79 : 69 13                               ADC #MENU_RES_BLOCK_HEIGHT
    2577/    2C7B : 88                                  DEY
    2577/    2C7C : D0 F9                               BNE loop
    2577/    2C7E :                             done:
    2578/    2C7E : 69 15               						ADC #MENU_RES_ITEM_TOP
    2579/    2C80 : 95 05               						STA top,X
    2581/    2C82 : A9 1B                                               LDA #Menu_item_selector#256
    2581/    2C84 : 95 F5                                               STA call_offset,X
    2581/    2C86 : B5 04                                       LDA left,X
    2581/    2C88 : 95 F6                                       STA call_offset,X
    2581/    2C8A : B5 05                                       LDA top,X
    2581/    2C8C : 95 F7                                       STA call_offset,X
    2581/    2C8E : A9 40                                               LDA #COLOR_TRANSPARENT#256
    2581/    2C90 : 95 F8                                               STA call_offset,X
    2581/    2C92 : A9 0C                                               LDA #COLOR_GREEN#256
    2581/    2C94 : 95 F9                                               STA call_offset,X
    2581/    2C96 : 20 B8 0E                    JSR DrawTile1bpp
    2583/    2C99 : B5 03               						LDA draw_item,X
    2584/    2C9B : C9 20               						CMP #item_none
    2585/    2C9D : D0 03                       BNE skip
    2585/    2C9F : 4C BA 2C                            JMP if{temp}
    2585/    2CA2 :                             skip:
    2586/    2CA2 : B5 03                                       LDA draw_item,X
    2586/    2CA4 : 95 F5                                       STA call_offset,X
    2586/    2CA6 : A9 98                                               LDA #MENU_RES_BOX_LEFT#256
    2586/    2CA8 : 95 F6                                               STA call_offset,X
    2586/    2CAA : A9 1D                                               LDA #MENU_RES_BOX_TOP#256
    2586/    2CAC : 95 F7                                               STA call_offset,X
    2586/    2CAE : A9 01                                               LDA #MENU_RES_BOX_COLOR#256
    2586/    2CB0 : 95 F8                                               STA call_offset,X
    2586/    2CB2 : 20 21 26                    JSR DrawItemStats
    2587/    2CB5 : B5 03                                       LDA draw_item,X
    2587/    2CB7 : 8D 63 02                                    STA menu_res_target
    2592/    2CBA : F6 01               				INC column,X
    2593/    2CBC : B5 01               				LDA column,X
    2594/    2CBE : C9 05               				CMP #5
    2595/    2CC0 : F0 03                       BEQ skip
    2595/    2CC2 : 4C 62 2B                            JMP dres.columns
    2595/    2CC5 :                             skip:
    2596/    2CC5 : F6 00               			INC row,X
    2597/    2CC7 : B5 00               			LDA row,X
    2598/    2CC9 : C9 06               			CMP #6
    2599/    2CCB : F0 03                       BEQ skip
    2599/    2CCD : 4C 2D 2B                            JMP dres.rows
    2599/    2CD0 :                             skip:
    2601/    2CD0 : AD 63 02            		LDA menu_res_target
    2602/    2CD3 : C9 20               		CMP #item_none
    2603/    2CD5 : D0 03                       BNE skip
    2603/    2CD7 : 4C 22 2D                            JMP if{temp}
    2603/    2CDA :                             skip:
    2605/    2CDA : 0A                  			ASL
    2606/    2CDB : A8                  			TAY
    2607/    2CDC : B9 98 C5            			LDA item_stats,Y
    2608/    2CDF : 85 04               			STA item_ptr
    2609/    2CE1 : B9 99 C5            			LDA item_stats+1,Y
    2610/    2CE4 : 85 05               			STA item_ptr+1
    2611/    2CE6 : A0 01               			LDY #cost
    2612/    2CE8 : B1 04               			LDA (item_ptr),Y
    2613/    2CEA : 95 09               			STA temp_cost,X
    2616/    2CEC : A0 02               			LDY #cost_type
    2617/    2CEE : B1 04               			LDA (item_ptr),Y
    2618/    2CF0 : A8                  			TAY
    2619/    2CF1 : B9 6A F0            			LDA crystal_colors,Y
    2620/    2CF4 : 95 06               			STA color,X
    2622/    2CF6 : A9 9A                                               LDA #MENU_RES_COST_LEFT#256
    2622/    2CF8 : 8D 64 02                                            STA draw_X
    2623/    2CFB : 80 08                                                       BRA str_skip
    2623/    2CFD : 43 6F 73 74 3A 20                                           FCB "Cost: $",0
    2623/    2D05 : A9 FD                                               LDA #str_addr#256
    2623/    2D07 : 95 F4                                               STA call_offset,X
    2623/    2D09 : A9 2C                                               LDA #str_addr>>8
    2623/    2D0B : 95 F5                                               STA call_offset+1,X
    2623/    2D0D : B5 09                                       LDA temp_cost,X
    2623/    2D0F : 95 F6                                       STA call_offset,X
    2623/    2D11 : 74 F7                                               STZ call_offset,X
    2623/    2D13 : A9 6B                                               LDA #MENU_RES_COST_TOP#256
    2623/    2D15 : 95 F8                                               STA call_offset,X
    2623/    2D17 : B5 06                                       LDA color,X
    2623/    2D19 : 95 F9                                       STA call_offset,X
    2623/    2D1B : A9 01                                               LDA #MENU_RES_BOX_COLOR#256
    2623/    2D1D : 95 FA                                               STA call_offset,X
    2623/    2D1F : 20 55 1B                    JSR DrawText
    2625/    2D22 : 86 11                                       STX saveX
    2625/    2D24 : A2 00                                       LDX #0
    2625/    2D26 : 68                                                  PLA
    2625/    2D27 : 95 04                                               STA ZP_locals,X
    2625/    2D29 : E8                                                  INX
    2625/    2D2A : E0 02                                               CPX #zpcounter
    2625/    2D2C : D0 F8                                       BNE ZP_pull
    2625/    2D2E : A6 11                                       LDX saveX
    2625/    2D30 : FA                                  PLX
    2625/    2D31 : 60                          RTS
    2627/    2D32 :                             DrawMenu:
    2629/    2D32 :                     counter:
    2631/    2D32 : DA                                  PHX
    2631/    2D33 : 8A                                          TXA                             ;2
    2631/    2D34 : 38                                          SEC                             ;2
    2631/    2D35 : E9 06                                       SBC #xcounter   ;2
    2631/    2D37 : AA                                          TAX                             ;2
    2633/    2D38 : AD 65 02                                    LDA output_mode
    2633/    2D3B : 80 03                       BRA s{ts}c{tc}
    2634/    2D3D : 4C DE 2E                    JMP s{ts}done
    2634/    2D40 : C9 01                               CMP #OUTPUT_CHARACTER
    2634/    2D42 : F0 03                       BEQ skip
    2634/    2D44 : 4C DE 2D                            JMP s{ts}c{tc}
    2634/    2D47 :                             skip:
    2635/    2D47 : A9 09                                               LDA #MENU_BG_LEFT#256
    2635/    2D49 : 95 FB                                               STA call_offset,X
    2635/    2D4B : A9 11                                               LDA #MENU_BG_TOP#256
    2635/    2D4D : 95 FC                                               STA call_offset,X
    2635/    2D4F : A9 EE                                               LDA #MENU_BG_WIDTH#256
    2635/    2D51 : 95 FD                                               STA call_offset,X
    2635/    2D53 : A9 66                                               LDA #MENU_BG_HEIGHT#256
    2635/    2D55 : 95 FE                                               STA call_offset,X
    2635/    2D57 : A9 08                                               LDA #COLOR_MENU_CHAR#256
    2635/    2D59 : 95 FF                                               STA call_offset,X
    2635/    2D5B : 20 06 1B                    JSR DrawRect
    2638/    2D5E : A9 0A                                               LDA #Robot_right#256
    2638/    2D60 : 95 FD                                               STA call_offset,X
    2638/    2D62 : A9 1B                                               LDA #MENU_CHAR_ROBOT_LEFT#256
    2638/    2D64 : 95 FE                                               STA call_offset,X
    2638/    2D66 : A9 15                                               LDA #MENU_CHAR_ROBOT_TOP#256
    2638/    2D68 : 95 FF                                               STA call_offset,X
    2638/    2D6A : 20 01 0E                    JSR DrawTile
    2641/    2D6D : A9 38                                               LDA #MENU_CHAR_HP_TOP#256
    2641/    2D6F : 95 00                                               STA stat_y,X
    2642/    2D71 : 74 01               				STZ counter,X
    2644/    2D73 : B5 01               					LDA counter,X
    2645/    2D75 : 0A                  					ASL
    2646/    2D76 : A8                  					TAY
    2647/    2D77 : B9 EA C6            					LDA hero_stat_pointers,Y
    2648/    2D7A : 95 04               					STA stat_ptr,X
    2649/    2D7C : B9 EB C6            					LDA hero_stat_pointers+1,Y
    2650/    2D7F : 95 05               					STA stat_ptr+1,X
    2651/    2D81 : 19 EA C6            					ORA hero_stat_pointers,Y
    2652/    2D84 : F0 03                       BEQ skip
    2652/    2D86 : 4C 91 2D                            JMP if{temp}
    2652/    2D89 :                             skip:
    2653/    2D89 : AD 06 02                                    LDA hero_HP_Max
    2653/    2D8C : 95 02                                       STA temp_stat,X
    2654/    2D8E : 4C 95 2D                    JMP if{temp2}
    2655/    2D91 : A1 04               						LDA (stat_ptr,X)
    2656/    2D93 : 95 02               						STA temp_stat,X
    2658/    2D95 : B9 DC C6            					LDA hero_stat_texts,Y
    2659/    2D98 : 95 04               					STA stat_ptr,X
    2660/    2D9A : B9 DD C6            					LDA hero_stat_texts+1,Y
    2661/    2D9D : 95 05               					STA stat_ptr+1,X
    2662/    2D9F : B4 01               					LDY counter,X
    2663/    2DA1 : B9 D5 C6            					LDA hero_stat_colors,Y
    2664/    2DA4 : 95 03               					STA temp_color,X
    2665/    2DA6 : A9 0D                                               LDA #MENU_CHAR_STAT_LEFT#256
    2665/    2DA8 : 8D 64 02                                            STA draw_X
    2666/    2DAB : B5 04                                       LDA stat_ptr,X
    2666/    2DAD : 95 F4                                       STA call_offset,X
    2666/    2DAF : B5 05                                       LDA stat_ptr+1,X
    2666/    2DB1 : 95 F5                                       STA call_offset+1,X
    2666/    2DB3 : B5 02                                       LDA temp_stat,X
    2666/    2DB5 : 95 F6                                       STA call_offset,X
    2666/    2DB7 : 74 F7                                               STZ call_offset,X
    2666/    2DB9 : B5 00                                       LDA stat_y,X
    2666/    2DBB : 95 F8                                       STA call_offset,X
    2666/    2DBD : B5 03                                       LDA temp_color,X
    2666/    2DBF : 95 F9                                       STA call_offset,X
    2666/    2DC1 : A9 08                                               LDA #COLOR_MENU_CHAR#256
    2666/    2DC3 : 95 FA                                               STA call_offset,X
    2666/    2DC5 : 20 55 1B                    JSR DrawText
    2667/    2DC8 : B5 00               					LDA stat_y,X
    2668/    2DCA : 18                  					CLC
    2669/    2DCB : 69 09               					ADC #9
    2670/    2DCD : 95 00               					STA stat_y,X
    2671/    2DCF : B5 01               					LDA counter,X
    2672/    2DD1 : 1A                  					INC
    2673/    2DD2 : 95 01               					STA counter,X
    2674/    2DD4 : C9 07               					CMP #HERO_STAT_COUNT
    2675/    2DD6 : D0 9B               					BNE dm.loop
    2677/    2DD8 : 20 74 27                    JSR DrawMenuInventory
    2679/    2DDB : 4C DE 2E                    JMP s{ts}done
    2679/    2DDE : C9 02                               CMP #OUTPUT_SKILLS
    2679/    2DE0 : F0 03                       BEQ skip
    2679/    2DE2 : 4C 31 2E                            JMP s{ts}c{tc}
    2679/    2DE5 :                             skip:
    2680/    2DE5 : A9 09                                               LDA #MENU_BG_LEFT#256
    2680/    2DE7 : 95 FB                                               STA call_offset,X
    2680/    2DE9 : A9 11                                               LDA #MENU_BG_TOP#256
    2680/    2DEB : 95 FC                                               STA call_offset,X
    2680/    2DED : A9 EE                                               LDA #MENU_BG_WIDTH#256
    2680/    2DEF : 95 FD                                               STA call_offset,X
    2680/    2DF1 : A9 66                                               LDA #MENU_BG_HEIGHT#256
    2680/    2DF3 : 95 FE                                               STA call_offset,X
    2680/    2DF5 : A9 20                                               LDA #COLOR_MENU_SKILLS#256
    2680/    2DF7 : 95 FF                                               STA call_offset,X
    2680/    2DF9 : 20 06 1B                    JSR DrawRect
    2681/    2DFC : A9 0B                                               LDA #MENU_SKILL_POINTS_LEFT#256
    2681/    2DFE : 8D 64 02                                            STA draw_X
    2682/    2E01 : 80 0A                                                       BRA str_skip
    2682/    2E03 : 50 6F 69 6E 74 73                                           FCB "Points: $",0
    2682/    2E0D : A9 03                                               LDA #str_addr#256
    2682/    2E0F : 95 F4                                               STA call_offset,X
    2682/    2E11 : A9 2E                                               LDA #str_addr>>8
    2682/    2E13 : 95 F5                                               STA call_offset+1,X
    2682/    2E15 : AD 20 02                                    LDA hero_Points
    2682/    2E18 : 95 F6                                       STA call_offset,X
    2682/    2E1A : 74 F7                                               STZ call_offset,X
    2682/    2E1C : A9 14                                               LDA #MENU_SKILL_POINTS_TOP#256
    2682/    2E1E : 95 F8                                               STA call_offset,X
    2682/    2E20 : A9 3F                                               LDA #COLOR_WHITE#256
    2682/    2E22 : 95 F9                                               STA call_offset,X
    2682/    2E24 : A9 20                                               LDA #COLOR_MENU_SKILLS#256
    2682/    2E26 : 95 FA                                               STA call_offset,X
    2682/    2E28 : 20 55 1B                    JSR DrawText
    2683/    2E2B : 20 08 29                    JSR DrawSkills
    2685/    2E2E : 4C DE 2E                    JMP s{ts}done
    2685/    2E31 : C9 03                               CMP #OUTPUT_RESOURCES
    2685/    2E33 : F0 03                       BEQ skip
    2685/    2E35 : 4C DE 2E                            JMP s{ts}c{tc}
    2685/    2E38 :                             skip:
    2686/    2E38 : A9 09                                               LDA #MENU_BG_LEFT#256
    2686/    2E3A : 95 FB                                               STA call_offset,X
    2686/    2E3C : A9 11                                               LDA #MENU_BG_TOP#256
    2686/    2E3E : 95 FC                                               STA call_offset,X
    2686/    2E40 : A9 EE                                               LDA #MENU_BG_WIDTH#256
    2686/    2E42 : 95 FD                                               STA call_offset,X
    2686/    2E44 : A9 66                                               LDA #MENU_BG_HEIGHT#256
    2686/    2E46 : 95 FE                                               STA call_offset,X
    2686/    2E48 : A9 02                                               LDA #COLOR_MENU_RESOURCES#256
    2686/    2E4A : 95 FF                                               STA call_offset,X
    2686/    2E4C : 20 06 1B                    JSR DrawRect
    2687/    2E4F : A9 98                                               LDA #MENU_RES_MONEY_LEFT#256
    2687/    2E51 : 95 FB                                               STA call_offset,X
    2687/    2E53 : A9 13                                               LDA #MENU_RES_MONEY_TOP#256
    2687/    2E55 : 95 FC                                               STA call_offset,X
    2687/    2E57 : A9 5C                                               LDA #MENU_RES_MONEY_WIDTH#256
    2687/    2E59 : 95 FD                                               STA call_offset,X
    2687/    2E5B : A9 0A                                               LDA #MENU_RES_MONEY_HEIGHT#256
    2687/    2E5D : 95 FE                                               STA call_offset,X
    2687/    2E5F : A9 00                                               LDA #COLOR_BLACK#256
    2687/    2E61 : 95 FF                                               STA call_offset,X
    2687/    2E63 : 20 06 1B                    JSR DrawRect
    2688/    2E66 : A9 AB                                               LDA #MENU_RES_MONEY_RED_LEFT#256
    2688/    2E68 : 8D 64 02                                            STA draw_X
    2689/    2E6B : 80 02                                                       BRA str_skip
    2689/    2E6D : 24 00                                                       FCB "$",0
    2689/    2E6F : A9 6D                                               LDA #str_addr#256
    2689/    2E71 : 95 F4                                               STA call_offset,X
    2689/    2E73 : A9 2E                                               LDA #str_addr>>8
    2689/    2E75 : 95 F5                                               STA call_offset+1,X
    2689/    2E77 : AD 1D 02                                    LDA hero_Red
    2689/    2E7A : 95 F6                                       STA call_offset,X
    2689/    2E7C : 74 F7                                               STZ call_offset,X
    2689/    2E7E : A9 15                                               LDA #MENU_RES_MONEY_VAL_TOP#256
    2689/    2E80 : 95 F8                                               STA call_offset,X
    2689/    2E82 : A9 17                                               LDA #COLOR_CRYSTAL_RED1#256
    2689/    2E84 : 95 F9                                               STA call_offset,X
    2689/    2E86 : A9 00                                               LDA #COLOR_BLACK#256
    2689/    2E88 : 95 FA                                               STA call_offset,X
    2689/    2E8A : 20 55 1B                    JSR DrawText
    2690/    2E8D : A9 C3                                               LDA #MENU_RES_MONEY_BLUE_LEFT#256
    2690/    2E8F : 8D 64 02                                            STA draw_X
    2691/    2E92 : 80 02                                                       BRA str_skip
    2691/    2E94 : 24 00                                                       FCB "$",0
    2691/    2E96 : A9 94                                               LDA #str_addr#256
    2691/    2E98 : 95 F4                                               STA call_offset,X
    2691/    2E9A : A9 2E                                               LDA #str_addr>>8
    2691/    2E9C : 95 F5                                               STA call_offset+1,X
    2691/    2E9E : AD 1E 02                                    LDA hero_Blue
    2691/    2EA1 : 95 F6                                       STA call_offset,X
    2691/    2EA3 : 74 F7                                               STZ call_offset,X
    2691/    2EA5 : A9 15                                               LDA #MENU_RES_MONEY_VAL_TOP#256
    2691/    2EA7 : 95 F8                                               STA call_offset,X
    2691/    2EA9 : A9 35                                               LDA #COLOR_CRYSTAL_BLUE1#256
    2691/    2EAB : 95 F9                                               STA call_offset,X
    2691/    2EAD : A9 00                                               LDA #COLOR_BLACK#256
    2691/    2EAF : 95 FA                                               STA call_offset,X
    2691/    2EB1 : 20 55 1B                    JSR DrawText
    2692/    2EB4 : A9 DB                                               LDA #MENU_RES_MONEY_YELLOW_LEFT#256
    2692/    2EB6 : 8D 64 02                                            STA draw_X
    2693/    2EB9 : 80 02                                                       BRA str_skip
    2693/    2EBB : 24 00                                                       FCB "$",0
    2693/    2EBD : A9 BB                                               LDA #str_addr#256
    2693/    2EBF : 95 F4                                               STA call_offset,X
    2693/    2EC1 : A9 2E                                               LDA #str_addr>>8
    2693/    2EC3 : 95 F5                                               STA call_offset+1,X
    2693/    2EC5 : AD 1F 02                                    LDA hero_Yellow
    2693/    2EC8 : 95 F6                                       STA call_offset,X
    2693/    2ECA : 74 F7                                               STZ call_offset,X
    2693/    2ECC : A9 15                                               LDA #MENU_RES_MONEY_VAL_TOP#256
    2693/    2ECE : 95 F8                                               STA call_offset,X
    2693/    2ED0 : A9 1F                                               LDA #COLOR_CRYSTAL_YELLOW1#256
    2693/    2ED2 : 95 F9                                               STA call_offset,X
    2693/    2ED4 : A9 00                                               LDA #COLOR_BLACK#256
    2693/    2ED6 : 95 FA                                               STA call_offset,X
    2693/    2ED8 : 20 55 1B                    JSR DrawText
    2695/    2EDB : 20 FB 2A                    JSR DrawResources
    2698/    2EDE : FA                                  PLX
    2698/    2EDF : 60                          RTS
    2702/    2EE0 :                             CheckHP:
    2704/    2EE0 :                     temp:
    2705/    2EE0 : DA                                  PHX
    2705/    2EE1 : CA                                                  DEX
    2705/    2EE2 : CA                                                  DEX
    2707/    2EE3 : AD 05 02            		LDA hero_HP+1
    2708/    2EE6 : 30 07               		BMI chp.dead
    2709/    2EE8 : 0D 04 02            		ORA hero_HP
    2710/    2EEB : F0 02               		BEQ chp.dead
    2711/    2EED : 80 51               		BRA chp.alive
    2713/    2EEF : 9C 04 02                                            STZ hero_HP
    2713/    2EF2 : 9C 05 02                                            STZ hero_HP+1
    2714/    2EF5 : 20 32 21                    JSR DrawFrame
    2715/    2EF8 : 20 6B 1D                    JSR DrawLegend
    2716/    2EFB : A9 64                                               LDA #DEAD_LEFT#256
    2716/    2EFD : 95 FB                                               STA call_offset,X
    2716/    2EFF : A9 38                                               LDA #DEAD_TOP#256
    2716/    2F01 : 95 FC                                               STA call_offset,X
    2716/    2F03 : A9 36                                               LDA #DEAD_WIDTH#256
    2716/    2F05 : 95 FD                                               STA call_offset,X
    2716/    2F07 : A9 10                                               LDA #DEAD_HEIGHT#256
    2716/    2F09 : 95 FE                                               STA call_offset,X
    2716/    2F0B : A9 00                                               LDA #COLOR_BLACK#256
    2716/    2F0D : 95 FF                                               STA call_offset,X
    2716/    2F0F : 20 06 1B                    JSR DrawRect
    2717/    2F12 : A9 68                                               LDA #DEAD_MSG_LEFT#256
    2717/    2F14 : 8D 64 02                                            STA draw_X
    2718/    2F17 : 80 09                                                       BRA str_skip
    2718/    2F19 : 59 6F 75 20 64 69                                           FCB "You died",0
    2718/    2F22 : A9 19                                               LDA #str_addr#256
    2718/    2F24 : 95 F4                                               STA call_offset,X
    2718/    2F26 : A9 2F                                               LDA #str_addr>>8
    2718/    2F28 : 95 F5                                               STA call_offset+1,X
    2718/    2F2A : 74 F6                                               STZ call_offset,X
    2718/    2F2C : 74 F7                                               STZ call_offset,X
    2718/    2F2E : A9 3C                                               LDA #DEAD_MSG_TOP#256
    2718/    2F30 : 95 F8                                               STA call_offset,X
    2718/    2F32 : A9 3F                                               LDA #COLOR_WHITE#256
    2718/    2F34 : 95 F9                                               STA call_offset,X
    2718/    2F36 : A9 00                                               LDA #COLOR_BLACK#256
    2718/    2F38 : 95 FA                                               STA call_offset,X
    2718/    2F3A : 20 55 1B                    JSR DrawText
    2719/    2F3D : 4C 3D 2F            			JMP *
    2721/    2F40 : AD 06 02            		LDA hero_HP_Max
    2722/    2F43 : CD 04 02            		CMP hero_HP
    2723/    2F46 : 90 03                       BCC skip
    2723/    2F48 : 4C 57 2F                            JMP if{temp}
    2723/    2F4B :                             skip:
    2724/    2F4B : AD 06 02                                    LDA hero_HP_Max
    2724/    2F4E : 8D 04 02                                    STA hero_HP
    2724/    2F51 : AD 07 02                                    LDA hero_HP_Max+1
    2724/    2F54 : 8D 05 02                                    STA hero_HP+1
    2727/    2F57 : FA                                  PLX
    2727/    2F58 : 60                          RTS
    2729/    2F59 :                             CheckLavaExit:
    2731/    2F59 :                     mX:
    2731/    2F59 :                     mY:
    2732/    2F59 : DA                                  PHX
    2732/    2F5A : CA                                                  DEX
    2732/    2F5B : CA                                                  DEX
    2734/    2F5C : AD 00 02            		LDA display_X
    2735/    2F5F : 18                  		CLC
    2736/    2F60 : 6D 02 02            		ADC hero_X
    2737/    2F63 : 95 00               		STA mX,X
    2738/    2F65 : AD 01 02            		LDA display_Y
    2739/    2F68 : 18                  		CLC
    2740/    2F69 : 6D 03 02            		ADC hero_Y
    2741/    2F6C : 95 01               		STA mY,X
    2743/    2F6E : A9 7E                                               LDA #map_data#256
    2743/    2F70 : 95 FC                                               STA call_offset,X
    2743/    2F72 : A9 03                                               LDA #map_data>>8
    2743/    2F74 : 95 FD                                               STA call_offset+1,X
    2743/    2F76 : B5 00                                       LDA mX,X
    2743/    2F78 : 95 FE                                       STA call_offset,X
    2743/    2F7A : B5 01                                       LDA mY,X
    2743/    2F7C : 95 FF                                       STA call_offset,X
    2743/    2F7E : 20 A1 16                    JSR MapXY
    2744/    2F81 : A5 12                                       LDA ret_val
    2744/    2F83 : 80 03                       BRA s{ts}c{tc}
    2745/    2F85 : 4C C7 2F                    JMP s{ts}done
    2745/    2F88 : C9 05                               CMP #MAP_LAVA
    2745/    2F8A : F0 03                       BEQ skip
    2745/    2F8C : 4C AE 2F                            JMP s{ts}c{tc}
    2745/    2F8F :                             skip:
    2754/    2F8F : AD 04 02                                    LDA hero_HP
    2754/    2F92 : 38                                          SEC
    2754/    2F93 : ED 15 02                                    SBC hero_Lava_Dmg
    2754/    2F96 : 8D 04 02                                    STA hero_HP
    2754/    2F99 : AD 05 02                                    LDA hero_HP+1
    2754/    2F9C : ED 16 02                                    SBC hero_Lava_Dmg+1
    2754/    2F9F : 8D 05 02                                    STA hero_HP+1
    2755/    2FA2 : 20 E0 2E                    JSR CheckHP
    2756/    2FA5 : A9 FF                                               LDA #true#256
    2756/    2FA7 : 85 12                                               STA ret_val
    2757/    2FA9 : 80 20               				BRA cle.done
    2758/    2FAB : 4C C7 2F                    JMP s{ts}done
    2758/    2FAE : C9 06                               CMP #MAP_EXIT
    2758/    2FB0 : F0 03                       BEQ skip
    2758/    2FB2 : 4C C7 2F                            JMP s{ts}c{tc}
    2758/    2FB5 :                             skip:
    2759/    2FB5 : 20 CB 16                    JSR MakeMap
    2760/    2FB8 : 20 20 18                    JSR LoadMonsters
    2761/    2FBB : 20 E5 18                    JSR LoadCrystals
    2762/    2FBE : 20 4C 3D                    JSR ResetGame
    2763/    2FC1 : A9 FF                                               LDA #true#256
    2763/    2FC3 : 85 12                                               STA ret_val
    2764/    2FC5 : 80 04               				BRA cle.done
    2766/    2FC7 : A9 00                                               LDA #false#256
    2766/    2FC9 : 85 12                                               STA ret_val
    2768/    2FCB : FA                                  PLX
    2768/    2FCC : 60                          RTS
    2770/    2FCD :                             AddExp:
    2772/    2FCD :                     exp:
    2773/    2FCD : DA                                  PHX
    2773/    2FCE : CA                                                  DEX
    2775/    2FCF : AD 1A 02            		LDA hero_Exp
    2776/    2FD2 : 18                  		CLC
    2777/    2FD3 : 75 00               		ADC exp,X
    2778/    2FD5 : 8D 1A 02            		STA hero_Exp
    2779/    2FD8 : CD 1B 02            		CMP hero_Exp_Max
    2780/    2FDB : B0 03                       BCS skip
    2780/    2FDD : 4C 57 30                            JMP if{temp}
    2780/    2FE0 :                             skip:
    2781/    2FE0 : AD 1A 02            			LDA hero_Exp
    2782/    2FE3 : 38                  			SEC
    2783/    2FE4 : ED 1B 02            			SBC hero_Exp_Max
    2784/    2FE7 : 8D 1A 02            			STA hero_Exp
    2785/    2FEA : AD 1B 02            			LDA hero_Exp_Max
    2786/    2FED : 18                  			CLC
    2787/    2FEE : 69 0A               			ADC #10
    2788/    2FF0 : 8D 1B 02            			STA hero_Exp_Max
    2789/    2FF3 : EE 1C 02            			INC hero_Level
    2790/    2FF6 : EE 20 02            			INC hero_Points
    2791/    2FF9 : AD 06 02                                    LDA hero_HP_Max
    2791/    2FFC : 8D 04 02                                    STA hero_HP
    2791/    2FFF : AD 07 02                                    LDA hero_HP_Max+1
    2791/    3002 : 8D 05 02                                    STA hero_HP+1
    2792/    3005 : AD 0B 02                                    LDA hero_Batt_Max
    2792/    3008 : 8D 0A 02                                    STA hero_Batt
    2794/    300B : AD 59 02            			LDA skill_list+Wise_Rewards
    2795/    300E : D0 03                       BNE skip
    2795/    3010 : 4C 57 30                            JMP if{temp}
    2795/    3013 :                             skip:
    2796/    3013 : A9 03                                               LDA #3#256
    2796/    3015 : 95 FD                                               STA call_offset,X
    2796/    3017 : 20 0A 13                    JSR rand8
    2797/    301A : A5 12                                       LDA ret_val
    2797/    301C : 80 03                       BRA s{ts}c{tc}
    2798/    301E : 4C 57 30                    JMP s{ts}done
    2798/    3021 : C9 00                               CMP #0
    2798/    3023 : F0 03                       BEQ skip
    2798/    3025 : 4C 34 30                            JMP s{ts}c{tc}
    2798/    3028 :                             skip:
    2799/    3028 : AD 1E 02            						LDA hero_Blue
    2800/    302B : 18                  						CLC
    2801/    302C : 69 05               						ADC #5
    2802/    302E : 8D 1E 02            						STA hero_Blue
    2803/    3031 : 4C 57 30                    JMP s{ts}done
    2803/    3034 : C9 01                               CMP #1
    2803/    3036 : F0 03                       BEQ skip
    2803/    3038 : 4C 47 30                            JMP s{ts}c{tc}
    2803/    303B :                             skip:
    2804/    303B : AD 1D 02            						LDA hero_Red
    2805/    303E : 18                  						CLC
    2806/    303F : 69 05               						ADC #5
    2807/    3041 : 8D 1D 02            						STA hero_Red
    2808/    3044 : 4C 57 30                    JMP s{ts}done
    2808/    3047 : C9 02                               CMP #2
    2808/    3049 : F0 03                       BEQ skip
    2808/    304B : 4C 57 30                            JMP s{ts}c{tc}
    2808/    304E :                             skip:
    2809/    304E : AD 1F 02            						LDA hero_Yellow
    2810/    3051 : 18                  						CLC
    2811/    3052 : 69 05               						ADC #5
    2812/    3054 : 8D 1F 02            						STA hero_Yellow
    2817/    3057 : FA                                  PLX
    2817/    3058 : 60                          RTS
    2819/    3059 :                             TickHandler:
    2821/    3059 :                     redraw:
    2821/    3059 :                     index5:
    2823/    3059 : DA                                  PHX
    2823/    305A : 8A                                          TXA                             ;2
    2823/    305B : 38                                          SEC                             ;2
    2823/    305C : E9 06                                       SBC #xcounter   ;2
    2823/    305E : AA                                          TAX                             ;2
    2823/    305F : 86 11                                       STX saveX
    2823/    3061 : A2 02                                       LDX #zpcounter
    2823/    3063 : B5 03                                               LDA ZP_locals-1,X
    2823/    3065 : 48                                                  PHA
    2823/    3066 : CA                                                  DEX
    2823/    3067 : D0 FA                                       BNE ZP_push
    2823/    3069 : A6 11                                       LDX saveX
    2824/    306B : A9 00                                               LDA #false#256
    2824/    306D : 95 00                                               STA redraw,X
    2825/    306F : AD 04 02                                    LDA hero_HP
    2825/    3072 : 95 01                                       STA original_hp,X
    2826/    3074 : AD 0A 02                                    LDA hero_Batt
    2826/    3077 : 95 02                                       STA original_batt,X
    2828/    3079 : AD 14 02                            LDA hero_HP_Recharge
    2828/    307C : 18                          CLC
    2828/    307D : 6D 04 02                            ADC hero_HP
    2828/    3080 : 8D 04 02                            STA hero_HP
    2828/    3083 : 90 03                               BCC .no_carry
    2828/    3085 : EE 05 02                                    INC hero_HP+1
    2829/    3088 : AD 12 02                            LDA hero_Batt_Recharge
    2829/    308B : 18                          CLC
    2829/    308C : 6D 0A 02                            ADC hero_Batt
    2829/    308F : 8D 0A 02                            STA hero_Batt
    2829/    3092 : 90 03                               BCC .no_carry
    2829/    3094 : EE 0B 02                                    INC hero_Batt+1
    2830/    3097 : AD 26 02            		LDA hero_activity
    2831/    309A : D0 03                       BNE skip
    2831/    309C : 4C 60 33                            JMP if{temp}
    2831/    309F :                             skip:
    2833/    309F : AD 23 02                                    LDA hero_target_type
    2833/    30A2 : 80 03                       BRA s{ts}c{tc}
    2834/    30A4 : 4C 60 33                    JMP s{ts}done
    2834/    30A7 : C9 04                               CMP #target_crystal
    2834/    30A9 : F0 03                       BEQ skip
    2834/    30AB : 4C 7D 31                            JMP s{ts}c{tc}
    2834/    30AE :                             skip:
    2835/    30AE : AD 0A 02            					LDA hero_Batt
    2836/    30B1 : CD 18 02            					CMP hero_Mine_Cost
    2837/    30B4 : B0 03                       BCS skip
    2837/    30B6 : 4C 7A 31                            JMP if{temp}
    2837/    30B9 :                             skip:
    2838/    30B9 : AD 4E 02            						LDA skill_list+Battery_Saver
    2839/    30BC : F0 0B               						BEQ th.batt_saver
    2840/    30BE : A9 05                                               LDA #5#256
    2840/    30C0 : 95 FD                                               STA call_offset,X
    2840/    30C2 : 20 0A 13                    JSR rand8
    2841/    30C5 : A5 12               						LDA ret_val
    2842/    30C7 : F0 0A               						BEQ th.batt_saver_done
    2844/    30C9 : AD 0A 02            							LDA hero_Batt
    2845/    30CC : 38                  							SEC
    2846/    30CD : ED 18 02            							SBC hero_Mine_Cost
    2847/    30D0 : 8D 0A 02            							STA hero_Batt
    2850/    30D3 : EE 27 02            						INC hero_activity_ticks
    2851/    30D6 : A9 FF                                               LDA #true#256
    2851/    30D8 : 95 00                                               STA redraw,X
    2852/    30DA : AD 27 02            						LDA hero_activity_ticks
    2853/    30DD : CD 29 02            						CMP hero_activity_ticks_max
    2854/    30E0 : F0 03                       BEQ skip
    2854/    30E2 : 4C 7A 31                            JMP if{temp}
    2854/    30E5 :                             skip:
    2856/    30E5 : AD 24 02            							LDA hero_target_index
    2858/    30E8 : 0A                  							ASL
    2859/    30E9 : 0A                  							ASL
    2860/    30EA : 18                  							CLC
    2861/    30EB : 95 05               							STA index5,X
    2862/    30ED : 69 03               							ADC #CRYSTAL_COLOR
    2863/    30EF : A8                  							TAY
    2864/    30F0 : B9 DE 02            							LDA crystal_list,Y
    2865/    30F3 : 80 03                       BRA s{ts}c{tc}
    2866/    30F5 : 4C 1C 31                    JMP s{ts}done
    2866/    30F8 : C9 00                               CMP #CRYSTAL_RED_TYPE
    2866/    30FA : F0 03                       BEQ skip
    2866/    30FC : 4C 05 31                            JMP s{ts}c{tc}
    2866/    30FF :                             skip:
    2867/    30FF : EE 1D 02            									INC hero_Red
    2868/    3102 : 4C 1C 31                    JMP s{ts}done
    2868/    3105 : C9 01                               CMP #CRYSTAL_BLUE_TYPE
    2868/    3107 : F0 03                       BEQ skip
    2868/    3109 : 4C 12 31                            JMP s{ts}c{tc}
    2868/    310C :                             skip:
    2869/    310C : EE 1E 02            									INC hero_Blue
    2870/    310F : 4C 1C 31                    JMP s{ts}done
    2870/    3112 : C9 02                               CMP #CRYSTAL_YELLOW_TYPE
    2870/    3114 : F0 03                       BEQ skip
    2870/    3116 : 4C 1C 31                            JMP s{ts}c{tc}
    2870/    3119 :                             skip:
    2871/    3119 : EE 1F 02            									INC hero_Yellow
    2873/    311C : AD 52 02            							LDA skill_list+Master_Miner
    2874/    311F : D0 03                       BNE skip
    2874/    3121 : 4C 57 31                            JMP if{temp}
    2874/    3124 :                             skip:
    2875/    3124 : B9 DE 02            								LDA crystal_list,Y
    2876/    3127 : 80 03                       BRA s{ts}c{tc}
    2877/    3129 : 4C 50 31                    JMP s{ts}done
    2877/    312C : C9 00                               CMP #CRYSTAL_RED_TYPE
    2877/    312E : F0 03                       BEQ skip
    2877/    3130 : 4C 39 31                            JMP s{ts}c{tc}
    2877/    3133 :                             skip:
    2878/    3133 : EE 1D 02            										INC hero_Red
    2879/    3136 : 4C 50 31                    JMP s{ts}done
    2879/    3139 : C9 01                               CMP #CRYSTAL_BLUE_TYPE
    2879/    313B : F0 03                       BEQ skip
    2879/    313D : 4C 46 31                            JMP s{ts}c{tc}
    2879/    3140 :                             skip:
    2880/    3140 : EE 1E 02            										INC hero_Blue
    2881/    3143 : 4C 50 31                    JMP s{ts}done
    2881/    3146 : C9 02                               CMP #CRYSTAL_YELLOW_TYPE
    2881/    3148 : F0 03                       BEQ skip
    2881/    314A : 4C 50 31                            JMP s{ts}c{tc}
    2881/    314D :                             skip:
    2882/    314D : EE 1F 02            										INC hero_Yellow
    2884/    3150 : A9 02                                               LDA #2#256
    2884/    3152 : 95 FF                                               STA call_offset,X
    2884/    3154 : 20 CD 2F                    JSR AddExp
    2886/    3157 : B5 05               							LDA index5,X
    2887/    3159 : 18                  							CLC
    2888/    315A : 69 02               							ADC #CRYSTAL_ACTIVE
    2889/    315C : A8                  							TAY
    2890/    315D : A9 00               							LDA #false
    2891/    315F : 99 DE 02            							STA crystal_list,Y
    2892/    3162 : A9 02                                               LDA #2#256
    2892/    3164 : 95 FF                                               STA call_offset,X
    2892/    3166 : 20 CD 2F                    JSR AddExp
    2893/    3169 : A9 00                                               LDA #target_none#256
    2893/    316B : 8D 23 02                                            STA hero_target_type
    2894/    316E : A9 00                                               LDA #false#256
    2894/    3170 : 8D 26 02                                            STA hero_activity
    2895/    3173 : 20 32 21                    JSR DrawFrame
    2896/    3176 : A9 FF                                               LDA #true#256
    2896/    3178 : 95 00                                               STA redraw,X
    2899/    317A : 4C 60 33                    JMP s{ts}done
    2899/    317D : C9 01                               CMP #target_rock
    2899/    317F : F0 03                       BEQ skip
    2899/    3181 : 4C 2E 32                            JMP s{ts}c{tc}
    2899/    3184 :                             skip:
    2900/    3184 : AD 0A 02            					LDA hero_Batt
    2901/    3187 : CD 19 02            					CMP hero_Drill_Cost
    2902/    318A : B0 03                       BCS skip
    2902/    318C : 4C 2B 32                            JMP if{temp}
    2902/    318F :                             skip:
    2903/    318F : AD 0A 02            						LDA hero_Batt
    2904/    3192 : 38                  						SEC
    2905/    3193 : ED 19 02            						SBC hero_Drill_Cost
    2906/    3196 : 8D 0A 02            						STA hero_Batt
    2907/    3199 : EE 27 02            						INC hero_activity_ticks
    2908/    319C : A9 FF                                               LDA #true#256
    2908/    319E : 95 00                                               STA redraw,X
    2909/    31A0 : AD 27 02            						LDA hero_activity_ticks
    2910/    31A3 : CD 29 02            						CMP hero_activity_ticks_max
    2911/    31A6 : F0 03                       BEQ skip
    2911/    31A8 : 4C 2B 32                            JMP if{temp}
    2911/    31AB :                             skip:
    2912/    31AB : A9 7E                                               LDA #map_data#256
    2912/    31AD : 95 FC                                               STA call_offset,X
    2912/    31AF : A9 03                                               LDA #map_data>>8
    2912/    31B1 : 95 FD                                               STA call_offset+1,X
    2912/    31B3 : AD 24 02                                    LDA hero_target_index
    2912/    31B6 : 95 FE                                       STA call_offset,X
    2912/    31B8 : AD 25 02                                    LDA hero_target_index2
    2912/    31BB : 95 FF                                       STA call_offset,X
    2912/    31BD : 20 72 16                    JSR OffsetXY
    2913/    31C0 : A9 00               							LDA #MAP_BLANK
    2914/    31C2 : 92 12               							STA (ret_val)
    2915/    31C4 : A9 01                                               LDA #1#256
    2915/    31C6 : 95 FF                                               STA call_offset,X
    2915/    31C8 : 20 CD 2F                    JSR AddExp
    2916/    31CB : A9 00                                               LDA #target_none#256
    2916/    31CD : 8D 23 02                                            STA hero_target_type
    2917/    31D0 : A9 00                                               LDA #false#256
    2917/    31D2 : 8D 26 02                                            STA hero_activity
    2918/    31D5 : AD 51 02            							LDA skill_list+Lucky_Driller
    2919/    31D8 : D0 03                       BNE skip
    2919/    31DA : 4C 24 32                            JMP if{temp}
    2919/    31DD :                             skip:
    2920/    31DD : A9 04                                               LDA #4#256
    2920/    31DF : 95 FD                                               STA call_offset,X
    2920/    31E1 : 20 0A 13                    JSR rand8
    2921/    31E4 : A5 12               								LDA ret_val
    2922/    31E6 : F0 03                       BEQ skip
    2922/    31E8 : 4C 24 32                            JMP if{temp}
    2922/    31EB :                             skip:
    2923/    31EB : A9 03                                               LDA #3#256
    2923/    31ED : 95 FD                                               STA call_offset,X
    2923/    31EF : 20 0A 13                    JSR rand8
    2924/    31F2 : A5 12                                       LDA ret_val
    2924/    31F4 : 80 03                       BRA s{ts}c{tc}
    2925/    31F6 : 4C 1D 32                    JMP s{ts}done
    2925/    31F9 : C9 00                               CMP #0
    2925/    31FB : F0 03                       BEQ skip
    2925/    31FD : 4C 06 32                            JMP s{ts}c{tc}
    2925/    3200 :                             skip:
    2926/    3200 : EE 1D 02            											INC hero_Red
    2927/    3203 : 4C 1D 32                    JMP s{ts}done
    2927/    3206 : C9 01                               CMP #1
    2927/    3208 : F0 03                       BEQ skip
    2927/    320A : 4C 13 32                            JMP s{ts}c{tc}
    2927/    320D :                             skip:
    2928/    320D : EE 1E 02            											INC hero_Blue
    2929/    3210 : 4C 1D 32                    JMP s{ts}done
    2929/    3213 : C9 02                               CMP #2
    2929/    3215 : F0 03                       BEQ skip
    2929/    3217 : 4C 1D 32                            JMP s{ts}c{tc}
    2929/    321A :                             skip:
    2930/    321A : EE 1F 02            											INC hero_Yellow
    2932/    321D : A9 02                                               LDA #2#256
    2932/    321F : 95 FF                                               STA call_offset,X
    2932/    3221 : 20 CD 2F                    JSR AddExp
    2935/    3224 : 20 32 21                    JSR DrawFrame
    2936/    3227 : A9 FF                                               LDA #true#256
    2936/    3229 : 95 00                                               STA redraw,X
    2939/    322B : 4C 60 33                    JMP s{ts}done
    2939/    322E : C9 03                               CMP #target_monster
    2939/    3230 : F0 03                       BEQ skip
    2939/    3232 : 4C 60 33                            JMP s{ts}c{tc}
    2939/    3235 :                             skip:
    2940/    3235 : AD 0A 02            					LDA hero_Batt
    2941/    3238 : CD 17 02            					CMP hero_Dmg_Cost
    2942/    323B : B0 03                       BCS skip
    2942/    323D : 4C 48 33                            JMP if{temp}
    2942/    3240 :                             skip:
    2943/    3240 : AD 0A 02            						LDA hero_Batt
    2944/    3243 : 38                  						SEC
    2945/    3244 : ED 17 02            						SBC hero_Dmg_Cost
    2946/    3247 : 8D 0A 02            						STA hero_Batt
    2947/    324A : AD 56 02            						LDA skill_list+Instakill
    2948/    324D : D0 03                       BNE skip
    2948/    324F : 4C 63 32                            JMP if{temp}
    2948/    3252 :                             skip:
    2949/    3252 : A9 14                                               LDA #20#256
    2949/    3254 : 95 FD                                               STA call_offset,X
    2949/    3256 : 20 0A 13                    JSR rand8
    2950/    3259 : A5 12               							LDA ret_val
    2951/    325B : F0 03                       BEQ skip
    2951/    325D : 4C 63 32                            JMP if{temp}
    2951/    3260 :                             skip:
    2952/    3260 : 9C 27 02                                            STZ hero_activity_ticks
    2955/    3263 : AD 27 02            						LDA hero_activity_ticks
    2956/    3266 : D0 03                       BNE skip
    2956/    3268 : 4C B9 32                            JMP if{temp}
    2956/    326B :                             skip:
    2957/    326B : AD 27 02                            LDA hero_activity_ticks
    2957/    326E : 38                          SEC
    2957/    326F : ED 0D 02                            SBC hero_Dmg
    2957/    3272 : 8D 27 02                            STA hero_activity_ticks
    2957/    3275 : B0 03                               BCS .no_carry
    2957/    3277 : CE 28 02                                    DEC hero_activity_ticks+1
    2958/    327A : A9 64                                               LDA #100#256
    2958/    327C : 95 FD                                               STA call_offset,X
    2958/    327E : 20 0A 13                    JSR rand8
    2959/    3281 : A5 12               							LDA ret_val
    2960/    3283 : CD 13 02            							CMP hero_Crit_Rate
    2961/    3286 : 90 03                       BCC skip
    2961/    3288 : 4C B9 32                            JMP if{temp}
    2961/    328B :                             skip:
    2962/    328B : AD 54 02            								LDA skill_list+Crit_Lord
    2963/    328E : D0 03                       BNE skip
    2963/    3290 : 4C A5 32                            JMP if{temp}
    2963/    3293 :                             skip:
    2964/    3293 : AD 27 02                            LDA hero_activity_ticks
    2964/    3296 : 38                          SEC
    2964/    3297 : ED 0D 02                            SBC hero_Dmg
    2964/    329A : 8D 27 02                            STA hero_activity_ticks
    2964/    329D : B0 03                               BCS .no_carry
    2964/    329F : CE 28 02                                    DEC hero_activity_ticks+1
    2965/    32A2 : 4C B9 32                    JMP if{temp2}
    2966/    32A5 : AD 0D 02            									LDA hero_Dmg
    2967/    32A8 : 4A                  									LSR
    2968/    32A9 : 95 04               									STA mult_buff,X
    2969/    32AB : AD 27 02                            LDA hero_activity_ticks
    2969/    32AE : 38                          SEC
    2969/    32AF : F5 04                               SBC mult_buff,X              
    2969/    32B1 : 8D 27 02                            STA hero_activity_ticks
    2969/    32B4 : B0 03                               BCS .no_carry
    2969/    32B6 : CE 28 02                                    DEC hero_activity_ticks+1
    2974/    32B9 : AD 28 02            						LDA hero_activity_ticks+1
    2975/    32BC : 30 08               						BMI th.mob_dead
    2977/    32BE : 0D 27 02            						ORA hero_activity_ticks
    2978/    32C1 : F0 03               						BEQ th.mob_dead
    2980/    32C3 : 4C 44 33            						JMP th.mob_done
    2982/    32C6 : AD 24 02            							LDA hero_target_index
    2983/    32C9 : 0A                  							ASL
    2984/    32CA : 18                  							CLC
    2985/    32CB : 6D 24 02            							ADC hero_target_index
    2986/    32CE : 69 02               							ADC #MONSTER_ALIVE
    2987/    32D0 : A8                  							TAY
    2988/    32D1 : A9 00               							LDA #false
    2989/    32D3 : 99 66 02            							STA monster_list,Y
    2990/    32D6 : AD 55 02            							LDA skill_list+Experienced
    2991/    32D9 : D0 03                       BNE skip
    2991/    32DB : 4C E8 32                            JMP if{temp}
    2991/    32DE :                             skip:
    2992/    32DE : A9 0B                                               LDA #11#256
    2992/    32E0 : 95 FF                                               STA call_offset,X
    2992/    32E2 : 20 CD 2F                    JSR AddExp
    2993/    32E5 : 4C EF 32                    JMP if{temp2}
    2994/    32E8 : A9 0A                                               LDA #10#256
    2994/    32EA : 95 FF                                               STA call_offset,X
    2994/    32EC : 20 CD 2F                    JSR AddExp
    2996/    32EF : A9 00                                               LDA #target_none#256
    2996/    32F1 : 8D 23 02                                            STA hero_target_type
    2997/    32F4 : A9 00                                               LDA #false#256
    2997/    32F6 : 8D 26 02                                            STA hero_activity
    2998/    32F9 : AD 4F 02            							LDA skill_list+Bounty_Hunter
    2999/    32FC : D0 03                       BNE skip
    2999/    32FE : 4C 41 33                            JMP if{temp}
    2999/    3301 :                             skip:
    3000/    3301 : A9 0A                                               LDA #10#256
    3000/    3303 : 95 FD                                               STA call_offset,X
    3000/    3305 : 20 0A 13                    JSR rand8
    3001/    3308 : A5 12               								LDA ret_val
    3002/    330A : F0 03                       BEQ skip
    3002/    330C : 4C 41 33                            JMP if{temp}
    3002/    330F :                             skip:
    3003/    330F : A9 03                                               LDA #3#256
    3003/    3311 : 95 FD                                               STA call_offset,X
    3003/    3313 : 20 0A 13                    JSR rand8
    3004/    3316 : A5 12                                       LDA ret_val
    3004/    3318 : 80 03                       BRA s{ts}c{tc}
    3005/    331A : 4C 41 33                    JMP s{ts}done
    3005/    331D : C9 00                               CMP #0
    3005/    331F : F0 03                       BEQ skip
    3005/    3321 : 4C 2A 33                            JMP s{ts}c{tc}
    3005/    3324 :                             skip:
    3006/    3324 : EE 1D 02            											INC hero_Red
    3007/    3327 : 4C 41 33                    JMP s{ts}done
    3007/    332A : C9 01                               CMP #1
    3007/    332C : F0 03                       BEQ skip
    3007/    332E : 4C 37 33                            JMP s{ts}c{tc}
    3007/    3331 :                             skip:
    3008/    3331 : EE 1E 02            											INC hero_Blue
    3009/    3334 : 4C 41 33                    JMP s{ts}done
    3009/    3337 : C9 02                               CMP #2
    3009/    3339 : F0 03                       BEQ skip
    3009/    333B : 4C 41 33                            JMP s{ts}c{tc}
    3009/    333E :                             skip:
    3010/    333E : EE 1F 02            											INC hero_Yellow
    3014/    3341 : 20 32 21                    JSR DrawFrame
    3016/    3344 : A9 FF                                               LDA #true#256
    3016/    3346 : 95 00                                               STA redraw,X
    3020/    3348 : 20 4C 13                    JSR rand5050
    3021/    334B : A5 12               					LDA ret_val
    3022/    334D : D0 03                       BNE skip
    3022/    334F : 4C 60 33                            JMP if{temp}
    3022/    3352 :                             skip:
    3023/    3352 : AD 04 02                            LDA hero_HP
    3023/    3355 : 38                          SEC
    3023/    3356 : E9 02                               SBC #2
    3023/    3358 : 8D 04 02                            STA hero_HP
    3023/    335B : B0 03                               BCS .no_carry
    3023/    335D : CE 05 02                                    DEC hero_HP+1
    3028/    3360 : AD 0B 02            		LDA hero_Batt_Max
    3029/    3363 : CD 0A 02            		CMP hero_Batt
    3030/    3366 : 90 03                       BCC skip
    3030/    3368 : 4C 71 33                            JMP if{temp}
    3030/    336B :                             skip:
    3031/    336B : AD 0B 02                                    LDA hero_Batt_Max
    3031/    336E : 8D 0A 02                                    STA hero_Batt
    3033/    3371 : AD 0A 02            		LDA hero_Batt
    3034/    3374 : D5 02               		CMP original_batt,X
    3035/    3376 : D0 03                       BNE skip
    3035/    3378 : 4C 7F 33                            JMP if{temp}
    3035/    337B :                             skip:
    3036/    337B : A9 FF                                               LDA #true#256
    3036/    337D : 95 00                                               STA redraw,X
    3038/    337F : 20 E0 2E                    JSR CheckHP
    3039/    3382 : AD 04 02            		LDA hero_HP
    3040/    3385 : D5 01               		CMP original_hp,X
    3041/    3387 : D0 03                       BNE skip
    3041/    3389 : 4C 90 33                            JMP if{temp}
    3041/    338C :                             skip:
    3042/    338C : A9 FF                                               LDA #true#256
    3042/    338E : 95 00                                               STA redraw,X
    3044/    3390 : 20 59 2F                    JSR CheckLavaExit
    3045/    3393 : A5 12               		LDA ret_val
    3046/    3395 : D0 03                       BNE skip
    3046/    3397 : 4C 9E 33                            JMP if{temp}
    3046/    339A :                             skip:
    3047/    339A : A9 FF                                               LDA #true#256
    3047/    339C : 95 00                                               STA redraw,X
    3049/    339E : B5 00               		LDA redraw,X
    3050/    33A0 : D0 03                       BNE skip
    3050/    33A2 : 4C A8 33                            JMP if{temp}
    3050/    33A5 :                             skip:
    3051/    33A5 : 20 6B 1D                    JSR DrawLegend
    3053/    33A8 : 86 11                                       STX saveX
    3053/    33AA : A2 00                                       LDX #0
    3053/    33AC : 68                                                  PLA
    3053/    33AD : 95 04                                               STA ZP_locals,X
    3053/    33AF : E8                                                  INX
    3053/    33B0 : E0 02                                               CPX #zpcounter
    3053/    33B2 : D0 F8                                       BNE ZP_pull
    3053/    33B4 : A6 11                                       LDX saveX
    3053/    33B6 : FA                                  PLX
    3053/    33B7 : 60                          RTS
    3057/    33B8 :                             KeyHandlerGame:
    3059/    33B8 :                     key:
    3060/    33B8 :                     redraw:
    3060/    33B8 :                     mX:
    3060/    33B8 :                     mY:
    3060/    33B8 :                     moved:
    3061/    33B8 : DA                                  PHX
    3061/    33B9 : 8A                                          TXA                             ;2
    3061/    33BA : 38                                          SEC                             ;2
    3061/    33BB : E9 06                                       SBC #xcounter   ;2
    3061/    33BD : AA                                          TAX                             ;2
    3063/    33BE : AD E4 FF                                    LDA KB_INPUT
    3063/    33C1 : 95 00                                       STA key,X
    3064/    33C3 : B5 00                                       LDA key,X
    3064/    33C5 : 80 03                       BRA s{ts}c{tc}
    3065/    33C7 : 4C FC 33                    JMP s{ts}done
    3065/    33CA : C9 6D                               CMP #'m'
    3065/    33CC : F0 03                       BEQ skip
    3065/    33CE : 4C D3 33                            JMP s{ts}c{tc}
    3065/    33D1 :                             skip:
    3065/    33D1 : 80 06                               BRA s{ts}b{tb}
    3065/    33D3 : C9 63                                       CMP #'c'
    3065/    33D5 : D0 0A                               BNE s{ts}c{tc}
    3065/    33D7 : 80 00                               BRA s{ts}b{tb}
    3066/    33D9 : A9 01                                               LDA #OUTPUT_CHARACTER#256
    3066/    33DB : 8D 65 02                                            STA output_mode
    3067/    33DE : 4C FC 33                    JMP s{ts}done
    3067/    33E1 : C9 6B                               CMP #'k'
    3067/    33E3 : F0 03                       BEQ skip
    3067/    33E5 : 4C F0 33                            JMP s{ts}c{tc}
    3067/    33E8 :                             skip:
    3068/    33E8 : A9 02                                               LDA #OUTPUT_SKILLS#256
    3068/    33EA : 8D 65 02                                            STA output_mode
    3069/    33ED : 4C FC 33                    JMP s{ts}done
    3069/    33F0 : C9 72                               CMP #'r'
    3069/    33F2 : F0 03                       BEQ skip
    3069/    33F4 : 4C FC 33                            JMP s{ts}c{tc}
    3069/    33F7 :                             skip:
    3070/    33F7 : A9 03                                               LDA #OUTPUT_RESOURCES#256
    3070/    33F9 : 8D 65 02                                            STA output_mode
    3073/    33FC : AD 65 02            		LDA output_mode
    3074/    33FF : C9 00               		CMP #OUTPUT_GAME
    3075/    3401 : D0 03                       BNE skip
    3075/    3403 : 4C 0F 34                            JMP if{temp}
    3075/    3406 :                             skip:
    3076/    3406 : 20 3E 24                    JSR DrawMenuBorder
    3077/    3409 : 20 32 2D                    JSR DrawMenu
    3078/    340C : 4C A5 37                    JMP if{temp2}
    3079/    340F : A9 00                                               LDA #false#256
    3079/    3411 : 95 01                                               STA redraw,X
    3080/    3413 : A9 00                                               LDA #false#256
    3080/    3415 : 95 05                                               STA moved,X
    3081/    3417 : AD 26 02            			LDA hero_activity
    3082/    341A : F0 03                       BEQ skip
    3082/    341C : 4C 93 37                            JMP if{temp}
    3082/    341F :                             skip:
    3083/    341F : B5 00                                       LDA key,X
    3083/    3421 : 80 03                       BRA s{ts}c{tc}
    3084/    3423 : 4C 93 37                    JMP s{ts}done
    3084/    3426 : C9 77                               CMP #'w'
    3084/    3428 : F0 03                       BEQ skip
    3084/    342A : 4C D7 34                            JMP s{ts}c{tc}
    3084/    342D :                             skip:
    3085/    342D : AD 22 02            						LDA hero_target_direction
    3086/    3430 : C9 01               						CMP #DIRECTION_UP
    3087/    3432 : D0 03                       BNE skip
    3087/    3434 : 4C 43 34                            JMP if{temp}
    3087/    3437 :                             skip:
    3088/    3437 : A9 01                                               LDA #DIRECTION_UP#256
    3088/    3439 : 8D 22 02                                            STA hero_target_direction
    3089/    343C : A9 FF                                               LDA #true#256
    3089/    343E : 95 01                                               STA redraw,X
    3090/    3440 : 4C D4 34                    JMP if{temp2}
    3091/    3443 : AD 01 02            							LDA display_Y
    3092/    3446 : 18                  							CLC
    3093/    3447 : 6D 03 02            							ADC hero_Y
    3094/    344A : C9 01               							CMP #1
    3095/    344C : B0 03                       BCS skip
    3095/    344E : 4C D4 34                            JMP if{temp}
    3095/    3451 :                             skip:
    3096/    3451 : 3A                  								DEC
    3097/    3452 : 95 03               								STA mY,X
    3098/    3454 : AD 00 02            								LDA display_X
    3099/    3457 : 18                  								CLC
    3100/    3458 : 6D 02 02            								ADC hero_X
    3101/    345B : 95 02               								STA mX,X
    3102/    345D : A9 7E                                               LDA #map_data#256
    3102/    345F : 95 FC                                               STA call_offset,X
    3102/    3461 : A9 03                                               LDA #map_data>>8
    3102/    3463 : 95 FD                                               STA call_offset+1,X
    3102/    3465 : B5 02                                       LDA mX,X
    3102/    3467 : 95 FE                                       STA call_offset,X
    3102/    3469 : B5 03                                       LDA mY,X
    3102/    346B : 95 FF                                       STA call_offset,X
    3102/    346D : 20 A1 16                    JSR MapXY
    3103/    3470 : A5 12               								LDA ret_val
    3104/    3472 : C9 04               								CMP #MAP_ROCK
    3105/    3474 : D0 03                       BNE skip
    3105/    3476 : 4C D4 34                            JMP if{temp}
    3105/    3479 :                             skip:
    3106/    3479 : B5 02                                       LDA mX,X
    3106/    347B : 95 FE                                       STA call_offset,X
    3106/    347D : B5 03                                       LDA mY,X
    3106/    347F : 95 FF                                       STA call_offset,X
    3106/    3481 : 20 C1 17                    JSR CheckForMonster
    3107/    3484 : A5 12               									LDA ret_val
    3108/    3486 : 49 FF               									EOR #$FF
    3109/    3488 : 95 04               									STA or_buff,X
    3110/    348A : A0 09               									LDY #SKILL_GHOST
    3111/    348C : B9 4E 02            									LDA skill_list,Y
    3112/    348F : 15 04               									ORA or_buff,X
    3113/    3491 : D0 03                       BNE skip
    3113/    3493 : 4C CA 34                            JMP if{temp}
    3113/    3496 :                             skip:
    3114/    3496 : AD 03 02            										LDA hero_Y
    3115/    3499 : C9 02               										CMP #2
    3116/    349B : B0 03                       BCS skip
    3116/    349D : 4C AA 34                            JMP if{temp}
    3116/    34A0 :                             skip:
    3117/    34A0 : CE 03 02            											DEC hero_Y
    3118/    34A3 : A9 FF                                               LDA #true#256
    3118/    34A5 : 95 05                                               STA moved,X
    3119/    34A7 : 4C CA 34                    JMP if{temp2}
    3121/    34AA : C9 01               											CMP #1
    3122/    34AC : F0 03                       BEQ skip
    3122/    34AE : 4C CA 34                            JMP if{temp}
    3122/    34B1 :                             skip:
    3123/    34B1 : AD 01 02            												LDA display_Y
    3124/    34B4 : F0 03                       BEQ skip
    3124/    34B6 : 4C C3 34                            JMP if{temp}
    3124/    34B9 :                             skip:
    3125/    34B9 : 9C 03 02                                            STZ hero_Y
    3126/    34BC : A9 FF                                               LDA #true#256
    3126/    34BE : 95 05                                               STA moved,X
    3127/    34C0 : 4C CA 34                    JMP if{temp2}
    3128/    34C3 : CE 01 02            													DEC display_Y
    3129/    34C6 : A9 FF                                               LDA #true#256
    3129/    34C8 : 95 05                                               STA moved,X
    3134/    34CA : B5 05               									LDA moved,X
    3135/    34CC : D0 03                       BNE skip
    3135/    34CE : 4C D4 34                            JMP if{temp}
    3135/    34D1 :                             skip:
    3136/    34D1 : 20 59 2F                    JSR CheckLavaExit
    3141/    34D4 : 4C 93 37                    JMP s{ts}done
    3141/    34D7 : C9 73                               CMP #'s'
    3141/    34D9 : F0 03                       BEQ skip
    3141/    34DB : 4C 8B 35                            JMP s{ts}c{tc}
    3141/    34DE :                             skip:
    3142/    34DE : AD 22 02            						LDA hero_target_direction
    3143/    34E1 : C9 02               						CMP #DIRECTION_DOWN
    3144/    34E3 : D0 03                       BNE skip
    3144/    34E5 : 4C F4 34                            JMP if{temp}
    3144/    34E8 :                             skip:
    3145/    34E8 : A9 02                                               LDA #DIRECTION_DOWN#256
    3145/    34EA : 8D 22 02                                            STA hero_target_direction
    3146/    34ED : A9 01                                               LDA #1#256
    3146/    34EF : 95 01                                               STA redraw,X
    3147/    34F1 : 4C 88 35                    JMP if{temp2}
    3148/    34F4 : AD 01 02            							LDA display_Y
    3149/    34F7 : 38                  							SEC
    3150/    34F8 : 6D 03 02            							ADC hero_Y
    3151/    34FB : C9 14               							CMP #MAP_HEIGHT
    3152/    34FD : 90 03                       BCC skip
    3152/    34FF : 4C 88 35                            JMP if{temp}
    3152/    3502 :                             skip:
    3153/    3502 : 95 03               								STA mY,X
    3154/    3504 : AD 00 02            								LDA display_X
    3155/    3507 : 18                  								CLC
    3156/    3508 : 6D 02 02            								ADC hero_X
    3157/    350B : 95 02               								STA mX,X
    3158/    350D : A9 7E                                               LDA #map_data#256
    3158/    350F : 95 FC                                               STA call_offset,X
    3158/    3511 : A9 03                                               LDA #map_data>>8
    3158/    3513 : 95 FD                                               STA call_offset+1,X
    3158/    3515 : B5 02                                       LDA mX,X
    3158/    3517 : 95 FE                                       STA call_offset,X
    3158/    3519 : B5 03                                       LDA mY,X
    3158/    351B : 95 FF                                       STA call_offset,X
    3158/    351D : 20 A1 16                    JSR MapXY
    3159/    3520 : A5 12               								LDA ret_val
    3160/    3522 : C9 04               								CMP #MAP_ROCK
    3161/    3524 : D0 03                       BNE skip
    3161/    3526 : 4C 88 35                            JMP if{temp}
    3161/    3529 :                             skip:
    3162/    3529 : B5 02                                       LDA mX,X
    3162/    352B : 95 FE                                       STA call_offset,X
    3162/    352D : B5 03                                       LDA mY,X
    3162/    352F : 95 FF                                       STA call_offset,X
    3162/    3531 : 20 C1 17                    JSR CheckForMonster
    3163/    3534 : A5 12               									LDA ret_val
    3164/    3536 : 49 FF               									EOR #$FF
    3165/    3538 : 95 04               									STA or_buff,X
    3166/    353A : A0 09               									LDY #SKILL_GHOST
    3167/    353C : B9 4E 02            									LDA skill_list,Y
    3168/    353F : 15 04               									ORA or_buff,X
    3169/    3541 : D0 03                       BNE skip
    3169/    3543 : 4C 7E 35                            JMP if{temp}
    3169/    3546 :                             skip:
    3170/    3546 : AD 03 02            										LDA hero_Y
    3171/    3549 : C9 02               										CMP #FRAME_HEIGHT-2
    3172/    354B : 90 03                       BCC skip
    3172/    354D : 4C 5A 35                            JMP if{temp}
    3172/    3550 :                             skip:
    3173/    3550 : EE 03 02            											INC hero_Y
    3174/    3553 : A9 FF                                               LDA #true#256
    3174/    3555 : 95 05                                               STA moved,X
    3175/    3557 : 4C 7E 35                    JMP if{temp2}
    3177/    355A : C9 02               											CMP #FRAME_HEIGHT-2
    3178/    355C : F0 03                       BEQ skip
    3178/    355E : 4C 7E 35                            JMP if{temp}
    3178/    3561 :                             skip:
    3179/    3561 : AD 01 02            												LDA display_Y
    3180/    3564 : C9 10               												CMP #MAP_HEIGHT-FRAME_HEIGHT
    3181/    3566 : F0 03                       BEQ skip
    3181/    3568 : 4C 77 35                            JMP if{temp}
    3181/    356B :                             skip:
    3182/    356B : A9 03                                               LDA #FRAME_HEIGHT-1#256
    3182/    356D : 8D 03 02                                            STA hero_Y
    3183/    3570 : A9 FF                                               LDA #true#256
    3183/    3572 : 95 05                                               STA moved,X
    3184/    3574 : 4C 7E 35                    JMP if{temp2}
    3185/    3577 : EE 01 02            													INC display_Y
    3186/    357A : A9 FF                                               LDA #true#256
    3186/    357C : 95 05                                               STA moved,X
    3191/    357E : B5 05               									LDA moved,X
    3192/    3580 : D0 03                       BNE skip
    3192/    3582 : 4C 88 35                            JMP if{temp}
    3192/    3585 :                             skip:
    3193/    3585 : 20 59 2F                    JSR CheckLavaExit
    3198/    3588 : 4C 93 37                    JMP s{ts}done
    3198/    358B : C9 61                               CMP #'a'
    3198/    358D : F0 03                       BEQ skip
    3198/    358F : 4C 4F 36                            JMP s{ts}c{tc}
    3198/    3592 :                             skip:
    3199/    3592 : AD 21 02            						LDA hero_facing
    3200/    3595 : C9 04               						CMP #DIRECTION_RIGHT
    3201/    3597 : F0 03                       BEQ skip
    3201/    3599 : 4C A5 35                            JMP if{temp}
    3201/    359C :                             skip:
    3202/    359C : A9 03                                               LDA #DIRECTION_LEFT#256
    3202/    359E : 8D 21 02                                            STA hero_facing
    3203/    35A1 : A9 01                                               LDA #1#256
    3203/    35A3 : 95 01                                               STA redraw,X
    3205/    35A5 : AD 22 02            						LDA hero_target_direction
    3206/    35A8 : C9 03               						CMP #DIRECTION_LEFT
    3207/    35AA : D0 03                       BNE skip
    3207/    35AC : 4C BB 35                            JMP if{temp}
    3207/    35AF :                             skip:
    3208/    35AF : A9 03                                               LDA #DIRECTION_LEFT#256
    3208/    35B1 : 8D 22 02                                            STA hero_target_direction
    3209/    35B4 : A9 01                                               LDA #1#256
    3209/    35B6 : 95 01                                               STA redraw,X
    3210/    35B8 : 4C 4C 36                    JMP if{temp2}
    3211/    35BB : AD 00 02            							LDA display_X
    3212/    35BE : 18                  							CLC
    3213/    35BF : 6D 02 02            							ADC hero_X
    3214/    35C2 : C9 01               							CMP #1
    3215/    35C4 : B0 03                       BCS skip
    3215/    35C6 : 4C 4C 36                            JMP if{temp}
    3215/    35C9 :                             skip:
    3216/    35C9 : 3A                  								DEC
    3217/    35CA : 95 02               								STA mX,X
    3218/    35CC : AD 01 02            								LDA display_Y
    3219/    35CF : 18                  								CLC
    3220/    35D0 : 6D 03 02            								ADC hero_Y
    3221/    35D3 : 95 03               								STA mY,X
    3222/    35D5 : A9 7E                                               LDA #map_data#256
    3222/    35D7 : 95 FC                                               STA call_offset,X
    3222/    35D9 : A9 03                                               LDA #map_data>>8
    3222/    35DB : 95 FD                                               STA call_offset+1,X
    3222/    35DD : B5 02                                       LDA mX,X
    3222/    35DF : 95 FE                                       STA call_offset,X
    3222/    35E1 : B5 03                                       LDA mY,X
    3222/    35E3 : 95 FF                                       STA call_offset,X
    3222/    35E5 : 20 A1 16                    JSR MapXY
    3223/    35E8 : A5 12               								LDA ret_val
    3224/    35EA : C9 04               								CMP #MAP_ROCK
    3225/    35EC : D0 03                       BNE skip
    3225/    35EE : 4C 4C 36                            JMP if{temp}
    3225/    35F1 :                             skip:
    3226/    35F1 : B5 02                                       LDA mX,X
    3226/    35F3 : 95 FE                                       STA call_offset,X
    3226/    35F5 : B5 03                                       LDA mY,X
    3226/    35F7 : 95 FF                                       STA call_offset,X
    3226/    35F9 : 20 C1 17                    JSR CheckForMonster
    3227/    35FC : A5 12               									LDA ret_val
    3228/    35FE : 49 FF               									EOR #$FF
    3229/    3600 : 95 04               									STA or_buff,X
    3230/    3602 : A0 09               									LDY #SKILL_GHOST
    3231/    3604 : B9 4E 02            									LDA skill_list,Y
    3232/    3607 : 15 04               									ORA or_buff,X
    3233/    3609 : D0 03                       BNE skip
    3233/    360B : 4C 42 36                            JMP if{temp}
    3233/    360E :                             skip:
    3234/    360E : AD 02 02            										LDA hero_X
    3235/    3611 : C9 02               										CMP #2
    3236/    3613 : B0 03                       BCS skip
    3236/    3615 : 4C 22 36                            JMP if{temp}
    3236/    3618 :                             skip:
    3237/    3618 : CE 02 02            											DEC hero_X
    3238/    361B : A9 FF                                               LDA #true#256
    3238/    361D : 95 05                                               STA moved,X
    3239/    361F : 4C 42 36                    JMP if{temp2}
    3241/    3622 : C9 01               											CMP #1
    3242/    3624 : F0 03                       BEQ skip
    3242/    3626 : 4C 42 36                            JMP if{temp}
    3242/    3629 :                             skip:
    3243/    3629 : AD 00 02            												LDA display_X
    3244/    362C : F0 03                       BEQ skip
    3244/    362E : 4C 3B 36                            JMP if{temp}
    3244/    3631 :                             skip:
    3245/    3631 : 9C 02 02                                            STZ hero_X
    3246/    3634 : A9 FF                                               LDA #true#256
    3246/    3636 : 95 05                                               STA moved,X
    3247/    3638 : 4C 42 36                    JMP if{temp2}
    3248/    363B : CE 00 02            													DEC display_X
    3249/    363E : A9 FF                                               LDA #true#256
    3249/    3640 : 95 05                                               STA moved,X
    3254/    3642 : B5 05               									LDA moved,X
    3255/    3644 : D0 03                       BNE skip
    3255/    3646 : 4C 4C 36                            JMP if{temp}
    3255/    3649 :                             skip:
    3256/    3649 : 20 59 2F                    JSR CheckLavaExit
    3261/    364C : 4C 93 37                    JMP s{ts}done
    3261/    364F : C9 64                               CMP #'d'
    3261/    3651 : F0 03                       BEQ skip
    3261/    3653 : 4C 16 37                            JMP s{ts}c{tc}
    3261/    3656 :                             skip:
    3262/    3656 : AD 21 02            						LDA hero_facing
    3263/    3659 : C9 03               						CMP #DIRECTION_LEFT
    3264/    365B : F0 03                       BEQ skip
    3264/    365D : 4C 69 36                            JMP if{temp}
    3264/    3660 :                             skip:
    3265/    3660 : A9 04                                               LDA #DIRECTION_RIGHT#256
    3265/    3662 : 8D 21 02                                            STA hero_facing
    3266/    3665 : A9 01                                               LDA #1#256
    3266/    3667 : 95 01                                               STA redraw,X
    3268/    3669 : AD 22 02            						LDA hero_target_direction
    3269/    366C : C9 04               						CMP #DIRECTION_RIGHT
    3270/    366E : D0 03                       BNE skip
    3270/    3670 : 4C 7F 36                            JMP if{temp}
    3270/    3673 :                             skip:
    3271/    3673 : A9 04                                               LDA #DIRECTION_RIGHT#256
    3271/    3675 : 8D 22 02                                            STA hero_target_direction
    3272/    3678 : A9 01                                               LDA #1#256
    3272/    367A : 95 01                                               STA redraw,X
    3273/    367C : 4C 13 37                    JMP if{temp2}
    3274/    367F : AD 00 02            							LDA display_X
    3275/    3682 : 38                  							SEC
    3276/    3683 : 6D 02 02            							ADC hero_X
    3277/    3686 : C9 28               							CMP #MAP_WIDTH
    3278/    3688 : 90 03                       BCC skip
    3278/    368A : 4C 13 37                            JMP if{temp}
    3278/    368D :                             skip:
    3279/    368D : 95 02               								STA mX,X
    3280/    368F : AD 01 02            								LDA display_Y
    3281/    3692 : 18                  								CLC
    3282/    3693 : 6D 03 02            								ADC hero_Y
    3283/    3696 : 95 03               								STA mY,X
    3284/    3698 : A9 7E                                               LDA #map_data#256
    3284/    369A : 95 FC                                               STA call_offset,X
    3284/    369C : A9 03                                               LDA #map_data>>8
    3284/    369E : 95 FD                                               STA call_offset+1,X
    3284/    36A0 : B5 02                                       LDA mX,X
    3284/    36A2 : 95 FE                                       STA call_offset,X
    3284/    36A4 : B5 03                                       LDA mY,X
    3284/    36A6 : 95 FF                                       STA call_offset,X
    3284/    36A8 : 20 A1 16                    JSR MapXY
    3285/    36AB : A5 12               								LDA ret_val
    3286/    36AD : C9 04               								CMP #MAP_ROCK
    3287/    36AF : D0 03                       BNE skip
    3287/    36B1 : 4C 13 37                            JMP if{temp}
    3287/    36B4 :                             skip:
    3288/    36B4 : B5 02                                       LDA mX,X
    3288/    36B6 : 95 FE                                       STA call_offset,X
    3288/    36B8 : B5 03                                       LDA mY,X
    3288/    36BA : 95 FF                                       STA call_offset,X
    3288/    36BC : 20 C1 17                    JSR CheckForMonster
    3289/    36BF : A5 12               									LDA ret_val
    3290/    36C1 : 49 FF               									EOR #$FF
    3291/    36C3 : 95 04               									STA or_buff,X
    3292/    36C5 : A0 09               									LDY #SKILL_GHOST
    3293/    36C7 : B9 4E 02            									LDA skill_list,Y
    3294/    36CA : 15 04               									ORA or_buff,X
    3295/    36CC : D0 03                       BNE skip
    3295/    36CE : 4C 09 37                            JMP if{temp}
    3295/    36D1 :                             skip:
    3296/    36D1 : AD 02 02            										LDA hero_X
    3297/    36D4 : C9 03               										CMP #3
    3298/    36D6 : 90 03                       BCC skip
    3298/    36D8 : 4C E5 36                            JMP if{temp}
    3298/    36DB :                             skip:
    3299/    36DB : EE 02 02            											INC hero_X
    3300/    36DE : A9 FF                                               LDA #true#256
    3300/    36E0 : 95 05                                               STA moved,X
    3301/    36E2 : 4C 09 37                    JMP if{temp2}
    3303/    36E5 : C9 03               											CMP #FRAME_WIDTH-2
    3304/    36E7 : F0 03                       BEQ skip
    3304/    36E9 : 4C 09 37                            JMP if{temp}
    3304/    36EC :                             skip:
    3305/    36EC : AD 00 02            												LDA display_X
    3306/    36EF : C9 23               												CMP #MAP_WIDTH-FRAME_WIDTH
    3307/    36F1 : F0 03                       BEQ skip
    3307/    36F3 : 4C 02 37                            JMP if{temp}
    3307/    36F6 :                             skip:
    3308/    36F6 : A9 04                                               LDA #FRAME_WIDTH-1#256
    3308/    36F8 : 8D 02 02                                            STA hero_X
    3309/    36FB : A9 FF                                               LDA #true#256
    3309/    36FD : 95 05                                               STA moved,X
    3310/    36FF : 4C 09 37                    JMP if{temp2}
    3311/    3702 : EE 00 02            													INC display_X
    3312/    3705 : A9 FF                                               LDA #true#256
    3312/    3707 : 95 05                                               STA moved,X
    3317/    3709 : B5 05               									LDA moved,X
    3318/    370B : D0 03                       BNE skip
    3318/    370D : 4C 13 37                            JMP if{temp}
    3318/    3710 :                             skip:
    3319/    3710 : 20 59 2F                    JSR CheckLavaExit
    3324/    3713 : 4C 93 37                    JMP s{ts}done
    3324/    3716 : C9 20                               CMP #' '
    3324/    3718 : F0 03                       BEQ skip
    3324/    371A : 4C 93 37                            JMP s{ts}c{tc}
    3324/    371D :                             skip:
    3325/    371D : AD 23 02                                    LDA hero_target_type
    3325/    3720 : 80 03                       BRA s{ts}c{tc}
    3326/    3722 : 4C 93 37                    JMP s{ts}done
    3326/    3725 : C9 04                               CMP #target_crystal
    3326/    3727 : F0 03                       BEQ skip
    3326/    3729 : 4C 4A 37                            JMP s{ts}c{tc}
    3326/    372C :                             skip:
    3327/    372C : AD 0F 02                                    LDA hero_Mine_Speed
    3327/    372F : 8D 29 02                                    STA hero_activity_ticks_max
    3327/    3732 : AD 10 02                                    LDA hero_Mine_Speed+1
    3327/    3735 : 8D 2A 02                                    STA hero_activity_ticks_max+1
    3328/    3738 : 9C 27 02                                            STZ hero_activity_ticks
    3328/    373B : 9C 28 02                                            STZ hero_activity_ticks+1
    3329/    373E : A9 FF                                               LDA #true#256
    3329/    3740 : 8D 26 02                                            STA hero_activity
    3330/    3743 : A9 FF                                               LDA #true#256
    3330/    3745 : 95 01                                               STA redraw,X
    3331/    3747 : 4C 93 37                    JMP s{ts}done
    3331/    374A : C9 01                               CMP #target_rock
    3331/    374C : F0 03                       BEQ skip
    3331/    374E : 4C 6F 37                            JMP s{ts}c{tc}
    3331/    3751 :                             skip:
    3332/    3751 : AD 10 02                                    LDA hero_Drill_Speed
    3332/    3754 : 8D 29 02                                    STA hero_activity_ticks_max
    3332/    3757 : AD 11 02                                    LDA hero_Drill_Speed+1
    3332/    375A : 8D 2A 02                                    STA hero_activity_ticks_max+1
    3333/    375D : 9C 27 02                                            STZ hero_activity_ticks
    3333/    3760 : 9C 28 02                                            STZ hero_activity_ticks+1
    3334/    3763 : A9 FF                                               LDA #true#256
    3334/    3765 : 8D 26 02                                            STA hero_activity
    3335/    3768 : A9 FF                                               LDA #true#256
    3335/    376A : 95 01                                               STA redraw,X
    3336/    376C : 4C 93 37                    JMP s{ts}done
    3336/    376F : C9 03                               CMP #target_monster
    3336/    3771 : F0 03                       BEQ skip
    3336/    3773 : 4C 93 37                            JMP s{ts}c{tc}
    3336/    3776 :                             skip:
    3337/    3776 : A9 1E                                               LDA #MONSTER_HP#256
    3337/    3778 : 8D 29 02                                            STA hero_activity_ticks_max
    3337/    377B : A9 00                                               LDA #MONSTER_HP>>8
    3337/    377D : 8D 2A 02                                            STA hero_activity_ticks_max+1
    3338/    3780 : A9 1E                                               LDA #MONSTER_HP#256
    3338/    3782 : 8D 27 02                                            STA hero_activity_ticks
    3338/    3785 : A9 00                                               LDA #MONSTER_HP>>8
    3338/    3787 : 8D 28 02                                            STA hero_activity_ticks+1
    3339/    378A : A9 FF                                               LDA #true#256
    3339/    378C : 8D 26 02                                            STA hero_activity
    3340/    378F : A9 FF                                               LDA #true#256
    3340/    3791 : 95 01                                               STA redraw,X
    3345/    3793 : B5 01               			LDA redraw,X
    3346/    3795 : 15 05               			ORA moved,X
    3347/    3797 : D0 03                       BNE skip
    3347/    3799 : 4C A5 37                            JMP if{temp}
    3347/    379C :                             skip:
    3348/    379C : 20 EE 19                    JSR UpdateTarget
    3349/    379F : 20 32 21                    JSR DrawFrame
    3350/    37A2 : 20 6B 1D                    JSR DrawLegend
    3353/    37A5 : FA                                  PLX
    3353/    37A6 : 60                          RTS
    3355/    37A7 :                             KeyHandlerMenu:
    3357/    37A7 :                     key:
    3358/    37A7 :                     discount:
    3358/    37A7 :                     bought:
    3359/    37A7 :                     redraw:
    3362/    37A7 : DA                                  PHX
    3362/    37A8 : 8A                                          TXA                             ;2
    3362/    37A9 : 38                                          SEC                             ;2
    3362/    37AA : E9 0A                                       SBC #xcounter   ;2
    3362/    37AC : AA                                          TAX                             ;2
    3362/    37AD : 86 11                                       STX saveX
    3362/    37AF : A2 02                                       LDX #zpcounter
    3362/    37B1 : B5 03                                               LDA ZP_locals-1,X
    3362/    37B3 : 48                                                  PHA
    3362/    37B4 : CA                                                  DEX
    3362/    37B5 : D0 FA                                       BNE ZP_push
    3362/    37B7 : A6 11                                       LDX saveX
    3364/    37B9 : A9 00                                               LDA #false#256
    3364/    37BB : 95 04                                               STA bought,X
    3365/    37BD : A9 00                                               LDA #false#256
    3365/    37BF : 95 05                                               STA redraw,X
    3366/    37C1 : A9 00                                               LDA #false#256
    3366/    37C3 : 95 06                                               STA redraw_skills,X
    3367/    37C5 : A9 00                                               LDA #false#256
    3367/    37C7 : 95 07                                               STA redraw_resources,X
    3370/    37C9 : AD E4 FF                                    LDA KB_INPUT
    3370/    37CC : 95 00                                       STA key,X
    3371/    37CE : 80 03                       BRA s{ts}c{tc}
    3372/    37D0 : 4C 27 38                    JMP s{ts}done
    3372/    37D3 : C9 6D                               CMP #'m'
    3372/    37D5 : F0 03                       BEQ skip
    3372/    37D7 : 4C EB 37                            JMP s{ts}c{tc}
    3372/    37DA :                             skip:
    3373/    37DA : A9 00                                               LDA #OUTPUT_GAME#256
    3373/    37DC : 8D 65 02                                            STA output_mode
    3374/    37DF : 20 32 21                    JSR DrawFrame
    3375/    37E2 : 20 6B 1D                    JSR DrawLegend
    3376/    37E5 : 4C C7 3C            				JMP khm.done
    3377/    37E8 : 4C 27 38                    JMP s{ts}done
    3377/    37EB : C9 63                               CMP #'c'
    3377/    37ED : F0 03                       BEQ skip
    3377/    37EF : 4C 00 38                            JMP s{ts}c{tc}
    3377/    37F2 :                             skip:
    3378/    37F2 : A9 01                                               LDA #OUTPUT_CHARACTER#256
    3378/    37F4 : 8D 65 02                                            STA output_mode
    3379/    37F7 : 20 32 2D                    JSR DrawMenu
    3380/    37FA : 4C C7 3C            				JMP khm.done
    3381/    37FD : 4C 27 38                    JMP s{ts}done
    3381/    3800 : C9 6B                               CMP #'k'
    3381/    3802 : F0 03                       BEQ skip
    3381/    3804 : 4C 15 38                            JMP s{ts}c{tc}
    3381/    3807 :                             skip:
    3382/    3807 : A9 02                                               LDA #OUTPUT_SKILLS#256
    3382/    3809 : 8D 65 02                                            STA output_mode
    3383/    380C : 20 32 2D                    JSR DrawMenu
    3384/    380F : 4C C7 3C            				JMP khm.done
    3385/    3812 : 4C 27 38                    JMP s{ts}done
    3385/    3815 : C9 72                               CMP #'r'
    3385/    3817 : F0 03                       BEQ skip
    3385/    3819 : 4C 27 38                            JMP s{ts}c{tc}
    3385/    381C :                             skip:
    3386/    381C : A9 03                                               LDA #OUTPUT_RESOURCES#256
    3386/    381E : 8D 65 02                                            STA output_mode
    3387/    3821 : 20 32 2D                    JSR DrawMenu
    3388/    3824 : 4C C7 3C            				JMP khm.done
    3391/    3827 : AD 65 02                                    LDA output_mode
    3391/    382A : 80 03                       BRA s{ts}c{tc}
    3392/    382C : 4C C7 3C                    JMP s{ts}done
    3392/    382F : C9 01                               CMP #OUTPUT_CHARACTER
    3392/    3831 : F0 03                       BEQ skip
    3392/    3833 : 4C 20 39                            JMP s{ts}c{tc}
    3392/    3836 :                             skip:
    3393/    3836 : B5 00               				LDA key,X
    3394/    3838 : 80 03                       BRA s{ts}c{tc}
    3395/    383A : 4C 1D 39                    JMP s{ts}done
    3395/    383D : C9 77                               CMP #'w'
    3395/    383F : F0 03                       BEQ skip
    3395/    3841 : 4C 57 38                            JMP s{ts}c{tc}
    3395/    3844 :                             skip:
    3396/    3844 : AD 5E 02            						LDA menu_char_y
    3397/    3847 : C9 01               						CMP #1
    3398/    3849 : B0 03                       BCS skip
    3398/    384B : 4C 54 38                            JMP if{temp}
    3398/    384E :                             skip:
    3399/    384E : CE 5E 02            							DEC menu_char_y
    3400/    3851 : 20 74 27                    JSR DrawMenuInventory
    3402/    3854 : 4C 1D 39                    JMP s{ts}done
    3402/    3857 : C9 73                               CMP #'s'
    3402/    3859 : F0 03                       BEQ skip
    3402/    385B : 4C 71 38                            JMP s{ts}c{tc}
    3402/    385E :                             skip:
    3403/    385E : AD 5E 02            						LDA menu_char_y
    3404/    3861 : C9 05               						CMP #MENU_CHAR_BOX_Y_COUNT-1
    3405/    3863 : 90 03                       BCC skip
    3405/    3865 : 4C 6E 38                            JMP if{temp}
    3405/    3868 :                             skip:
    3406/    3868 : EE 5E 02            							INC menu_char_y
    3407/    386B : 20 74 27                    JSR DrawMenuInventory
    3409/    386E : 4C 1D 39                    JMP s{ts}done
    3409/    3871 : C9 64                               CMP #'d'
    3409/    3873 : F0 03                       BEQ skip
    3409/    3875 : 4C A1 38                            JMP s{ts}c{tc}
    3409/    3878 :                             skip:
    3410/    3878 : AD 5D 02            						LDA menu_char_x
    3411/    387B : C9 04               						CMP #MENU_CHAR_BOX_X_COUNT-1
    3412/    387D : 90 03                       BCC skip
    3412/    387F : 4C 8B 38                            JMP if{temp}
    3412/    3882 :                             skip:
    3413/    3882 : EE 5D 02            							INC menu_char_x
    3414/    3885 : 20 74 27                    JSR DrawMenuInventory
    3415/    3888 : 4C 9E 38                    JMP if{temp2}
    3416/    388B : AD 5E 02            							LDA menu_char_y
    3417/    388E : C9 05               							CMP #MENU_CHAR_BOX_Y_COUNT-1
    3418/    3890 : 90 03                       BCC skip
    3418/    3892 : 4C 9E 38                            JMP if{temp}
    3418/    3895 :                             skip:
    3419/    3895 : 9C 5D 02            								STZ menu_char_x
    3420/    3898 : EE 5E 02            								INC menu_char_y
    3421/    389B : 20 74 27                    JSR DrawMenuInventory
    3424/    389E : 4C 1D 39                    JMP s{ts}done
    3424/    38A1 : C9 61                               CMP #'a'
    3424/    38A3 : F0 03                       BEQ skip
    3424/    38A5 : 4C D3 38                            JMP s{ts}c{tc}
    3424/    38A8 :                             skip:
    3425/    38A8 : AD 5D 02            						LDA menu_char_x
    3426/    38AB : C9 01               						CMP #1
    3427/    38AD : B0 03                       BCS skip
    3427/    38AF : 4C BB 38                            JMP if{temp}
    3427/    38B2 :                             skip:
    3428/    38B2 : CE 5D 02            							DEC menu_char_x
    3429/    38B5 : 20 74 27                    JSR DrawMenuInventory
    3430/    38B8 : 4C D0 38                    JMP if{temp2}
    3431/    38BB : AD 5E 02            							LDA menu_char_y
    3432/    38BE : C9 01               							CMP #1
    3433/    38C0 : B0 03                       BCS skip
    3433/    38C2 : 4C D0 38                            JMP if{temp}
    3433/    38C5 :                             skip:
    3434/    38C5 : A9 04                                               LDA #MENU_CHAR_BOX_X_COUNT-1#256
    3434/    38C7 : 8D 5D 02                                            STA menu_char_x
    3435/    38CA : CE 5E 02            								DEC menu_char_y
    3436/    38CD : 20 74 27                    JSR DrawMenuInventory
    3439/    38D0 : 4C 1D 39                    JMP s{ts}done
    3439/    38D3 : C9 0D                               CMP #KEY_ENTER
    3439/    38D5 : F0 03                       BEQ skip
    3439/    38D7 : 4C 1D 39                            JMP s{ts}c{tc}
    3439/    38DA :                             skip:
    3440/    38DA : AD 5E 02            						LDA menu_char_y
    3441/    38DD : 0A                  						ASL
    3442/    38DE : 0A                  						ASL
    3443/    38DF : 6D 5E 02            						ADC menu_char_y
    3444/    38E2 : 6D 5D 02            						ADC menu_char_x
    3445/    38E5 : A8                  						TAY
    3446/    38E6 : B9 30 02            						LDA hero_inventory,Y
    3447/    38E9 : C9 20               						CMP #item_none
    3448/    38EB : D0 03                       BNE skip
    3448/    38ED : 4C 1D 39                            JMP if{temp}
    3448/    38F0 :                             skip:
    3449/    38F0 : 95 01               							STA temp_item,X
    3450/    38F2 : 94 02               							STY temp_index,X
    3451/    38F4 : 0A                  							ASL
    3452/    38F5 : A8                  							TAY
    3453/    38F6 : B9 98 C5            							LDA item_stats,Y
    3454/    38F9 : 85 04               							STA item_ptr
    3455/    38FB : B9 99 C5            							LDA item_stats+1,Y
    3456/    38FE : 85 05               							STA item_ptr+1
    3457/    3900 : A0 00               							LDY #type
    3458/    3902 : B1 04               							LDA (item_ptr),Y
    3459/    3904 : A8                  							TAY
    3460/    3905 : B9 2B 02            							LDA hero_equipped,Y
    3461/    3908 : 5A                  							PHY
    3462/    3909 : B4 02               							LDY temp_index,X
    3463/    390B : 99 30 02            							STA hero_inventory,Y
    3464/    390E : B5 01               							LDA temp_item,X
    3465/    3910 : 7A                  							PLY
    3466/    3911 : 99 2B 02            							STA hero_equipped,Y
    3467/    3914 : 20 5A 12                    JSR ColorHero
    3468/    3917 : 20 56 13                    JSR CalcStats
    3469/    391A : 20 32 2D                    JSR DrawMenu
    3472/    391D : 4C C7 3C                    JMP s{ts}done
    3472/    3920 : C9 02                               CMP #OUTPUT_SKILLS
    3472/    3922 : F0 03                       BEQ skip
    3472/    3924 : 4C D2 39                            JMP s{ts}c{tc}
    3472/    3927 :                             skip:
    3473/    3927 : B5 00               				LDA key,X
    3474/    3929 : 80 03                       BRA s{ts}c{tc}
    3475/    392B : 4C CF 39                    JMP s{ts}done
    3475/    392E : C9 77                               CMP #'w'
    3475/    3930 : F0 03                       BEQ skip
    3475/    3932 : 4C 46 39                            JMP s{ts}c{tc}
    3475/    3935 :                             skip:
    3476/    3935 : AD 60 02            						LDA menu_skills_y
    3477/    3938 : D0 03                       BNE skip
    3477/    393A : 4C 43 39                            JMP if{temp}
    3477/    393D :                             skip:
    3478/    393D : CE 60 02            							DEC menu_skills_y
    3479/    3940 : 20 08 29                    JSR DrawSkills
    3481/    3943 : 4C CF 39                    JMP s{ts}done
    3481/    3946 : C9 73                               CMP #'s'
    3481/    3948 : F0 03                       BEQ skip
    3481/    394A : 4C 60 39                            JMP s{ts}c{tc}
    3481/    394D :                             skip:
    3482/    394D : AD 60 02            						LDA menu_skills_y
    3483/    3950 : C9 02               						CMP #2
    3484/    3952 : 90 03                       BCC skip
    3484/    3954 : 4C 5D 39                            JMP if{temp}
    3484/    3957 :                             skip:
    3485/    3957 : EE 60 02            							INC menu_skills_y
    3486/    395A : 20 08 29                    JSR DrawSkills
    3488/    395D : 4C CF 39                    JMP s{ts}done
    3488/    3960 : C9 61                               CMP #'a'
    3488/    3962 : F0 03                       BEQ skip
    3488/    3964 : 4C 78 39                            JMP s{ts}c{tc}
    3488/    3967 :                             skip:
    3489/    3967 : AD 5F 02            						LDA menu_skills_x
    3490/    396A : D0 03                       BNE skip
    3490/    396C : 4C 75 39                            JMP if{temp}
    3490/    396F :                             skip:
    3491/    396F : CE 5F 02            							DEC menu_skills_x
    3492/    3972 : 20 08 29                    JSR DrawSkills
    3494/    3975 : 4C CF 39                    JMP s{ts}done
    3494/    3978 : C9 64                               CMP #'d'
    3494/    397A : F0 03                       BEQ skip
    3494/    397C : 4C 92 39                            JMP s{ts}c{tc}
    3494/    397F :                             skip:
    3495/    397F : AD 5F 02            						LDA menu_skills_x
    3496/    3982 : C9 04               						CMP #4
    3497/    3984 : 90 03                       BCC skip
    3497/    3986 : 4C 8F 39                            JMP if{temp}
    3497/    3989 :                             skip:
    3498/    3989 : EE 5F 02            							INC menu_skills_x
    3499/    398C : 20 08 29                    JSR DrawSkills
    3501/    398F : 4C CF 39                    JMP s{ts}done
    3501/    3992 : C9 0D                               CMP #KEY_ENTER
    3501/    3994 : F0 03                       BEQ skip
    3501/    3996 : 4C CF 39                            JMP s{ts}c{tc}
    3501/    3999 :                             skip:
    3502/    3999 : AD 20 02            						LDA hero_Points
    3503/    399C : D0 03                       BNE skip
    3503/    399E : 4C CF 39                            JMP if{temp}
    3503/    39A1 :                             skip:
    3504/    39A1 : AD 60 02            							LDA menu_skills_y
    3505/    39A4 : 0A                  							ASL
    3506/    39A5 : 0A                  							ASL
    3507/    39A6 : 18                  							CLC
    3508/    39A7 : 6D 60 02            							ADC menu_skills_y
    3509/    39AA : 6D 5F 02            							ADC menu_skills_x
    3510/    39AD : A8                  							TAY
    3511/    39AE : B9 4E 02            							LDA skill_list,Y
    3512/    39B1 : F0 03                       BEQ skip
    3512/    39B3 : 4C CF 39                            JMP if{temp}
    3512/    39B6 :                             skip:
    3513/    39B6 : AD 5F 02            								LDA menu_skills_x
    3514/    39B9 : F0 05               								BEQ khm.skills
    3515/    39BB : B9 4D 02            								LDA skill_list-1,Y
    3516/    39BE : F0 0F               								BEQ khm.skills_done
    3518/    39C0 : CE 20 02            									DEC hero_Points
    3519/    39C3 : A9 FF               									LDA #true
    3520/    39C5 : 99 4E 02            									STA skill_list,Y
    3521/    39C8 : 20 56 13                    JSR CalcStats
    3522/    39CB : A9 FF                                               LDA #true#256
    3522/    39CD : 95 05                                               STA redraw,X
    3527/    39CF : 4C C7 3C                    JMP s{ts}done
    3527/    39D2 : C9 03                               CMP #OUTPUT_RESOURCES
    3527/    39D4 : F0 03                       BEQ skip
    3527/    39D6 : 4C C7 3C                            JMP s{ts}c{tc}
    3527/    39D9 :                             skip:
    3528/    39D9 : B5 00               				LDA key,X
    3529/    39DB : 80 03                       BRA s{ts}c{tc}
    3530/    39DD : 4C C7 3C                    JMP s{ts}done
    3530/    39E0 : C9 77                               CMP #'w'
    3530/    39E2 : F0 03                       BEQ skip
    3530/    39E4 : 4C F8 39                            JMP s{ts}c{tc}
    3530/    39E7 :                             skip:
    3531/    39E7 : AD 62 02            						LDA menu_res_y
    3532/    39EA : D0 03                       BNE skip
    3532/    39EC : 4C F5 39                            JMP if{temp}
    3532/    39EF :                             skip:
    3533/    39EF : CE 62 02            							DEC menu_res_y
    3534/    39F2 : 20 FB 2A                    JSR DrawResources
    3536/    39F5 : 4C C7 3C                    JMP s{ts}done
    3536/    39F8 : C9 73                               CMP #'s'
    3536/    39FA : F0 03                       BEQ skip
    3536/    39FC : 4C 12 3A                            JMP s{ts}c{tc}
    3536/    39FF :                             skip:
    3537/    39FF : AD 62 02            						LDA menu_res_y
    3538/    3A02 : C9 04               						CMP #4
    3539/    3A04 : 90 03                       BCC skip
    3539/    3A06 : 4C 0F 3A                            JMP if{temp}
    3539/    3A09 :                             skip:
    3540/    3A09 : EE 62 02            							INC menu_res_y
    3541/    3A0C : 20 FB 2A                    JSR DrawResources
    3543/    3A0F : 4C C7 3C                    JMP s{ts}done
    3543/    3A12 : C9 61                               CMP #'a'
    3543/    3A14 : F0 03                       BEQ skip
    3543/    3A16 : 4C 2A 3A                            JMP s{ts}c{tc}
    3543/    3A19 :                             skip:
    3544/    3A19 : AD 61 02            						LDA menu_res_x
    3545/    3A1C : D0 03                       BNE skip
    3545/    3A1E : 4C 27 3A                            JMP if{temp}
    3545/    3A21 :                             skip:
    3546/    3A21 : CE 61 02            							DEC menu_res_x
    3547/    3A24 : 20 FB 2A                    JSR DrawResources
    3549/    3A27 : 4C C7 3C                    JMP s{ts}done
    3549/    3A2A : C9 64                               CMP #'d'
    3549/    3A2C : F0 03                       BEQ skip
    3549/    3A2E : 4C 44 3A                            JMP s{ts}c{tc}
    3549/    3A31 :                             skip:
    3550/    3A31 : AD 61 02            						LDA menu_res_x
    3551/    3A34 : C9 05               						CMP #5
    3552/    3A36 : 90 03                       BCC skip
    3552/    3A38 : 4C 41 3A                            JMP if{temp}
    3552/    3A3B :                             skip:
    3553/    3A3B : EE 61 02            							INC menu_res_x
    3554/    3A3E : 20 FB 2A                    JSR DrawResources
    3556/    3A41 : 4C C7 3C                    JMP s{ts}done
    3556/    3A44 : C9 0D                               CMP #KEY_ENTER
    3556/    3A46 : F0 03                       BEQ skip
    3556/    3A48 : 4C C7 3C                            JMP s{ts}c{tc}
    3556/    3A4B :                             skip:
    3557/    3A4B : AD 63 02            						LDA menu_res_target
    3558/    3A4E : C9 20               						CMP #item_none
    3559/    3A50 : D0 03                       BNE skip
    3559/    3A52 : 4C B7 3B                            JMP if{temp}
    3559/    3A55 :                             skip:
    3560/    3A55 : 74 03                                               STZ discount,X
    3561/    3A57 : AD 61 02            							LDA menu_res_x
    3562/    3A5A : C9 04               							CMP #4
    3563/    3A5C : 90 03                       BCC skip
    3563/    3A5E : 4C 6D 3A                            JMP if{temp}
    3563/    3A61 :                             skip:
    3564/    3A61 : AD 5A 02            								LDA skill_list+Big_Discount
    3565/    3A64 : D0 03                       BNE skip
    3565/    3A66 : 4C 6D 3A                            JMP if{temp}
    3565/    3A69 :                             skip:
    3566/    3A69 : A9 01                                               LDA #1#256
    3566/    3A6B : 95 03                                               STA discount,X
    3571/    3A6D : AD 63 02            							LDA menu_res_target
    3572/    3A70 : 0A                  							ASL
    3573/    3A71 : A8                  							TAY
    3574/    3A72 : B9 98 C5            							LDA item_stats,Y
    3575/    3A75 : 85 04               							STA item_ptr
    3576/    3A77 : B9 99 C5            							LDA item_stats+1,Y
    3577/    3A7A : 85 05               							STA item_ptr+1
    3579/    3A7C : AD 5C 02            							LDA skill_list+Crystalsmith
    3580/    3A7F : D0 03                       BNE skip
    3580/    3A81 : 4C 05 3B                            JMP if{temp}
    3580/    3A84 :                             skip:
    3581/    3A84 : 74 09               								STZ res_total+1,X
    3582/    3A86 : AD 1D 02            								LDA hero_Red
    3583/    3A89 : 18                  								CLC
    3584/    3A8A : 6D 1E 02            								ADC hero_Blue
    3585/    3A8D : 90 02                       BCC skip
    3585/    3A8F : F6 09                               INC res_total+1,X
    3585/    3A91 :                             skip:
    3586/    3A91 : 18                  								CLC
    3587/    3A92 : 6D 1F 02            								ADC hero_Yellow
    3588/    3A95 : 90 02                       BCC skip
    3588/    3A97 : F6 09                               INC res_total+1,X
    3588/    3A99 :                             skip:
    3589/    3A99 : 95 08               								STA res_total,X
    3592/    3A9B : B5 09               								LDA res_total+1,X
    3593/    3A9D : D0 12               								BNE khm.res_enough
    3595/    3A9F : A0 01               								LDY #cost
    3596/    3AA1 : B1 04               								LDA (item_ptr),Y
    3597/    3AA3 : 38                  								SEC
    3598/    3AA4 : F5 03               								SBC discount,X
    3599/    3AA6 : 95 02               								STA temp_index,X
    3600/    3AA8 : B5 08               								LDA res_total,X
    3601/    3AAA : D5 02               								CMP temp_index,X
    3602/    3AAC : B0 03                       BCS skip
    3602/    3AAE : 4C 02 3B                            JMP if{temp}
    3602/    3AB1 :                             skip:
    3604/    3AB1 : AD 58 02            									LDA skill_list+Free_Lunch
    3605/    3AB4 : F0 0B               									BEQ khm.res_csmith
    3606/    3AB6 : A9 05                                               LDA #5#256
    3606/    3AB8 : 95 FD                                               STA call_offset,X
    3606/    3ABA : 20 0A 13                    JSR rand8
    3607/    3ABD : A5 12               									LDA ret_val
    3608/    3ABF : F0 39               									BEQ khm.res_csmith_done
    3610/    3AC1 : A0 01               										LDY #cost
    3611/    3AC3 : B1 04               										LDA (item_ptr),Y
    3612/    3AC5 : 38                  										SEC
    3613/    3AC6 : F5 03               										SBC discount,X
    3614/    3AC8 : 95 08               										STA res_total,X
    3617/    3ACA : B5 08               											LDA res_total,X
    3618/    3ACC : F0 0C               											BEQ khm.res_loop_blue
    3619/    3ACE : AD 1D 02            											LDA hero_Red
    3620/    3AD1 : F0 07               											BEQ khm.res_loop_blue
    3621/    3AD3 : D6 08               											DEC res_total,X
    3622/    3AD5 : CE 1D 02            											DEC hero_Red
    3623/    3AD8 : 80 F0               											BRA khm.res_loop_red
    3626/    3ADA : B5 08               											LDA res_total,X
    3627/    3ADC : F0 0C               											BEQ khm.res_loop_yellow
    3628/    3ADE : AD 1E 02            											LDA hero_Blue
    3629/    3AE1 : F0 07               											BEQ khm.res_loop_yellow
    3630/    3AE3 : D6 08               											DEC res_total,X
    3631/    3AE5 : CE 1E 02            											DEC hero_Blue
    3632/    3AE8 : 80 F0               											BRA khm.res_loop_blue
    3635/    3AEA : B5 08               											LDA res_total,X
    3636/    3AEC : F0 0C               											BEQ khm.res_csmith_done
    3637/    3AEE : AD 1F 02            											LDA hero_Yellow
    3638/    3AF1 : F0 07               											BEQ khm.res_csmith_done
    3639/    3AF3 : D6 08               											DEC res_total,X
    3640/    3AF5 : CE 1F 02            											DEC hero_Yellow
    3641/    3AF8 : 80 F0               											BRA khm.res_loop_yellow
    3644/    3AFA : A9 FF                                               LDA #true#256
    3644/    3AFC : 95 04                                               STA bought,X
    3645/    3AFE : A9 FF                                               LDA #true#256
    3645/    3B00 : 95 05                                               STA redraw,X
    3647/    3B02 : 4C B7 3B                    JMP if{temp2}
    3648/    3B05 : A0 02               								LDY #cost_type
    3649/    3B07 : B1 04               								LDA (item_ptr),Y
    3651/    3B09 : 48                  								PHA
    3653/    3B0A : A0 01               								LDY #cost
    3654/    3B0C : B1 04               								LDA (item_ptr),Y
    3655/    3B0E : 18                  								CLC						;extra -1 for <= not <
    3656/    3B0F : F5 03               								SBC discount,X
    3657/    3B11 : A8                  								TAY
    3658/    3B12 : 68                  								PLA
    3659/    3B13 : 80 03                       BRA s{ts}c{tc}
    3660/    3B15 : 4C B7 3B                    JMP s{ts}done
    3660/    3B18 : C9 00                               CMP #CRYSTAL_RED_TYPE
    3660/    3B1A : F0 03                       BEQ skip
    3660/    3B1C : 4C 4E 3B                            JMP s{ts}c{tc}
    3660/    3B1F :                             skip:
    3661/    3B1F : 98                  										TYA
    3662/    3B20 : CD 1D 02            										CMP hero_Red
    3663/    3B23 : 90 03                       BCC skip
    3663/    3B25 : 4C 4B 3B                            JMP if{temp}
    3663/    3B28 :                             skip:
    3664/    3B28 : 95 02               											STA temp_index,X
    3665/    3B2A : AD 58 02            											LDA skill_list+Free_Lunch
    3666/    3B2D : F0 0B               											BEQ khm.res_red
    3667/    3B2F : A9 05                                               LDA #5#256
    3667/    3B31 : 95 FD                                               STA call_offset,X
    3667/    3B33 : 20 0A 13                    JSR rand8
    3668/    3B36 : A5 12               											LDA ret_val
    3669/    3B38 : F0 09               											BEQ khm.res_red_done
    3671/    3B3A : AD 1D 02            												LDA hero_Red
    3672/    3B3D : 18                  												CLC					;extra -1 for <= not <
    3673/    3B3E : F5 02               												SBC temp_index,X
    3674/    3B40 : 8D 1D 02            												STA hero_Red
    3676/    3B43 : A9 FF                                               LDA #true#256
    3676/    3B45 : 95 04                                               STA bought,X
    3677/    3B47 : A9 FF                                               LDA #true#256
    3677/    3B49 : 95 05                                               STA redraw,X
    3679/    3B4B : 4C B7 3B                    JMP s{ts}done
    3679/    3B4E : C9 01                               CMP #CRYSTAL_BLUE_TYPE
    3679/    3B50 : F0 03                       BEQ skip
    3679/    3B52 : 4C 84 3B                            JMP s{ts}c{tc}
    3679/    3B55 :                             skip:
    3680/    3B55 : 98                  										TYA
    3681/    3B56 : CD 1E 02            										CMP hero_Blue
    3682/    3B59 : 90 03                       BCC skip
    3682/    3B5B : 4C 81 3B                            JMP if{temp}
    3682/    3B5E :                             skip:
    3683/    3B5E : 95 02               											STA temp_index,X
    3684/    3B60 : AD 58 02            											LDA skill_list+Free_Lunch
    3685/    3B63 : F0 0B               											BEQ khm.res_blue
    3686/    3B65 : A9 05                                               LDA #5#256
    3686/    3B67 : 95 FD                                               STA call_offset,X
    3686/    3B69 : 20 0A 13                    JSR rand8
    3687/    3B6C : A5 12               											LDA ret_val
    3688/    3B6E : F0 09               											BEQ khm.res_blue_done
    3690/    3B70 : AD 1E 02            												LDA hero_Blue
    3691/    3B73 : 18                  												CLC					;extra -1 for <= not <
    3692/    3B74 : F5 02               												SBC temp_index,X
    3693/    3B76 : 8D 1E 02            												STA hero_Blue
    3695/    3B79 : A9 FF                                               LDA #true#256
    3695/    3B7B : 95 04                                               STA bought,X
    3696/    3B7D : A9 FF                                               LDA #true#256
    3696/    3B7F : 95 05                                               STA redraw,X
    3698/    3B81 : 4C B7 3B                    JMP s{ts}done
    3698/    3B84 : C9 02                               CMP #CRYSTAL_YELLOW_TYPE
    3698/    3B86 : F0 03                       BEQ skip
    3698/    3B88 : 4C B7 3B                            JMP s{ts}c{tc}
    3698/    3B8B :                             skip:
    3699/    3B8B : 98                  										TYA
    3700/    3B8C : CD 1F 02            										CMP hero_Yellow
    3701/    3B8F : 90 03                       BCC skip
    3701/    3B91 : 4C B7 3B                            JMP if{temp}
    3701/    3B94 :                             skip:
    3702/    3B94 : 95 02               											STA temp_index,X
    3703/    3B96 : AD 58 02            											LDA skill_list+Free_Lunch
    3704/    3B99 : F0 0B               											BEQ khm.res_yellow
    3705/    3B9B : A9 05                                               LDA #5#256
    3705/    3B9D : 95 FD                                               STA call_offset,X
    3705/    3B9F : 20 0A 13                    JSR rand8
    3706/    3BA2 : A5 12               											LDA ret_val
    3707/    3BA4 : F0 09               											BEQ khm.res_yellow_done
    3709/    3BA6 : AD 1F 02            												LDA hero_Yellow
    3710/    3BA9 : 18                  												CLC					;extra -1 for <= not <
    3711/    3BAA : F5 02               												SBC temp_index,X
    3712/    3BAC : 8D 1F 02            												STA hero_Yellow
    3714/    3BAF : A9 FF                                               LDA #true#256
    3714/    3BB1 : 95 04                                               STA bought,X
    3715/    3BB3 : A9 FF                                               LDA #true#256
    3715/    3BB5 : 95 05                                               STA redraw,X
    3721/    3BB7 : B5 04               						LDA bought,X
    3722/    3BB9 : D0 03                       BNE skip
    3722/    3BBB : 4C C7 3C                            JMP if{temp}
    3722/    3BBE :                             skip:
    3723/    3BBE : AD 63 02                                    LDA menu_res_target
    3723/    3BC1 : 80 03                       BRA s{ts}c{tc}
    3724/    3BC3 : 4C C7 3C                    JMP s{ts}done
    3724/    3BC6 : C9 19                               CMP #Res_HP_Heal_ID
    3724/    3BC8 : F0 03                       BEQ skip
    3724/    3BCA : 4C DC 3B                            JMP s{ts}c{tc}
    3724/    3BCD :                             skip:
    3725/    3BCD : AD 06 02                                    LDA hero_HP_Max
    3725/    3BD0 : 8D 04 02                                    STA hero_HP
    3725/    3BD3 : AD 07 02                                    LDA hero_HP_Max+1
    3725/    3BD6 : 8D 05 02                                    STA hero_HP+1
    3726/    3BD9 : 4C C7 3C                    JMP s{ts}done
    3726/    3BDC : C9 1A                               CMP #Res_HP_Upgrade_ID
    3726/    3BDE : F0 03                       BEQ skip
    3726/    3BE0 : 4C F8 3B                            JMP s{ts}c{tc}
    3726/    3BE3 :                             skip:
    3727/    3BE3 : EE 09 02            									INC hero_HP_Upgrade
    3728/    3BE6 : 20 56 13                    JSR CalcStats
    3729/    3BE9 : AD 06 02                                    LDA hero_HP_Max
    3729/    3BEC : 8D 04 02                                    STA hero_HP
    3729/    3BEF : AD 07 02                                    LDA hero_HP_Max+1
    3729/    3BF2 : 8D 05 02                                    STA hero_HP+1
    3730/    3BF5 : 4C C7 3C                    JMP s{ts}done
    3730/    3BF8 : C9 1B                               CMP #Res_Batt_Heal_ID
    3730/    3BFA : F0 03                       BEQ skip
    3730/    3BFC : 4C 08 3C                            JMP s{ts}c{tc}
    3730/    3BFF :                             skip:
    3731/    3BFF : AD 0B 02                                    LDA hero_Batt_Max
    3731/    3C02 : 8D 0A 02                                    STA hero_Batt
    3732/    3C05 : 4C C7 3C                    JMP s{ts}done
    3732/    3C08 : C9 1C                               CMP #Res_Batt_Upgrade_ID
    3732/    3C0A : F0 03                       BEQ skip
    3732/    3C0C : 4C 1E 3C                            JMP s{ts}c{tc}
    3732/    3C0F :                             skip:
    3733/    3C0F : EE 0C 02            									INC hero_Batt_Upgrade
    3734/    3C12 : 20 56 13                    JSR CalcStats
    3735/    3C15 : AD 0B 02                                    LDA hero_Batt_Max
    3735/    3C18 : 8D 0A 02                                    STA hero_Batt
    3736/    3C1B : 4C C7 3C                    JMP s{ts}done
    3736/    3C1E : C9 1D                               CMP #Res_Exp_Upgrade_ID
    3736/    3C20 : F0 03                       BEQ skip
    3736/    3C22 : 4C 2F 3C                            JMP s{ts}c{tc}
    3736/    3C25 :                             skip:
    3737/    3C25 : A9 0A                                               LDA #10#256
    3737/    3C27 : 95 FF                                               STA call_offset,X
    3737/    3C29 : 20 CD 2F                    JSR AddExp
    3738/    3C2C : 4C C7 3C                    JMP s{ts}done
    3738/    3C2F : C9 1E                               CMP #Res_Dmg_Upgrade_ID
    3738/    3C31 : F0 03                       BEQ skip
    3738/    3C33 : 4C 3F 3C                            JMP s{ts}c{tc}
    3738/    3C36 :                             skip:
    3739/    3C36 : EE 0E 02            									INC hero_Dmg_Upgrade
    3740/    3C39 : 20 56 13                    JSR CalcStats
    3741/    3C3C : 4C C7 3C                    JMP s{ts}done
    3742/    3C3F : A0 00               									LDY #0
    3744/    3C41 : B9 30 02            										LDA hero_inventory,Y
    3745/    3C44 : C9 20               										CMP #item_none
    3746/    3C46 : F0 03                       BEQ skip
    3746/    3C48 : 4C BF 3C                            JMP if{temp}
    3746/    3C4B :                             skip:
    3747/    3C4B : AD 5B 02            											LDA skill_list+Only_the_Best
    3748/    3C4E : D0 03                       BNE skip
    3748/    3C50 : 4C B7 3C                            JMP if{temp}
    3748/    3C53 :                             skip:
    3749/    3C53 : A9 0A                                               LDA #10#256
    3749/    3C55 : 95 FD                                               STA call_offset,X
    3749/    3C57 : 20 0A 13                    JSR rand8
    3750/    3C5A : A5 12               												LDA ret_val
    3751/    3C5C : D0 59               												BNE khm.no_upgrade
    3752/    3C5E : 5A                  												PHY
    3753/    3C5F : AD 63 02            												LDA menu_res_target
    3754/    3C62 : 0A                  												ASL
    3755/    3C63 : A8                  												TAY
    3756/    3C64 : B9 98 C5            												LDA item_stats,Y
    3757/    3C67 : 85 04               												STA item_ptr
    3758/    3C69 : B9 99 C5            												LDA item_stats+1,Y
    3759/    3C6C : 85 05               												STA item_ptr+1
    3760/    3C6E : A0 00               												LDY #type
    3761/    3C70 : B1 04               												LDA (item_ptr),Y
    3762/    3C72 : 80 03                       BRA s{ts}c{tc}
    3763/    3C74 : 4C B0 3C                    JMP s{ts}done
    3763/    3C77 : C9 00                               CMP #head
    3763/    3C79 : F0 03                       BEQ skip
    3763/    3C7B : 4C 83 3C                            JMP s{ts}c{tc}
    3763/    3C7E :                             skip:
    3764/    3C7E : A9 04               														LDA #Lightning
    3765/    3C80 : 4C B0 3C                    JMP s{ts}done
    3765/    3C83 : C9 01                               CMP #body
    3765/    3C85 : F0 03                       BEQ skip
    3765/    3C87 : 4C 8F 3C                            JMP s{ts}c{tc}
    3765/    3C8A :                             skip:
    3766/    3C8A : A9 09               														LDA #Fortress
    3767/    3C8C : 4C B0 3C                    JMP s{ts}done
    3767/    3C8F : C9 02                               CMP #legs
    3767/    3C91 : F0 03                       BEQ skip
    3767/    3C93 : 4C 9B 3C                            JMP s{ts}c{tc}
    3767/    3C96 :                             skip:
    3768/    3C96 : A9 0E               														LDA #Mustang
    3769/    3C98 : 4C B0 3C                    JMP s{ts}done
    3769/    3C9B : C9 03                               CMP #gun
    3769/    3C9D : F0 03                       BEQ skip
    3769/    3C9F : 4C A7 3C                            JMP s{ts}c{tc}
    3769/    3CA2 :                             skip:
    3770/    3CA2 : A9 13               														LDA #Death_Ray
    3771/    3CA4 : 4C B0 3C                    JMP s{ts}done
    3771/    3CA7 : C9 04                               CMP #tool
    3771/    3CA9 : F0 03                       BEQ skip
    3771/    3CAB : 4C B0 3C                            JMP s{ts}c{tc}
    3771/    3CAE :                             skip:
    3772/    3CAE : A9 18               														LDA #Laser_Bit
    3774/    3CB0 : 7A                  												PLY
    3775/    3CB1 : 99 30 02            												STA hero_inventory,Y
    3776/    3CB4 : 4C BD 3C                    JMP if{temp2}
    3778/    3CB7 : AD 63 02            												LDA menu_res_target
    3779/    3CBA : 99 30 02            												STA hero_inventory,Y
    3781/    3CBD : 80 08               											BRA khm.loop_done
    3783/    3CBF : C8                  										INY
    3784/    3CC0 : C0 1E               										CPY #INVENTORY_COUNT
    3785/    3CC2 : F0 03                       BEQ skip
    3785/    3CC4 : 4C 41 3C                            JMP khm.loop
    3785/    3CC7 :                             skip:
    3793/    3CC7 : B5 05               		LDA redraw,X
    3794/    3CC9 : D0 03                       BNE skip
    3794/    3CCB : 4C D1 3C                            JMP if{temp}
    3794/    3CCE :                             skip:
    3795/    3CCE : 20 32 2D                    JSR DrawMenu
    3797/    3CD1 : B5 06               		LDA redraw_skills,X
    3798/    3CD3 : D0 03                       BNE skip
    3798/    3CD5 : 4C DB 3C                            JMP if{temp}
    3798/    3CD8 :                             skip:
    3799/    3CD8 : 20 08 29                    JSR DrawSkills
    3801/    3CDB : B5 07               		LDA redraw_resources,X
    3802/    3CDD : D0 03                       BNE skip
    3802/    3CDF : 4C E5 3C                            JMP if{temp}
    3802/    3CE2 :                             skip:
    3803/    3CE2 : 20 FB 2A                    JSR DrawResources
    3805/    3CE5 : 86 11                                       STX saveX
    3805/    3CE7 : A2 00                                       LDX #0
    3805/    3CE9 : 68                                                  PLA
    3805/    3CEA : 95 04                                               STA ZP_locals,X
    3805/    3CEC : E8                                                  INX
    3805/    3CED : E0 02                                               CPX #zpcounter
    3805/    3CEF : D0 F8                                       BNE ZP_pull
    3805/    3CF1 : A6 11                                       LDX saveX
    3805/    3CF3 : FA                                  PLX
    3805/    3CF4 : 60                          RTS
    3809/    3CF5 :                             InitHero:
    3810/    3CF5 : 9C 1A 02                                            STZ hero_Exp
    3811/    3CF8 : A9 28                                               LDA #40#256
    3811/    3CFA : 8D 1B 02                                            STA hero_Exp_Max
    3812/    3CFD : 9C 09 02                                            STZ hero_HP_Upgrade
    3813/    3D00 : 9C 0C 02                                            STZ hero_Batt_Upgrade
    3814/    3D03 : 9C 0E 02                                            STZ hero_Dmg_Upgrade
    3815/    3D06 : A9 01                                               LDA #1#256
    3815/    3D08 : 8D 1C 02                                            STA hero_Level
    3816/    3D0B : 9C 1D 02                                            STZ hero_Red
    3817/    3D0E : 9C 1E 02                                            STZ hero_Blue
    3818/    3D11 : 9C 1F 02                                            STZ hero_Yellow
    3819/    3D14 : 9C 20 02                                            STZ hero_Points
    3820/    3D17 : A9 00                                               LDA #false#256
    3820/    3D19 : 8D 26 02                                            STA hero_activity
    3821/    3D1C : A9 00                                               LDA #Basic_Head#256
    3821/    3D1E : 8D 2B 02                                            STA hero_equipped+head
    3822/    3D21 : A9 05                                               LDA #Basic_Body#256
    3822/    3D23 : 8D 2C 02                                            STA hero_equipped+body
    3823/    3D26 : A9 0A                                               LDA #Basic_Legs#256
    3823/    3D28 : 8D 2D 02                                            STA hero_equipped+legs
    3824/    3D2B : A9 0F                                               LDA #Basic_Gun#256
    3824/    3D2D : 8D 2E 02                                            STA hero_equipped+gun
    3825/    3D30 : A9 14                                               LDA #Basic_Tool#256
    3825/    3D32 : 8D 2F 02                                            STA hero_equipped+tool
    3827/    3D35 : A9 20               		LDA #item_none
    3828/    3D37 : A0 00               		LDY #0
    3830/    3D39 : 99 30 02            			STA hero_inventory,Y
    3831/    3D3C : C8                  			INY
    3832/    3D3D : C0 1E               			CPY #INVENTORY_COUNT
    3833/    3D3F : D0 F8               			BNE ih.iloop
    3835/    3D41 : A0 0F               		LDY #SKILL_COUNT
    3836/    3D43 : A9 00               		LDA #false
    3838/    3D45 : 99 4E 02            			STA skill_list,Y
    3839/    3D48 : 88                  			DEY
    3840/    3D49 : D0 FA               			BNE ih.sloop
    3850/    3D4B : 60                          RTS
    3852/    3D4C :                             ResetGame:
    3853/    3D4C : 9C 00 02                                            STZ display_X
    3854/    3D4F : 9C 01 02                                            STZ display_Y
    3855/    3D52 : A9 01                                               LDA #HERO_START_X#256
    3855/    3D54 : 8D 02 02                                            STA hero_X
    3856/    3D57 : A9 01                                               LDA #HERO_START_Y#256
    3856/    3D59 : 8D 03 02                                            STA hero_Y
    3857/    3D5C : A9 00                                               LDA #false#256
    3857/    3D5E : 8D 26 02                                            STA hero_activity
    3858/    3D61 : AD 06 02                                    LDA hero_HP_Max
    3858/    3D64 : 8D 04 02                                    STA hero_HP
    3859/    3D67 : AD 0B 02                                    LDA hero_Batt_Max
    3859/    3D6A : 8D 0A 02                                    STA hero_Batt
    3860/    3D6D : A9 04                                               LDA #DIRECTION_RIGHT#256
    3860/    3D6F : 8D 21 02                                            STA hero_facing
    3861/    3D72 : A9 04                                               LDA #DIRECTION_RIGHT#256
    3861/    3D74 : 8D 22 02                                            STA hero_target_direction
    3862/    3D77 : A9 00                                               LDA #OUTPUT_GAME#256
    3862/    3D79 : 8D 65 02                                            STA output_mode
    3864/    3D7C : 20 EE 19                    JSR UpdateTarget
    3865/    3D7F : 60                          RTS
    3869/    3D80 :                             main:
    3872/    3D80 : DA                                  PHX
    3872/    3D81 : CA                                                  DEX
    3874/    3D82 : 20 FC 0C                    JSR Setup
    3875/    3D85 : 20 DA 11                    JSR LoadTiles
    3876/    3D88 : 20 CB 16                    JSR MakeMap
    3877/    3D8B : 20 20 18                    JSR LoadMonsters
    3878/    3D8E : 20 E5 18                    JSR LoadCrystals
    3879/    3D91 : 20 F5 3C                    JSR InitHero
    3880/    3D94 : 20 56 13                    JSR CalcStats
    3881/    3D97 : 20 5A 12                    JSR ColorHero
    3882/    3D9A : 20 4C 3D                    JSR ResetGame
    3883/    3D9D : 20 32 21                    JSR DrawFrame
    3884/    3DA0 : 20 6B 1D                    JSR DrawLegend
    3887/    3DA3 : AD E6 FF            			LDA TIMER_S
    3888/    3DA6 : D5 00               			CMP timer_save,X
    3889/    3DA8 : D0 03                       BNE skip
    3889/    3DAA : 4C BC 3D                            JMP if{temp}
    3889/    3DAD :                             skip:
    3890/    3DAD : 95 00               				STA timer_save,X
    3891/    3DAF : AD 65 02            				LDA output_mode
    3892/    3DB2 : C9 00               				CMP #OUTPUT_GAME
    3893/    3DB4 : F0 03                       BEQ skip
    3893/    3DB6 : 4C BC 3D                            JMP if{temp}
    3893/    3DB9 :                             skip:
    3894/    3DB9 : 20 59 30                    JSR TickHandler
    3897/    3DBC : AD 65 02            			LDA output_mode
    3898/    3DBF : C9 00               			CMP #OUTPUT_GAME
    3899/    3DC1 : F0 03                       BEQ skip
    3899/    3DC3 : 4C CC 3D                            JMP if{temp}
    3899/    3DC6 :                             skip:
    3900/    3DC6 : 20 B8 33                    JSR KeyHandlerGame
    3901/    3DC9 : 4C CF 3D                    JMP if{temp2}
    3902/    3DCC : 20 A7 37                    JSR KeyHandlerMenu
    3904/    3DCF : 80 D2               			BRA m.loop
    3905/    3DD1 : FA                                  PLX
    3905/    3DD2 : 60                          RTS
    3912/    FFFC : 80 3D               	FDB main
